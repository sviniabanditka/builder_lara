function runAllForms(){$.fn.slider&&$(".slider").slider(),$.fn.select2&&$("select.select2").each(function(){var e=$(this),t=e.attr("data-select-width")||"100%";e.select2({allowClear:!0,width:t}),e=null}),$.fn.mask&&$("[data-mask]").each(function(){var e=$(this),t=e.attr("data-mask")||"error...",i=e.attr("data-mask-placeholder")||"X";e.mask(t,{placeholder:i}),e=null}),$.fn.autocomplete&&$("[data-autocomplete]").each(function(){var e=$(this),t=e.data("autocomplete")||["The","Quick","Brown","Fox","Jumps","Over","Three","Lazy","Dogs"];e.autocomplete({source:t}),e=null}),$.fn.datepicker&&$(".datepicker").each(function(){var e=$(this),t=e.attr("data-dateformat")||"dd.mm.yy";e.datepicker({dateFormat:t,prevText:'<i class="fa fa-chevron-left"></i>',nextText:'<i class="fa fa-chevron-right"></i>'}),e=null}),$("button[data-loading-text]").on("click",function(){var e=$(this);e.button("loading"),setTimeout(function(){e.button("reset"),e=null},3e3)})}function runAllCharts(){if($.fn.sparkline){var e,t,i,n,s,o,r,a,l,c,d,u,h,p,f,m,g,v,b,y,w,x,C,E,k,T,_,S,D,M,A,O,F,N,L,R,I,P,B,H,U,z,j,K,W,V,Y,q,G,X,Q,Z,J,ee,te,ie,ne,se,oe,re,ae,le,ce,de,ue,he,pe,fe,me,ge,ve,be;$(".sparkline:not(:has(>canvas))").each(function(){var ye=$(this),we=ye.data("sparkline-type")||"bar";if("bar"==we&&(e=ye.data("sparkline-bar-color")||ye.css("color")||"#0000f0",t=ye.data("sparkline-height")||"26px",i=ye.data("sparkline-barwidth")||5,n=ye.data("sparkline-barspacing")||2,s=ye.data("sparkline-negbar-color")||"#A90329",o=ye.data("sparkline-barstacked-color")||["#A90329","#0099c6","#98AA56","#da532c","#4490B1","#6E9461","#990099","#B4CAD3"],ye.sparkline("html",{barColor:e,type:we,height:t,barWidth:i,barSpacing:n,stackedBarColor:o,negBarColor:s,zeroAxis:"false"}),ye=null),"line"==we&&(t=ye.data("sparkline-height")||"20px",ee=ye.data("sparkline-width")||"90px",r=ye.data("sparkline-line-color")||ye.css("color")||"#0000f0",a=ye.data("sparkline-line-width")||1,l=ye.data("fill-color")||"#c0d0f0",c=ye.data("sparkline-spot-color")||"#f08000",d=ye.data("sparkline-minspot-color")||"#ed1c24",u=ye.data("sparkline-maxspot-color")||"#f08000",h=ye.data("sparkline-highlightspot-color")||"#50f050",p=ye.data("sparkline-highlightline-color")||"f02020",f=ye.data("sparkline-spotradius")||1.5,thisChartMinYRange=ye.data("sparkline-min-y")||"undefined",thisChartMaxYRange=ye.data("sparkline-max-y")||"undefined",thisChartMinXRange=ye.data("sparkline-min-x")||"undefined",thisChartMaxXRange=ye.data("sparkline-max-x")||"undefined",thisMinNormValue=ye.data("min-val")||"undefined",thisMaxNormValue=ye.data("max-val")||"undefined",thisNormColor=ye.data("norm-color")||"#c0c0c0",thisDrawNormalOnTop=ye.data("draw-normal")||!1,ye.sparkline("html",{type:"line",width:ee,height:t,lineWidth:a,lineColor:r,fillColor:l,spotColor:c,minSpotColor:d,maxSpotColor:u,highlightSpotColor:h,highlightLineColor:p,spotRadius:f,chartRangeMin:thisChartMinYRange,chartRangeMax:thisChartMaxYRange,chartRangeMinX:thisChartMinXRange,chartRangeMaxX:thisChartMaxXRange,normalRangeMin:thisMinNormValue,normalRangeMax:thisMaxNormValue,normalRangeColor:thisNormColor,drawNormalOnTop:thisDrawNormalOnTop}),ye=null),"pie"==we&&(m=ye.data("sparkline-piecolor")||["#B4CAD3","#4490B1","#98AA56","#da532c","#6E9461","#0099c6","#990099","#717D8A"],g=ye.data("sparkline-piesize")||90,v=ye.data("border-color")||"#45494C",b=ye.data("sparkline-offset")||0,ye.sparkline("html",{type:"pie",width:g,height:g,tooltipFormat:'<span style="color: {{color}}">&#9679;</span> ({{percent.1}}%)',sliceColors:m,borderWidth:1,offset:b,borderColor:v}),ye=null),"box"==we&&(y=ye.data("sparkline-width")||"auto",w=ye.data("sparkline-height")||"auto",x=ye.data("sparkline-boxraw")||!1,C=ye.data("sparkline-targetval")||"undefined",E=ye.data("sparkline-min")||"undefined",k=ye.data("sparkline-max")||"undefined",T=ye.data("sparkline-showoutlier")||!0,_=ye.data("sparkline-outlier-iqr")||1.5,S=ye.data("sparkline-spotradius")||1.5,D=ye.css("color")||"#000000",M=ye.data("fill-color")||"#c0d0f0",A=ye.data("sparkline-whis-color")||"#000000",O=ye.data("sparkline-outline-color")||"#303030",F=ye.data("sparkline-outlinefill-color")||"#f0f0f0",N=ye.data("sparkline-outlinemedian-color")||"#f00000",L=ye.data("sparkline-outlinetarget-color")||"#40a020",ye.sparkline("html",{type:"box",width:y,height:w,raw:x,target:C,minValue:E,maxValue:k,showOutliers:T,outlierIQR:_,spotRadius:S,boxLineColor:D,boxFillColor:M,whiskerColor:A,outlierLineColor:O,outlierFillColor:F,medianColor:N,targetColor:L}),ye=null),"bullet"==we){var xe=ye.data("sparkline-height")||"auto";R=ye.data("sparkline-width")||2,I=ye.data("sparkline-bullet-color")||"#ed1c24",P=ye.data("sparkline-performance-color")||"#3030f0",B=ye.data("sparkline-bulletrange-color")||["#d3dafe","#a8b6ff","#7f94ff"],ye.sparkline("html",{type:"bullet",height:xe,targetWidth:R,targetColor:I,performanceColor:P,rangeColors:B}),ye=null}"discrete"==we&&(H=ye.data("sparkline-height")||26,U=ye.data("sparkline-width")||50,z=ye.css("color"),j=ye.data("sparkline-line-height")||5,K=ye.data("sparkline-threshold")||"undefined",W=ye.data("sparkline-threshold-color")||"#ed1c24",ye.sparkline("html",{type:"discrete",width:U,height:H,lineColor:z,lineHeight:j,thresholdValue:K,thresholdColor:W}),ye=null),"tristate"==we&&(V=ye.data("sparkline-height")||26,Y=ye.data("sparkline-posbar-color")||"#60f060",q=ye.data("sparkline-negbar-color")||"#f04040",G=ye.data("sparkline-zerobar-color")||"#909090",X=ye.data("sparkline-barwidth")||5,Q=ye.data("sparkline-barspacing")||2,Z=ye.data("sparkline-zeroaxis")||!1,ye.sparkline("html",{type:"tristate",height:V,posBarColor:J,negBarColor:q,zeroBarColor:G,barWidth:X,barSpacing:Q,zeroAxis:Z}),ye=null),"compositebar"==we&&(t=ye.data("sparkline-height")||"20px",ee=ye.data("sparkline-width")||"100%",i=ye.data("sparkline-barwidth")||3,a=ye.data("sparkline-line-width")||1,r=ye.data("data-sparkline-linecolor")||"#ed1c24",J=ye.data("data-sparkline-barcolor")||"#333333",ye.sparkline(ye.data("sparkline-bar-val"),{type:"bar",width:ee,height:t,barColor:J,barWidth:i}),ye.sparkline(ye.data("sparkline-line-val"),{width:ee,height:t,lineColor:r,lineWidth:a,composite:!0,fillColor:!1}),ye=null),"compositeline"==we&&(t=ye.data("sparkline-height")||"20px",ee=ye.data("sparkline-width")||"90px",te=ye.data("sparkline-bar-val"),ie=ye.data("sparkline-bar-val-spots-top")||null,ne=ye.data("sparkline-bar-val-spots-bottom")||null,se=ye.data("sparkline-line-width-top")||1,oe=ye.data("sparkline-line-width-bottom")||1,re=ye.data("sparkline-color-top")||"#333333",ae=ye.data("sparkline-color-bottom")||"#ed1c24",le=ye.data("sparkline-spotradius-top")||1.5,ce=ye.data("sparkline-spotradius-bottom")||le,c=ye.data("sparkline-spot-color")||"#f08000",de=ye.data("sparkline-minspot-color-top")||"#ed1c24",ue=ye.data("sparkline-maxspot-color-top")||"#f08000",he=ye.data("sparkline-minspot-color-bottom")||de,pe=ye.data("sparkline-maxspot-color-bottom")||ue,fe=ye.data("sparkline-highlightspot-color-top")||"#50f050",me=ye.data("sparkline-highlightline-color-top")||"#f02020",ge=ye.data("sparkline-highlightspot-color-bottom")||fe,thisHighlightLineColor2=ye.data("sparkline-highlightline-color-bottom")||me,ve=ye.data("sparkline-fillcolor-top")||"transparent",be=ye.data("sparkline-fillcolor-bottom")||"transparent",ye.sparkline(te,{type:"line",spotRadius:le,spotColor:c,minSpotColor:de,maxSpotColor:ue,highlightSpotColor:fe,highlightLineColor:me,valueSpots:ie,lineWidth:se,width:ee,height:t,lineColor:re,fillColor:ve}),ye.sparkline(ye.data("sparkline-line-val"),{type:"line",spotRadius:ce,spotColor:c,minSpotColor:he,maxSpotColor:pe,highlightSpotColor:ge,highlightLineColor:thisHighlightLineColor2,valueSpots:ne,lineWidth:oe,width:ee,height:t,lineColor:ae,composite:!0,fillColor:be}),ye=null)})}$.fn.easyPieChart&&$(".easy-pie-chart").each(function(){var e=$(this),t=e.css("color")||e.data("pie-color"),i=e.data("pie-track-color")||"rgba(0,0,0,0.04)",n=parseInt(e.data("pie-size"))||25;e.easyPieChart({barColor:t,trackColor:i,scaleColor:!1,lineCap:"butt",lineWidth:parseInt(n/8.5),animate:1500,rotate:-90,size:n,onStep:function(e,t,i){$(this.el).find(".percent").text(Math.round(i))}}),e=null})}function setup_widgets_desktop(){$.fn.jarvisWidgets&&enableJarvisWidgets&&$("#widget-grid").jarvisWidgets({grid:"article",widgets:".jarviswidget",localStorage:localStorageJarvisWidgets,deleteSettingsKey:"#deletesettingskey-options",settingsKeyLabel:"Reset settings?",deletePositionKey:"#deletepositionkey-options",positionKeyLabel:"Reset position?",sortable:sortableJarvisWidgets,buttonsHidden:!1,toggleButton:!0,toggleClass:"fa fa-minus | fa fa-plus",toggleSpeed:200,onToggle:function(){},deleteButton:!0,deleteMsg:"Warning: This action cannot be undone!",deleteClass:"fa fa-times",deleteSpeed:200,onDelete:function(){},editButton:!0,editPlaceholder:".jarviswidget-editbox",editClass:"fa fa-cog | fa fa-save",editSpeed:200,onEdit:function(){},colorButton:!0,fullscreenButton:!0,fullscreenClass:"fa fa-expand | fa fa-compress",fullscreenDiff:3,onFullscreen:function(){},customButton:!1,customClass:"folder-10 | next-10",customStart:function(){alert("Hello you, this is a custom button...")},customEnd:function(){alert("bye, till next time...")},buttonOrder:"%refresh% %custom% %edit% %toggle% %fullscreen% %delete%",opacity:1,dragHandle:"> header",placeholderClass:"jarviswidget-placeholder",indicator:!0,indicatorTime:600,ajax:!0,timestampPlaceholder:".jarviswidget-timestamp",timestampFormat:"Last update: %m%/%d%/%y% %h%:%i%:%s%",refreshButton:!0,refreshButtonClass:"fa fa-refresh",labelError:"Sorry but there was a error:",labelUpdated:"Last Update:",labelRefresh:"Refresh",labelDelete:"Delete widget:",afterLoad:function(){},rtl:!1,onChange:function(){},onSave:function(){},ajaxnav:$.navAsAjax})}function setup_widgets_mobile(){enableMobileWidgets&&enableJarvisWidgets&&setup_widgets_desktop()}function loadScript(e,t){if(jsArray[e])t&&(debugState&&root.root.console.log("This script was already loaded %c: "+e,debugStyle_warning),t());else{jsArray[e]=!0;var i=document.getElementsByTagName("body")[0],n=document.createElement("script");n.type="text/javascript",n.src=e,n.onload=t,i.appendChild(n)}}function checkURL(){var e=location.href.split("#").splice(1).join("#");if(!e)try{var t=window.document.URL;t&&t.indexOf("#",0)>0&&t.indexOf("#",0)<t.length+1&&(e=t.substring(t.indexOf("#",0)+1))}catch(e){}if(container=$("#content"),e){$("nav li.active").removeClass("active"),$('nav li:has(a[href="'+e+'"])').addClass("active");var i=$('nav a[href="'+e+'"]').attr("title");document.title=i||document.title,debugState&&root.console.log("Page title: %c "+document.title,debugStyle_green),loadURL(e+location.search,container)}else{var n=$('nav > ul > li:first-child > a[href!="#"]');window.location.hash=n.attr("href"),n=null}}function loadURL(e,t){debugState&&root.root.console.log("Loading URL: %c"+e,debugStyle),$.ajax({type:"GET",url:e,dataType:"html",cache:!0,beforeSend:function(){if($.navAsAjax&&$(".google_maps")[0]&&t[0]==$("#content")[0]){var e=$(".google_maps"),i=0;e.each(function(){i++;var t=document.getElementById(this.id);i==e.length+1||(t&&t.parentNode.removeChild(t),debugState&&root.console.log("Destroying maps.........%c"+this.id,debugStyle_warning))}),debugState&&root.console.log("✔ Google map instances nuked!!!")}if($.navAsAjax&&$(".dataTables_wrapper")[0]&&t[0]==$("#content")[0]){var n=$.fn.dataTable.fnTables(!0);$(n).each(function(){0!=$(this).find(".details-control").length?($(this).find("*").addBack().off().remove(),$(this).dataTable().fnDestroy()):$(this).dataTable().fnDestroy()}),debugState&&root.console.log("✔ Datatable instances nuked!!!")}if($.navAsAjax&&$.intervalArr.length>0&&t[0]==$("#content")[0]&&enableJarvisWidgets){for(;$.intervalArr.length>0;)clearInterval($.intervalArr.pop());debugState&&root.console.log("✔ All JarvisWidget intervals cleared")}if($.navAsAjax&&t[0]==$("#content")[0]&&enableJarvisWidgets&&$("#widget-grid")[0]&&($("#widget-grid").jarvisWidgets("destroy"),debugState&&root.console.log("✔ JarvisWidgets destroyed")),$.navAsAjax&&t[0]==$("#content")[0]){if("function"==typeof pagedestroy)try{pagedestroy(),debugState&&root.console.log("✔ Pagedestroy()")}catch(e){pagedestroy=void 0,debugState&&root.console.log("! Pagedestroy() Catch Error")}$.fn.sparkline&&$("#content .sparkline")[0]&&($("#content .sparkline").sparkline("destroy"),debugState&&root.console.log("✔ Sparkline Charts destroyed!")),$.fn.easyPieChart&&$("#content .easy-pie-chart")[0]&&($("#content .easy-pie-chart").easyPieChart("destroy"),debugState&&root.console.log("✔ EasyPieChart Charts destroyed!")),$.fn.select2&&$("#content select.select2")[0]&&($("#content select.select2").select2("destroy"),debugState&&root.console.log("✔ Select2 destroyed!")),$.fn.mask&&$("#content [data-mask]")[0]&&($("#content [data-mask]").unmask(),debugState&&root.console.log("✔ Input Mask destroyed!")),$.fn.datepicker&&$("#content .datepicker")[0]&&($("#content .datepicker").off(),$("#content .datepicker").remove(),debugState&&root.console.log("✔ Datepicker destroyed!")),$.fn.slider&&$("#content .slider")[0]&&($("#content .slider").off(),$("#content .slider").remove(),debugState&&root.console.log("✔ Bootstrap Slider destroyed!"))}pagefunction=null,t.removeData().html(""),t.html('<h1 class="ajax-loading-animation"><i class="fa fa-cog fa-spin"></i> Loading...</h1>'),t[0]==$("#content")[0]&&($("body").find("> *").filter(":not("+ignore_key_elms+")").empty().remove(),drawBreadCrumb(),$("html").animate({scrollTop:0},"fast"))},success:function(e){t.css({opacity:"0.0"}).html(e).delay(50).animate({opacity:"1.0"},300),e=null,t=null},error:function(i,n,s){t.html('<h4 class="ajax-loading-error"><i class="fa fa-warning txt-color-orangeDark"></i> Error requesting <span class="txt-color-red">'+e+"</span>: "+i.status+' <span style="text-transform: capitalize;">'+s+"</span></h4>")},async:!0})}function drawBreadCrumb(e){var t=$("nav li.active > a"),i=t.length;bread_crumb.empty(),bread_crumb.append($("<li>Home</li>")),t.each(function(){bread_crumb.append($("<li></li>").html($.trim($(this).clone().children(".badge").remove().end().text()))),--i||(document.title=bread_crumb.find("li:last-child").text())}),void 0!=e&&$.each(e,function(e,t){bread_crumb.append($("<li></li>").html(t)),document.title=bread_crumb.find("li:last-child").text()})}function pageSetUp(){"desktop"===thisDevice?($("[rel=tooltip], [data-rel=tooltip]").tooltip(),$("[rel=popover], [data-rel=popover]").popover(),$("[rel=popover-hover], [data-rel=popover-hover]").popover({trigger:"hover"}),setup_widgets_desktop(),runAllCharts(),runAllForms()):($("[rel=popover], [data-rel=popover]").popover(),$("[rel=popover-hover], [data-rel=popover-hover]").popover({trigger:"hover"}),runAllCharts(),setup_widgets_mobile(),runAllForms())}function getParam(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",i=new RegExp(t),n=i.exec(window.location.href);return null==n?"":n[1]}function SmartUnLoading(){$(".divMessageBox").fadeOut(300,function(){$(this).remove()}),$(".LoadingBoxContainer").fadeOut(300,function(){$(this).remove()})}function getInternetExplorerVersion(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1))}return e}function checkVersion(){var e="You're not using Windows Internet Explorer.",t=getInternetExplorerVersion();t>-1&&(e=t>=8?"You're using a recent copy of Windows Internet Explorer.":"You should upgrade your copy of Windows Internet Explorer."),alert(e)}function isIE8orlower(){var e="0",t=getInternetExplorerVersion();return t>-1&&(e=t>=9?0:1),e}function FastClick(e){var t,i=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.lastTouchIdentifier=this.touchStartY=this.touchStartX=0,this.layer=e,!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(i,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(i,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(i,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(i,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(i,arguments)},FastClick.notNeeded(e)||(this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,i,n){var s=Node.prototype.removeEventListener;"click"===t?s.call(e,t,i.hijacked||i,n):s.call(e,t,i,n)},e.addEventListener=function(t,i,n){var s=Node.prototype.addEventListener;"click"===t?s.call(e,t,i.hijacked||(i.hijacked=function(e){e.propagationStopped||i(e)}),n):s.call(e,t,i,n)}),"function"==typeof e.onclick&&(t=e.onclick,e.addEventListener("click",function(e){t(e)},!1),e.onclick=null))}$.root_=$("body"),$.navAsAjax=!1,$.sound_path="sound/",$.sound_on=!0;var root=this,debugState=!1,debugStyle="font-weight: bold; color: #00f;",debugStyle_green="font-weight: bold; font-style:italic; color: #46C246;",debugStyle_red="font-weight: bold; color: #ed1c24;",debugStyle_warning="background-color:yellow",debugStyle_success="background-color:green; font-weight:bold; color:#fff;",debugStyle_error="background-color:#ed1c24; font-weight:bold; color:#fff;",throttle_delay=350,menu_speed=235,menu_accordion=!0,enableJarvisWidgets=!0,localStorageJarvisWidgets=!0,sortableJarvisWidgets=!0,enableMobileWidgets=!1,fastClick=!1,boxList=[],showList=[],nameList=[],idList=[],chatbox_config={width:200,gap:35},ignore_key_elms=["#header, #left-panel, #right-panel, #main, div.page-footer, #shortcut, #divSmallBoxes, #divMiniIcons, #divbigBoxes, #voiceModal, script, .ui-chatbox"],voice_command=!0,voice_command_auto=!1,voice_command_lang="en-US",voice_localStorage=!0;if(voice_command)var commands={"show dashboard":function(){$('nav a[href="ajax/dashboard.html"]').trigger("click")},"show inbox":function(){$('nav a[href="ajax/inbox.html"]').trigger("click")},"show graphs":function(){$('nav a[href="ajax/flot.html"]').trigger("click")},"show flotchart":function(){$('nav a[href="ajax/flot.html"]').trigger("click")},"show morris chart":function(){$('nav a[href="ajax/morris.html"]').trigger("click")},"show inline chart":function(){$('nav a[href="ajax/inline-charts.html"]').trigger("click")},"show dygraphs":function(){$('nav a[href="ajax/dygraphs.html"]').trigger("click")},"show tables":function(){$('nav a[href="ajax/table.html"]').trigger("click")},"show data table":function(){$('nav a[href="ajax/datatables.html"]').trigger("click")},"show jquery grid":function(){$('nav a[href="ajax/jqgrid.html"]').trigger("click")},"show form":function(){$('nav a[href="ajax/form-elements.html"]').trigger("click")},"show form layouts":function(){$('nav a[href="ajax/form-templates.html"]').trigger("click")},"show form validation":function(){$('nav a[href="ajax/validation.html"]').trigger("click")},"show form elements":function(){$('nav a[href="ajax/bootstrap-forms.html"]').trigger("click")},"show form plugins":function(){$('nav a[href="ajax/plugins.html"]').trigger("click")},"show form wizards":function(){$('nav a[href="ajax/wizards.html"]').trigger("click")},"show bootstrap editor":function(){$('nav a[href="ajax/other-editors.html"]').trigger("click")},"show dropzone":function(){$('nav a[href="ajax/dropzone.html"]').trigger("click")},"show image cropping":function(){$('nav a[href="ajax/image-editor.html"]').trigger("click")},"show general elements":function(){$('nav a[href="ajax/general-elements.html"]').trigger("click")},"show buttons":function(){$('nav a[href="ajax/buttons.html"]').trigger("click")},"show fontawesome":function(){$('nav a[href="ajax/fa.html"]').trigger("click")},"show glyph icons":function(){$('nav a[href="ajax/glyph.html"]').trigger("click")},"show flags":function(){$('nav a[href="ajax/flags.html"]').trigger("click")},"show grid":function(){$('nav a[href="ajax/grid.html"]').trigger("click")},"show tree view":function(){$('nav a[href="ajax/treeview.html"]').trigger("click")},"show nestable lists":function(){$('nav a[href="ajax/nestable-list.html"]').trigger("click")},"show jquery U I":function(){$('nav a[href="ajax/jqui.html"]').trigger("click")},"show typography":function(){$('nav a[href="ajax/typography.html"]').trigger("click")},"show calendar":function(){$('nav a[href="ajax/calendar.html"]').trigger("click")},"show widgets":function(){$('nav a[href="ajax/widgets.html"]').trigger("click")},"show gallery":function(){$('nav a[href="ajax/gallery.html"]').trigger("click")},"show maps":function(){$('nav a[href="ajax/gmap-xml.html"]').trigger("click")},"show pricing tables":function(){$('nav a[href="ajax/pricing-table.html"]').trigger("click")},"show invoice":function(){$('nav a[href="ajax/invoice.html"]').trigger("click")},"show search":function(){$('nav a[href="ajax/search.html"]').trigger("click")},"go back":function(){history.back(1)},"scroll up":function(){$("html, body").animate({scrollTop:0},100)},"scroll down":function(){$("html, body").animate({scrollTop:$(document).height()},100)},"hide navigation":function(){$.root_.hasClass("container")&&!$.root_.hasClass("menu-on-top")?$("span.minifyme").trigger("click"):$("#hide-menu > span > a").trigger("click")},"show navigation":function(){$.root_.hasClass("container")&&!$.root_.hasClass("menu-on-top")?$("span.minifyme").trigger("click"):$("#hide-menu > span > a").trigger("click")},mute:function(){$.sound_on=!1,$.smallBox({title:"MUTE",content:"All sounds have been muted!",color:"#a90329",timeout:4e3,icon:"fa fa-volume-off"})},"sound on":function(){$.sound_on=!0,$.speechApp.playConfirmation(),$.smallBox({title:"UNMUTE",content:"All sounds have been turned on!",color:"#40ac2b",sound_file:"voice_alert",timeout:5e3,icon:"fa fa-volume-up"})},stop:function(){smartSpeechRecognition.abort(),$.root_.removeClass("voice-command-active"),$.smallBox({title:"VOICE COMMAND OFF",content:"Your voice commands has been successfully turned off. Click on the <i class='fa fa-microphone fa-lg fa-fw'></i> icon to turn it back on.",color:"#40ac2b",sound_file:"voice_off",timeout:8e3,icon:"fa fa-microphone-slash"}),$("#speech-btn .popover").is(":visible")&&$("#speech-btn .popover").fadeOut(250)},help:function(){$("#voiceModal").removeData("modal").modal({remote:"ajax/modal-content/modal-voicecommand.html",show:!0}),$("#speech-btn .popover").is(":visible")&&$("#speech-btn .popover").fadeOut(250)},"got it":function(){$("#voiceModal").modal("hide")},logout:function(){$.speechApp.stop(),window.location=$("#logout > span > a").attr("href")}};$.intervalArr=[];var calc_navbar_height=function(){var e=null;return $("#header").length&&(e=$("#header").height()),null===e&&(e=$('<div id="header"></div>').height()),null===e?49:e},navbar_height=calc_navbar_height,shortcut_dropdown=$("#shortcut"),bread_crumb=$("#ribbon ol.breadcrumb"),topmenu=!1,thisDevice=null,ismobile=/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()),jsArray={},initApp=function(e){return e.addDeviceType=function(){return ismobile?($.root_.addClass("mobile-detected"),thisDevice="mobile",fastClick?($.root_.addClass("needsclick"),FastClick.attach(document.body),!1):void 0):($.root_.addClass("desktop-detected"),thisDevice="desktop",!1)},e.menuPos=function(){($.root_.hasClass("menu-on-top")||"top"==localStorage.getItem("sm-setmenu"))&&(topmenu=!0,$.root_.addClass("menu-on-top"))},e.SmartActions=function(){var e={userLogout:function(e){function t(){window.location=e.attr("href")}$.SmartMessageBox({title:"<i class='fa fa-sign-out txt-color-orangeDark'></i> Logout <span class='txt-color-orangeDark'><strong>"+$("#show-shortcut").text()+"</strong></span> ?",content:e.data("logout-msg")||"You can improve your security further after logging out by closing this opened browser",buttons:"[No][Yes]"},function(e){"Yes"==e&&($.root_.addClass("animated fadeOutUp"),setTimeout(t,1e3))})},resetWidgets:function(e){$.SmartMessageBox({title:"<i class='fa fa-refresh' style='color:green'></i> Clear Local Storage",content:e.data("reset-msg")||"Would you like to RESET all your saved widgets and clear LocalStorage?1",buttons:"[No][Yes]"},function(e){"Yes"==e&&localStorage&&(localStorage.clear(),location.reload())})},launchFullscreen:function(e){$.root_.hasClass("full-screen")?($.root_.removeClass("full-screen"),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()):($.root_.addClass("full-screen"),e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen())},minifyMenu:function(e){$.root_.hasClass("menu-on-top")||($.root_.toggleClass("minified"),$.root_.removeClass("hidden-menu"),$("html").removeClass("hidden-menu-mobile-lock"),e.effect("highlight",{},500))},toggleMenu:function(){$.root_.hasClass("menu-on-top")?$.root_.hasClass("menu-on-top")&&$(window).width()<979&&($("html").toggleClass("hidden-menu-mobile-lock"),$.root_.toggleClass("hidden-menu"),$.root_.removeClass("minified")):($("html").toggleClass("hidden-menu-mobile-lock"),$.root_.toggleClass("hidden-menu"),$.root_.removeClass("minified"))},toggleShortcut:function(){function e(){shortcut_dropdown.animate({height:"hide"},300,"easeOutCirc"),$.root_.removeClass("shortcut-on")}shortcut_dropdown.is(":visible")?e():function(){shortcut_dropdown.animate({height:"show"},200,"easeOutCirc"),$.root_.addClass("shortcut-on")}(),shortcut_dropdown.find("a").click(function(t){t.preventDefault(),window.location=$(this).attr("href"),setTimeout(e,300)}),$(document).mouseup(function(t){shortcut_dropdown.is(t.target)||0!==shortcut_dropdown.has(t.target).length||e()})}};$.root_.on("click",'[data-action="userLogout"]',function(t){var i=$(this);e.userLogout(i),t.preventDefault(),i=null}),$.root_.on("click",'[data-action="resetWidgets"]',function(t){var i=$(this);e.resetWidgets(i),t.preventDefault(),i=null}),$.root_.on("click",'[data-action="launchFullscreen"]',function(t){e.launchFullscreen(document.documentElement),t.preventDefault()}),$.root_.on("click",'[data-action="minifyMenu"]',function(t){var i=$(this);e.minifyMenu(i),t.preventDefault(),i=null}),$.root_.on("click",'[data-action="toggleMenu"]',function(t){e.toggleMenu(),t.preventDefault()}),$.root_.on("click",'[data-action="toggleShortcut"]',function(t){e.toggleShortcut(),t.preventDefault()})},e.leftNav=function(){topmenu||$("nav ul").jarvismenu({accordion:menu_accordion||!0,speed:menu_speed||!0,closedSign:'<em class="fa fa-plus-square-o"></em>',openedSign:'<em class="fa fa-minus-square-o"></em>'})},e.domReadyMisc=function(){$("[rel=tooltip]").length&&$("[rel=tooltip]").tooltip(),$("#search-mobile").click(function(){$.root_.addClass("search-mobile")}),$("#cancel-search-js").click(function(){$.root_.removeClass("search-mobile")}),$("#activity").click(function(e){var t=$(this);t.find(".badge").hasClass("bg-color-red")&&(t.find(".badge").removeClassPrefix("bg-color-"),t.find(".badge").text("0")),t.next(".ajax-dropdown").is(":visible")?(t.next(".ajax-dropdown").fadeOut(150),t.removeClass("active")):(t.next(".ajax-dropdown").fadeIn(150),t.addClass("active"));t.next(".ajax-dropdown").find(".btn-group > .active > input").attr("id");t=null,null,e.preventDefault()}),$('input[name="activity"]').change(function(){var e=$(this);url=e.attr("id"),container=$(".ajax-notifications"),loadURL(url,container),e=null}),$(document).mouseup(function(e){$(".ajax-dropdown").is(e.target)||0!==$(".ajax-dropdown").has(e.target).length||($(".ajax-dropdown").fadeOut(150),$(".ajax-dropdown").prev().removeClass("active"))}),$("button[data-btn-loading]").on("click",function(){var e=$(this);e.button("loading"),setTimeout(function(){e.button("reset")},3e3)}),$this=$("#activity > .badge"),parseInt($this.text())>0&&($this.addClass("bg-color-red bounceIn animated"),$this=null)},e.mobileCheckActivation=function(){$(window).width()<979?($.root_.addClass("mobile-view-activated"),$.root_.removeClass("minified")):$.root_.hasClass("mobile-view-activated")&&$.root_.removeClass("mobile-view-activated"),debugState&&console.log("mobileCheckActivation")},e}({});initApp.addDeviceType(),initApp.menuPos(),jQuery(document).ready(function(){initApp.SmartActions(),initApp.leftNav(),initApp.domReadyMisc()}),function(e,t,i){function n(){s=t[a](function(){o.each(function(){var t,i,n=e(this),s=e.data(this,c);try{t=n.width()}catch(e){t=n.width}try{i=n.height()}catch(e){i=n.height}(t!==s.w||i!==s.h)&&n.trigger(l,[s.w=t,s.h=i])}),n()},r[d])}var s,o=e([]),r=e.resize=e.extend(e.resize,{}),a="setTimeout",l="resize",c=l+"-special-event",d="delay",u="throttleWindow";r[d]=throttle_delay,r[u]=!0,e.event.special[l]={setup:function(){if(!r[u]&&this[a])return!1;var t=e(this);o=o.add(t);try{e.data(this,c,{w:t.width(),h:t.height()})}catch(i){e.data(this,c,{w:t.width,h:t.height})}1===o.length&&n()},teardown:function(){if(!r[u]&&this[a])return!1;var t=e(this);o=o.not(t),t.removeData(c),o.length||clearTimeout(s)},add:function(t){function n(t,n,o){var r=e(this),a=e.data(this,c);a.w=n!==i?n:r.width(),a.h=o!==i?o:r.height(),s.apply(this,arguments)}if(!r[u]&&this[a])return!1;var s;return e.isFunction(t)?(s=t,n):(s=t.handler,void(t.handler=n))}}}(jQuery,this),$("#main").resize(function(){initApp.mobileCheckActivation()});var ie=function(){for(var e=3,t=document.createElement("div"),i=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",i[0];);return e>4?e:void 0}();if($.fn.extend({jarvismenu:function(e){var t={accordion:"true",speed:200,closedSign:"[+]",openedSign:"[-]"},i=$.extend(t,e),n=$(this);n.find("li").each(function(){0!==$(this).find("ul").size()&&($(this).find("a:first").append("<b class='collapse-sign'>"+i.closedSign+"</b>"),"#"==$(this).find("a:first").attr("href")&&$(this).find("a:first").click(function(){return!1}))}),n.find("li.active").each(function(){$(this).parents("ul").slideDown(i.speed),$(this).parents("ul").parent("li").find("b:first").html(i.openedSign),$(this).parents("ul").parent("li").addClass("open")}),n.find("li a").click(function(){0!==$(this).parent().find("ul").size()&&(i.accordion&&($(this).parent().find("ul").is(":visible")||(parents=$(this).parent().parents("ul"),visible=n.find("ul:visible"),visible.each(function(e){var t=!0;parents.each(function(i){return parents[i]==visible[e]?(t=!1,!1):void 0}),t&&$(this).parent().find("ul")!=visible[e]&&$(visible[e]).slideUp(i.speed,function(){$(this).parent("li").find("b:first").html(i.closedSign),$(this).parent("li").removeClass("open")})}))),$(this).parent().find("ul:first").is(":visible")&&!$(this).parent().find("ul:first").hasClass("active")?$(this).parent().find("ul:first").slideUp(i.speed,function(){$(this).parent("li").removeClass("open"),$(this).parent("li").find("b:first").delay(i.speed).html(i.closedSign)}):$(this).parent().find("ul:first").slideDown(i.speed,function(){$(this).parent("li").addClass("open"),$(this).parent("li").find("b:first").delay(i.speed).html(i.openedSign)}))})}}),jQuery.fn.doesExist=function(){return jQuery(this).length>0},$.navAsAjax||$(".google_maps")){var gMapsLoaded=!1;window.gMapsCallback=function(){gMapsLoaded=!0,$(window).trigger("gMapsLoaded")},window.loadGoogleMaps=function(){if(gMapsLoaded)return window.gMapsCallback();var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","http://maps.google.com/maps/api/js?sensor=false&callback=gMapsCallback"),
(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(e)}}if($.navAsAjax&&($("nav").length&&checkURL(),$(document).on("click",'nav a[href!="#"]',function(e){e.preventDefault();var t=$(e.currentTarget);t.parent().hasClass("active")||t.attr("target")||($.root_.hasClass("mobile-view-activated")?($.root_.removeClass("hidden-menu"),$("html").removeClass("hidden-menu-mobile-lock"),window.setTimeout(function(){window.location.search?window.location.href=window.location.href.replace(window.location.search,"").replace(window.location.hash,"")+"#"+t.attr("href"):window.location.hash=t.attr("href")},150)):window.location.search?window.location.href=window.location.href.replace(window.location.search,"").replace(window.location.hash,"")+"#"+t.attr("href"):window.location.hash=t.attr("href"))}),$(document).on("click",'nav a[target="_blank"]',function(e){e.preventDefault();var t=$(e.currentTarget);window.open(t.attr("href"))}),$(document).on("click",'nav a[target="_top"]',function(e){e.preventDefault();var t=$(e.currentTarget);window.location=t.attr("href")}),$(document).on("click",'nav a[href="#"]',function(e){e.preventDefault()}),$(window).on("hashchange",function(){checkURL()})),$("body").on("click",function(e){$('[rel="popover"], [data-rel="popover"]').each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".popover").has(e.target).length||$(this).popover("hide")})}),$("body").on("hidden.bs.modal",".modal",function(){$(this).removeData("bs.modal")}),function(e){function t(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var i=e.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}}if(e.support.touch="ontouchend"in document,e.support.touch){var i,n=e.ui.mouse.prototype,s=n._mouseInit;n._touchStart=function(e){var n=this;!i&&n._mouseCapture(e.originalEvent.changedTouches[0])&&(i=!0,n._touchMoved=!1,t(e,"mouseover"),t(e,"mousemove"),t(e,"mousedown"))},n._touchMove=function(e){i&&(this._touchMoved=!0,t(e,"mousemove"))},n._touchEnd=function(e){i&&(t(e,"mouseup"),t(e,"mouseout"),this._touchMoved||t(e,"click"),i=!1)},n._mouseInit=function(){var t=this;t.element.bind("touchstart",e.proxy(t,"_touchStart")).bind("touchmove",e.proxy(t,"_touchMove")).bind("touchend",e.proxy(t,"_touchEnd")),s.call(t)}}}(jQuery),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}e.fn.emulateTransitionEnd=function(t){var i=!1,n=this;e(this).one("bsTransitionEnd",function(){i=!0});var s=function(){i||e(n).trigger(e.support.transition.end)};return setTimeout(s,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var i=e(this),s=i.data("bs.alert");s||i.data("bs.alert",s=new n(this)),"string"==typeof t&&s[t].call(i)})}var i='[data-dismiss="alert"]',n=function(t){e(t).on("click",i,this.close)};n.VERSION="3.2.0",n.prototype.close=function(t){function i(){o.detach().trigger("closed.bs.alert").remove()}var n=e(this),s=n.attr("data-target");s||(s=n.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var o=e(s);t&&t.preventDefault(),o.length||(o=n.hasClass("alert")?n:n.parent()),o.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",i).emulateTransitionEnd(150):i())};var s=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=s,this},e(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),s=n.data("bs.button"),o="object"==typeof t&&t;s||n.data("bs.button",s=new i(this,o)),"toggle"==t?s.toggle():t&&s.setState(t)})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.2.0",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(t){var i="disabled",n=this.$element,s=n.is("input")?"val":"html",o=n.data();t+="Text",null==o.resetText&&n.data("resetText",n[s]()),n[s](null==o[t]?this.options[t]:o[t]),setTimeout(e.proxy(function(){"loadingText"==t?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}e&&this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=t,e.fn.button.Constructor=i,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=e(i.target);n.hasClass("btn")||(n=n.closest(".btn")),t.call(n,"toggle"),i.preventDefault()})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),s=n.data("bs.carousel"),o=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t),r="string"==typeof t?t:o.slide;s||n.data("bs.carousel",s=new i(this,o)),"number"==typeof t?s.to(t):r?s[r]():o.interval&&s.pause().cycle()})}var i=function(t,i){this.$element=e(t).on("keydown.bs.carousel",e.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};i.VERSION="3.2.0",i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},i.prototype.keydown=function(e){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()},i.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},i.prototype.to=function(t){var i=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",e(this.$items[t]))},i.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(t,i){var n=this.$element.find(".item.active"),s=i||n[t](),o=this.interval,r="next"==t?"left":"right",a="next"==t?"first":"last",l=this;if(!s.length){if(!this.options.wrap)return;s=this.$element.find(".item")[a]()}if(s.hasClass("active"))return this.sliding=!1;var c=s[0],d=e.Event("slide.bs.carousel",{relatedTarget:c,direction:r});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=e(this.$indicators.children()[this.getItemIndex(s)]);u&&u.addClass("active")}var h=e.Event("slid.bs.carousel",{relatedTarget:c,direction:r});return e.support.transition&&this.$element.hasClass("slide")?(s.addClass(t),s[0].offsetWidth,n.addClass(r),s.addClass(r),n.one("bsTransitionEnd",function(){s.removeClass([t,r].join(" ")).addClass("active"),n.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(h)},0)}).emulateTransitionEnd(1e3*n.css("transition-duration").slice(0,-1))):(n.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(h)),o&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=i,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(i){var n,s=e(this),o=e(s.attr("data-target")||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var r=e.extend({},o.data(),s.data()),a=s.attr("data-slide-to");a&&(r.interval=!1),t.call(o,r),a&&o.data("bs.carousel").to(a),i.preventDefault()}}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var i=e(this);t.call(i,i.data())})})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),s=n.data("bs.collapse"),o=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t);!s&&o.toggle&&"show"==t&&(t=!t),s||n.data("bs.collapse",s=new i(this,o)),"string"==typeof t&&s[t]()})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};i.VERSION="3.2.0",i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var i=e.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var s=n.data("bs.collapse");if(s&&s.transitioning)return;t.call(n,"hide"),s||n.data("bs.collapse",null)}var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return r.call(this);var a=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(350)[o](this.$element[0][a])}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?void this.$element[i](0).one("bsTransitionEnd",e.proxy(n,this)).emulateTransitionEnd(350):n.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=e.fn.collapse;e.fn.collapse=t,e.fn.collapse.Constructor=i,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var n,s=e(this),o=s.attr("data-target")||i.preventDefault()||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),r=e(o),a=r.data("bs.collapse"),l=a?"toggle":s.data(),c=s.attr("data-parent"),d=c&&e(c);a&&a.transitioning||(d&&d.find('[data-toggle="collapse"][data-parent="'+c+'"]').not(s).addClass("collapsed"),s[r.hasClass("in")?"addClass":"removeClass"]("collapsed")),t.call(r,l)})}(jQuery),function(e){"use strict";function t(t){t&&3===t.which||(e(s).remove(),e(o).each(function(){var n=i(e(this)),s={relatedTarget:this};n.hasClass("open")&&(n.trigger(t=e.Event("hide.bs.dropdown",s)),t.isDefaultPrevented()||n.removeClass("open").trigger("hidden.bs.dropdown",s))}))}function i(t){var i=t.attr("data-target");i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&e(i);return n&&n.length?n:t.parent()}function n(t){return this.each(function(){var i=e(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new r(this)),"string"==typeof t&&n[t].call(i)})}var s=".dropdown-backdrop",o='[data-toggle="dropdown"]',r=function(t){e(t).on("click.bs.dropdown",this.toggle)};r.VERSION="3.2.0",r.prototype.toggle=function(n){var s=e(this);if(!s.is(".disabled, :disabled")){var o=i(s),r=o.hasClass("open");if(t(),!r){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var a={relatedTarget:this};if(o.trigger(n=e.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;s.trigger("focus"),o.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},r.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var n=e(this);if(t.preventDefault(),t.stopPropagation(),!n.is(".disabled, :disabled")){var s=i(n),r=s.hasClass("open");if(!r||r&&27==t.keyCode)return 27==t.which&&s.find(o).trigger("focus"),n.trigger("click");var a=" li:not(.divider):visible a",l=s.find('[role="menu"]'+a+', [role="listbox"]'+a);if(l.length){var c=l.index(l.filter(":focus"));38==t.keyCode&&c>0&&c--,40==t.keyCode&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var a=e.fn.dropdown;e.fn.dropdown=n,e.fn.dropdown.Constructor=r,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=a,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",o,r.prototype.toggle).on("keydown.bs.dropdown.data-api",o+', [role="menu"], [role="listbox"]',r.prototype.keydown)}(jQuery),function(e){"use strict";function t(t,n){return this.each(function(){var s=e(this),o=s.data("bs.modal"),r=e.extend({},i.DEFAULTS,s.data(),"object"==typeof t&&t);o||s.data("bs.modal",o=new i(this,r)),"string"==typeof t?o[t](n):r.show&&o.show(n)})}var i=function(t,i){this.options=i,this.$body=e(document.body),this.$element=e(t),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.2.0",i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},i.prototype.show=function(t){var i=this,n=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var n=e.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),n&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var s=e.Event("shown.bs.modal",{relatedTarget:t});n?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(300):i.$element.trigger("focus").trigger(s)}))},i.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},i.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},i.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(t){var i=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;s?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(150):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){i.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(150):o()}else t&&t()},i.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},i.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",e+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},i.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var n=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=i,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=e(this),s=n.attr("href"),o=e(n.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),r=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(s)&&s},o.data(),n.data());n.is("a")&&i.preventDefault(),o.one("show.bs.modal",function(e){e.isDefaultPrevented()||o.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),t.call(o,r,this)})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),s=n.data("bs.tooltip"),o="object"==typeof t&&t;(s||"destroy"!=t)&&(s||n.data("bs.tooltip",s=new i(this,o)),"string"==typeof t&&s[t]())})}var i=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};i.VERSION="3.2.0",i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(t,i,n){this.enabled=!0,this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport);for(var s=this.options.trigger.split(" "),o=s.length;o--;){var r=s[o];if("click"==r)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=r){var a="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},i.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&e.each(this._options,function(e,n){i[e]!=n&&(t[e]=n)}),t},i.prototype.enter=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show()},i.prototype.leave=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var i=e.contains(document.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!i)return;var n=this,s=this.tip(),o=this.getUID(this.type);this.setContent(),s.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&s.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,l=a.test(r);l&&(r=r.replace(a,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var c=this.getPosition(),d=s[0].offsetWidth,u=s[0].offsetHeight;if(l){var h=r,p=this.$element.parent(),f=this.getPosition(p);r="bottom"==r&&c.top+c.height+u-f.scroll>f.height?"top":"top"==r&&c.top-f.scroll-u<0?"bottom":"right"==r&&c.right+d>f.width?"left":"left"==r&&c.left-d<f.left?"right":r,s.removeClass(h).addClass(r)}var m=this.getCalculatedOffset(r,c,d,u);this.applyPlacement(m,r);var g=function(){n.$element.trigger("shown.bs."+n.type),n.hoverState=null};e.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",g).emulateTransitionEnd(150):g()}},i.prototype.applyPlacement=function(t,i){var n=this.tip(),s=n[0].offsetWidth,o=n[0].offsetHeight,r=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(a)&&(a=0),t.top=t.top+r,t.left=t.left+a,e.offset.setOffset(n[0],e.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=o&&(t.top=t.top+o-c);var d=this.getViewportAdjustedDelta(i,t,l,c);d.left?t.left+=d.left:t.top+=d.top;var u=d.left?2*d.left-s+l:2*d.top-o+c,h=d.left?"left":"top",p=d.left?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(u,n[0][p],h)},i.prototype.replaceArrow=function(e,t,i){this.arrow().css(i,e?50*(1-e/t)+"%":"")},i.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},i.prototype.hide=function(){function t(){"in"!=i.hoverState&&n.detach(),i.$element.trigger("hidden.bs."+i.type)}var i=this,n=this.tip(),s=e.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(s),s.isDefaultPrevented()?void 0:(n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",t).emulateTransitionEnd(150):t(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(t){t=t||this.$element;var i=t[0],n="BODY"==i.tagName;return e.extend({},"function"==typeof i.getBoundingClientRect?i.getBoundingClientRect():null,{scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop(),width:n?e(window).width():t.outerWidth(),height:n?e(window).height():t.outerHeight()},n?{top:0,left:0}:t.offset())},i.prototype.getCalculatedOffset=function(e,t,i,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},i.prototype.getViewportAdjustedDelta=function(e,t,i,n){var s={top:0,left:0};if(!this.$viewport)return s;var o=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(e)){var a=t.top-o-r.scroll,l=t.top+o-r.scroll+n;a<r.top?s.top=r.top-a:l>r.top+r.height&&(s.top=r.top+r.height-l)}else{var c=t.left-o,d=t.left+o+i;c<r.left?s.left=r.left-c:d>r.width&&(s.left=r.left+r.width-d)}return s},i.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},i.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},i.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(t){var i=this;t&&((i=e(t.currentTarget).data("bs."+this.type))||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=i,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),s=n.data("bs.popover"),o="object"==typeof t&&t;(s||"destroy"!=t)&&(s||n.data("bs.popover",s=new i(this,o)),"string"==typeof t&&s[t]())})}var i=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.2.0",i.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").empty()[this.options.html?"string"==typeof i?"html":"append":"text"](i),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},i.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var n=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=i,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),function(e){"use strict";function t(i,n){var s=e.proxy(this.process,this);this.$body=e("body"),this.$scrollElement=e(e(i).is("body")?window:i),this.options=e.extend({},t.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",s),this.refresh(),this.process()}function i(i){return this.each(function(){var n=e(this),s=n.data("bs.scrollspy"),o="object"==typeof i&&i;s||n.data("bs.scrollspy",s=new t(this,o)),"string"==typeof i&&s[i]()})}t.VERSION="3.2.0",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t="offset",i=0;e.isWindow(this.$scrollElement[0])||(t="position",i=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var n=this;this.$body.find(this.selector).map(function(){var n=e(this),s=n.data("target")||n.attr("href"),o=/^#./.test(s)&&e(s);return o&&o.length&&o.is(":visible")&&[[o[t]().top+i,s]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),s=this.offsets,o=this.targets,r=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),t>=n)return r!=(e=o[o.length-1])&&this.activate(e);if(r&&t<=s[0])return r!=(e=o[0])&&this.activate(e);for(e=s.length;e--;)r!=o[e]&&t>=s[e]&&(!s[e+1]||t<=s[e+1])&&this.activate(o[e])},t.prototype.activate=function(t){this.activeTarget=t,e(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var i=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")};var n=e.fn.scrollspy;e.fn.scrollspy=i,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);i.call(t,t.data())})})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),s=n.data("bs.tab");s||n.data("bs.tab",s=new i(this)),"string"==typeof t&&s[t]()})}var i=function(t){this.element=e(t)};i.VERSION="3.2.0",i.prototype.show=function(){var t=this.element,i=t.closest("ul:not(.dropdown-menu)"),n=t.data("target");if(n||(n=t.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var s=i.find(".active:last a")[0],o=e.Event("show.bs.tab",{relatedTarget:s});if(t.trigger(o),!o.isDefaultPrevented()){var r=e(n);this.activate(t.closest("li"),i),this.activate(r,r.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:s})})}}},i.prototype.activate=function(t,i,n){function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),r?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),n&&n()}var o=i.find("> .active"),r=n&&e.support.transition&&o.hasClass("fade");r?o.one("bsTransitionEnd",s).emulateTransitionEnd(150):s(),o.removeClass("in")};var n=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=i,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(i){i.preventDefault(),t.call(e(this),"show")})}(jQuery),function(e){"use strict";function t(t){
return this.each(function(){var n=e(this),s=n.data("bs.affix"),o="object"==typeof t&&t;s||n.data("bs.affix",s=new i(this,o)),"string"==typeof t&&s[t]()})}var i=function(t,n){this.options=e.extend({},i.DEFAULTS,n),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.2.0",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},i.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=e(document).height(),n=this.$target.scrollTop(),s=this.$element.offset(),o=this.options.offset,r=o.top,a=o.bottom;"object"!=typeof o&&(a=r=o),"function"==typeof r&&(r=o.top(this.$element)),"function"==typeof a&&(a=o.bottom(this.$element));var l=!(null!=this.unpin&&n+this.unpin<=s.top)&&(null!=a&&s.top+this.$element.height()>=t-a?"bottom":null!=r&&r>=n&&"top");if(this.affixed!==l){null!=this.unpin&&this.$element.css("top","");var c="affix"+(l?"-"+l:""),d=e.Event(c+".bs.affix");this.$element.trigger(d),d.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(c).trigger(e.Event(c.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:t-this.$element.height()-a}))}}};var n=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=i,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var i=e(this),n=i.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.call(i,n)})})}(jQuery),$.sound_path="/packages/vis/builder/sound/",$(document).ready(function(){$("body").append("<div id='divSmallBoxes'></div>"),$("body").append("<div id='divMiniIcons'></div><div id='divbigBoxes'></div>")});var ExistMsg=0,SmartMSGboxCount=0,PrevTop=0;!function(e){e.SmartMessageBox=function(t,i){var n,s;t=e.extend({title:"",content:"",NormalButton:void 0,ActiveButton:void 0,buttons:void 0,input:void 0,inputValue:void 0,placeholder:"",options:void 0},t);if(1,0==isIE8orlower()){var o=document.createElement("audio");o.setAttribute("src",e.sound_path+"messagebox.mp3"),e.get(),o.addEventListener("load",function(){o.play()},!0),o.pause(),o.play()}SmartMSGboxCount+=1,0==ExistMsg&&(ExistMsg=1,n="<div class='divMessageBox animated fadeIn fast' id='MsgBoxBack'></div>",e("body").append(n),1==isIE8orlower()&&e("#MsgBoxBack").addClass("MessageIE"));var r="",a=0;if(void 0!=t.input)switch(a=1,t.input=t.input.toLowerCase(),t.inputValue=t.inputValue?t.inputValue.replace(/'/g,"&#x27;"):"",t.input){case"text":r="<input class='form-control' type='"+t.input+"' id='txt"+SmartMSGboxCount+"' placeholder='"+t.placeholder+"' value='"+t.inputValue+"'/><br/><br/>";break;case"password":r="<input class='form-control' type='"+t.input+"' id='txt"+SmartMSGboxCount+"' placeholder='"+t.placeholder+"'/><br/><br/>";break;case"select":if(void 0==t.options)alert("For this type of input, the options parameter is required.");else{r="<select class='form-control' id='txt"+SmartMSGboxCount+"'>";for(var l=0;l<=t.options.length-1;l++)"["==t.options[l]?c="":"]"==t.options[l]?(d+=1,c="<option>"+c+"</option>",r+=c):c+=t.options[l];r+="</select>"}break;default:alert("That type of input is not handled yet")}s="<div class='MessageBoxContainer animated fadeIn fast' id='Msg"+SmartMSGboxCount+"'>",s+="<div class='MessageBoxMiddle'>",s+="<span class='MsgTitle'>"+t.title+"</span class='MsgTitle'>",s+="<p class='pText'>"+t.content+"</p>",s+=r,s+="<div class='MessageBoxButtonSection'>",void 0==t.buttons&&(t.buttons="[Accept]"),t.buttons=e.trim(t.buttons),t.buttons=t.buttons.split("");var c="",d=0;void 0==t.NormalButton&&(t.NormalButton="#232323"),void 0==t.ActiveButton&&(t.ActiveButton="#ed145b");for(var l=0;l<=t.buttons.length-1;l++)"["==t.buttons[l]?c="":"]"==t.buttons[l]?(d+=1,c="<button id='bot"+d+"-Msg"+SmartMSGboxCount+"' class='btn btn-default btn-sm botTempo'> "+c+"</button>",s+=c):c+=t.buttons[l];s+="</div>",s+="</div>",s+="</div>",SmartMSGboxCount>1&&(e(".MessageBoxContainer").hide(),e(".MessageBoxContainer").css("z-index",99999)),e(".divMessageBox").append(s),1==a&&e("#txt"+SmartMSGboxCount).focus(),e(".botTempo").hover(function(){e(this).attr("id")},function(){e(this).attr("id")}),e(".botTempo").click(function(){var t=e(this).attr("id"),n=t.substr(t.indexOf("-")+1),s=e.trim(e(this).text());if(1==a){if("function"==typeof i){var o=n.replace("Msg",""),r=e("#txt"+o).val();i&&i(s,r)}}else"function"==typeof i&&i&&i(s);e("#"+n).addClass("animated fadeOut fast"),0==(SmartMSGboxCount-=1)&&e("#MsgBoxBack").removeClass("fadeIn").addClass("fadeOut").delay(300).queue(function(){ExistMsg=0,e(this).remove()})})}}(jQuery);var BigBoxes=0;!function(e){e.bigBox=function(t,i){var n;if(t=e.extend({title:"",content:"",icon:void 0,number:void 0,color:void 0,sound:!0,timeout:void 0,colortime:1500,colors:void 0},t),!0===t.sound&&0==isIE8orlower()){var s=document.createElement("audio");navigator.userAgent.match("Firefox/")?s.setAttribute("src",e.sound_path+"bigbox.ogg"):s.setAttribute("src",e.sound_path+"bigbox.mp3"),e.get(),s.addEventListener("load",function(){s.play()},!0),s.pause(),s.play()}BigBoxes+=1,n="<div id='bigBox"+BigBoxes+"' class='bigBox animated fadeIn fast'><div id='bigBoxColor"+BigBoxes+"'><i class='botClose fa fa-times' id='botClose"+BigBoxes+"'></i>",n+="<span>"+t.title+"</span>",n+="<p>"+t.content+"</p>",n+="<div class='bigboxicon'>",void 0==t.icon&&(t.icon="fa fa-cloud"),n+="<i class='"+t.icon+"'></i>",n+="</div>",n+="<div class='bigboxnumber'>",void 0!=t.number&&(n+=t.number),n+="</div></div>",n+="</div>",e("#divbigBoxes").append(n),void 0==t.color&&(t.color="#004d60"),e("#bigBox"+BigBoxes).css("background-color",t.color),e("#divMiniIcons").append("<div id='miniIcon"+BigBoxes+"' class='cajita animated fadeIn' style='background-color: "+t.color+";'><i class='"+t.icon+"'/></i></div>"),e("#miniIcon"+BigBoxes).bind("click",function(){var t=e(this).attr("id"),i=t.replace("miniIcon","bigBox"),n=t.replace("miniIcon","bigBoxColor");e(".cajita").each(function(t){var i=e(this).attr("id"),n=i.replace("miniIcon","bigBox");e("#"+n).css("z-index",9998)}),e("#"+i).css("z-index",9999),e("#"+n).removeClass("animated fadeIn").delay(1).queue(function(){e(this).show(),e(this).addClass("animated fadeIn"),e(this).clearQueue()})});var o,r=e("#botClose"+BigBoxes),a=e("#bigBox"+BigBoxes),l=e("#miniIcon"+BigBoxes);if(void 0!=t.colors&&t.colors.length>0&&(r.attr("colorcount","0"),o=setInterval(function(){var e=r.attr("colorcount");r.animate({backgroundColor:t.colors[e].color}),a.animate({backgroundColor:t.colors[e].color}),l.animate({backgroundColor:t.colors[e].color}),e<t.colors.length-1?r.attr("colorcount",1*e+1):r.attr("colorcount",0)},t.colortime)),r.bind("click",function(){clearInterval(o),"function"==typeof i&&i&&i();var t=e(this).attr("id"),n=t.replace("botClose","bigBox"),s=t.replace("botClose","miniIcon");e("#"+n).removeClass("fadeIn fast"),e("#"+n).addClass("fadeOut fast").delay(300).queue(function(){e(this).clearQueue(),e(this).remove()}),e("#"+s).removeClass("fadeIn fast"),e("#"+s).addClass("fadeOut fast").delay(300).queue(function(){e(this).clearQueue(),e(this).remove()})}),void 0!=t.timeout){var c=BigBoxes;setTimeout(function(){clearInterval(o),e("#bigBox"+c).removeClass("fadeIn fast"),e("#bigBox"+c).addClass("fadeOut fast").delay(300).queue(function(){e(this).clearQueue(),e(this).remove()}),e("#miniIcon"+c).removeClass("fadeIn fast"),e("#miniIcon"+c).addClass("fadeOut fast").delay(300).queue(function(){e(this).clearQueue(),e(this).remove()})},t.timeout)}}}(jQuery);var SmallBoxes=0,SmallCount=0,SmallBoxesAnchos=0;!function(e){e.smallBox=function(t,i){var n;if(t=e.extend({title:"",content:"",icon:void 0,iconSmall:void 0,sound:!1,color:void 0,timeout:void 0,colortime:1500,colors:void 0},t),!0===t.sound&&0==isIE8orlower()){var s=document.createElement("audio");navigator.userAgent.match("Firefox/")?s.setAttribute("src",e.sound_path+"smallbox.ogg"):s.setAttribute("src",e.sound_path+"smallbox.mp3"),e.get(),s.addEventListener("load",function(){s.play()},!0),s.pause(),s.play()}SmallBoxes+=1,n="";var o="",r="smallbox"+SmallBoxes;if(o=void 0==t.iconSmall?"<div class='miniIcono'></div>":"<div class='miniIcono'><i class='miniPic "+t.iconSmall+"'></i></div>",n=void 0==t.icon?"<div id='smallbox"+SmallBoxes+"' class='SmallBox animated fadeInRight fast'><div class='textoFull'><span>"+t.title+"</span><p>"+t.content+"</p></div>"+o+"</div>":"<div id='smallbox"+SmallBoxes+"' class='SmallBox animated fadeInRight fast'><div class='foto'><i class='"+t.icon+"'></i></div><div class='textoFoto'><span>"+t.title+"</span><p>"+t.content+"</p></div>"+o+"</div>",1==SmallBoxes)e("#divSmallBoxes").append(n),SmallBoxesAnchos=e("#smallbox"+SmallBoxes).height()+40;else{0==e(".SmallBox").size()?(e("#divSmallBoxes").append(n),SmallBoxesAnchos=e("#smallbox"+SmallBoxes).height()+40):(e("#divSmallBoxes").append(n),e("#smallbox"+SmallBoxes).css("top",SmallBoxesAnchos),SmallBoxesAnchos=SmallBoxesAnchos+e("#smallbox"+SmallBoxes).height()+20,e(".SmallBox").each(function(t){0==t?(e(this).css("top",20),heightPrev=e(this).height()+40,SmallBoxesAnchos=e(this).height()+40):(e(this).css("top",heightPrev),heightPrev=heightPrev+e(this).height()+20,SmallBoxesAnchos=SmallBoxesAnchos+e(this).height()+20)}))}var a=e("#smallbox"+SmallBoxes);void 0==t.color?a.css("background-color","#004d60"):a.css("background-color",t.color);var l;void 0!=t.colors&&t.colors.length>0&&(a.attr("colorcount","0"),l=setInterval(function(){var e=a.attr("colorcount");a.animate({backgroundColor:t.colors[e].color}),e<t.colors.length-1?a.attr("colorcount",1*e+1):a.attr("colorcount",0)},t.colortime)),void 0!=t.timeout&&setTimeout(function(){clearInterval(l);var t=e(this).height()+20;e("#"+r).css("top");0!=e("#"+r+":hover").length?e("#"+r).on("mouseleave",function(){SmallBoxesAnchos-=t,e("#"+r).remove(),"function"==typeof i&&i&&i();var n=0;e(".SmallBox").each(function(t){0==t?(e(this).animate({top:20},300),n=e(this).height()+40,SmallBoxesAnchos=e(this).height()+40):(e(this).animate({top:n},350),n=n+e(this).height()+20,SmallBoxesAnchos=SmallBoxesAnchos+e(this).height()+20)})}):(clearInterval(l),SmallBoxesAnchos-=t,"function"==typeof i&&i&&i(),e("#"+r).removeClass().addClass("SmallBox").animate({opacity:0},300,function(){e(this).remove();var t=0;e(".SmallBox").each(function(i){0==i?(e(this).animate({top:20},300),t=e(this).height()+40,SmallBoxesAnchos=e(this).height()+40):(e(this).animate({top:t}),t=t+e(this).height()+20,SmallBoxesAnchos=SmallBoxesAnchos+e(this).height()+20)})}))},t.timeout),e("#smallbox"+SmallBoxes).bind("click",function(){clearInterval(l),"function"==typeof i&&i&&i();var t=e(this).height()+20;e(this).attr("id"),e(this).css("top");SmallBoxesAnchos-=t,e(this).removeClass().addClass("SmallBox").animate({opacity:0},300,function(){e(this).remove();var t=0;e(".SmallBox").each(function(i){0==i?(e(this).animate({top:20},300),t=e(this).height()+40,SmallBoxesAnchos=e(this).height()+40):(e(this).animate({top:t},350),t=t+e(this).height()+20,SmallBoxesAnchos=SmallBoxesAnchos+e(this).height()+20)})})})}}(jQuery),function(e,t,i,n){function s(t,i){this.obj=e(t),this.o=e.extend({},e.fn[o].defaults,i),this.objId=this.obj.attr("id"),this.pwCtrls=".jarviswidget-ctrls",this.widget=this.obj.find(this.o.widgets),this.toggleClass=this.o.toggleClass.split("|"),this.editClass=this.o.editClass.split("|"),this.fullscreenClass=this.o.fullscreenClass.split("|"),this.customClass=this.o.customClass.split("|"),this.storage={enabled:this.o.localStorage},this.initialized=!1,this.init()}var o="jarvisWidgets",r=("ontouchstart"in t||t.DocumentTouch&&i instanceof DocumentTouch?"touchstart":"click")+"."+o;s.prototype={_runLoaderWidget:function(e){var t=this;!0===t.o.indicator&&e.parents(t.o.widgets).find(".jarviswidget-loader:first").stop(!0,!0).fadeIn(100).delay(t.o.indicatorTime).fadeOut(100)},_getPastTimestamp:function(e){var t=this,i=new Date(e),n=i.getMonth()+1,s=i.getDate(),o=i.getFullYear(),r=i.getHours(),a=i.getMinutes(),l=i.getUTCSeconds();return 10>n&&(n="0"+n),10>s&&(s="0"+s),10>r&&(r="0"+r),10>a&&(a="0"+a),10>l&&(l="0"+l),t.o.timestampFormat.replace(/%d%/g,s).replace(/%m%/g,n).replace(/%y%/g,o).replace(/%h%/g,r).replace(/%i%/g,a).replace(/%s%/g,l)},_loadAjaxFile:function(t,i,n){var s=this;t.find(".widget-body").load(i,function(i,n,o){var r=e(this);if("error"==n&&r.html('<h4 class="alert alert-danger">'+s.o.labelError+"<b> "+o.status+" "+o.statusText+"</b></h4>"),"success"==n){var a=t.find(s.o.timestampPlaceholder);a.length&&a.html(s._getPastTimestamp(new Date)),"function"==typeof s.o.afterLoad&&s.o.afterLoad.call(this,t)}s=null}),this._runLoaderWidget(n)},_loadKeys:function(){var e=this;if(!0===e.o.ajaxnav){var t=location.hash.replace(/^#/,"");e.storage.keySettings="Plugin_settings_"+t+"_"+e.objId,e.storage.keyPosition="Plugin_position_"+t+"_"+e.objId}else if(!1===e.initialized){var t=e.o.pageKey||location.pathname;e.storage.keySettings="jarvisWidgets_settings_"+t+"_"+e.objId,e.storage.keyPosition="jarvisWidgets_position_"+t+"_"+e.objId}},_saveSettingsWidget:function(){var t=this,i=t.storage;t._loadKeys();var n=t.obj.find(t.o.widgets).map(function(){var t={};return t.id=e(this).attr("id"),t.style=e(this).attr("data-widget-attstyle"),t.title=e(this).children("header").children("h2").text(),t.hidden="none"==e(this).css("display")?1:0,t.collapsed=e(this).hasClass("jarviswidget-collapsed")?1:0,t}).get(),s=JSON.stringify({widget:n});i.enabled&&i.getKeySettings!=s&&(localStorage.setItem(i.keySettings,s),i.getKeySettings=s),"function"==typeof t.o.onSave&&t.o.onSave.call(this,null,s,i.keySettings)},_savePositionWidget:function(){var t=this,i=t.storage;t._loadKeys();var n=t.obj.find(t.o.grid+".sortable-grid").map(function(){return{section:e(this).children(t.o.widgets).map(function(){return{id:e(this).attr("id")}}).get()}}).get(),s=JSON.stringify({grid:n});i.enabled&&i.getKeyPosition!=s&&(localStorage.setItem(i.keyPosition,s),i.getKeyPosition=s),"function"==typeof t.o.onSave&&t.o.onSave.call(this,s,i.keyPosition)},init:function(){var t=this;if(!t.initialized){if(t._initStorage(t.storage),e("#"+t.objId).length||alert("It looks like your using a class instead of an ID, dont do that!"),!0===t.o.rtl&&e("body").addClass("rtl"),e(t.o.grid).each(function(){e(this).find(t.o.widgets).length&&e(this).addClass("sortable-grid")}),t.storage.enabled&&t.storage.getKeyPosition){var i=JSON.parse(t.storage.getKeyPosition);for(var s in i.grid){var a=t.obj.find(t.o.grid+".sortable-grid").eq(s);for(var l in i.grid[s].section)a.append(e("#"+i.grid[s].section[l].id))}}if(t.storage.enabled&&t.storage.getKeySettings){var c=JSON.parse(t.storage.getKeySettings);for(var s in c.widget){var d=e("#"+c.widget[s].id);c.widget[s].style&&d.removeClassPrefix("jarviswidget-color-").addClass(c.widget[s].style).attr("data-widget-attstyle",""+c.widget[s].style),1==c.widget[s].hidden?d.hide(1):d.show(1).removeAttr("data-widget-hidden"),1==c.widget[s].collapsed&&d.addClass("jarviswidget-collapsed").children("div").hide(1),d.children("header").children("h2").text()!=c.widget[s].title&&d.children("header").children("h2").text(c.widget[s].title)}}if(t.widget.each(function(){var i,s,o,r,a,l,c,d,u=e(this),h=e(this).children("header");if(!h.parent().attr("role")){!0===u.data("widget-hidden")&&u.hide(),!0===u.data("widget-collapsed")&&u.addClass("jarviswidget-collapsed").children("div").hide(),i=!0===t.o.customButton&&u.data("widget-custombutton")===n&&0!==t.customClass[0].length?'<a href="javascript:void(0);" class="button-icon jarviswidget-custom-btn"><i class="'+t.customClass[0]+'"></i></a>':"",s=!0===t.o.deleteButton&&u.data("widget-deletebutton")===n?'<a href="javascript:void(0);" class="button-icon jarviswidget-delete-btn" rel="tooltip" title="Delete" data-placement="bottom"><i class="'+t.o.deleteClass+'"></i></a>':"",o=!0===t.o.editButton&&u.data("widget-editbutton")===n?'<a href="javascript:void(0);" class="button-icon jarviswidget-edit-btn" rel="tooltip" title="Edit" data-placement="bottom"><i class="'+t.editClass[0]+'"></i></a>':"",r=!0===t.o.fullscreenButton&&u.data("widget-fullscreenbutton")===n?'<a href="javascript:void(0);" class="button-icon jarviswidget-fullscreen-btn" rel="tooltip" title="Fullscreen" data-placement="bottom"><i class="'+t.fullscreenClass[0]+'"></i></a>':"",!0===t.o.colorButton&&u.data("widget-colorbutton")===n?(a='<a data-toggle="dropdown" class="dropdown-toggle color-box selector" href="javascript:void(0);"></a><ul class="dropdown-menu arrow-box-up-right color-select pull-right"><li><span class="bg-color-green" data-widget-setstyle="jarviswidget-color-green" rel="tooltip" data-placement="left" data-original-title="Green Grass"></span></li><li><span class="bg-color-greenDark" data-widget-setstyle="jarviswidget-color-greenDark" rel="tooltip" data-placement="top" data-original-title="Dark Green"></span></li><li><span class="bg-color-greenLight" data-widget-setstyle="jarviswidget-color-greenLight" rel="tooltip" data-placement="top" data-original-title="Light Green"></span></li><li><span class="bg-color-purple" data-widget-setstyle="jarviswidget-color-purple" rel="tooltip" data-placement="top" data-original-title="Purple"></span></li><li><span class="bg-color-magenta" data-widget-setstyle="jarviswidget-color-magenta" rel="tooltip" data-placement="top" data-original-title="Magenta"></span></li><li><span class="bg-color-pink" data-widget-setstyle="jarviswidget-color-pink" rel="tooltip" data-placement="right" data-original-title="Pink"></span></li><li><span class="bg-color-pinkDark" data-widget-setstyle="jarviswidget-color-pinkDark" rel="tooltip" data-placement="left" data-original-title="Fade Pink"></span></li><li><span class="bg-color-blueLight" data-widget-setstyle="jarviswidget-color-blueLight" rel="tooltip" data-placement="top" data-original-title="Light Blue"></span></li><li><span class="bg-color-teal" data-widget-setstyle="jarviswidget-color-teal" rel="tooltip" data-placement="top" data-original-title="Teal"></span></li><li><span class="bg-color-blue" data-widget-setstyle="jarviswidget-color-blue" rel="tooltip" data-placement="top" data-original-title="Ocean Blue"></span></li><li><span class="bg-color-blueDark" data-widget-setstyle="jarviswidget-color-blueDark" rel="tooltip" data-placement="top" data-original-title="Night Sky"></span></li><li><span class="bg-color-darken" data-widget-setstyle="jarviswidget-color-darken" rel="tooltip" data-placement="right" data-original-title="Night"></span></li><li><span class="bg-color-yellow" data-widget-setstyle="jarviswidget-color-yellow" rel="tooltip" data-placement="left" data-original-title="Day Light"></span></li><li><span class="bg-color-orange" data-widget-setstyle="jarviswidget-color-orange" rel="tooltip" data-placement="bottom" data-original-title="Orange"></span></li><li><span class="bg-color-orangeDark" data-widget-setstyle="jarviswidget-color-orangeDark" rel="tooltip" data-placement="bottom" data-original-title="Dark Orange"></span></li><li><span class="bg-color-red" data-widget-setstyle="jarviswidget-color-red" rel="tooltip" data-placement="bottom" data-original-title="Red Rose"></span></li><li><span class="bg-color-redLight" data-widget-setstyle="jarviswidget-color-redLight" rel="tooltip" data-placement="bottom" data-original-title="Light Red"></span></li><li><span class="bg-color-white" data-widget-setstyle="jarviswidget-color-white" rel="tooltip" data-placement="right" data-original-title="Purity"></span></li><li><a href="javascript:void(0);" class="jarviswidget-remove-colors" data-widget-setstyle="" rel="tooltip" data-placement="bottom" data-original-title="Reset widget color to default">Remove</a></li></ul>',h.prepend('<div class="widget-toolbar">'+a+"</div>")):a="",!0===t.o.toggleButton&&u.data("widget-togglebutton")===n?(c=!0===u.data("widget-collapsed")||u.hasClass("jarviswidget-collapsed")?t.toggleClass[1]:t.toggleClass[0],l='<a href="javascript:void(0);" class="button-icon jarviswidget-toggle-btn" rel="tooltip" title="Collapse" data-placement="bottom"><i class="'+c+'"></i></a>'):l="",d=!0===t.o.refreshButton&&!1!==u.data("widget-refreshbutton")&&u.data("widget-load")?'<a href="javascript:void(0);" class="button-icon jarviswidget-refresh-btn" data-loading-text="&nbsp;&nbsp;Loading...&nbsp;" rel="tooltip" title="Refresh" data-placement="bottom"><i class="'+t.o.refreshButtonClass+'"></i></a>':"";var p=t.o.buttonOrder.replace(/%refresh%/g,d).replace(/%delete%/g,s).replace(/%custom%/g,i).replace(/%fullscreen%/g,r).replace(/%edit%/g,o).replace(/%toggle%/g,l);(""!==d||""!==s||""!==i||""!==r||""!==o||""!==l)&&h.prepend('<div class="jarviswidget-ctrls">'+p+"</div>"),!0===t.o.sortable&&u.data("widget-sortable")===n&&u.addClass("jarviswidget-sortable"),u.find(t.o.editPlaceholder).length&&u.find(t.o.editPlaceholder).find("input").val(e.trim(h.children("h2").text())),h.append('<span class="jarviswidget-loader"><i class="fa fa-refresh fa-spin"></i></span>'),u.attr("role","widget").children("div").attr("role","content").prev("header").attr("role","heading").children("div").attr("role","menu")}}),!0===t.o.buttonsHidden&&e(t.o.pwCtrls).hide(),e(".jarviswidget header [rel=tooltip]").tooltip(),t.obj.find("[data-widget-load]").each(function(){var i=e(this),n=i.children(),s=i.data("widget-load"),o=1e3*i.data("widget-refresh");i.children(),i.find(".jarviswidget-ajax-placeholder").length||(i.children("widget-body").append('<div class="jarviswidget-ajax-placeholder">'+t.o.loadingLabel+"</div>"),i.data("widget-refresh")>0?(t._loadAjaxFile(i,s,n),e.intervalArr.push(setInterval(function(){t._loadAjaxFile(i,s,n)},o))):t._loadAjaxFile(i,s,n))}),!0===t.o.sortable&&jQuery.ui){var u=t.obj.find(t.o.grid+".sortable-grid").not("[data-widget-excludegrid]");u.sortable({items:u.find(t.o.widgets+".jarviswidget-sortable"),connectWith:u,placeholder:t.o.placeholderClass,cursor:"move",revert:!0,opacity:t.o.opacity,delay:200,cancel:".button-icon, #jarviswidget-fullscreen-mode > div",zIndex:1e4,handle:t.o.dragHandle,forcePlaceholderSize:!0,forceHelperSize:!0,update:function(e,i){t._runLoaderWidget(i.item.children()),t._savePositionWidget(),"function"==typeof t.o.onChange&&t.o.onChange.call(this,i.item)}})}!0===t.o.buttonsHidden&&t.widget.children("header").on("mouseenter."+o,function(){e(this).children(t.o.pwCtrls).stop(!0,!0).fadeTo(100,1)}).on("mouseleave."+o,function(){e(this).children(t.o.pwCtrls).stop(!0,!0).fadeTo(100,0)}),t._clickEvents(),t.storage.enabled&&(e(t.o.deleteSettingsKey).on(r,this,function(e){confirm(t.o.settingsKeyLabel)&&localStorage.removeItem(keySettings),e.preventDefault()}),e(t.o.deletePositionKey).on(r,this,function(e){confirm(t.o.positionKeyLabel)&&localStorage.removeItem(keyPosition),e.preventDefault()})),initialized=!0}},_initStorage:function(e){e.enabled=e.enabled&&!!function(){var e,t=+new Date;try{return localStorage.setItem(t,t),e=localStorage.getItem(t)==t,localStorage.removeItem(t),e}catch(e){}}(),this._loadKeys(),e.enabled&&(e.getKeySettings=localStorage.getItem(e.keySettings),e.getKeyPosition=localStorage.getItem(e.keyPosition))},_clickEvents:function(){function i(){if(e("#jarviswidget-fullscreen-mode").length){var i=e(t).height(),s=e("#jarviswidget-fullscreen-mode").children(n.o.widgets).children("header").height();e("#jarviswidget-fullscreen-mode").children(n.o.widgets).children("div").height(i-s-15)}}var n=this,s=n.widget.children("header");s.on(r,".jarviswidget-toggle-btn",function(t){var i=e(this),s=i.parents(n.o.widgets);n._runLoaderWidget(i),s.hasClass("jarviswidget-collapsed")?i.children().removeClass(n.toggleClass[1]).addClass(n.toggleClass[0]).parents(n.o.widgets).removeClass("jarviswidget-collapsed").children("[role=content]").slideDown(n.o.toggleSpeed,function(){n._saveSettingsWidget()}):i.children().removeClass(n.toggleClass[0]).addClass(n.toggleClass[1]).parents(n.o.widgets).addClass("jarviswidget-collapsed").children("[role=content]").slideUp(n.o.toggleSpeed,function(){n._saveSettingsWidget()}),"function"==typeof n.o.onToggle&&n.o.onToggle.call(this,s),t.preventDefault()}),s.on(r,".jarviswidget-fullscreen-btn",function(t){var s=e(this).parents(n.o.widgets),o=s.children("div");n._runLoaderWidget(e(this)),e("#jarviswidget-fullscreen-mode").length?(e(".nooverflow").removeClass("nooverflow"),s.unwrap("<div>").children("div").removeAttr("style").end().find(".jarviswidget-fullscreen-btn:first").children().removeClass(n.fullscreenClass[1]).addClass(n.fullscreenClass[0]).parents(n.pwCtrls).children("a").show(),o.hasClass("jarviswidget-visible")&&o.hide().removeClass("jarviswidget-visible")):(e("body").addClass("nooverflow"),s.wrap('<div id="jarviswidget-fullscreen-mode"/>').parent().find(".jarviswidget-fullscreen-btn:first").children().removeClass(n.fullscreenClass[0]).addClass(n.fullscreenClass[1]).parents(n.pwCtrls).children("a:not(.jarviswidget-fullscreen-btn)").hide(),o.is(":hidden")&&o.show().addClass("jarviswidget-visible")),i(),"function"==typeof n.o.onFullscreen&&n.o.onFullscreen.call(this,s),t.preventDefault()}),e(t).on("resize."+o,function(){i()}),s.on(r,".jarviswidget-edit-btn",function(t){var i=e(this).parents(n.o.widgets);n._runLoaderWidget(e(this)),i.find(n.o.editPlaceholder).is(":visible")?e(this).children().removeClass(n.editClass[1]).addClass(n.editClass[0]).parents(n.o.widgets).find(n.o.editPlaceholder).slideUp(n.o.editSpeed,function(){n._saveSettingsWidget()}):e(this).children().removeClass(n.editClass[0]).addClass(n.editClass[1]).parents(n.o.widgets).find(n.o.editPlaceholder).slideDown(n.o.editSpeed),"function"==typeof n.o.onEdit&&n.o.onEdit.call(this,i),t.preventDefault()}),e(n.o.editPlaceholder).find("input").keyup(function(){e(this).parents(n.o.widgets).children("header").children("h2").text(e(this).val())}),s.on(r,"[data-widget-setstyle]",function(t){var i=e(this).data("widget-setstyle"),s="";e(this).parents(n.o.editPlaceholder).find("[data-widget-setstyle]").each(function(){s+=e(this).data("widget-setstyle")+" "}),e(this).parents(n.o.widgets).attr("data-widget-attstyle",""+i).removeClassPrefix("jarviswidget-color-").addClass(i),n._runLoaderWidget(e(this)),n._saveSettingsWidget(),t.preventDefault()}),s.on(r,".jarviswidget-custom-btn",function(t){var i=e(this).parents(n.o.widgets);n._runLoaderWidget(e(this)),e(this).children("."+n.customClass[0]).length?(e(this).children().removeClass(n.customClass[0]).addClass(n.customClass[1]),"function"==typeof n.o.customStart&&n.o.customStart.call(this,i)):(e(this).children().removeClass(n.customClass[1]).addClass(n.customClass[0]),"function"==typeof n.o.customEnd&&n.o.customEnd.call(this,i)),n._saveSettingsWidget(),t.preventDefault()}),s.on(r,".jarviswidget-delete-btn",function(t){var i=e(this).parents(n.o.widgets),s=i.attr("id"),o=i.children("header").children("h2").text();e.SmartMessageBox?e.SmartMessageBox({title:"<i class='fa fa-times' style='color:#ed1c24'></i> "+n.o.labelDelete+' "'+o+'"',content:n.o.deleteMsg,buttons:"[No][Yes]"},function(t){"Yes"==t&&(n._runLoaderWidget(e(this)),e("#"+s).fadeOut(n.o.deleteSpeed,function(){e(this).remove(),"function"==typeof n.o.onDelete&&n.o.onDelete.call(this,i)}))}):e("#"+s).fadeOut(n.o.deleteSpeed,function(){e(this).remove(),"function"==typeof n.o.onDelete&&n.o.onDelete.call(this,i)}),t.preventDefault()}),s.on(r,".jarviswidget-refresh-btn",function(t){var i=e(this).parents(n.o.widgets),s=i.data("widget-load"),o=i.children(),r=e(this);r.button("loading"),o.addClass("widget-body-ajax-loading"),setTimeout(function(){r.button("reset"),o.removeClass("widget-body-ajax-loading"),n._loadAjaxFile(i,s,o)},1e3),t.preventDefault()}),s=null},destroy:function(){var i=this,n="."+o;i.obj.find(i.o.grid+".sortable-grid").not("[data-widget-excludegrid]").sortable("destroy"),i.widget.children("header").off(n),e(i.o.deleteSettingsKey).off(n),e(i.o.deletePositionKey).off(n),e(t).off(n),i.obj.removeData(o)}},e.fn[o]=function(t){return this.each(function(){var i=e(this),n=i.data(o);if(!n){var r="object"==typeof t&&t;i.data(o,n=new s(this,r))}"string"==typeof t&&n[t]()})},e.fn[o].defaults={grid:"section",widgets:".jarviswidget",localStorage:!0,deleteSettingsKey:"",settingsKeyLabel:"Reset settings?",deletePositionKey:"",positionKeyLabel:"Reset position?",sortable:!0,buttonsHidden:!1,toggleButton:!0,toggleClass:"min-10 | plus-10",toggleSpeed:200,onToggle:function(){},deleteButton:!0,deleteMsg:"Warning: This action cannot be undone",deleteClass:"trashcan-10",deleteSpeed:200,onDelete:function(){},editButton:!0,editPlaceholder:".jarviswidget-editbox",editClass:"pencil-10 | delete-10",editSpeed:200,onEdit:function(){},colorButton:!0,fullscreenButton:!0,fullscreenClass:"fullscreen-10 | normalscreen-10",fullscreenDiff:3,onFullscreen:function(){},customButton:!0,customClass:"",customStart:function(){},customEnd:function(){},buttonOrder:"%refresh% %delete% %custom% %edit% %fullscreen% %toggle%",opacity:1,dragHandle:"> header",placeholderClass:"jarviswidget-placeholder",indicator:!0,indicatorTime:600,ajax:!0,loadingLabel:"loading...",timestampPlaceholder:".jarviswidget-timestamp",timestampFormat:"Last update: %m%/%d%/%y% %h%:%i%:%s%",refreshButton:!0,refreshButtonClass:"refresh-10",labelError:"Sorry but there was a error:",labelUpdated:"Last Update:",labelRefresh:"Refresh",labelDelete:"Delete widget:",afterLoad:function(){},rtl:!1,onChange:function(){},onSave:function(){},ajaxnav:!0},e.fn.removeClassPrefix=function(t){return this.each(function(i,n){var s=n.className.split(" ").map(function(e){return 0===e.indexOf(t)?"":e});n.className=e.trim(s.join(" "))}),this}}(jQuery,window,document),function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return void(t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=e.data(this[0],"validator");return i||(this.attr("novalidate","novalidate"),i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){i.settings.submitHandler&&(i.submitButton=t.target),e(t.target).hasClass("cancel")&&(i.cancelSubmit=!0)}),this.submit(function(t){function n(){var n;return!i.settings.submitHandler||(i.submitButton&&(n=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(i.submitButton.value).appendTo(i.currentForm)),i.settings.submitHandler.call(i,i.currentForm,t),i.submitButton&&n.remove(),!1)}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)})),i)},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,i=e(this[0].form).validate();return this.each(function(){t&=i.element(this)}),t},removeAttrs:function(t){var i={},n=this;return e.each(t.split(/\s/),function(e,t){i[t]=n.attr(t),n.removeAttr(t)}),i},rules:function(t,i){var n=this[0];if(t){var s=e.data(n.form,"validator").settings,o=s.rules,r=e.validator.staticRules(n);switch(t){case"add":e.extend(r,e.validator.normalizeRule(i)),o[n.name]=r,i.messages&&(s.messages[n.name]=e.extend(s.messages[n.name],i.messages));break;case"remove":if(!i)return delete o[n.name],r;var a={};return e.each(i.split(/\s/),function(e,t){a[t]=r[t],delete r[t]}),a}}var l=e.validator.normalizeRules(e.extend({},e.validator.classRules(n),e.validator.attributeRules(n),e.validator.dataRules(n),e.validator.staticRules(n)),n);if(l.required){var c=l.required;delete l.required,l=e.extend({required:c},l)}return l}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+t.value)},
filled:function(t){return!!e.trim(""+t.value)},unchecked:function(e){return!e.checked}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1===arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),e.each(i,function(e,i){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return i})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"invalid",validClass:"valid",errorElement:"em",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){(9!==t.which||""!==this.elementValue(e))&&(e.name in this.submitted||e===this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(n).parent().addClass("state-error").removeClass("state-success"):e(t).addClass(i).removeClass(n).parent().addClass("state-error").removeClass("state-success")},unhighlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(n).parent().addClass("state-success").removeClass("state-error"):e(t).removeClass(i).addClass(n).parent().addClass("state-success").removeClass("state-error")}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required",remote:"Please fix this field",email:"Please enter a valid email address",url:"Please enter a valid URL",date:"Please enter a valid date",dateISO:"Please enter a valid date (ISO)",number:"Please enter a valid number",digits:"Please enter only digits",creditcard:"Please enter a valid credit card number",equalTo:"Please enter the same value again",maxlength:e.validator.format("Please enter no more than {0} characters"),minlength:e.validator.format("Please enter at least {0} characters"),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long"),range:e.validator.format("Please enter a value between {0} and {1}"),max:e.validator.format("Please enter a value less than or equal to {0}"),min:e.validator.format("Please enter a value greater than or equal to {0}")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var i=e.data(this[0].form,"validator"),n="on"+t.type.replace(/^validate/,"");i.settings[n]&&i.settings[n].call(i,this[0],t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};e.each(this.settings.groups,function(t,n){"string"==typeof n&&(n=n.split(/\s/)),e.each(n,function(e,n){i[n]=t})});var n=this.settings.rules;e.each(n,function(t,i){n[t]=e.validator.normalizeRule(i)}),e(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",t).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t)),this.lastElement=t,this.prepareElement(t),this.currentElements=e(t);var i=!1!==this.check(t);return i?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var i in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in i||!t.objectLength(e(this).rules()))&&(i[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.replace(" ",".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var i=e(t).attr("type"),n=e(t).val();return"radio"===i||"checkbox"===i?e("input[name='"+e(t).attr("name")+"']:checked").val():"string"==typeof n?n.replace(/\r/g,""):n},check:function(t){t=this.validationTargetFor(this.clean(t));var i,n=e(t).rules(),s=!1,o=this.elementValue(t);for(var r in n){var a={method:r,parameters:n[r]};try{if("dependency-mismatch"===(i=e.validator.methods[r].call(this,o,t,a.parameters))){s=!0;continue}if(s=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!i)return this.formatAndAdd(t,a),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occured when checking element "+t.id+", check the '"+a.method+"' method.",e),e}}return s?void 0:(this.objectLength(n)&&this.successList.push(t),!0)},customDataMessage:function(t,i){return e(t).data("msg-"+i.toLowerCase())||t.attributes&&e(t).attr("data-msg-"+i.toLowerCase())},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customDataMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,i){var n=this.defaultMessage(t,i.method),s=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,i.parameters,t):s.test(n)&&(n=e.validator.format(n.replace(s,"{$1}"),i.parameters)),this.errorList.push({message:n,element:t}),this.errorMap[t.name]=n,this.submitted[t.name]=n},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t;for(e=0;this.errorList[e];e++){var i=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var n=this.errorsFor(t);n.length?(n.removeClass(this.settings.validClass).addClass(this.settings.errorClass),n.html(i)):(n=e("<"+this.settings.errorElement+">").attr("for",this.idOrName(t)).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(n=n.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(n).length||(this.settings.errorPlacement?this.settings.errorPlacement(n,e(t)):n.insertAfter(t))),!i&&this.settings.success&&(n.text(""),"string"==typeof this.settings.success?n.addClass(this.settings.success):this.settings.success(n,t)),this.toShow=this.toShow.add(n)},errorsFor:function(t){var i=this.idOrName(t);return this.errors().filter(function(){return e(this).attr("for")===i})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+t+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(t,i){return!!e(t,i.form).length},function:function(e,t){return e(t)}},optional:function(t){var i=this.elementValue(t);return!e.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={},n=e(t).attr("class");return n&&e.each(n.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},attributeRules:function(t){var i={},n=e(t);for(var s in e.validator.methods){var o;"required"===s?(o=n.get(0).getAttribute(s),""===o&&(o=!0),o=!!o):o=n.attr(s),o?i[s]=o:n[0].getAttribute("type")===s&&(i[s]=!0)}return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(t){var i,n,s={},o=e(t);for(i in e.validator.methods)void 0!==(n=o.data("rule-"+i.toLowerCase()))&&(s[i]=n);return s},staticRules:function(t){var i={},n=e.data(t.form,"validator");return n.settings.rules&&(i=e.validator.normalizeRule(n.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,function(n,s){if(!1===s)return void delete t[n];if(s.param||s.depends){var o=!0;switch(typeof s.depends){case"string":o=!!e(s.depends,i.form).length;break;case"function":o=s.depends.call(i,i)}o?t[n]=void 0===s.param||s.param:delete t[n]}}),e.each(t,function(n,s){t[n]=e.isFunction(s)?s(i):s}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength"],function(){var i;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),function(){i[this]=!0}),t=i}return t},addMethod:function(t,i,n){e.validator.methods[t]=i,e.validator.messages[t]=void 0!==n?n:e.validator.messages[t],i.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,n){if(!this.depend(n,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var s=e(i).val();return s&&s.length>0}return this.checkable(i)?this.getLength(t,i)>0:e.trim(t).length>0},remote:function(t,i,n){if(this.optional(i))return"dependency-mismatch";var s=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),s.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=s.message,n="string"==typeof n&&{url:n}||n,s.old===t)return s.valid;s.old=t;var o=this;this.startRequest(i);var r={};return r[i.name]=t,e.ajax(e.extend(!0,{url:n,mode:"abort",port:"validate"+i.name,dataType:"json",data:r,success:function(n){o.settings.messages[i.name].remote=s.originalMessage;var r=!0===n||"true"===n;if(r){var a=o.formSubmitted;o.prepareElement(i),o.formSubmitted=a,o.successList.push(i),delete o.invalid[i.name],o.showErrors()}else{var l={},c=n||o.defaultMessage(i,"remote");l[i.name]=s.message=e.isFunction(c)?c(t):c,o.invalid[i.name]=!0,o.showErrors(l)}s.valid=r,o.stopRequest(i,r)}},n)),"pending"},minlength:function(t,i,n){var s=e.isArray(t)?t.length:this.getLength(e.trim(t),i);return this.optional(i)||s>=n},maxlength:function(t,i,n){var s=e.isArray(t)?t.length:this.getLength(e.trim(t),i);return this.optional(i)||n>=s},rangelength:function(t,i,n){var s=e.isArray(t)?t.length:this.getLength(e.trim(t),i);return this.optional(i)||s>=n[0]&&s<=n[1]},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||i>=e},range:function(e,t,i){return this.optional(t)||e>=i[0]&&e<=i[1]},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var i=0,n=0,s=!1;e=e.replace(/\D/g,"");for(var o=e.length-1;o>=0;o--){var r=e.charAt(o);n=parseInt(r,10),s&&(n*=2)>9&&(n-=9),i+=n,s=!s}return i%10==0},equalTo:function(t,i,n){var s=e(n);return this.settings.onfocusout&&s.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(i).valid()}),t===s.val()}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,i,n){var s=e.port;"abort"===e.mode&&(t[s]&&t[s].abort(),t[s]=n)});else{var i=e.ajax;e.ajax=function(n){var s=("mode"in n?n:e.ajaxSettings).mode,o=("port"in n?n:e.ajaxSettings).port;return"abort"===s?(t[o]&&t[o].abort(),t[o]=i.apply(this,arguments)):i.apply(this,arguments)}}}(jQuery),function(e){e.extend(e.fn,{validateDelegate:function(t,i,n){return this.bind(i,function(i){var s=e(i.target);return s.is(t)?n.apply(s,arguments):void 0})}})}(jQuery),function(e){var t,i=function(){var e=document.createElement("input"),t="onpaste";return e.setAttribute(t,""),"function"==typeof e[t]?"paste":"input"}()+".mask",n=navigator.userAgent,s=/iphone/i.test(n),o=/android/i.test(n);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var i;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&(i=this.createTextRange(),i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(i=document.selection.createRange(),e=0-i.duplicate().moveStart("character",-1e5),t=e+i.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(n,r){var a,l,c,d,u,h;return!n&&this.length>0?(a=e(this[0]),a.data(e.mask.dataName)()):(r=e.extend({placeholder:e.mask.placeholder,completed:null},r),l=e.mask.definitions,c=[],d=h=n.length,u=null,e.each(n.split(""),function(e,t){"?"==t?(h--,d=e):l[t]?(c.push(new RegExp(l[t])),null===u&&(u=c.length-1)):c.push(null)}),this.trigger("unmask").each(function(){function a(e){for(;++e<h&&!c[e];);return e}function p(e){for(;--e>=0&&!c[e];);return e}function f(e,t){var i,n;if(!(0>e)){for(i=e,n=a(t);h>i;i++)if(c[i]){if(!(h>n&&c[i].test(C[n])))break;C[i]=C[n],C[n]=r.placeholder,n=a(n)}y(),x.caret(Math.max(u,e))}}function m(e){var t,i,n,s;for(t=e,i=r.placeholder;h>t;t++)if(c[t]){if(n=a(t),s=C[t],C[t]=i,!(h>n&&c[n].test(s)))break;i=s}}function g(e){var t,i,n,o=e.which;8===o||46===o||s&&127===o?(t=x.caret(),i=t.begin,n=t.end,n-i==0&&(i=46!==o?p(i):n=a(i-1),n=46===o?a(n):n),b(i,n),f(i,n-1),e.preventDefault()):27==o&&(x.val(E),x.caret(0,w()),e.preventDefault())}function v(t){var i,n,s,l=t.which,d=x.caret();t.ctrlKey||t.altKey||t.metaKey||32>l||l&&(d.end-d.begin!=0&&(b(d.begin,d.end),f(d.begin,d.end-1)),i=a(d.begin-1),h>i&&(n=String.fromCharCode(l),c[i].test(n)&&(m(i),C[i]=n,y(),s=a(i),o?setTimeout(e.proxy(e.fn.caret,x,s),0):x.caret(s),r.completed&&s>=h&&r.completed.call(x))),t.preventDefault())}function b(e,t){var i;for(i=e;t>i&&h>i;i++)c[i]&&(C[i]=r.placeholder)}function y(){x.val(C.join(""))}function w(e){var t,i,n=x.val(),s=-1;for(t=0,pos=0;h>t;t++)if(c[t]){for(C[t]=r.placeholder;pos++<n.length;)if(i=n.charAt(pos-1),c[t].test(i)){C[t]=i,s=t;break}if(pos>n.length)break}else C[t]===n.charAt(pos)&&t!==d&&(pos++,s=t);return e?y():d>s+1?(x.val(""),b(0,h)):(y(),x.val(x.val().substring(0,s+1))),d?t:u}var x=e(this),C=e.map(n.split(""),function(e){return"?"!=e?l[e]?r.placeholder:e:void 0}),E=x.val();x.data(e.mask.dataName,function(){return e.map(C,function(e,t){return c[t]&&e!=r.placeholder?e:null}).join("")}),x.attr("readonly")||x.one("unmask",function(){x.unbind(".mask").removeData(e.mask.dataName)}).bind("focus.mask",function(){clearTimeout(t);var e;E=x.val(),e=w(),t=setTimeout(function(){y(),e==n.length?x.caret(0,e):x.caret(e)},10)}).bind("blur.mask",function(){w(),x.val()!=E&&x.change()}).bind("keydown.mask",g).bind("keypress.mask",v).bind(i,function(){setTimeout(function(){var e=w(!0);x.caret(e),r.completed&&e==x.val().length&&r.completed.call(x)},0)}),w()}))}})}(jQuery),function(){function e(e){return document.createElementNS(l,e)}function t(e){return(10>e?"0":"")+e}function i(e){var t=++g+"";return e?e+t:t}function n(n,r){function l(e,t){var i=u.offset(),n=/^touch/.test(e.type),o=i.left+v,l=i.top+v,d=(n?e.originalEvent.touches[0]:e).pageX-o,h=(n?e.originalEvent.touches[0]:e).pageY-l,m=Math.sqrt(d*d+h*h),g=!1;if(!t||!(b-w>m||m>b+w)){e.preventDefault();var y=setTimeout(function(){s.addClass("clockpicker-moving")},200);c&&u.append(S.canvas),S.setHand(d,h,!t,!0),a.off(p).on(p,function(e){e.preventDefault();var t=/^touch/.test(e.type),i=(t?e.originalEvent.touches[0]:e).pageX-o,n=(t?e.originalEvent.touches[0]:e).pageY-l;(g||i!==d||n!==h)&&(g=!0,S.setHand(i,n,!1,!0))}),a.off(f).one(f,function(e){e.preventDefault();var i=/^touch/.test(e.type),n=(i?e.originalEvent.changedTouches[0]:e).pageX-o,c=(i?e.originalEvent.changedTouches[0]:e).pageY-l;(t||g)&&n===d&&c===h&&S.setHand(n,c),"hours"===S.currentView?S.toggleView("minutes",C/2):r.autoclose&&(S.minutesView.addClass("clockpicker-dial-out"),setTimeout(function(){S.done()},C/2)),u.prepend(N),clearTimeout(y),s.removeClass("clockpicker-moving"),a.off(p)})}}var d=o(E),u=d.find(".clockpicker-plate"),m=d.find(".clockpicker-hours"),g=d.find(".clockpicker-minutes"),k="INPUT"===n.prop("tagName"),T=k?n:n.find("input"),_=n.find(".input-group-addon"),S=this;this.id=i("cp"),this.element=n,this.options=r,this.isAppended=!1,this.isShown=!1,this.currentView="hours",this.isInput=k,this.input=T,this.addon=_,this.popover=d,this.plate=u,this.hoursView=m,this.minutesView=g,this.spanHours=d.find(".clockpicker-span-hours"),this.spanMinutes=d.find(".clockpicker-span-minutes"),r.autoclose||o('<button type="button" class="btn btn-sm btn-default btn-block clockpicker-button">'+r.donetext+"</button>").click(o.proxy(this.done,this)).appendTo(d),"top"!==r.placement&&"bottom"!==r.placement||"top"!==r.align&&"bottom"!==r.align||(r.align="left"),"left"!==r.placement&&"right"!==r.placement||"left"!==r.align&&"right"!==r.align||(r.align="top"),d.addClass(r.placement),d.addClass("clockpicker-align-"+r.align),this.spanHours.click(o.proxy(this.toggleView,this,"hours")),this.spanMinutes.click(o.proxy(this.toggleView,this,"minutes")),T.on("focus.clockpicker click.clockpicker",o.proxy(this.show,this)),_.on("click.clockpicker",o.proxy(this.toggle,this));var D,$,M,A=o('<div class="clockpicker-tick"></div>');for(D=0;24>D;D+=1){$=A.clone(),M=D/6*Math.PI;var O=D>0&&13>D,F=O?y:b;$.css({left:v+Math.sin(M)*F-w,top:v-Math.cos(M)*F-w}),O&&$.css("font-size","120%"),$.html(0===D?"00":D),m.append($),$.on(h,l)}for(D=0;60>D;D+=5)$=A.clone(),M=D/30*Math.PI,$.css({left:v+Math.sin(M)*b-w,top:v-Math.cos(M)*b-w}),$.css("font-size","120%"),$.html(t(D)),g.append($),$.on(h,l);if(u.on(h,function(e){0===o(e.target).closest(".clockpicker-tick").length&&l(e,!0)}),c){var N=d.find(".clockpicker-canvas"),L=e("svg");L.setAttribute("class","clockpicker-svg"),L.setAttribute("width",x),L.setAttribute("height",x);var R=e("g");R.setAttribute("transform","translate("+v+","+v+")");var I=e("circle");I.setAttribute("class","clockpicker-canvas-bearing"),I.setAttribute("cx",0),I.setAttribute("cy",0),I.setAttribute("r",2);var P=e("line");P.setAttribute("x1",0),P.setAttribute("y1",0);var B=e("circle");B.setAttribute("class","clockpicker-canvas-bg"),B.setAttribute("r",w);var H=e("circle");H.setAttribute("class","clockpicker-canvas-fg"),H.setAttribute("r",3.5),R.appendChild(P),R.appendChild(B),R.appendChild(H),R.appendChild(I),L.appendChild(R),N.append(L),this.hand=P,this.bg=B,this.fg=H,this.bearing=I,this.g=R,this.canvas=N}}var s,o=window.jQuery,r=o(window),a=o(document),l="http://www.w3.org/2000/svg",c="SVGAngle"in window&&function(){var e,t=document.createElement("div");return t.innerHTML="<svg/>",e=(t.firstChild&&t.firstChild.namespaceURI)==l,t.innerHTML="",e}(),d=function(){var e=document.createElement("div").style;return"transition"in e||"WebkitTransition"in e||"MozTransition"in e||"msTransition"in e||"OTransition"in e}(),u="ontouchstart"in window,h="mousedown"+(u?" touchstart":""),p="mousemove.clockpicker"+(u?" touchmove.clockpicker":""),f="mouseup.clockpicker"+(u?" touchend.clockpicker":""),m=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,g=0,v=100,b=80,y=54,w=13,x=2*v,C=d?350:1,E=['<div class="popover clockpicker-popover">','<div class="arrow"></div>','<div class="popover-title">','<span class="clockpicker-span-hours text-primary"></span>'," : ",'<span class="clockpicker-span-minutes"></span>',"</div>",'<div class="popover-content">','<div class="clockpicker-plate">','<div class="clockpicker-canvas"></div>','<div class="clockpicker-dial clockpicker-hours"></div>','<div class="clockpicker-dial clockpicker-minutes clockpicker-dial-out"></div>',"</div>","</div>","</div>"].join("");n.DEFAULTS={default:"",fromnow:0,placement:"bottom",align:"left",donetext:"完成",autoclose:!1,vibrate:!0},n.prototype.toggle=function(){this[this.isShown?"hide":"show"]()},n.prototype.locate=function(){var e=this.element,t=this.popover,i=e.offset(),n=e.outerWidth(),s=e.outerHeight(),o=this.options.placement,r=this.options.align,a={};switch(t.show(),o){case"bottom":a.top=i.top+s;break;case"right":a.left=i.left+n;break;case"top":a.top=i.top-t.outerHeight();break;case"left":a.left=i.left-t.outerWidth()}switch(r){case"left":a.left=i.left;break;case"right":a.left=i.left+n-t.outerWidth();break;case"top":a.top=i.top;break;case"bottom":a.top=i.top+s-t.outerHeight()}t.css(a)},n.prototype.show=function(){if(!this.isShown){var e=this;this.isAppended||(s=o(document.body).append(this.popover),r.on("resize.clockpicker"+this.id,function(){e.isShown&&e.locate()}),this.isAppended=!0);var i=((this.input.prop("value")||this.options.default||"")+"").split(":");if("now"===i[0]){var n=new Date(+new Date+this.options.fromnow);i=[n.getHours(),n.getMinutes()]}this.hours=+i[0]||0,this.minutes=+i[1]||0,this.spanHours.html(t(this.hours)),this.spanMinutes.html(t(this.minutes)),this.toggleView("hours"),this.locate(),this.isShown=!0,a.on("click.clockpicker."+this.id+" focusin.clockpicker."+this.id,function(t){var i=o(t.target);0===i.closest(e.popover).length&&0===i.closest(e.addon).length&&0===i.closest(e.input).length&&e.hide()}),a.on("keyup.clockpicker."+this.id,function(t){27===t.keyCode&&e.hide()})}},n.prototype.hide=function(){this.isShown=!1,a.off("click.clockpicker."+this.id+" focusin.clockpicker."+this.id),a.off("keyup.clockpicker."+this.id),this.popover.hide()},n.prototype.toggleView=function(e,t){var i="hours"===e,n=i?this.hoursView:this.minutesView,s=i?this.minutesView:this.hoursView;this.currentView=e,this.spanHours.toggleClass("text-primary",i),this.spanMinutes.toggleClass("text-primary",!i),s.addClass("clockpicker-dial-out"),n.css("visibility","visible").removeClass("clockpicker-dial-out"),this.resetClock(t),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){s.css("visibility","hidden")},C)},n.prototype.resetClock=function(e){var t=this.currentView,i=this[t],n="hours"===t,s=Math.PI/(n?6:30),o=i*s,r=n&&i>0&&13>i?y:b,a=Math.sin(o)*r,l=-Math.cos(o)*r,d=this;c&&e?(d.canvas.addClass("clockpicker-canvas-out"),setTimeout(function(){d.canvas.removeClass("clockpicker-canvas-out"),d.setHand(a,l)},e)):this.setHand(a,l)},n.prototype.setHand=function(e,i,n,s){var r,a=Math.atan2(e,-i),l="hours"===this.currentView,d=Math.PI/(l||n?6:30),u=Math.sqrt(e*e+i*i),h=(this.options,l&&(b+y)/2>u),p=h?y:b;if(0>a&&(a=2*Math.PI+a),r=Math.round(a/d),a=r*d,l?(12===r&&(r=0),r=h?0===r?12:r:0===r?0:r+12):(n&&(r*=5),60===r&&(r=0)),this[this.currentView]!==r&&m&&this.options.vibrate&&(this.vibrateTimer||(navigator[m](10),this.vibrateTimer=setTimeout(o.proxy(function(){this.vibrateTimer=null},this),100))),this[this.currentView]=r,this[l?"spanHours":"spanMinutes"].html(t(r)),!c)return void this[l?"hoursView":"minutesView"].find(".clockpicker-tick").each(function(){var e=o(this);e.toggleClass("active",r===+e.html())});s||!l&&r%5?(this.g.insertBefore(this.hand,this.bearing),this.g.insertBefore(this.bg,this.fg),this.bg.setAttribute("class","clockpicker-canvas-bg clockpicker-canvas-bg-trans")):(this.g.insertBefore(this.hand,this.bg),this.g.insertBefore(this.fg,this.bg),this.bg.setAttribute("class","clockpicker-canvas-bg"));var f=Math.sin(a)*p,g=-Math.cos(a)*p;this.hand.setAttribute("x2",f),this.hand.setAttribute("y2",g),this.bg.setAttribute("cx",f),this.bg.setAttribute("cy",g),this.fg.setAttribute("cx",f),this.fg.setAttribute("cy",g)},n.prototype.done=function(){this.hide();var e=this.input.prop("value"),i=t(this.hours)+":"+t(this.minutes);this.input.prop("value",i),i!==e&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change"))},n.prototype.remove=function(){this.element.removeData("clockpicker"),this.input.off("focus.clockpicker click.clockpicker"),this.addon.off("click.clockpicker"),this.isShown&&this.hide(),this.isAppended&&(r.off("resize.clockpicker"+this.id),this.popover.remove())},o.fn.clockpicker=function(e){var t=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=o(this),s=i.data("clockpicker");if(s)"function"==typeof s[e]&&s[e].apply(s,t);else{var r=o.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);i.data("clockpicker",new n(i,r))}})}}(),function(e){var t=function(e){this.value={h:1,s:1,b:1,a:1},this.setColor(e)};t.prototype={constructor:t,setColor:function(t){t=t.toLowerCase();var i=this;e.each(n.stringParsers,function(e,s){var o=s.re.exec(t),r=o&&s.parse(o),a=s.space||"rgba";return r?(i.value="hsla"===a?n.RGBtoHSB.apply(null,n.HSLtoRGB.apply(null,r)):n.RGBtoHSB.apply(null,r),!1):void 0})},setHue:function(e){this.value.h=1-e},
setSaturation:function(e){this.value.s=e},setLightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=parseInt(100*(1-e),10)/100},toRGB:function(e,t,i,n){e||(e=this.value.h,t=this.value.s,i=this.value.b),e*=360;var s,o,r,a,l;return e=e%360/60,l=i*t,a=l*(1-Math.abs(e%2-1)),s=o=r=i-l,e=~~e,s+=[l,a,0,0,a,l][e],o+=[a,l,l,a,0,0][e],r+=[0,0,a,l,l,a][e],{r:Math.round(255*s),g:Math.round(255*o),b:Math.round(255*r),a:n||this.value.a}},toHex:function(e,t,i,n){var s=this.toRGB(e,t,i,n);return"#"+(1<<24|parseInt(s.r)<<16|parseInt(s.g)<<8|parseInt(s.b)).toString(16).substr(1)},toHSL:function(e,t,i,n){e||(e=this.value.h,t=this.value.s,i=this.value.b);var s=e,o=(2-t)*i,r=t*i;return r/=o>0&&1>=o?o:2-o,o/=2,r>1&&(r=1),{h:s,s:r,l:o,a:n||this.value.a}}};var i=function(t,i){this.element=e(t);var s=i.format||this.element.data("color-format")||"hex";this.format=n.translateFormats[s],this.isInput=this.element.is("input"),this.component=!!this.element.is(".color")&&this.element.find(".add-on"),this.picker=e(n.template).appendTo("body").on("mousedown",e.proxy(this.mousedown,this)),this.isInput?this.element.on({focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this)}):this.component?this.component.on({click:e.proxy(this.show,this)}):this.element.on({click:e.proxy(this.show,this)}),("rgba"===s||"hsla"===s)&&(this.picker.addClass("alpha"),this.alpha=this.picker.find(".colorpicker-alpha")[0].style),this.component?(this.picker.find(".colorpicker-color").hide(),this.preview=this.element.find("i")[0].style):this.preview=this.picker.find("div:last")[0].style,this.base=this.picker.find("div:first")[0].style,this.update()};i.prototype={constructor:i,show:function(t){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),e(window).on("resize",e.proxy(this.place,this)),this.isInput||t&&(t.stopPropagation(),t.preventDefault()),e(document).on({mousedown:e.proxy(this.hide,this)}),this.element.trigger({type:"show",color:this.color})},update:function(){this.color=new t(this.isInput?this.element.prop("value"):this.element.data("color")),this.picker.find("i").eq(0).css({left:100*this.color.value.s,top:100-100*this.color.value.b}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a)),this.previewColor()},setValue:function(e){this.color=new t(e),this.picker.find("i").eq(0).css({left:100*this.color.value.s,top:100-100*this.color.value.b}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a)),this.previewColor(),this.element.trigger({type:"changeColor",color:this.color})},hide:function(){this.picker.hide(),e(window).off("resize",this.place),this.isInput?this.element.prop("value",this.format.call(this)):(e(document).off({mousedown:this.hide}),this.component&&this.element.find("input").prop("value",this.format.call(this)),this.element.data("color",this.format.call(this))),this.element.trigger({type:"hide",color:this.color})},place:function(){var e=this.component?this.component.offset():this.element.offset();this.picker.css({top:e.top+this.height,left:e.left})},previewColor:function(){try{this.preview.backgroundColor=this.format.call(this)}catch(e){this.preview.backgroundColor=this.color.toHex()}this.base.backgroundColor=this.color.toHex(this.color.value.h,1,1,1),this.alpha&&(this.alpha.backgroundColor=this.color.toHex())},pointer:null,slider:null,mousedown:function(t){t.stopPropagation(),t.preventDefault();var i=e(t.target),s=i.closest("div");if(!s.is(".colorpicker")){if(s.is(".colorpicker-saturation"))this.slider=e.extend({},n.sliders.saturation);else if(s.is(".colorpicker-hue"))this.slider=e.extend({},n.sliders.hue);else{if(!s.is(".colorpicker-alpha"))return!1;this.slider=e.extend({},n.sliders.alpha)}var o=s.offset();this.slider.knob=s.find("i")[0].style,this.slider.left=t.pageX-o.left,this.slider.top=t.pageY-o.top,this.pointer={left:t.pageX,top:t.pageY},e(document).on({mousemove:e.proxy(this.mousemove,this),mouseup:e.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(e){e.stopPropagation(),e.preventDefault();var t=Math.max(0,Math.min(this.slider.maxLeft,this.slider.left+((e.pageX||this.pointer.left)-this.pointer.left))),i=Math.max(0,Math.min(this.slider.maxTop,this.slider.top+((e.pageY||this.pointer.top)-this.pointer.top)));return this.slider.knob.left=t+"px",this.slider.knob.top=i+"px",this.slider.callLeft&&this.color[this.slider.callLeft].call(this.color,t/100),this.slider.callTop&&this.color[this.slider.callTop].call(this.color,i/100),this.previewColor(),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(t){return t.stopPropagation(),t.preventDefault(),e(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),!1}},e.fn.colorpicker=function(t,n){return this.each(function(){var s=e(this),o=s.data("colorpicker"),r="object"==typeof t&&t;o||s.data("colorpicker",o=new i(this,e.extend({},e.fn.colorpicker.defaults,r))),"string"==typeof t&&o[t](n)})},e.fn.colorpicker.defaults={},e.fn.colorpicker.Constructor=i;var n={translateFormats:{rgb:function(){var e=this.color.toRGB();return"rgb("+e.r+","+e.g+","+e.b+")"},rgba:function(){var e=this.color.toRGB();return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},hsl:function(){var e=this.color.toHSL();return"hsl("+Math.round(360*e.h)+","+Math.round(100*e.s)+"%,"+Math.round(100*e.l)+"%)"},hsla:function(){var e=this.color.toHSL();return"hsla("+Math.round(360*e.h)+","+Math.round(100*e.s)+"%,"+Math.round(100*e.l)+"%,"+e.a+")"},hex:function(){return this.color.toHex()}},sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},RGBtoHSB:function(e,t,i,n){e/=255,t/=255,i/=255;var s,o,r,a;return r=Math.max(e,t,i),a=r-Math.min(e,t,i),s=0===a?null:r==e?(t-i)/a:r==t?(i-e)/a+2:(e-t)/a+4,s=(s+360)%6*60/360,o=0===a?0:a/r,{h:s||1,s:o,b:r,a:n||1}},HueToRGB:function(e,t,i){return 0>i?i+=1:i>1&&(i-=1),1>6*i?e+(t-e)*i*6:1>2*i?t:2>3*i?e+(t-e)*(2/3-i)*6:e},HSLtoRGB:function(e,t,i,s){0>t&&(t=0);var o;o=.5>=i?i*(1+t):i+t-i*t;var r=2*i-o,a=e+1/3,l=e,c=e-1/3;return[Math.round(255*n.HueToRGB(r,o,a)),Math.round(255*n.HueToRGB(r,o,l)),Math.round(255*n.HueToRGB(r,o,c)),s||1]},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}}],template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div></div>'}}(window.jQuery),function(e){void 0===e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var i=e([0]),n=-1,s=this.length;++n<s&&(i.context=i[0]=this[n])&&!1!==t.call(i[0],n,i););return this}})}(jQuery),function(e,t){"use strict";function i(t){var i=e(document.createTextNode(""));t.before(i),i.before(t),i.remove()}function n(e){function t(e){return H[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function s(e,t){for(var i=0,n=t.length;n>i;i+=1)if(r(e,t[i]))return i;return-1}function o(){var t=e(B);t.appendTo("body");var i={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),i}function r(e,i){return e===i||e!==t&&i!==t&&(null!==e&&null!==i&&(e.constructor===String?e+""==i+"":i.constructor===String&&i+""==e+""))}function a(t,i){var n,s,o;if(null===t||t.length<1)return[];for(n=t.split(i),s=0,o=n.length;o>s;s+=1)n[s]=e.trim(n[s]);return n}function l(e){return e.outerWidth(!1)-e.width()}function c(i){var n="keyup-change-value";i.on("keydown",function(){e.data(i,n)===t&&e.data(i,n,i.val())}),i.on("keyup",function(){var s=e.data(i,n);s!==t&&i.val()!==s&&(e.removeData(i,n),i.trigger("keyup-change"))})}function d(i){i.on("mousemove",function(i){var n=P;(n===t||n.x!==i.pageX||n.y!==i.pageY)&&e(i.target).trigger("mousemove-filtered",i)})}function u(e,i,n){n=n||t;var s;return function(){var t=arguments;window.clearTimeout(s),s=window.setTimeout(function(){i.apply(n,t)},e)}}function h(e,t){var i=u(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){s(e.target,t.get())>=0&&i(e)})}function p(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,i=e[0],n=e.val().length;e.focus(),(i.offsetWidth>0||i.offsetHeight>0)&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(n,n):i.createTextRange&&(t=i.createTextRange(),t.collapse(!1),t.select()))},0)}function f(t){t=e(t)[0];var i=0,n=0;if("selectionStart"in t)i=t.selectionStart,n=t.selectionEnd-i;else if("selection"in document){t.focus();var s=document.selection.createRange();n=document.selection.createRange().text.length,s.moveStart("character",-t.value.length),i=s.text.length-n}return{offset:i,length:n}}function m(e){e.preventDefault(),e.stopPropagation()}function g(e){e.preventDefault(),e.stopImmediatePropagation()}function v(t){if(!L){var i=t[0].currentStyle||window.getComputedStyle(t[0],null);L=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"}),L.attr("class","select2-sizer"),e("body").append(L)}return L.text(t.val()),L.width()}function b(t,i,n){var s,o,r=[];s=e.trim(t.attr("class")),s&&(s=""+s,e(s.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&r.push(this)})),s=e.trim(i.attr("class")),s&&(s=""+s,e(s.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(o=n(this))&&r.push(o)})),t.attr("class",r.join(" "))}function y(e,t,i,s){var o=n(e.toUpperCase()).indexOf(n(t.toUpperCase())),r=t.length;return 0>o?void i.push(s(e)):(i.push(s(e.substring(0,o))),i.push("<span class='select2-match'>"),i.push(s(e.substring(o,o+r))),i.push("</span>"),void i.push(s(e.substring(o+r,e.length))))}function w(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function x(i){var n,s=null,o=i.quietMillis||100,r=i.url,a=this;return function(l){window.clearTimeout(n),n=window.setTimeout(function(){var n=i.data,o=r,c=i.transport||e.fn.select2.ajaxDefaults.transport,d={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||t,dataType:i.dataType||"json"},u=e.extend({},e.fn.select2.ajaxDefaults.params,d);n=n?n.call(a,l.term,l.page,l.context):null,o="function"==typeof o?o.call(a,l.term,l.page,l.context):o,s&&"function"==typeof s.abort&&s.abort(),i.params&&(e.isFunction(i.params)?e.extend(u,i.params.call(a)):e.extend(u,i.params)),e.extend(u,{url:o,dataType:i.dataType,data:n,success:function(e){var t=i.results(e,l.page,l);l.callback(t)},error:function(e,t,i){var n={hasError:!0,jqXHR:e,textStatus:t,errorThrown:i};l.callback(n)}}),s=c.call(a,u)},o)}}function C(t){var i,n,s=t,o=function(e){return""+e.text};e.isArray(s)&&(n=s,s={results:n}),!1===e.isFunction(s)&&(n=s,s=function(){return n});var r=s();return r.text&&(o=r.text,e.isFunction(o)||(i=r.text,o=function(e){return e[i]})),function(t){var i,n=t.term,r={results:[]};return""===n?void t.callback(s()):(i=function(s,r){var a,l;if(s=s[0],s.children){a={};for(l in s)s.hasOwnProperty(l)&&(a[l]=s[l]);a.children=[],e(s.children).each2(function(e,t){i(t,a.children)}),(a.children.length||t.matcher(n,o(a),s))&&r.push(a)}else t.matcher(n,o(s),s)&&r.push(s)},e(s().results).each2(function(e,t){i(t,r.results)}),void t.callback(r))}}function E(i){var n=e.isFunction(i);return function(s){var o=s.term,r={results:[]},a=n?i(s):i;e.isArray(a)&&(e(a).each(function(){var e=this.text!==t,i=e?this.text:this;(""===o||s.matcher(o,i))&&r.results.push(e?this:{id:this,text:this})}),s.callback(r))}}function k(t,i){if(e.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(i+" must be a string, function, or falsy value")}function T(t,i){if(e.isFunction(t)){var n=Array.prototype.slice.call(arguments,2);return t.apply(i,n)}return t}function _(t){var i=0;return e.each(t,function(e,t){t.children?i+=_(t.children):i++}),i}function S(e,i,n,s){var o,a,l,c,d,u=e,h=!1;if(!s.createSearchChoice||!s.tokenSeparators||s.tokenSeparators.length<1)return t;for(;;){for(a=-1,l=0,c=s.tokenSeparators.length;c>l&&(d=s.tokenSeparators[l],!((a=e.indexOf(d))>=0));l++);if(0>a)break;if(o=e.substring(0,a),e=e.substring(a+d.length),o.length>0&&(o=s.createSearchChoice.call(this,o,i))!==t&&null!==o&&s.id(o)!==t&&null!==s.id(o)){for(h=!1,l=0,c=i.length;c>l;l++)if(r(s.id(o),s.id(i[l]))){h=!0;break}h||n(o)}}return u!==e?e:void 0}function D(){var t=this;e.each(arguments,function(e,i){t[i].remove(),t[i]=null})}function $(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}if(window.Select2===t){var M,A,O,F,N,L,R,I,P={x:0,y:0},M={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case M.LEFT:case M.RIGHT:case M.UP:case M.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case M.SHIFT:case M.CTRL:case M.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&123>=e}},B="<div class='select2-measure-scrollbar'></div>",H={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};R=e(document),N=function(){var e=1;return function(){return e++}}(),A=$(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(i){var n,s,r=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==t&&null!==i.element.data("select2")&&i.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+N()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",i.element.attr("title")),this.body=e("body"),b(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",i.element.attr("style")),this.container.css(T(i.containerCss,this.opts.element)),this.container.addClass(T(i.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),b(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(T(i.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=n=this.container.find(r),this.search=s=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),d(this.results),this.dropdown.on("mousemove-filtered",r,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",r,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",r,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",r,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),h(80,this.results),this.dropdown.on("scroll-debounced",r,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&n.mousewheel(function(e,t,i,s){var o=n.scrollTop();s>0&&0>=o-s?(n.scrollTop(0),m(e)):0>s&&n.get(0).scrollHeight-n.scrollTop()+s<=n.height()&&(n.scrollTop(n.get(0).scrollHeight-n.height()),m(e))}),c(s),s.on("keyup-change input paste",this.bind(this.updateResults)),s.on("focus",function(){s.addClass("select2-focused")}),s.on("blur",function(){s.removeClass("select2-focused")}),this.dropdown.on("mouseup",r,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.nextSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==i.maximumInputLength&&this.search.attr("maxlength",i.maximumInputLength);var a=i.element.prop("disabled");a===t&&(a=!1),this.enable(!a);var l=i.element.prop("readonly");l===t&&(l=!1),this.readonly(l),I=I||o(),this.autofocus=i.element.prop("autofocus"),i.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",i.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,i=e.data("select2"),n=this;this.close(),e.length&&e[0].detachEvent&&e.each(function(){this.detachEvent("onpropertychange",n._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,i!==t&&(i.container.remove(),i.liveRegion.remove(),i.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),D.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:r(e.attr("locked"),"locked")||r(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(i){var n,s,o,l,c=this;if(n=i.element,"select"===n.get(0).tagName.toLowerCase()&&(this.select=s=i.element),s&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),i=e.extend({},{populateResults:function(n,s,o){var r,a=this.opts.id,l=this.liveRegion;(r=function(n,s,d){var u,h,p,f,m,g,v,b,y,w;n=i.sortResults(n,s,o);var x=[];for(u=0,h=n.length;h>u;u+=1)p=n[u],m=!0===p.disabled,f=!m&&a(p)!==t,g=p.children&&p.children.length>0,v=e("<li></li>"),v.addClass("select2-results-dept-"+d),v.addClass("select2-result"),v.addClass(f?"select2-result-selectable":"select2-result-unselectable"),m&&v.addClass("select2-disabled"),g&&v.addClass("select2-result-with-children"),v.addClass(c.opts.formatResultCssClass(p)),v.attr("role","presentation"),b=e(document.createElement("div")),b.addClass("select2-result-label"),b.attr("id","select2-result-label-"+N()),b.attr("role","option"),w=i.formatResult(p,b,o,c.opts.escapeMarkup),w!==t&&(b.html(w),v.append(b)),g&&(y=e("<ul></ul>"),y.addClass("select2-result-sub"),r(p.children,y,d+1),v.append(y)),v.data("select2-data",p),x.push(v[0]);s.append(x),l.text(i.formatMatches(n.length))})(s,n,0)}},e.fn.select2.defaults,i),"function"!=typeof i.id&&(o=i.id,i.id=function(e){return e[o]}),e.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(s?(i.query=this.bind(function(e){var i,s,o,r={results:[],more:!1},a=e.term;o=function(t,i){var n;t.is("option")?e.matcher(a,t.text(),t)&&i.push(c.optionToData(t)):t.is("optgroup")&&(n=c.optionToData(t),t.children().each2(function(e,t){o(t,n.children)}),n.children.length>0&&i.push(n))},i=n.children(),this.getPlaceholder()!==t&&i.length>0&&(s=this.getPlaceholderOption())&&(i=i.not(s)),i.each2(function(e,t){o(t,r.results)}),e.callback(r)}),i.id=function(e){return e.id}):"query"in i||("ajax"in i?(l=i.element.data("ajax-url"),l&&l.length>0&&(i.ajax.url=l),i.query=x.call(i.element,i.ajax)):"data"in i?i.query=C(i.data):"tags"in i&&(i.query=E(i.tags),i.createSearchChoice===t&&(i.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),i.initSelection===t&&(i.initSelection=function(t,n){var s=[];e(a(t.val(),i.separator)).each(function(){var t={id:this,text:this},n=i.tags;e.isFunction(n)&&(n=n()),e(n).each(function(){return r(this.id,t.id)?(t=this,!1):void 0}),s.push(t)}),n(s)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");if("top"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof i.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return i},monitorSource:function(){var i,n=this.opts.element,s=this;n.on("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),this._sync=this.bind(function(){var e=n.prop("disabled");e===t&&(e=!1),this.enable(!e);var i=n.prop("readonly");i===t&&(i=!1),this.readonly(i),b(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(T(this.opts.containerCssClass,this.opts.element)),b(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(T(this.opts.dropdownCssClass,this.opts.element))}),n.length&&n[0].attachEvent&&n.each(function(){this.attachEvent("onpropertychange",s._sync)}),(i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new i(function(t){e.each(t,s._sync)}),this.propertyObserver.observe(n.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var i=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,i,n,s,o,r=this.dropdown,a=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),d=r.outerHeight(!1),u=e(window),h=u.width(),p=u.height(),f=u.scrollLeft()+h,m=u.scrollTop()+p,g=a.top+l,v=a.left,b=m>=g+d,y=a.top-d>=u.scrollTop(),w=r.outerWidth(!1),x=f>=v+w;r.hasClass("select2-drop-above")?(i=!0,!y&&b&&(n=!0,i=!1)):(i=!1,!b&&y&&(n=!0,i=!0)),n&&(r.hide(),a=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),d=r.outerHeight(!1),f=u.scrollLeft()+h,m=u.scrollTop()+p,g=a.top+l,v=a.left,w=r.outerWidth(!1),x=f>=v+w,r.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(o=e(".select2-results",r)[0],r.addClass("select2-drop-auto-width"),r.css("width",""),w=r.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:I.width),w>c?c=w:w=c,d=r.outerHeight(!1),x=f>=v+w):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(t=this.body.offset(),g-=t.top,v-=t.left),x||(v=a.left+this.container.outerWidth(!1)-w),s={left:v,width:c},i?(s.top=a.top-d,s.bottom="auto",this.container.addClass("select2-drop-above"),r.addClass("select2-drop-above")):(s.top=g,s.bottom="auto",this.container.removeClass("select2-drop-above"),r.removeClass("select2-drop-above")),s=e.extend(s,T(this.opts.dropdownCss,this.opts.element)),r.css(s)},shouldOpen:function(){var t
;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),R.on("mousemove.select2Event",function(e){P.x=e.pageX,P.y=e.pageY}),!0)},opening:function(){var t,n=this.containerEventName,s="scroll."+n,o="resize."+n,r="orientationchange."+n;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),t=e("#select2-drop-mask"),0==t.length&&(t=e(document.createElement("div")),t.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body),t.on("mousedown touchstart click",function(n){i(t);var s,o=e("#select2-drop");o.length>0&&(s=o.data("select2"),s.opts.selectOnBlur&&s.selectHighlighted({noFocus:!0}),s.close(),n.preventDefault(),n.stopPropagation())})),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var a=this;this.container.parents().add(window).each(function(){e(this).on(o+" "+s+" "+r,function(){a.opened()&&a.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerEventName,i="scroll."+t,n="resize."+t,s="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(i).off(n).off(s)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),R.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return T(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,i,n,s,o,r,a,l,c=this.results;if(!(0>(i=this.highlight()))){if(0==i)return void c.scrollTop(0);t=this.findHighlightableChoices().find(".select2-result-label"),n=e(t[i]),l=(n.offset()||{}).top||0,s=l+n.outerHeight(!0),i===t.length-1&&(a=c.find("li.select2-more-results"),a.length>0&&(s=a.offset().top+a.outerHeight(!0))),o=c.offset().top+c.outerHeight(!0),s>o&&c.scrollTop(c.scrollTop()+(s-o)),0>(r=l-c.offset().top)&&"none"!=n.css("display")&&c.scrollTop(c.scrollTop()+r)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var i=this.findHighlightableChoices(),n=this.highlight();n>-1&&n<i.length;){n+=t;var s=e(i[n]);if(s.hasClass("select2-result-selectable")&&!s.hasClass("select2-disabled")&&!s.hasClass("select2-selected")){this.highlight(n);break}}},highlight:function(t){var i,n,o=this.findHighlightableChoices();return 0===arguments.length?s(o.filter(".select2-highlighted")[0],o.get()):(t>=o.length&&(t=o.length-1),0>t&&(t=0),this.removeHighlight(),i=e(o[t]),i.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",i.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(i.text()),void((n=i.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(n),choice:n})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var i=e(t.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var n=this.findHighlightableChoices();this.highlight(n.index(i))}else 0==i.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),i=this.resultsPage+1,n=this,s=this.search.val(),o=this.context;0!==t.length&&t.offset().top-e.offset().top-e.height()<=this.opts.loadMorePadding&&(t.addClass("select2-active"),this.opts.query({element:this.opts.element,term:s,page:i,context:o,matcher:this.opts.matcher,callback:this.bind(function(r){n.opened()&&(n.opts.populateResults.call(this,e,r.results,{term:s,page:i,context:o}),n.postprocessResults(r,!1,!1),!0===r.more?(t.detach().appendTo(e).text(T(n.opts.formatLoadMore,n.opts.element,i+1)),window.setTimeout(function(){n.loadMoreIfNeeded()},10)):t.remove(),n.positionDropdown(),n.resultsPage=i,n.context=r.context,this.opts.element.trigger({type:"select2-loaded",items:r}))})}))},tokenize:function(){},updateResults:function(i){function n(){c.removeClass("select2-active"),h.positionDropdown(),h.liveRegion.text(d.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?d.text():h.opts.formatMatches(d.find(".select2-result-selectable").length))}function s(e){d.html(e),n()}var o,a,l,c=this.search,d=this.results,u=this.opts,h=this,p=c.val(),f=e.data(this.container,"select2-last-term");if((!0===i||!f||!r(p,f))&&(e.data(this.container,"select2-last-term",p),!0===i||!1!==this.showSearchInput&&this.opened())){l=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(o=this.data(),e.isArray(o)&&o.length>=m&&k(u.formatSelectionTooBig,"formatSelectionTooBig")))return void s("<li class='select2-selection-limit'>"+T(u.formatSelectionTooBig,u.element,m)+"</li>");if(c.val().length<u.minimumInputLength)return s(k(u.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+T(u.formatInputTooShort,u.element,c.val(),u.minimumInputLength)+"</li>":""),void(i&&this.showSearch&&this.showSearch(!0));if(u.maximumInputLength&&c.val().length>u.maximumInputLength)return void s(k(u.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+T(u.formatInputTooLong,u.element,c.val(),u.maximumInputLength)+"</li>":"");u.formatSearching&&0===this.findHighlightableChoices().length&&s("<li class='select2-searching'>"+T(u.formatSearching,u.element)+"</li>"),c.addClass("select2-active"),this.removeHighlight(),a=this.tokenize(),a!=t&&null!=a&&c.val(a),this.resultsPage=1,u.query({element:u.element,term:c.val(),page:this.resultsPage,context:null,matcher:u.matcher,callback:this.bind(function(o){var a;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(o.hasError!==t&&k(u.formatAjaxError,"formatAjaxError"))return void s("<li class='select2-ajax-error'>"+T(u.formatAjaxError,u.element,o.jqXHR,o.textStatus,o.errorThrown)+"</li>");if(this.context=o.context===t?null:o.context,this.opts.createSearchChoice&&""!==c.val()&&(a=this.opts.createSearchChoice.call(h,c.val(),o.results))!==t&&null!==a&&h.id(a)!==t&&null!==h.id(a)&&0===e(o.results).filter(function(){return r(h.id(this),h.id(a))}).length&&this.opts.createSearchChoicePosition(o.results,a),0===o.results.length&&k(u.formatNoMatches,"formatNoMatches"))return void s("<li class='select2-no-results'>"+T(u.formatNoMatches,u.element,c.val())+"</li>");d.empty(),h.opts.populateResults.call(this,d,o.results,{term:c.val(),page:this.resultsPage,context:null}),!0===o.more&&k(u.formatLoadMore,"formatLoadMore")&&(d.append("<li class='select2-more-results'>"+u.escapeMarkup(T(u.formatLoadMore,u.element,this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(o,i),n(),this.opts.element.trigger({type:"select2-loaded",items:o})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){p(this.search)},selectHighlighted:function(e){if(this._touchMoved)return void this.clearTouchMoved();var t=this.highlight(),i=this.results.find(".select2-highlighted"),n=i.closest(".select2-result").data("select2-data");n?(this.highlight(t),this.onSelect(n,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var i=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&i||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(i.text())&&""===i.val())return i}},initContainerWidth:function(){function i(){var i,n,s,o,r,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((i=this.opts.element.attr("style"))!==t)for(n=i.split(";"),o=0,r=n.length;r>o;o+=1)if(a=n[o].replace(/\s/g,""),null!==(s=a.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&s.length>=1)return s[1];return"resolve"===this.opts.width?(i=this.opts.element.css("width"),i.indexOf("%")>0?i:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var n=i.call(this);null!==n&&this.container.css("width",n)}}),O=$(A,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var i,n,s;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),i=this.search.get(0),i.createTextRange?(n=i.createTextRange(),n.collapse(!1),n.select()):i.setSelectionRange&&(s=this.search.val().length,i.setSelectionRange(s,s))),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),D.call(this,"selection","focusser")},initContainer:function(){var t,n,s=this.container,o=this.dropdown,r=N();this.showSearch(!(this.opts.minimumResultsForSearch<0)),this.selection=t=s.find(".select2-choice"),this.focusser=s.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+r),this.focusser.attr("aria-labelledby","select2-chosen-"+r),this.results.attr("id","select2-results-"+r),this.search.attr("aria-owns","select2-results-"+r),this.focusser.attr("id","s2id_autogen"+r),n=e("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(n.text()).attr("for",this.focusser.attr("id"));var a=this.opts.element.attr("title");this.opts.element.attr("title",a||n.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode){if(e.which===M.PAGE_UP||e.which===M.PAGE_DOWN)return void m(e);switch(e.which){case M.UP:case M.DOWN:return this.moveHighlight(e.which===M.UP?-1:1),void m(e);case M.ENTER:return this.selectHighlighted(),void m(e);case M.TAB:return void this.selectHighlighted({noFocus:!0});case M.ESC:return this.cancel(e),void m(e)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==M.TAB&&!M.isControl(e)&&!M.isFunctionKey(e)&&e.which!==M.ESC){if(!1===this.opts.openOnEnter&&e.which===M.ENTER)return void m(e);if(e.which==M.DOWN||e.which==M.UP||e.which==M.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void m(e)}return e.which==M.DELETE||e.which==M.BACKSPACE?(this.opts.allowClear&&this.clear(),void m(e)):void 0}})),c(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),g(e),this.close(),this.selection.focus())})),t.on("mousedown touchstart",this.bind(function(n){i(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(n)})),o.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){m(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var i=this.selection.data("select2-data");if(i){var n=e.Event("select2-clearing");if(this.opts.element.trigger(n),n.isDefaultPrevented())return;var s=this.getPlaceholderOption();this.opts.element.val(s?s.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==t&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.setPlaceholder(),e.nextSearchTerm=e.opts.nextSearchTerm(i,e.search.val()))})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()!==t&&((e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val())},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var n=e.find("option").filter(function(){return this.selected&&!this.disabled});t(i.optionToData(n))}:"data"in t&&(t.initSelection=t.initSelection||function(i,n){var s=i.val(),o=null;t.query({matcher:function(e,i,n){var a=r(s,t.id(n));return a&&(o=n),a},callback:e.isFunction(n)?function(){n(o)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,i){var n=0,s=this;if(this.findHighlightableChoices().each2(function(e,t){return r(s.id(t.data("select2-data")),s.opts.element.val())?(n=e,!1):void 0}),!1!==i&&this.highlight(!0===t&&n>=0?n:0),!0===t){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(_(e.results)>=o)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var i=this.opts.element.val(),n=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),r(i,this.id(e))||this.triggerChange({added:e,removed:n})}},updateSelection:function(e){var i,n,s=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),s.empty(),null!==e&&(i=this.opts.formatSelection(e,s,this.opts.escapeMarkup)),i!==t&&s.append(i),n=this.opts.formatSelectionCssClass(e,s),n!==t&&s.addClass(n),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,i=!1,n=null,s=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(i=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return n=s.optionToData(t),!1}),this.updateSelection(n),this.setPlaceholder(),i&&this.triggerChange({added:n,removed:o});else{if(!e&&0!==e)return void this.clear(i);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){s.opts.element.val(e?s.id(e):""),s.updateSelection(e),s.setPlaceholder(),i&&s.triggerChange({added:e,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var i,n=!1;return 0===arguments.length?(i=this.selection.data("select2-data"),i==t&&(i=null),i):(arguments.length>1&&(n=arguments[1]),void(e?(i=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),n&&this.triggerChange({added:e,removed:i})):this.clear(n)))}}),F=$(A,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var n=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){n.push(i.optionToData(t))}),t(n)}:"data"in t&&(t.initSelection=t.initSelection||function(i,n){var s=a(i.val(),t.separator),o=[];t.query({matcher:function(i,n,a){var l=e.grep(s,function(e){return r(e,t.id(a))}).length;return l&&o.push(a),l},callback:e.isFunction(n)?function(){for(var e=[],i=0;i<s.length;i++)for(var a=s[i],l=0;l<o.length;l++){var c=o[l];if(r(a,t.id(c))){e.push(c),o.splice(l,1);break}}n(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),D.call(this,"searchContainer","selection")},initContainer:function(){var t,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(i);var n=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){n.search[0].focus(),n.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+N()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var i=t.find(".select2-search-choice-focus"),n=i.prev(".select2-search-choice:not(.select2-locked)"),s=i.next(".select2-search-choice:not(.select2-locked)"),o=f(this.search);if(i.length&&(e.which==M.LEFT||e.which==M.RIGHT||e.which==M.BACKSPACE||e.which==M.DELETE||e.which==M.ENTER)){var r=i;return e.which==M.LEFT&&n.length?r=n:e.which==M.RIGHT?r=s.length?s:null:e.which===M.BACKSPACE?this.unselect(i.first())&&(this.search.width(10),r=n.length?n:s):e.which==M.DELETE?this.unselect(i.first())&&(this.search.width(10),r=s.length?s:null):e.which==M.ENTER&&(r=null),this.selectChoice(r),m(e),void(r&&r.length||this.open())}if((e.which===M.BACKSPACE&&1==this.keydowns||e.which==M.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void m(e);if(this.selectChoice(null),this.opened())switch(e.which){case M.UP:case M.DOWN:return this.moveHighlight(e.which===M.UP?-1:1),void m(e);case M.ENTER:return this.selectHighlighted(),void m(e);case M.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case M.ESC:return this.cancel(e),void m(e)}if(e.which!==M.TAB&&!M.isControl(e)&&!M.isFunctionKey(e)&&e.which!==M.BACKSPACE&&e.which!==M.ESC){if(e.which===M.ENTER){if(!1===this.opts.openOnEnter)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===M.PAGE_UP||e.which===M.PAGE_DOWN)&&m(e),e.which===M.ENTER&&m(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",i,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",i,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),i=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var i=[],n=[],o=this;e(t).each(function(){s(o.id(this),i)<0&&(i.push(o.id(this)),n.push(this))}),t=n,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,i){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),i&&i.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(i){var n,s,o=!i.locked,r=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=o?r:a,c=this.id(i),d=this.getVal();n=this.opts.formatSelection(i,l.find("div"),this.opts.escapeMarkup),n!=t&&l.find("div").replaceWith("<div>"+n+"</div>"),s=this.opts.formatSelectionCssClass(i,l.find("div")),s!=t&&l.addClass(s),o&&l.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),m(t),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",i),l.insertBefore(this.searchContainer),d.push(c),this.setVal(d)},unselect:function(t){var i,n,o=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(i=t.data("select2-data")){var r=e.Event("select2-removing");if(r.val=this.id(i),r.choice=i,this.opts.element.trigger(r),r.isDefaultPrevented())return!1;for(;(n=s(this.id(i),o))>=0;)o.splice(n,1),this.setVal(o),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}),!0}},postprocessResults:function(e,t,i){var n=this.getVal(),o=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),a=this;o.each2(function(e,t){s(a.id(t.data("select2-data")),n)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),r.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&!1!==i&&a.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&k(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+T(a.opts.formatNoMatches,a.opts.element,a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-l(this.search)},resizeSearch:function(){var e,t,i,n,s,o=l(this.search);e=v(this.search)+10,t=this.search.offset().left,i=this.selection.width(),n=this.selection.offset().left,s=i-(t-n)-o,e>s&&(s=i-o),40>s&&(s=i-o),0>=s&&(s=e),this.search.width(Math.floor(s))},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),a(e,this.opts.separator))},setVal:function(t){var i;this.select?this.select.val(t):(i=[],e(t).each(function(){s(this,i)<0&&i.push(this)}),this.opts.element.val(0===i.length?"":i.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),i=0;i<t.length;i++)for(var n=0;n<e.length;n++)r(this.opts.id(t[i]),this.opts.id(e[n]))&&(t.splice(i,1),i>0&&i--,e.splice(n,1),n--);return{added:t,removed:e}},val:function(i,n){var s,o=this;if(0===arguments.length)return this.getVal();if(s=this.data(),s.length||(s=[]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(n&&this.triggerChange({added:this.data(),removed:s}));if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),n&&this.triggerChange(this.buildChangeDetails(s,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var i=e.map(t,o.id);o.setVal(i),o.updateSelection(t),o.clearSearch(),
n&&o.triggerChange(o.buildChangeDetails(s,o.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(i.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,i){var n,s,o=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(s=this.data(),t||(t=[]),n=e.map(t,function(e){return o.opts.id(e)}),this.setVal(n),this.updateSelection(t),this.clearSearch(),void(i&&this.triggerChange(this.buildChangeDetails(s,this.data()))))}}),e.fn.select2=function(){var i,n,o,r,a,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],d=["opened","isFocused","container","dropdown"],u=["val","data"],h={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])i=0===l.length?{}:e.extend({},l[0]),i.element=e(this),"select"===i.element.get(0).tagName.toLowerCase()?a=i.element.prop("multiple"):(a=i.multiple||!1,"tags"in i&&(i.multiple=a=!0)),n=a?new window.Select2.class.multi:new window.Select2.class.single,n.init(i);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(s(l[0],c)<0)throw"Unknown method: "+l[0];if(r=t,(n=e(this).data("select2"))===t)return;if(o=l[0],"container"===o?r=n.container:"dropdown"===o?r=n.dropdown:(h[o]&&(o=h[o]),r=n[o].apply(n,l.slice(1))),s(l[0],d)>=0||s(l[0],u)>=0&&1==l.length)return!1}}),r===t?this:r},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,i,n){var s=[];return y(e.text,i.term,s,n),s.join("")},formatSelection:function(e,i,n){return e?n(e.text):t},sortResults:function(e){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},matcher:function(e,t){return n(""+t).toUpperCase().indexOf(n(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:S,escapeMarkup:w,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!(("ontouchstart"in window||navigator.msMaxTouchPoints>0)&&e.opts.minimumResultsForSearch<0)}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return""},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(e,t){var i=t-e.length;return"Please enter "+i+" or more character"+(1==i?"":"s")},formatInputTooLong:function(e,t){var i=e.length-t;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results…"},formatSearching:function(){return"Searching…"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:x,local:C,tags:E},util:{debounce:u,markMatch:y,escapeMarkup:w,stripDiacritics:n},class:{abstract:A,single:O,multi:F}}}}(jQuery),FastClick.prototype.deviceIsAndroid=0<navigator.userAgent.indexOf("Android"),FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===e.type||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},FastClick.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,t){var i,n;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),n=t.changedTouches[0],i=document.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,e.dispatchEvent(i)},FastClick.prototype.focus=function(e){var t;this.deviceIsIOS&&e.setSelectionRange?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},FastClick.prototype.updateScrollParent=function(e){var t,i;if(!(t=e.fastClickScrollParent)||!t.contains(e)){i=e;do{if(i.scrollHeight>i.offsetHeight){t=i,e.fastClickScrollParent=i;break}i=i.parentElement}while(i)}t&&(t.fastClickLastScrollTop=t.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},FastClick.prototype.onTouchStart=function(e){var t,i,n;if(1<e.targetTouches.length)return!0;if(t=this.getTargetElementFromEventTarget(e.target),i=e.targetTouches[0],this.deviceIsIOS){if(n=window.getSelection(),n.rangeCount&&!n.isCollapsed)return!0;if(!this.deviceIsIOS4){if(i.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=i.pageX,this.touchStartY=i.pageY,200>e.timeStamp-this.lastClickTime&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){return e=e.changedTouches[0],10<Math.abs(e.pageX-this.touchStartX)||10<Math.abs(e.pageY-this.touchStartY)},FastClick.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){var t,i,n;if(n=this.targetElement,this.touchHasMoved(e)&&(this.trackingClick=!1,this.targetElement=null),!this.trackingClick)return!0;if(200>e.timeStamp-this.lastClickTime)return this.cancelNextClick=!0;if(this.lastClickTime=e.timeStamp,t=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(n=e.changedTouches[0],n=document.elementFromPoint(n.pageX-window.pageXOffset,n.pageY-window.pageYOffset)),"label"===(i=n.tagName.toLowerCase())){if(t=this.findControl(n)){if(this.focus(n),this.deviceIsAndroid)return!1;n=t}}else if(this.needsFocus(n))return 100<e.timeStamp-t||this.deviceIsIOS&&window.top!==window&&"input"===i?(this.targetElement=null,!1):(this.focus(n),this.deviceIsIOS4&&"select"===i||(this.targetElement=null,e.preventDefault()),!1);return!(!this.deviceIsIOS||this.deviceIsIOS4||!(t=n.fastClickScrollParent)||t.fastClickLastScrollTop===t.scrollTop)||(this.needsClick(n)||(e.preventDefault(),this.sendClick(n,e)),!1)},FastClick.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(e){return!(this.targetElement&&!e.forwardedTouchEvent&&e.cancelable)||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))},FastClick.prototype.onClick=function(e){return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||(e=this.onMouse(e),e||(this.targetElement=null),e)},FastClick.prototype.destroy=function(){var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(e){var t;if(void 0===window.ontouchstart)return!0;if(/Chrome\/[0-9]+/.test(navigator.userAgent)){if(!FastClick.prototype.deviceIsAndroid)return!0;if((t=document.querySelector("meta[name=viewport]"))&&-1!==t.content.indexOf("user-scalable=no"))return!0}return"none"===e.style.msTouchAction},FastClick.attach=function(e){return new FastClick(e)},"undefined"!=typeof define&&define.amd?define(function(){return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,$("#main").append('<div class="demo"><span id="demo-setting"><i class="fa fa-cog txt-color-blueDark"></i></span> <form><legend class="no-padding margin-bottom-10">Admin settings</legend><section><label><input name="subscription" id="smart-fixed-header" type="checkbox" class="checkbox style-0"><span>Fixed Header</span></label><label><input type="checkbox" name="terms" id="smart-fixed-navigation" class="checkbox style-0"><span>Fixed Navigation</span></label><label><input type="checkbox" name="terms" id="smart-fixed-ribbon" class="checkbox style-0"><span>Fixed Ribbon</span></label><label><input type="checkbox" name="terms" id="smart-fixed-footer" class="checkbox style-0"><span>Fixed Footer</span></label><label><input type="checkbox" name="terms" id="smart-fixed-container" class="checkbox style-0"><span>Inside <b>.container</b></span></label><label style="display:block;"><input type="checkbox" name="terms" id="smart-rtl" class="checkbox style-0"><span>RTL Support</span></label><label style="display:block;"><input type="checkbox" id="smart-topmenu" class="checkbox style-0"><span>Menu on <b>top</b></span></label> <label style="display:block;"><input type="checkbox" id="colorblind-friendly" class="checkbox style-0"><span>For Colorblind <div class="font-xs text-right">(experimental)</div></span></label><span id="smart-bgimages"></span></section><h6 class="margin-top-10 semi-bold margin-bottom-5">Admin Skins</h6><section id="smart-styles"><a href="javascript:void(0);" id="smart-style-0" data-skinlogo="/packages/vis/builder/img/logo.png" class="btn btn-block btn-xs txt-color-white margin-right-5" style="background-color:#4E463F;"><i class="fa fa-check fa-fw" id="skin-checked"></i>Smart Default</a><a href="javascript:void(0);" id="smart-style-1" data-skinlogo="/packages/vis/builder/img/logo-white.png" class="btn btn-block btn-xs txt-color-white" style="background:#3A4558;">Dark Elegance</a><a href="javascript:void(0);" id="smart-style-2" data-skinlogo="/packages/vis/builder/img/logo-blue.png" class="btn btn-xs btn-block txt-color-darken margin-top-5" style="background:#fff;">Ultra Light</a><a href="javascript:void(0);" id="smart-style-3" data-skinlogo="/packages/vis/builder/img/logo-pale.png" class="btn btn-xs btn-block txt-color-white margin-top-5" style="background:#f78c40">Google Skin</a><a href="javascript:void(0);" id="smart-style-4" data-skinlogo="/packages/vis/builder/img/logo-pale.png" class="btn btn-xs btn-block txt-color-white margin-top-5" style="background: #bbc0cf; border: 1px solid #59779E; color: #17273D !important;">PixelSmash</a> <a href="javascript:void(0);" id="smart-style-5" data-skinlogo="/packages/vis/builder/img/logo-pale.png" class="btn btn-xs btn-block txt-color-white margin-top-5" style="background: rgba(153, 179, 204, 0.2); border: 1px solid rgba(121, 161, 221, 0.8); color: #17273D !important;">Glass</a></section></form> </div>');var smartbgimage="<h6 class='margin-top-10 semi-bold'>Background</h6><img src='img/pattern/graphy-xs.png' data-htmlbg-url='img/pattern/graphy.png' width='22' height='22' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/tileable_wood_texture-xs.png' width='22' height='22' data-htmlbg-url='img/pattern/tileable_wood_texture.png' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/sneaker_mesh_fabric-xs.png' width='22' height='22' data-htmlbg-url='img/pattern/sneaker_mesh_fabric.png' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/nistri-xs.png' data-htmlbg-url='img/pattern/nistri.png' width='22' height='22' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/paper-xs.png' data-htmlbg-url='img/pattern/paper.png' width='22' height='22' class='bordered cursor-pointer'>";$("#smart-bgimages").fadeOut(),$("#demo-setting").click(function(){$(".demo").toggleClass("activate")}),$('input[type="checkbox"]#smart-fixed-header').click(function(){$(this).is(":checked")?$.root_.addClass("fixed-header"):($('input[type="checkbox"]#smart-fixed-ribbon').prop("checked",!1),$('input[type="checkbox"]#smart-fixed-navigation').prop("checked",!1),$.root_.removeClass("fixed-header"),$.root_.removeClass("fixed-navigation"),$.root_.removeClass("fixed-ribbon"))}),$('input[type="checkbox"]#smart-fixed-navigation').click(function(){$(this).is(":checked")?($('input[type="checkbox"]#smart-fixed-header').prop("checked",!0),$.root_.addClass("fixed-header"),$.root_.addClass("fixed-navigation"),$('input[type="checkbox"]#smart-fixed-container').prop("checked",!1),$.root_.removeClass("container")):($('input[type="checkbox"]#smart-fixed-ribbon').prop("checked",!1),$.root_.removeClass("fixed-navigation"),$.root_.removeClass("fixed-ribbon"))}),$('input[type="checkbox"]#smart-fixed-ribbon').click(function(){$(this).is(":checked")?($('input[type="checkbox"]#smart-fixed-header').prop("checked",!0),$('input[type="checkbox"]#smart-fixed-navigation').prop("checked",!0),$('input[type="checkbox"]#smart-fixed-ribbon').prop("checked",!0),$.root_.addClass("fixed-header"),$.root_.addClass("fixed-navigation"),$.root_.addClass("fixed-ribbon"),$('input[type="checkbox"]#smart-fixed-container').prop("checked",!1),$.root_.removeClass("container")):$.root_.removeClass("fixed-ribbon")}),$('input[type="checkbox"]#smart-fixed-footer').click(function(){$(this).is(":checked")?$.root_.addClass("fixed-page-footer"):$.root_.removeClass("fixed-page-footer")}),$('input[type="checkbox"]#smart-rtl').click(function(){$(this).is(":checked")?$.root_.addClass("smart-rtl"):$.root_.removeClass("smart-rtl")}),$("#smart-topmenu").on("change",function(){$(this).prop("checked")?(localStorage.setItem("sm-setmenu","top"),location.reload()):(localStorage.setItem("sm-setmenu","left"),location.reload())}),"top"==localStorage.getItem("sm-setmenu")?$("#smart-topmenu").prop("checked",!0):$("#smart-topmenu").prop("checked",!1),$('input[type="checkbox"]#colorblind-friendly').click(function(){$(this).is(":checked")?$.root_.addClass("colorblind-friendly"):$.root_.removeClass("colorblind-friendly")}),$('input[type="checkbox"]#smart-fixed-container').click(function(){$(this).is(":checked")?($.root_.addClass("container"),$('input[type="checkbox"]#smart-fixed-ribbon').prop("checked",!1),$.root_.removeClass("fixed-ribbon"),$('input[type="checkbox"]#smart-fixed-navigation').prop("checked",!1),$.root_.removeClass("fixed-navigation"),smartbgimage?($("#smart-bgimages").append(smartbgimage).fadeIn(1e3),$("#smart-bgimages img").bind("click",function(){var e=$(this),t=$("html");bgurl=e.data("htmlbg-url"),t.css("background-image","url("+bgurl+")")}),smartbgimage=null):$("#smart-bgimages").fadeIn(1e3)):($.root_.removeClass("container"),$("#smart-bgimages").fadeOut())}),$("#reset-smart-widget").bind("click",function(){return $("#refresh").click(),!1}),$("#smart-styles > a").on("click",function(){var e=$(this),t=$("#logo img");$.root_.removeClassPrefix("smart-style").addClass(e.attr("id")),t.attr("src",e.data("skinlogo")),$("#smart-styles > a #skin-checked").remove(),e.prepend("<i class='fa fa-check fa-fw' id='skin-checked'></i>")}),$("#smart-styles a").click(function(){$.post("/admin/change_skin",{skin:$(this).attr("id")},function(e){})}),$("#smart-styles a").click(function(){$.post("/admin/change_skin",{skin:$(this).attr("id")},function(e){})}),function(e){"use strict";var t=function(t,i){this.options=e.extend({},e.fn.editable2form.defaults,i),this.$div=e(t),this.options.scope||(this.options.scope=this)};t.prototype={constructor:t,initInput:function(){this.input=this.options.input,this.value=this.input.str2value(this.options.value),this.input.prerender()},initTemplate:function(){this.$form=e(e.fn.editable2form.template)},initButtons:function(){var t=this.$form.find(".editable2-buttons");t.append(e.fn.editable2form.buttons),"bottom"===this.options.showbuttons&&t.addClass("editable2-buttons-bottom")},render:function(){this.$loading=e(e.fn.editable2form.loading),this.$div.empty().append(this.$loading),this.initTemplate(),this.options.showbuttons?this.initButtons():this.$form.find(".editable2-buttons").remove(),this.showLoading(),this.isSaving=!1,this.$div.triggerHandler("rendering"),this.initInput(),this.$form.find("div.editable2-input").append(this.input.$tpl),this.$div.append(this.$form),e.when(this.input.render()).then(e.proxy(function(){if(this.options.showbuttons||this.input.autosubmit(),this.$form.find(".editable2-cancel").click(e.proxy(this.cancel,this)),this.input.error)this.error(this.input.error),this.$form.find(".editable2-submit").attr("disabled",!0),this.input.$input.attr("disabled",!0),this.$form.submit(function(e){e.preventDefault()});else{this.error(!1),this.input.$input.removeAttr("disabled"),this.$form.find(".editable2-submit").removeAttr("disabled");var t=null===this.value||void 0===this.value||""===this.value?this.options.defaultValue:this.value;this.input.value2input(t),this.$form.submit(e.proxy(this.submit,this))}this.$div.triggerHandler("rendered"),this.showForm(),this.input.postrender&&this.input.postrender()},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var e,t;this.$form?(e=this.$form.outerWidth(),t=this.$form.outerHeight(),e&&this.$loading.width(e),t&&this.$loading.height(t),this.$form.hide()):(e=this.$loading.parent().width())&&this.$loading.width(e),this.$loading.show()},showForm:function(e){this.$loading.hide(),this.$form.show(),!1!==e&&this.input.activate(),this.$div.triggerHandler("show")},error:function(t){var i,n=this.$form.find(".control-group"),s=this.$form.find(".editable2-error-block");if(!1===t)n.removeClass(e.fn.editable2form.errorGroupClass),s.removeClass(e.fn.editable2form.errorBlockClass).empty().hide();else{if(t){i=t.split("\n");for(var o=0;o<i.length;o++)i[o]=e("<div>").text(i[o]).html();t=i.join("<br>")}n.addClass(e.fn.editable2form.errorGroupClass),s.addClass(e.fn.editable2form.errorBlockClass).html(t).show()}},submit:function(t){t.stopPropagation(),t.preventDefault();var i,n=this.input.input2value();if(i=this.validate(n))return this.error(i),void this.showForm();if(!this.options.savenochange&&this.input.value2str(n)==this.input.value2str(this.value))return void this.$div.triggerHandler("nochange");var s=this.input.value2submit(n);this.isSaving=!0,e.when(this.save(s)).done(e.proxy(function(e){this.isSaving=!1;var t="function"==typeof this.options.success?this.options.success.call(this.options.scope,e,n):null;return!1===t?(this.error(!1),void this.showForm(!1)):"string"==typeof t?(this.error(t),void this.showForm()):(t&&"object"==typeof t&&t.hasOwnProperty("newValue")&&(n=t.newValue),this.error(!1),this.value=n,void this.$div.triggerHandler("save",{newValue:n,submitValue:s,response:e}))},this)).fail(e.proxy(function(e){this.isSaving=!1;var t;t="function"==typeof this.options.error?this.options.error.call(this.options.scope,e,n):"string"==typeof e?e:e.responseText||e.statusText||"Unknown error!",this.error(t),this.showForm()},this))},save:function(t){this.options.pk=e.fn.editable2utils.tryParseJson(this.options.pk,!0);var i,n="function"==typeof this.options.pk?this.options.pk.call(this.options.scope):this.options.pk;return!("function"==typeof this.options.url||this.options.url&&("always"===this.options.send||"auto"===this.options.send&&null!==n&&void 0!==n))?void 0:(this.showLoading(),i={name:this.options.name||"",value:t,pk:n},"function"==typeof this.options.params?i=this.options.params.call(this.options.scope,i):(this.options.params=e.fn.editable2utils.tryParseJson(this.options.params,!0),e.extend(i,this.options.params)),"function"==typeof this.options.url?this.options.url.call(this.options.scope,i):e.ajax(e.extend({url:this.options.url,data:i,type:"POST"},this.options.ajaxOptions)))},validate:function(e){return void 0===e&&(e=this.value),"function"==typeof this.options.validate?this.options.validate.call(this.options.scope,e):void 0},option:function(e,t){e in this.options&&(this.options[e]=t),"value"===e&&this.setValue(t)},setValue:function(e,t){this.value=t?this.input.str2value(e):e,this.$form&&this.$form.is(":visible")&&this.input.value2input(this.value)}},e.fn.editable2form=function(i){var n=arguments;return this.each(function(){var s=e(this),o=s.data("editable2form"),r="object"==typeof i&&i;o||s.data("editable2form",o=new t(this,r)),"string"==typeof i&&o[i].apply(o,Array.prototype.slice.call(n,1))})},e.fn.editable2form.Constructor=t,e.fn.editable2form.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:!0,scope:null,savenochange:!1},e.fn.editable2form.template='<form class="form-inline editable2form"><div class="control-group"><div><div class="editable2-input"></div><div class="editable2-buttons"></div></div><div class="editable2-error-block"></div></div></form>',e.fn.editable2form.loading='<div class="editable2form-loading"></div>',e.fn.editable2form.buttons='<button type="submit" class="editable2-submit">ok</button><button type="button" class="editable2-cancel">cancel</button>',e.fn.editable2form.errorGroupClass=null,e.fn.editable2form.errorBlockClass="editable2-error",e.fn.editable2form.engine="jquery"}(window.jQuery),function(e){"use strict";e.fn.editable2utils={inherit:function(e,t){var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.superclass=t.prototype},setCursorPosition:function(e,t){if(e.setSelectionRange)e.setSelectionRange(t,t);else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}},tryParseJson:function(e,t){if("string"==typeof e&&e.length&&e.match(/^[\{\[].*[\}\]]$/))if(t)try{e=new Function("return "+e)()}catch(e){}finally{return e}else e=new Function("return "+e)();return e},sliceObj:function(t,i,n){var s,o,r={};if(!e.isArray(i)||!i.length)return r;for(var a=0;a<i.length;a++)s=i[a],t.hasOwnProperty(s)&&(r[s]=t[s]),!0!==n&&(o=s.toLowerCase(),t.hasOwnProperty(o)&&(r[s]=t[o]));return r},getConfigData:function(t){var i={};return e.each(t.data(),function(e,t){("object"!=typeof t||t&&"object"==typeof t&&(t.constructor===Object||t.constructor===Array))&&(i[e]=t)}),i},objectKeys:function(e){if(Object.keys)return Object.keys(e);if(e!==Object(e))throw new TypeError("Object.keys called on a non-object");var t,i=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&i.push(t);return i},escape:function(t){return e("<div>").text(t).html()},itemsByValue:function(t,i,n){if(!i||null===t)return[];if("function"!=typeof n){var s=n||"value";n=function(e){return e[s]}}var o=e.isArray(t),r=[],a=this;return e.each(i,function(i,s){if(s.children)r=r.concat(a.itemsByValue(t,s.children,n));else if(o)e.grep(t,function(e){return e==(s&&"object"==typeof s?n(s):s)}).length&&r.push(s);else{var l=s&&"object"==typeof s?n(s):s;t==l&&r.push(s)}}),r},createInput:function(t){var i,n,s=t.type;return"date"===s&&("inline"===t.mode?e.fn.editable2types.datefield?s="datefield":e.fn.editable2types.dateuifield&&(s="dateuifield"):e.fn.editable2types.date?s="date":e.fn.editable2types.dateui&&(s="dateui"),"date"!==s||e.fn.editable2types.date||(s="combodate")),"datetime"===s&&"inline"===t.mode&&(s="datetimefield"),"wysihtml5"!==s||e.fn.editable2types[s]||(s="textarea"),"function"==typeof e.fn.editable2types[s]?(i=e.fn.editable2types[s],n=this.sliceObj(t,this.objectKeys(i.defaults)),new i(n)):(e.error("Unknown type: "+s),!1)},supportsTransitions:function(){var e=document.body||document.documentElement,t=e.style,i="transition",n=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof t[i])return!0;i=i.charAt(0).toUpperCase()+i.substr(1);for(var s=0;s<n.length;s++)if("string"==typeof t[n[s]+i])return!0;return!1}}}(window.jQuery),function(e){"use strict";var t=function(e,t){this.init(e,t)},i=function(e,t){this.init(e,t)};t.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable2-container editable2-popup",defaults:{},init:function(i,n){this.$element=e(i),this.options=e.extend({},e.fn.editable2Container.defaults,n),this.splitOptions(),this.formOptions.scope=this.$element[0],this.initContainer(),this.delayedHide=!1,this.$element.on("destroyed",e.proxy(function(){this.destroy()},this)),e(document).data("editable2-handlers-attached")||(e(document).on("keyup.editable2",function(t){27===t.which&&e(".editable2-open").editable2Container("hide")}),e(document).on("click.editable2",function(i){var n,s=e(i.target),o=[".editable2-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(e.contains(document.documentElement,i.target)&&!s.is(document)){for(n=0;n<o.length;n++)if(s.is(o[n])||s.parents(o[n]).length)return;t.prototype.closeOthers(i.target)}}),e(document).data("editable2-handlers-attached",!0))},splitOptions:function(){if(this.containerOptions={},this.formOptions={},!e.fn[this.containerName])throw new Error(this.containerName+" not found. Have you included corresponding js file?");for(var t in this.options)t in this.defaults?this.containerOptions[t]=this.options[t]:this.formOptions[t]=this.options[t]},tip:function(){return this.container()?this.container().$tip:null},container:function(){var e;return this.containerDataName&&(e=this.$element.data(this.containerDataName))?e:e=this.$element.data(this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editable2form(this.formOptions).on({save:e.proxy(this.save,this),nochange:e.proxy(function(){this.hide("nochange")},this),cancel:e.proxy(function(){this.hide("cancel")},this),show:e.proxy(function(){this.delayedHide?(this.hide(this.delayedHide.reason),this.delayedHide=!1):this.setPosition()},this),rendering:e.proxy(this.setPosition,this),resize:e.proxy(this.setPosition,this),rendered:e.proxy(function(){this.$element.triggerHandler("shown",e(this.options.scope).data("editable2"))},this)}).editable2form("render")},show:function(t){this.$element.addClass("editable2-open"),!1!==t&&this.closeOthers(this.$element[0]),this.innerShow(),this.tip().addClass(this.containerClass),this.$form,this.$form=e("<div>"),this.tip().is(this.innerCss)?this.tip().append(this.$form):this.tip().find(this.innerCss).append(this.$form),this.renderForm()},hide:function(e){if(this.tip()&&this.tip().is(":visible")&&this.$element.hasClass("editable2-open")){if(this.$form.data("editable2form").isSaving)return void(this.delayedHide={reason:e});this.delayedHide=!1,this.$element.removeClass("editable2-open"),this.innerHide(),this.$element.triggerHandler("hidden",e||"manual")}},innerShow:function(){},innerHide:function(){},toggle:function(e){this.container()&&this.tip()&&this.tip().is(":visible")?this.hide():this.show(e)},setPosition:function(){},save:function(e,t){this.$element.triggerHandler("save",t),this.hide("save")},option:function(e,t){this.options[e]=t,e in this.containerOptions?(this.containerOptions[e]=t,this.setContainerOption(e,t)):(this.formOptions[e]=t,this.$form&&this.$form.editable2form("option",e,t))},setContainerOption:function(e,t){this.call("option",e,t)},destroy:function(){this.hide(),this.innerDestroy(),this.$element.off("destroyed"),this.$element.removeData("editable2Container")},innerDestroy:function(){},closeOthers:function(t){e(".editable2-open").each(function(i,n){if(n!==t&&!e(n).find(t).length){var s=e(n),o=s.data("editable2Container");o&&("cancel"===o.options.onblur?s.data("editable2Container").hide("onblur"):"submit"===o.options.onblur&&s.data("editable2Container").tip().find("form").submit())}})},activate:function(){this.tip&&this.tip().is(":visible")&&this.$form&&this.$form.data("editable2form").input.activate()}},e.fn.editable2Container=function(n){var s=arguments;return this.each(function(){var o=e(this),r="editable2Container",a=o.data(r),l="object"==typeof n&&n,c="inline"===l.mode?i:t;a||o.data(r,a=new c(this,l)),"string"==typeof n&&a[n].apply(a,Array.prototype.slice.call(s,1))})},e.fn.editable2Container.Popup=t,e.fn.editable2Container.Inline=i,e.fn.editable2Container.defaults={value:null,placement:"top",autohide:!0,onblur:"cancel",anim:!1,mode:"popup"},jQuery.event.special.destroyed={remove:function(e){e.handler&&e.handler()}}}(window.jQuery),function(e){"use strict";e.extend(e.fn.editable2Container.Inline.prototype,e.fn.editable2Container.Popup.prototype,{containerName:"editable2form",innerCss:".editable2-inline",containerClass:"editable2-container editable2-inline",initContainer:function(){this.$tip=e("<span></span>"),this.options.anim||(this.options.anim=0)},splitOptions:function(){this.containerOptions={},this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide(),this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,e.proxy(function(){this.$element.show(),this.innerDestroy()},this))},innerDestroy:function(){this.tip()&&this.tip().empty().remove()}})}(window.jQuery),function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.editable2.defaults,i,e.fn.editable2utils.getConfigData(this.$element)),this.options.selector?this.initLive():this.init(),this.options.highlight&&!e.fn.editable2utils.supportsTransitions()&&(this.options.highlight=!1)};t.prototype={constructor:t,init:function(){var t,i=!1;if(this.options.name=this.options.name||this.$element.attr("id"),this.options.scope=this.$element[0],this.input=e.fn.editable2utils.createInput(this.options),this.input){switch(void 0===this.options.value||null===this.options.value?(this.value=this.input.html2value(e.trim(this.$element.html())),i=!0):(this.options.value=e.fn.editable2utils.tryParseJson(this.options.value,!0),this.value="string"==typeof this.options.value?this.input.str2value(this.options.value):this.options.value),this.$element.addClass("editable2"),"textarea"===this.input.type&&this.$element.addClass("editable2-pre-wrapped"),"manual"!==this.options.toggle?(this.$element.addClass("editable2-click"),this.$element.on(this.options.toggle+".editable2",e.proxy(function(e){if(this.options.disabled||e.preventDefault(),"mouseenter"===this.options.toggle)this.show();else{var t="click"!==this.options.toggle;this.toggle(t)}},this))):this.$element.attr("tabindex",-1),"function"==typeof this.options.display&&(this.options.autotext="always"),this.options.autotext){case"always":t=!0;break;case"auto":t=!e.trim(this.$element.text()).length&&null!==this.value&&void 0!==this.value&&!i;break;default:t=!1}
e.when(!t||this.render()).then(e.proxy(function(){this.options.disabled?this.disable():this.enable(),this.$element.triggerHandler("init",this)},this))}},initLive:function(){var t=this.options.selector;this.options.selector=!1,this.options.autotext="never",this.$element.on(this.options.toggle+".editable2",t,e.proxy(function(t){var i=e(t.target);i.data("editable2")||(i.hasClass(this.options.emptyclass)&&i.empty(),i.editable2(this.options).trigger(t))},this))},render:function(e){return!1!==this.options.display?this.input.value2htmlFinal?this.input.value2html(this.value,this.$element[0],this.options.display,e):"function"==typeof this.options.display?this.options.display.call(this.$element[0],this.value,e):this.input.value2html(this.value,this.$element[0]):void 0},enable:function(){this.options.disabled=!1,this.$element.removeClass("editable2-disabled"),this.handleEmpty(this.isEmpty),"manual"!==this.options.toggle&&"-1"===this.$element.attr("tabindex")&&this.$element.removeAttr("tabindex")},disable:function(){this.options.disabled=!0,this.hide(),this.$element.addClass("editable2-disabled"),this.handleEmpty(this.isEmpty),this.$element.attr("tabindex",-1)},toggleDisabled:function(){this.options.disabled?this.enable():this.disable()},option:function(t,i){return t&&"object"==typeof t?void e.each(t,e.proxy(function(t,i){this.option(e.trim(t),i)},this)):(this.options[t]=i,"disabled"===t?i?this.disable():this.enable():("value"===t&&this.setValue(i),this.container&&this.container.option(t,i),void(this.input.option&&this.input.option(t,i))))},handleEmpty:function(t){!1!==this.options.display&&(this.isEmpty=void 0!==t?t:"function"==typeof this.input.isEmpty?this.input.isEmpty(this.$element):""===e.trim(this.$element.html()),this.options.disabled?this.isEmpty&&(this.$element.empty(),this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass)):this.isEmpty?(this.$element.html(this.options.emptytext),this.options.emptyclass&&this.$element.addClass(this.options.emptyclass)):this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass))},show:function(t){if(!this.options.disabled){if(this.container){if(this.container.tip().is(":visible"))return}else{var i=e.extend({},this.options,{value:this.value,input:this.input});this.$element.editable2Container(i),this.$element.on("save.internal",e.proxy(this.save,this)),this.container=this.$element.data("editable2Container")}this.container.show(t)}},hide:function(){this.container&&this.container.hide()},toggle:function(e){this.container&&this.container.tip().is(":visible")?this.hide():this.show(e)},save:function(e,t){if(this.options.unsavedclass){var i=!1;i=i||"function"==typeof this.options.url,i=i||!1===this.options.display,i=i||void 0!==t.response,i=i||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(t.newValue),i?this.$element.removeClass(this.options.unsavedclass):this.$element.addClass(this.options.unsavedclass)}if(this.options.highlight){var n=this.$element,s=n.css("background-color");n.css("background-color",this.options.highlight),setTimeout(function(){"transparent"===s&&(s=""),n.css("background-color",s),n.addClass("editable2-bg-transition"),setTimeout(function(){n.removeClass("editable2-bg-transition")},1700)},10)}this.setValue(t.newValue,!1,t.response)},validate:function(){return"function"==typeof this.options.validate?this.options.validate.call(this,this.value):void 0},setValue:function(t,i,n){this.value=i?this.input.str2value(t):t,this.container&&this.container.option("value",this.value),e.when(this.render(n)).then(e.proxy(function(){this.handleEmpty()},this))},activate:function(){this.container&&this.container.activate()},destroy:function(){this.disable(),this.container&&this.container.destroy(),this.input.destroy(),"manual"!==this.options.toggle&&(this.$element.removeClass("editable2-click"),this.$element.off(this.options.toggle+".editable2")),this.$element.off("save.internal"),this.$element.removeClass("editable2 editable2-open editable2-disabled"),this.$element.removeData("editable2")}},e.fn.editable2=function(i){var n={},s=arguments,o="editable2";switch(i){case"validate":return this.each(function(){var t,i=e(this),s=i.data(o);s&&(t=s.validate())&&(n[s.options.name]=t)}),n;case"getValue":return 2===arguments.length&&!0===arguments[1]?n=this.eq(0).data(o).value:this.each(function(){var t=e(this),i=t.data(o);i&&void 0!==i.value&&null!==i.value&&(n[i.options.name]=i.input.value2submit(i.value))}),n;case"submit":var r,a=arguments[1]||{},l=this,c=this.editable2("validate");return e.isEmptyObject(c)?(r=this.editable2("getValue"),a.data&&e.extend(r,a.data),e.ajax(e.extend({url:a.url,data:r,type:"POST"},a.ajaxOptions)).success(function(e){"function"==typeof a.success&&a.success.call(l,e,a)}).error(function(){"function"==typeof a.error&&a.error.apply(l,arguments)})):"function"==typeof a.error&&a.error.call(l,c),this}return this.each(function(){var n=e(this),r=n.data(o),a="object"==typeof i&&i;return a&&a.selector?void(r=new t(this,a)):(r||n.data(o,r=new t(this,a)),void("string"==typeof i&&r[i].apply(r,Array.prototype.slice.call(s,1))))})},e.fn.editable2.defaults={type:"text",disabled:!1,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable2-empty",unsavedclass:"editable2-unsaved",selector:null,highlight:"#FFFF80"}}(window.jQuery),function(e){"use strict";e.fn.editable2types={};var t=function(){};t.prototype={init:function(t,i,n){this.type=t,this.options=e.extend({},n,i)},prerender:function(){this.$tpl=e(this.options.tpl),this.$input=this.$tpl,this.$clear=null,this.error=null},render:function(){},value2html:function(t,i){e(i)[this.options.escape?"text":"html"](e.trim(t))},html2value:function(t){return e("<div>").html(t).text()},value2str:function(e){return e},str2value:function(e){return e},value2submit:function(e){return e},value2input:function(e){this.$input.val(e)},input2value:function(){return this.$input.val()},activate:function(){this.$input.is(":visible")&&this.$input.focus()},clear:function(){this.$input.val(null)},escape:function(t){return e("<div>").text(t).html()},autosubmit:function(){},destroy:function(){},setClass:function(){this.options.inputclass&&this.$input.addClass(this.options.inputclass)},setAttr:function(e){void 0!==this.options[e]&&null!==this.options[e]&&this.$input.attr(e,this.options[e])},option:function(e,t){this.options[e]=t}},t.defaults={tpl:"",inputclass:null,escape:!0,scope:null,showbuttons:!0},e.extend(e.fn.editable2types,{abstractinput:t})}(window.jQuery),function(e){"use strict";var t=function(){};e.fn.editable2utils.inherit(t,e.fn.editable2types.abstractinput),e.extend(t.prototype,{render:function(){var t=e.Deferred();return this.error=null,this.onSourceReady(function(){this.renderList(),t.resolve()},function(){this.error=this.options.sourceError,t.resolve()}),t.promise()},html2value:function(){return null},value2html:function(t,i,n,s){var o=e.Deferred(),r=function(){"function"==typeof n?n.call(i,t,this.sourceData,s):this.value2htmlFinal(t,i),o.resolve()};return null===t?r.call(this):this.onSourceReady(r,function(){o.resolve()}),o.promise()},onSourceReady:function(t,i){var n;if(e.isFunction(this.options.source)?(n=this.options.source.call(this.options.scope),this.sourceData=null):n=this.options.source,this.options.sourceCache&&e.isArray(this.sourceData))return void t.call(this);try{n=e.fn.editable2utils.tryParseJson(n,!1)}catch(e){return void i.call(this)}if("string"==typeof n){if(this.options.sourceCache){var s,o=n;if(e(document).data(o)||e(document).data(o,{}),s=e(document).data(o),!1===s.loading&&s.sourceData)return this.sourceData=s.sourceData,this.doPrepend(),void t.call(this);if(!0===s.loading)return s.callbacks.push(e.proxy(function(){this.sourceData=s.sourceData,this.doPrepend(),t.call(this)},this)),void s.err_callbacks.push(e.proxy(i,this));s.loading=!0,s.callbacks=[],s.err_callbacks=[]}var r=e.extend({url:n,type:"get",cache:!1,dataType:"json",success:e.proxy(function(n){s&&(s.loading=!1),this.sourceData=this.makeArray(n),e.isArray(this.sourceData)?(s&&(s.sourceData=this.sourceData,e.each(s.callbacks,function(){this.call()})),this.doPrepend(),t.call(this)):(i.call(this),s&&e.each(s.err_callbacks,function(){this.call()}))},this),error:e.proxy(function(){i.call(this),s&&(s.loading=!1,e.each(s.err_callbacks,function(){this.call()}))},this)},this.options.sourceOptions);e.ajax(r)}else this.sourceData=this.makeArray(n),e.isArray(this.sourceData)?(this.doPrepend(),t.call(this)):i.call(this)},doPrepend:function(){null!==this.options.prepend&&void 0!==this.options.prepend&&(e.isArray(this.prependData)||(e.isFunction(this.options.prepend)&&(this.options.prepend=this.options.prepend.call(this.options.scope)),this.options.prepend=e.fn.editable2utils.tryParseJson(this.options.prepend,!0),"string"==typeof this.options.prepend&&(this.options.prepend={"":this.options.prepend}),this.prependData=this.makeArray(this.options.prepend)),e.isArray(this.prependData)&&e.isArray(this.sourceData)&&(this.sourceData=this.prependData.concat(this.sourceData)))},renderList:function(){},value2htmlFinal:function(){},makeArray:function(t){var i,n,s,o,r=[];if(!t||"string"==typeof t)return null;if(e.isArray(t)){o=function(e,t){return n={value:e,text:t},!(i++>=2)&&void 0};for(var a=0;a<t.length;a++)s=t[a],"object"==typeof s?(i=0,e.each(s,o),1===i?r.push(n):i>1&&(s.children&&(s.children=this.makeArray(s.children)),r.push(s))):r.push({value:s,text:s})}else e.each(t,function(e,t){r.push({value:e,text:t})});return r},option:function(e,t){this.options[e]=t,"source"===e&&(this.sourceData=null),"prepend"===e&&(this.prependData=null)}}),t.defaults=e.extend({},e.fn.editable2types.abstractinput.defaults,{source:null,prepend:!1,sourceError:"Error when loading list",sourceCache:!0,sourceOptions:null}),e.fn.editable2types.list=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("text",e,t.defaults)};e.fn.editable2utils.inherit(t,e.fn.editable2types.abstractinput),e.extend(t.prototype,{render:function(){this.renderClear(),this.setClass(),this.setAttr("placeholder")},activate:function(){this.$input.is(":visible")&&(this.$input.focus(),e.fn.editable2utils.setCursorPosition(this.$input.get(0),this.$input.val().length),this.toggleClear&&this.toggleClear())},renderClear:function(){this.options.clear&&(this.$clear=e('<span class="editable2-clear-x"></span>'),this.$input.after(this.$clear).css("padding-right",24).keyup(e.proxy(function(t){if(!~e.inArray(t.keyCode,[40,38,9,13,27])){clearTimeout(this.t);var i=this;this.t=setTimeout(function(){i.toggleClear(t)},100)}},this)).parent().css("position","relative"),this.$clear.click(e.proxy(this.clear,this)))},postrender:function(){},toggleClear:function(){if(this.$clear){var e=this.$input.val().length,t=this.$clear.is(":visible");e&&!t&&this.$clear.show(),!e&&t&&this.$clear.hide()}},clear:function(){this.$clear.hide(),this.$input.val("").focus()}}),t.defaults=e.extend({},e.fn.editable2types.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:!0}),e.fn.editable2types.text=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("textarea",e,t.defaults)};e.fn.editable2utils.inherit(t,e.fn.editable2types.abstractinput),e.extend(t.prototype,{render:function(){this.setClass(),this.setAttr("placeholder"),this.setAttr("rows"),this.$input.keydown(function(t){t.ctrlKey&&13===t.which&&e(this).closest("form").submit()})},activate:function(){e.fn.editable2types.text.prototype.activate.call(this)}}),t.defaults=e.extend({},e.fn.editable2types.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7}),e.fn.editable2types.textarea=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("select",e,t.defaults)};e.fn.editable2utils.inherit(t,e.fn.editable2types.list),e.extend(t.prototype,{renderList:function(){this.$input.empty();var t=function(i,n){var s;if(e.isArray(n))for(var o=0;o<n.length;o++)s={},n[o].children?(s.label=n[o].text,i.append(t(e("<optgroup>",s),n[o].children))):(s.value=n[o].value,n[o].disabled&&(s.disabled=!0),i.append(e("<option>",s).text(n[o].text)));return i};t(this.$input,this.sourceData),this.setClass(),this.$input.on("keydown.editable2",function(t){13===t.which&&e(this).closest("form").submit()})},value2htmlFinal:function(t,i){var n="",s=e.fn.editable2utils.itemsByValue(t,this.sourceData);s.length&&(n=s[0].text),e.fn.editable2types.abstractinput.prototype.value2html.call(this,n,i)},autosubmit:function(){this.$input.off("keydown.editable2").on("change.editable2",function(){e(this).closest("form").submit()})}}),t.defaults=e.extend({},e.fn.editable2types.list.defaults,{tpl:"<select></select>"}),e.fn.editable2types.select=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("checklist",e,t.defaults)};e.fn.editable2utils.inherit(t,e.fn.editable2types.list),e.extend(t.prototype,{renderList:function(){var t;if(this.$tpl.empty(),e.isArray(this.sourceData)){for(var i=0;i<this.sourceData.length;i++)t=e("<label>").append(e("<input>",{type:"checkbox",value:this.sourceData[i].value})).append(e("<span>").text(" "+this.sourceData[i].text)),e("<div>").append(t).appendTo(this.$tpl);this.$input=this.$tpl.find('input[type="checkbox"]'),this.setClass()}},value2str:function(t){return e.isArray(t)?t.sort().join(e.trim(this.options.separator)):""},str2value:function(t){var i,n=null;return"string"==typeof t&&t.length?(i=new RegExp("\\s*"+e.trim(this.options.separator)+"\\s*"),n=t.split(i)):n=e.isArray(t)?t:[t],n},value2input:function(t){this.$input.prop("checked",!1),e.isArray(t)&&t.length&&this.$input.each(function(i,n){var s=e(n);e.each(t,function(e,t){s.val()==t&&s.prop("checked",!0)})})},input2value:function(){var t=[];return this.$input.filter(":checked").each(function(i,n){t.push(e(n).val())}),t},value2htmlFinal:function(t,i){var n=[],s=e.fn.editable2utils.itemsByValue(t,this.sourceData),o=this.options.escape;s.length?(e.each(s,function(t,i){var s=o?e.fn.editable2utils.escape(i.text):i.text;n.push(s)}),e(i).html(n.join("<br>"))):e(i).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(t){13===t.which&&e(this).closest("form").submit()})}}),t.defaults=e.extend({},e.fn.editable2types.list.defaults,{tpl:'<div class="editable2-checklist"></div>',inputclass:null,separator:","}),e.fn.editable2types.checklist=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("password",e,t.defaults)};e.fn.editable2utils.inherit(t,e.fn.editable2types.text),e.extend(t.prototype,{value2html:function(t,i){t?e(i).text("[hidden]"):e(i).empty()},html2value:function(){return null}}),t.defaults=e.extend({},e.fn.editable2types.text.defaults,{tpl:'<input type="password">'}),e.fn.editable2types.password=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("email",e,t.defaults)};e.fn.editable2utils.inherit(t,e.fn.editable2types.text),t.defaults=e.extend({},e.fn.editable2types.text.defaults,{tpl:'<input type="email">'}),e.fn.editable2types.email=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("url",e,t.defaults)};e.fn.editable2utils.inherit(t,e.fn.editable2types.text),t.defaults=e.extend({},e.fn.editable2types.text.defaults,{tpl:'<input type="url">'}),e.fn.editable2types.url=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("tel",e,t.defaults)};e.fn.editable2utils.inherit(t,e.fn.editable2types.text),t.defaults=e.extend({},e.fn.editable2types.text.defaults,{tpl:'<input type="tel">'}),e.fn.editable2types.tel=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("number",e,t.defaults)};e.fn.editable2utils.inherit(t,e.fn.editable2types.text),e.extend(t.prototype,{render:function(){t.superclass.render.call(this),this.setAttr("min"),this.setAttr("max"),this.setAttr("step")},postrender:function(){this.$clear&&this.$clear.css({right:24})}}),t.defaults=e.extend({},e.fn.editable2types.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null}),e.fn.editable2types.number=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("range",e,t.defaults)};e.fn.editable2utils.inherit(t,e.fn.editable2types.number),e.extend(t.prototype,{render:function(){this.$input=this.$tpl.filter("input"),this.setClass(),this.setAttr("min"),this.setAttr("max"),this.setAttr("step"),this.$input.on("input",function(){e(this).siblings("output").text(e(this).val())})},activate:function(){this.$input.focus()}}),t.defaults=e.extend({},e.fn.editable2types.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"}),e.fn.editable2types.range=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("time",e,t.defaults)};e.fn.editable2utils.inherit(t,e.fn.editable2types.abstractinput),e.extend(t.prototype,{render:function(){this.setClass()}}),t.defaults=e.extend({},e.fn.editable2types.abstractinput.defaults,{tpl:'<input type="time">'}),e.fn.editable2types.time=t}(window.jQuery),function(e){"use strict";var t=function(i){if(this.init("select2",i,t.defaults),i.select2=i.select2||{},this.sourceData=null,i.placeholder&&(i.select2.placeholder=i.placeholder),!i.select2.tags&&i.source){var n=i.source;e.isFunction(i.source)&&(n=i.source.call(i.scope)),"string"==typeof n?(i.select2.ajax=i.select2.ajax||{},i.select2.ajax.data||(i.select2.ajax.data=function(e){return{query:e}}),i.select2.ajax.results||(i.select2.ajax.results=function(e){return{results:e}}),i.select2.ajax.url=n):(this.sourceData=this.convertSource(n),i.select2.data=this.sourceData)}if(this.options.select2=e.extend({},t.defaults.select2,i.select2),this.isMultiple=this.options.select2.tags||this.options.select2.multiple,this.isRemote="ajax"in this.options.select2,this.idFunc=this.options.select2.id,"function"!=typeof this.idFunc){var s=this.idFunc||"id";this.idFunc=function(e){return e[s]}}this.formatSelection=this.options.select2.formatSelection,"function"!=typeof this.formatSelection&&(this.formatSelection=function(e){return e.text})};e.fn.editable2utils.inherit(t,e.fn.editable2types.abstractinput),e.extend(t.prototype,{render:function(){this.setClass(),this.isRemote&&this.$input.on("select2-loaded",e.proxy(function(e){this.sourceData=e.items.results},this)),this.isMultiple&&this.$input.on("change",function(){e(this).closest("form").parent().triggerHandler("resize")})},value2html:function(i,n){var s,o="",r=this;this.options.select2.tags?s=i:this.sourceData&&(s=e.fn.editable2utils.itemsByValue(i,this.sourceData,this.idFunc)),e.isArray(s)?(o=[],e.each(s,function(e,t){o.push(t&&"object"==typeof t?r.formatSelection(t):t)})):s&&(o=r.formatSelection(s)),o=e.isArray(o)?o.join(this.options.viewseparator):o,t.superclass.value2html.call(this,o,n)},html2value:function(e){return this.options.select2.tags?this.str2value(e,this.options.viewseparator):null},value2input:function(t){if(this.$input.data("select2")?this.$input.val(t).trigger("change",!0):(this.$input.val(t),this.$input.select2(this.options.select2)),this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var i=this.options.select2.id,n=this.options.select2.formatSelection;if(!i&&!n){var s={id:t,text:e(this.options.scope).text()};this.$input.select2("data",s)}}},input2value:function(){return this.$input.select2("val")},str2value:function(t,i){if("string"!=typeof t||!this.isMultiple)return t;i=i||this.options.select2.separator||e.fn.select2.defaults.separator;var n,s,o;if(null===t||t.length<1)return null;for(n=t.split(i),s=0,o=n.length;o>s;s+=1)n[s]=e.trim(n[s]);return n},autosubmit:function(){this.$input.on("change",function(t,i){i||e(this).closest("form").submit()})},convertSource:function(t){if(e.isArray(t)&&t.length&&void 0!==t[0].value)for(var i=0;i<t.length;i++)void 0!==t[i].value&&(t[i].id=t[i].value,delete t[i].value);return t},destroy:function(){this.$input.data("select2")&&this.$input.select2("destroy")}}),t.defaults=e.extend({},e.fn.editable2types.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "}),e.fn.editable2types.select2=t}(window.jQuery),function(e){var t=function(t,i){return this.$element=e(t),this.$element.is("input")?(this.options=e.extend({},e.fn.combodate.defaults,i,this.$element.data()),void this.init()):void e.error("Combodate should be applied to INPUT element")};t.prototype={constructor:t,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=e('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.$widget.on("change","select",e.proxy(function(){this.$element.val(this.getValue())},this)),this.$widget.find("select").css("width","auto"),this.$element.hide().after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var t=this.options.template;return e.each(this.map,function(e,i){i=i[0];var n=new RegExp(i+"+"),s=i.length>1?i.substring(1,2):i;t=t.replace(n,"{"+s+"}")}),t=t.replace(/ /g,"&nbsp;"),e.each(this.map,function(e,i){i=i[0];var n=i.length>1?i.substring(1,2):i;t=t.replace("{"+n+"}",'<select class="'+e+'"></select>')}),t},initCombos:function(){var t=this;e.each(this.map,function(e){var i,n,s=t.$widget.find("."+e);s.length&&(t["$"+e]=s,i="fill"+e.charAt(0).toUpperCase()+e.slice(1),n=t[i](),t["$"+e].html(t.renderItems(n)))})},initItems:function(e){var t,i=[];if("name"===this.options.firstItem){t=moment.relativeTime||moment.langData()._relativeTime;var n="function"==typeof t[e]?t[e](1,!0,e,!1):t[e];n=n.split(" ").reverse()[0],i.push(["",n])}else"empty"===this.options.firstItem&&i.push(["",""]);return i},renderItems:function(e){for(var t=[],i=0;i<e.length;i++)t.push('<option value="'+e[i][0]+'">'+e[i][1]+"</option>");return t.join("\n")},fillDay:function(){var e,t,i=this.initItems("d"),n=-1!==this.options.template.indexOf("DD");for(t=1;31>=t;t++)e=n?this.leadZero(t):t,i.push([t,e]);return i},fillMonth:function(){var e,t,i=this.initItems("M"),n=-1!==this.options.template.indexOf("MMMM"),s=-1!==this.options.template.indexOf("MMM"),o=-1!==this.options.template.indexOf("MM");for(t=0;11>=t;t++)e=n?moment().date(1).month(t).format("MMMM"):s?moment().date(1).month(t).format("MMM"):o?this.leadZero(t+1):t+1,i.push([t,e]);return i},fillYear:function(){var e,t,i=[],n=-1!==this.options.template.indexOf("YYYY");for(t=this.options.maxYear;t>=this.options.minYear;t--)e=n?t:(t+"").substring(2),i[this.options.yearDescending?"push":"unshift"]([t,e]);return i=this.initItems("y").concat(i)},fillHour:function(){var e,t,i=this.initItems("h"),n=-1!==this.options.template.indexOf("h"),s=(this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),o=n?1:0,r=n?12:23;for(t=o;r>=t;t++)e=s?this.leadZero(t):t,i.push([t,e]);return i},fillMinute:function(){var e,t,i=this.initItems("m"),n=-1!==this.options.template.indexOf("mm");for(t=0;59>=t;t+=this.options.minuteStep)e=n?this.leadZero(t):t,i.push([t,e]);return i},fillSecond:function(){var e,t,i=this.initItems("s"),n=-1!==this.options.template.indexOf("ss");for(t=0;59>=t;t+=this.options.secondStep)e=n?this.leadZero(t):t,i.push([t,e]);return i},fillAmpm:function(){var e=-1!==this.options.template.indexOf("a");return this.options.template.indexOf("A"),[["am",e?"am":"AM"],["pm",e?"pm":"PM"]]},getValue:function(t){var i,n={},s=this,o=!1;return e.each(this.map,function(e){if("ampm"!==e){var t="day"===e?1:0;return n[e]=s["$"+e]?parseInt(s["$"+e].val(),10):t,isNaN(n[e])?(o=!0,!1):void 0}}),o?"":(this.$ampm&&(n.hour=12===n.hour?"am"===this.$ampm.val()?0:12:"am"===this.$ampm.val()?n.hour:n.hour+12),i=moment([n.year,n.month,n.day,n.hour,n.minute,n.second]),this.highlight(i),t=void 0===t?this.options.format:t,null===t?i.isValid()?i:null:i.isValid()?i.format(t):"")},setValue:function(t){function i(t,i){var n={};return t.children("option").each(function(t,s){var o,r=e(s).attr("value");""!==r&&(o=Math.abs(r-i),(void 0===n.distance||o<n.distance)&&(n={value:r,distance:o}))}),n.value}if(t){var n="string"==typeof t?moment(t,this.options.format):moment(t),s=this,o={};n.isValid()&&(e.each(this.map,function(e,t){"ampm"!==e&&(o[e]=n[t[1]]())}),this.$ampm&&(o.hour>=12?(o.ampm="pm",o.hour>12&&(o.hour-=12)):(o.ampm="am",0===o.hour&&(o.hour=12))),e.each(o,function(e,t){s["$"+e]&&("minute"===e&&s.options.minuteStep>1&&s.options.roundTime&&(t=i(s["$"+e],t)),"second"===e&&s.options.secondStep>1&&s.options.roundTime&&(t=i(s["$"+e],t)),s["$"+e].val(t))}),this.$element.val(n.format(this.options.format)))}},highlight:function(e){e.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(e){return 9>=e?"0"+e:e},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},e.fn.combodate=function(i){var n,s=Array.apply(null,arguments);return s.shift(),"getValue"===i&&this.length&&(n=this.eq(0).data("combodate"))?n.getValue.apply(n,s):this.each(function(){var n=e(this),o=n.data("combodate"),r="object"==typeof i&&i;o||n.data("combodate",o=new t(this,r)),"string"==typeof i&&"function"==typeof o[i]&&o[i].apply(o,s)})},e.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:!0}}(window.jQuery),function(e){"use strict";var t=function(i){this.init("combodate",i,t.defaults),this.options.viewformat||(this.options.viewformat=this.options.format),i.combodate=e.fn.editable2utils.tryParseJson(i.combodate,!0),this.options.combodate=e.extend({},t.defaults.combodate,i.combodate,{format:this.options.format,template:this.options.template})};e.fn.editable2utils.inherit(t,e.fn.editable2types.abstractinput),e.extend(t.prototype,{render:function(){this.$input.combodate(this.options.combodate),"bs3"===e.fn.editable2form.engine&&this.$input.siblings().find("select").addClass("form-control"),this.options.inputclass&&this.$input.siblings().find("select").addClass(this.options.inputclass)},value2html:function(e,i){var n=e?e.format(this.options.viewformat):"";t.superclass.value2html.call(this,n,i)},html2value:function(e){return e?moment(e,this.options.viewformat):null},value2str:function(e){return e?e.format(this.options.format):""},str2value:function(e){return e?moment(e,this.options.format):null},value2submit:function(e){return this.value2str(e)},value2input:function(e){this.$input.combodate("setValue",e)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}}),t.defaults=e.extend({},e.fn.editable2types.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null}),e.fn.editable2types.combodate=t}(window.jQuery),function(e){"use strict";var t=e.fn.editable2form.Constructor.prototype.initInput;e.extend(e.fn.editable2form.Constructor.prototype,{initTemplate:function(){this.$form=e(e.fn.editable2form.template),this.$form.find(".control-group").addClass("form-group"),this.$form.find(".editable2-error-block").addClass("help-block")},initInput:function(){t.apply(this);var i=null===this.input.options.inputclass||!1===this.input.options.inputclass,n="input-sm",s="text,select,textarea,password,email,url,tel,number,range,time,typeaheadjs".split(",");~e.inArray(this.input.type,s)&&(this.input.$input.addClass("form-control"),i&&(this.input.options.inputclass=n,this.input.$input.addClass(n)));for(var o=this.$form.find(".editable2-buttons"),r=i?[n]:this.input.options.inputclass.split(" "),a=0;a<r.length;a++)"input-lg"===r[a].toLowerCase()&&o.find("button").removeClass("btn-sm").addClass("btn-lg")}}),e.fn.editable2form.buttons='<button type="submit" class="btn btn-primary btn-sm editable2-submit"><i class="glyphicon glyphicon-ok"></i></button><button type="button" class="btn btn-default btn-sm editable2-cancel"><i class="glyphicon glyphicon-remove"></i></button>',e.fn.editable2form.errorGroupClass="has-error",e.fn.editable2form.errorBlockClass=null,e.fn.editable2form.engine="bs3"}(window.jQuery),function(e){"use strict";e.extend(e.fn.editable2Container.Popup.prototype,{containerName:"popover",containerDataName:"bs.popover",innerCss:".popover-content",defaults:e.fn.popover.Constructor.DEFAULTS,initContainer:function(){e.extend(this.containerOptions,{trigger:"manual",selector:!1,content:" ",template:this.defaults.template});var t;this.$element.data("template")&&(t=this.$element.data("template"),this.$element.removeData("template")),this.call(this.containerOptions),t&&this.$element.data("template",t)},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(e,t){this.container().options[e]=t},setPosition:function(){(function(){var e=this.tip(),t="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,i=this.getPosition(),n=e[0].offsetWidth,s=e[0].offsetHeight,o=this.getCalculatedOffset(t,i,n,s);this.applyPlacement(o,t)}).call(this.container())}})}(window.jQuery),function(e){function t(){return new Date(Date.UTC.apply(Date,arguments))}function i(t,i){var n,s=e(t).data(),o={},r=new RegExp("^"+i.toLowerCase()+"([A-Z])"),i=new RegExp("^"+i.toLowerCase());for(var a in s)i.test(a)&&(n=a.replace(r,function(e,t){return t.toLowerCase()}),o[n]=s[a]);return o}function n(t){var i={};if(d[t]||(t=t.split("-")[0],d[t])){var n=d[t];return e.each(c,function(e,t){t in n&&(i[t]=n[t])}),i}}var s=function(t,i){this._process_options(i),this.element=e(t),this.isInline=!1,this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".add-on, .btn"),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=e(u.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this.o.startDate),this.setEndDate(this.o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};s.prototype={constructor:s,_process_options:function(t){this._o=e.extend({},this._o,t);var i=this.o=e.extend({},this._o),n=i.language;switch(d[n]||(n=n.split("-")[0],d[n]||(n=l.language)),i.language=n,i.startView){case 2:case"decade":i.startView=2;break;case 1:case"year":i.startView=1;break;default:i.startView=0}switch(i.minViewMode){case 1:case"months":i.minViewMode=1;break;case 2:case"years":i.minViewMode=2;break;default:i.minViewMode=0}i.startView=Math.max(i.startView,i.minViewMode),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var s=u.parseFormat(i.format);i.startDate!==-1/0&&(i.startDate=u.parseDate(i.startDate,s,i.language)),1/0!==i.endDate&&(i.endDate=u.parseDate(i.endDate,s,i.language)),i.daysOfWeekDisabled=i.daysOfWeekDisabled||[],e.isArray(i.daysOfWeekDisabled)||(i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/)),
i.daysOfWeekDisabled=e.map(i.daysOfWeekDisabled,function(e){return parseInt(e,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var t,i,n=0;n<e.length;n++)t=e[n][0],i=e[n][1],t.on(i)},_unapplyEvents:function(e){for(var t,i,n=0;n<e.length;n++)t=e[n][0],i=e[n][1],t.off(i)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{mousedown:e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).size()||this.picker.is(e.target)||this.picker.find(e.target).size()||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,i){var n=i||this.date,s=new Date(n.getTime()+6e4*n.getTimezoneOffset());this.element.trigger({type:t,date:s,format:e.proxy(function(e){var t=e||this.o.format;return u.formatDate(n,t,this.o.language)},this)})},show:function(e){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),this._attachSecondaryEvents(),e&&e.preventDefault(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},getDate:function(){var e=this.getUTCDate();return new Date(e.getTime()+6e4*e.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(e){this.setUTCDate(new Date(e.getTime()-6e4*e.getTimezoneOffset()))},setUTCDate:function(e){this.date=e,this.setValue()},setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e):this.component&&this.element.find("input").val(e)},getFormattedDate:function(e){return void 0===e&&(e=this.o.format),u.formatDate(this.date,e,this.o.language)},setStartDate:function(e){this._process_options({startDate:e}),this.update(),this.updateNavArrows()},setEndDate:function(e){this._process_options({endDate:e}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var t=parseInt(this.element.parents().filter(function(){return"auto"!=e(this).css("z-index")}).first().css("z-index"))+10,i=this.component?this.component.parent().offset():this.element.offset(),n=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:i.top+n,left:i.left,zIndex:t})}},_allow_update:!0,update:function(){if(this._allow_update){var e,t=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(e=arguments[0],t=!0):(e=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date),this.date=u.parseDate(e,this.o.format,this.o.language),t&&this.setValue(),this.viewDate=new Date(this.date<this.o.startDate?this.o.startDate:this.date>this.o.endDate?this.o.endDate:this.date),this.fill()}},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){var i='<th class="cw">&nbsp;</th>';t+=i,this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}for(;e<this.o.weekStart+7;)t+='<th class="dow">'+d[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=0;12>t;)e+='<span class="month">'+d[this.o.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(t){t&&t.length?this.range=e.map(t,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var i=[],n=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),o=this.date.valueOf(),r=new Date;return t.getUTCFullYear()<n||t.getUTCFullYear()==n&&t.getUTCMonth()<s?i.push("old"):(t.getUTCFullYear()>n||t.getUTCFullYear()==n&&t.getUTCMonth()>s)&&i.push("new"),this.o.todayHighlight&&t.getUTCFullYear()==r.getFullYear()&&t.getUTCMonth()==r.getMonth()&&t.getUTCDate()==r.getDate()&&i.push("today"),o&&t.valueOf()==o&&i.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled))&&i.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),-1!=e.inArray(t.valueOf(),this.range)&&i.push("selected")),i},fill:function(){var i,n=new Date(this.viewDate),s=n.getUTCFullYear(),o=n.getUTCMonth(),r=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,a=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,l=1/0!==this.o.endDate?this.o.endDate.getUTCFullYear():1/0,c=1/0!==this.o.endDate?this.o.endDate.getUTCMonth():1/0;this.date&&this.date.valueOf(),this.picker.find(".datepicker-days thead th.datepicker-switch").text(d[this.o.language].months[o]+" "+s),this.picker.find("tfoot th.today").text(d[this.o.language].today).toggle(!1!==this.o.todayBtn),this.picker.find("tfoot th.clear").text(d[this.o.language].clear).toggle(!1!==this.o.clearBtn),this.updateNavArrows(),this.fillMonths();var h=t(s,o-1,28,0,0,0,0),p=u.getDaysInMonth(h.getUTCFullYear(),h.getUTCMonth());h.setUTCDate(p),h.setUTCDate(p-(h.getUTCDay()-this.o.weekStart+7)%7);var f=new Date(h);f.setUTCDate(f.getUTCDate()+42),f=f.valueOf();for(var m,g=[];h.valueOf()<f;){if(h.getUTCDay()==this.o.weekStart&&(g.push("<tr>"),this.o.calendarWeeks)){var v=new Date(+h+(this.o.weekStart-h.getUTCDay()-7)%7*864e5),b=new Date(+v+(11-v.getUTCDay())%7*864e5),y=new Date(+(y=t(b.getUTCFullYear(),0,1))+(11-y.getUTCDay())%7*864e5),w=(b-y)/864e5/7+1;g.push('<td class="cw">'+w+"</td>")}m=this.getClassNames(h),m.push("day");var x=this.o.beforeShowDay(h);void 0===x?x={}:"boolean"==typeof x?x={enabled:x}:"string"==typeof x&&(x={classes:x}),!1===x.enabled&&m.push("disabled"),x.classes&&(m=m.concat(x.classes.split(/\s+/))),x.tooltip&&(i=x.tooltip),m=e.unique(m),g.push('<td class="'+m.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+h.getUTCDate()+"</td>"),h.getUTCDay()==this.o.weekEnd&&g.push("</tr>"),h.setUTCDate(h.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(g.join(""));var C=this.date&&this.date.getUTCFullYear(),E=this.picker.find(".datepicker-months").find("th:eq(1)").text(s).end().find("span").removeClass("active");C&&C==s&&E.eq(this.date.getUTCMonth()).addClass("active"),(r>s||s>l)&&E.addClass("disabled"),s==r&&E.slice(0,a).addClass("disabled"),s==l&&E.slice(c+1).addClass("disabled"),g="",s=10*parseInt(s/10,10);var k=this.picker.find(".datepicker-years").find("th:eq(1)").text(s+"-"+(s+9)).end().find("td");s-=1;for(var T=-1;11>T;T++)g+='<span class="year'+(-1==T?" old":10==T?" new":"")+(C==s?" active":"")+(r>s||s>l?" disabled":"")+'">'+s+"</span>",s+=1;k.html(g)},updateNavArrows:function(){if(this._allow_update){var e=new Date(this.viewDate),t=e.getUTCFullYear(),i=e.getUTCMonth();switch(this.viewMode){case 0:this.picker.find(".prev").css(this.o.startDate!==-1/0&&t<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&t>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"});break;case 1:case 2:this.picker.find(".prev").css(this.o.startDate!==-1/0&&t<=this.o.startDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&t>=this.o.endDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"})}}},click:function(i){i.preventDefault();var n=e(i.target).closest("span, td, th");if(1==n.length)switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var s=u.modes[this.viewMode].navStep*("prev"==n[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,s);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,s)}this.fill();break;case"today":var o=new Date;o=t(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0),this.showMode(-2);var r="linked"==this.o.todayBtn?null:"view";this._setDate(o,r);break;case"clear":var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.val("").change(),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide()}break;case"span":if(!n.is(".disabled")){if(this.viewDate.setUTCDate(1),n.is(".month")){var l=1,c=n.parent().find("span").index(n),d=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(c),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(t(d,c,l,0,0,0,0))}else{var d=parseInt(n.text(),10)||0,l=1,c=0;this.viewDate.setUTCFullYear(d),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(t(d,c,l,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){var l=parseInt(n.text(),10)||1,d=this.viewDate.getUTCFullYear(),c=this.viewDate.getUTCMonth();n.is(".old")?0===c?(c=11,d-=1):c-=1:n.is(".new")&&(11==c?(c=0,d+=1):c+=1),this._setDate(t(d,c,l,0,0,0,0))}}},_setDate:function(e,t){t&&"date"!=t||(this.date=new Date(e)),t&&"view"!=t||(this.viewDate=new Date(e)),this.fill(),this.setValue(),this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&(i.change(),!this.o.autoclose||t&&"date"!=t||this.hide())},moveMonth:function(e,t){if(!t)return e;var i,n,s=new Date(e.valueOf()),o=s.getUTCDate(),r=s.getUTCMonth(),a=Math.abs(t);if(t=t>0?1:-1,1==a)n=-1==t?function(){return s.getUTCMonth()==r}:function(){return s.getUTCMonth()!=i},i=r+t,s.setUTCMonth(i),(0>i||i>11)&&(i=(i+12)%12);else{for(var l=0;a>l;l++)s=this.moveMonth(s,t);i=s.getUTCMonth(),s.setUTCDate(o),n=function(){return i!=s.getUTCMonth()}}for(;n();)s.setUTCDate(--o),s.setUTCMonth(i);return s},moveYear:function(e,t){return this.moveMonth(e,12*t)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":not(:visible)"))return void(27==e.keyCode&&this.show());var t,i,n,s=!1;switch(e.keyCode){case 27:this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=37==e.keyCode?-1:1,e.ctrlKey?(i=this.moveYear(this.date,t),n=this.moveYear(this.viewDate,t)):e.shiftKey?(i=this.moveMonth(this.date,t),n=this.moveMonth(this.viewDate,t)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+t),n=new Date(this.viewDate),n.setUTCDate(this.viewDate.getUTCDate()+t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),e.preventDefault(),s=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=38==e.keyCode?-1:1,e.ctrlKey?(i=this.moveYear(this.date,t),n=this.moveYear(this.viewDate,t)):e.shiftKey?(i=this.moveMonth(this.date,t),n=this.moveMonth(this.viewDate,t)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+7*t),n=new Date(this.viewDate),n.setUTCDate(this.viewDate.getUTCDate()+7*t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),e.preventDefault(),s=!0);break;case 13:this.hide(),e.preventDefault();break;case 9:this.hide()}if(s){this._trigger("changeDate");var o;this.isInput?o=this.element:this.component&&(o=this.element.find("input")),o&&o.change()}},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".datepicker-"+u.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var o=function(t,i){this.element=e(t),this.inputs=e.map(i.inputs,function(e){return e.jquery?e[0]:e}),delete i.inputs,e(this.inputs).datepicker(i).bind("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")}),this.updateDates()};o.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.date}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,i){i.setRange(t)})},dateUpdated:function(t){var i=e(t.target).data("datepicker"),n=i.getUTCDate(),s=e.inArray(t.target,this.inputs),o=this.inputs.length;if(-1!=s){if(n<this.dates[s])for(;s>=0&&n<this.dates[s];)this.pickers[s--].setUTCDate(n);else if(n>this.dates[s])for(;o>s&&n>this.dates[s];)this.pickers[s++].setUTCDate(n);this.updateDates()}},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var r=e.fn.datepicker,a=e.fn.datepicker=function(t){var r=Array.apply(null,arguments);r.shift();var a;return this.each(function(){var c=e(this),d=c.data("datepicker"),u="object"==typeof t&&t;if(!d){var h=i(this,"date"),p=e.extend({},l,h,u),f=n(p.language),m=e.extend({},l,f,h,u);if(c.is(".input-daterange")||m.inputs){var g={inputs:m.inputs||c.find("input").toArray()};c.data("datepicker",d=new o(this,e.extend(m,g)))}else c.data("datepicker",d=new s(this,m))}return("string"!=typeof t||"function"!=typeof d[t]||void 0===(a=d[t].apply(d,r)))&&void 0}),void 0!==a?a:this},l=e.fn.datepicker.defaults={autoclose:!1,beforeShowDay:e.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},c=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=s;var d=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},u={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},getDaysInMonth:function(e,t){return[31,u.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\0").split("\0"),i=e.match(this.validParts);if(!t||!t.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(i,n,o){if(i instanceof Date)return i;if("string"==typeof n&&(n=u.parseFormat(n)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){var r,a,l=/([\-+]\d+)([dmwy])/,c=i.match(/([\-+]\d+)([dmwy])/g);i=new Date;for(var h=0;h<c.length;h++)switch(r=l.exec(c[h]),a=parseInt(r[1]),r[2]){case"d":i.setUTCDate(i.getUTCDate()+a);break;case"m":i=s.prototype.moveMonth.call(s.prototype,i,a);break;case"w":i.setUTCDate(i.getUTCDate()+7*a);break;case"y":i=s.prototype.moveYear.call(s.prototype,i,a)}return t(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}var p,f,r,c=i&&i.match(this.nonpunctuation)||[],i=new Date,m={},g=["yyyy","yy","M","MM","m","mm","d","dd"],v={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){for(t-=1;0>t;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!=t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};v.M=v.MM=v.mm=v.m,v.dd=v.d,i=t(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var b=n.parts.slice();if(c.length!=b.length&&(b=e(b).filter(function(t,i){return-1!==e.inArray(i,g)}).toArray()),c.length==b.length){for(var h=0,y=b.length;y>h;h++){if(p=parseInt(c[h],10),r=b[h],isNaN(p))switch(r){case"MM":f=e(d[o].months).filter(function(){var e=this.slice(0,c[h].length);return e==c[h].slice(0,e.length)}),p=e.inArray(f[0],d[o].months)+1;break;case"M":f=e(d[o].monthsShort).filter(function(){var e=this.slice(0,c[h].length);return e==c[h].slice(0,e.length)}),p=e.inArray(f[0],d[o].monthsShort)+1}m[r]=p}for(var w,h=0;h<g.length;h++)(w=g[h])in m&&!isNaN(m[w])&&v[w](i,m[w])}return i},formatDate:function(t,i,n){"string"==typeof i&&(i=u.parseFormat(i));var s={d:t.getUTCDate(),D:d[n].daysShort[t.getUTCDay()],DD:d[n].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:d[n].monthsShort[t.getUTCMonth()],MM:d[n].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};s.dd=(s.d<10?"0":"")+s.d,s.mm=(s.m<10?"0":"")+s.m;for(var t=[],o=e.extend([],i.separators),r=0,a=i.parts.length;a>=r;r++)o.length&&t.push(o.shift()),t.push(s[i.parts[r]]);return t.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};u.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+u.headTemplate+"<tbody></tbody>"+u.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+u.headTemplate+u.contTemplate+u.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+u.headTemplate+u.contTemplate+u.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=u,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=r,this},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=e(this);i.data("datepicker")||(t.preventDefault(),a.call(i,"show"))}),e(function(){a.call(e('[data-provide="datepicker-inline"]'))})}(window.jQuery),function(e){"use strict";e.fn.bdatepicker=e.fn.datepicker.noConflict(),e.fn.datepicker||(e.fn.datepicker=e.fn.bdatepicker);var t=function(e){this.init("date",e,t.defaults),this.initPicker(e,t.defaults)};e.fn.editable2utils.inherit(t,e.fn.editable2types.abstractinput),e.extend(t.prototype,{initPicker:function(t,i){this.options.viewformat||(this.options.viewformat=this.options.format),t.datepicker=e.fn.editable2utils.tryParseJson(t.datepicker,!0),this.options.datepicker=e.extend({},i.datepicker,t.datepicker,{format:this.options.viewformat}),this.options.datepicker.language=this.options.datepicker.language||"en",this.dpg=e.fn.bdatepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker),this.options.clear&&(this.$clear=e('<a href="#"></a>').html(this.options.clear).click(e.proxy(function(e){e.preventDefault(),e.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(e('<div class="editable2-clear">').append(this.$clear)))},value2html:function(e,i){var n=e?this.dpg.formatDate(e,this.parsedViewFormat,this.options.datepicker.language):"";t.superclass.value2html.call(this,n,i)},html2value:function(e){return this.parseDate(e,this.parsedViewFormat)},value2str:function(e){return e?this.dpg.formatDate(e,this.parsedFormat,this.options.datepicker.language):""},str2value:function(e){return this.parseDate(e,this.parsedFormat)},value2submit:function(e){return this.value2str(e)},value2input:function(e){this.$input.bdatepicker("update",e)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".day",function(t){if(!e(t.currentTarget).is(".old")&&!e(t.currentTarget).is(".new")){var i=e(this).closest("form");setTimeout(function(){i.submit()},200)}})},parseDate:function(e,t){var i,n=null;return e&&(n=this.dpg.parseDate(e,t,this.options.datepicker.language),"string"==typeof e&&(i=this.dpg.formatDate(n,t,this.options.datepicker.language),e!==i&&(n=null))),n}}),t.defaults=e.extend({},e.fn.editable2types.abstractinput.defaults,{tpl:'<div class="editable2-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!1},clear:"&times; clear"}),e.fn.editable2types.date=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("datefield",e,t.defaults),this.initPicker(e,t.defaults)};e.fn.editable2utils.inherit(t,e.fn.editable2types.date),e.extend(t.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.bdatepicker(this.options.datepicker),this.$input.off("focus keydown"),this.$input.keyup(e.proxy(function(){this.$tpl.removeData("date"),this.$tpl.bdatepicker("update")},this))},value2input:function(e){this.$input.val(e?this.dpg.formatDate(e,this.parsedViewFormat,this.options.datepicker.language):""),this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){e.fn.editable2types.text.prototype.activate.call(this)},autosubmit:function(){}}),t.defaults=e.extend({},e.fn.editable2types.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!0}}),e.fn.editable2types.datefield=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("datetime",e,t.defaults),this.initPicker(e,t.defaults)};e.fn.editable2utils.inherit(t,e.fn.editable2types.abstractinput),e.extend(t.prototype,{initPicker:function(t,i){this.options.viewformat||(this.options.viewformat=this.options.format),t.datetimepicker=e.fn.editable2utils.tryParseJson(t.datetimepicker,!0),this.options.datetimepicker=e.extend({},i.datetimepicker,t.datetimepicker,{format:this.options.viewformat}),this.options.datetimepicker.language=this.options.datetimepicker.language||"en",this.dpg=e.fn.datetimepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker),this.$input.on("changeMode",function(){var t=e(this).closest("form").parent();setTimeout(function(){t.triggerHandler("resize")},0)}),this.options.clear&&(this.$clear=e('<a href="#"></a>').html(this.options.clear).click(e.proxy(function(e){e.preventDefault(),e.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(e('<div class="editable2-clear">').append(this.$clear)))},value2html:function(e,i){var n=e?this.dpg.formatDate(this.toUTC(e),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";return i?void t.superclass.value2html.call(this,n,i):n},html2value:function(e){var t=this.parseDate(e,this.parsedViewFormat);return t?this.fromUTC(t):null},value2str:function(e){return e?this.dpg.formatDate(this.toUTC(e),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(e){var t=this.parseDate(e,this.parsedFormat);return t?this.fromUTC(t):null},value2submit:function(e){return this.value2str(e)},value2input:function(e){e&&this.$input.data("datetimepicker").setDate(e)},input2value:function(){var e=this.$input.data("datetimepicker");return e.date?e.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".minute",function(){var t=e(this).closest("form");setTimeout(function(){t.submit()},200)})},toUTC:function(e){return e?new Date(e.valueOf()-6e4*e.getTimezoneOffset()):e},fromUTC:function(e){return e?new Date(e.valueOf()+6e4*e.getTimezoneOffset()):e},parseDate:function(e,t){var i,n=null;return e&&(n=this.dpg.parseDate(e,t,this.options.datetimepicker.language,this.options.formatType),"string"==typeof e&&(i=this.dpg.formatDate(n,t,this.options.datetimepicker.language,this.options.formatType),e!==i&&(n=null))),n}}),t.defaults=e.extend({},e.fn.editable2types.abstractinput.defaults,{tpl:'<div class="editable2-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:!1,autoclose:!1},clear:"&times; clear"}),e.fn.editable2types.datetime=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("datetimefield",e,t.defaults),this.initPicker(e,t.defaults)};e.fn.editable2utils.inherit(t,e.fn.editable2types.datetime),e.extend(t.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.datetimepicker(this.options.datetimepicker),this.$input.off("focus keydown"),this.$input.keyup(e.proxy(function(){this.$tpl.removeData("date"),this.$tpl.datetimepicker("update")},this))},value2input:function(e){this.$input.val(this.value2html(e)),this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){e.fn.editable2types.text.prototype.activate.call(this)},autosubmit:function(){}}),t.defaults=e.extend({},e.fn.editable2types.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:!1,autoclose:!0}}),e.fn.editable2types.datetimefield=t}(window.jQuery),jQuery(function(e){e.datepicker.regional.ru={closeText:"Закрыть",prevText:"&#x3c;Пред",nextText:"След&#x3e;",currentText:"Сегодня",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Не",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.ru)}),function(e){"function"==typeof define&&define.amd?define(["jquery","jquery.ui"],e):e(jQuery)}(function($){if($.ui.timepicker=$.ui.timepicker||{},!$.ui.timepicker.version){$.extend($.ui,{timepicker:{version:"1.5.3"}});var Timepicker=function(){this.regional=[],this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",microsecText:"Microsecond",timezoneText:"Time Zone",isRTL:!1},this._defaults={showButtonPanel:!0,timeOnly:!1,timeOnlyShowDate:!1,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,maxTime:null,minTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,altRedirectFocus:!0,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",oneLine:!1,defaultValue:null,parse:"strict",afterInject:null},$.extend(this._defaults,this.regional[""])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,maxTime:null,minTime:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec","microsec"],support:{},control:null,setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_newInst:function($input,opts){var tp_inst=new Timepicker,inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults)if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue)try{inlineSettings[attrName]=eval(attrValue)}catch(e){inlineSettings[attrName]=attrValue}}overrides={beforeShow:function(e,t){if($.isFunction(tp_inst._defaults.evnts.beforeShow))return tp_inst._defaults.evnts.beforeShow.call($input[0],e,t,tp_inst)},onChangeMonthYear:function(e,t,i){$.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)&&tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],e,t,i,tp_inst)},onClose:function(e,t){!0===tp_inst.timeDefined&&""!==$input.val()&&tp_inst._updateDateTime(t),$.isFunction(tp_inst._defaults.evnts.onClose)&&tp_inst._defaults.evnts.onClose.call($input[0],e,t,tp_inst)}};for(i in overrides)overrides.hasOwnProperty(i)&&(fns[i]=opts[i]||null);tp_inst._defaults=$.extend({},this._defaults,inlineSettings,opts,overrides,{evnts:fns,timepicker:tp_inst}),tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(e){return e.toUpperCase()}),tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(e){return e.toUpperCase()}),tp_inst.support=detectSupport(tp_inst._defaults.timeFormat+(tp_inst._defaults.pickerTimeFormat?tp_inst._defaults.pickerTimeFormat:"")+(tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:"")),"string"==typeof tp_inst._defaults.controlType?("slider"===tp_inst._defaults.controlType&&void 0===$.ui.slider&&(tp_inst._defaults.controlType="select"),tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]):tp_inst.control=tp_inst._defaults.controlType;var timezoneList=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];null!==tp_inst._defaults.timezoneList&&(timezoneList=tp_inst._defaults.timezoneList);var tzl=timezoneList.length,tzi=0,tzv=null;if(tzl>0&&"object"!=typeof timezoneList[0])for(;tzi<tzl;tzi++)tzv=timezoneList[tzi],timezoneList[tzi]={value:tzv,label:$.timepicker.timezoneOffsetString(tzv,tp_inst.support.iso8601)};return tp_inst._defaults.timezoneList=timezoneList,tp_inst.timezone=null!==tp_inst._defaults.timezone?$.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone):-1*(new Date).getTimezoneOffset(),
tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour,tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute,tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second,tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec,tp_inst.microsec=tp_inst._defaults.microsec<tp_inst._defaults.microsecMin?tp_inst._defaults.microsecMin:tp_inst._defaults.microsec>tp_inst._defaults.microsecMax?tp_inst._defaults.microsecMax:tp_inst._defaults.microsec,tp_inst.ampm="",tp_inst.$input=$input,tp_inst._defaults.altField&&(tp_inst.$altInput=$(tp_inst._defaults.altField),!0===tp_inst._defaults.altRedirectFocus&&tp_inst.$altInput.css({cursor:"pointer"}).focus(function(){$input.trigger("focus")})),0!==tp_inst._defaults.minDate&&0!==tp_inst._defaults.minDateTime||(tp_inst._defaults.minDate=new Date),0!==tp_inst._defaults.maxDate&&0!==tp_inst._defaults.maxDateTime||(tp_inst._defaults.maxDate=new Date),void 0!==tp_inst._defaults.minDate&&tp_inst._defaults.minDate instanceof Date&&(tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())),void 0!==tp_inst._defaults.minDateTime&&tp_inst._defaults.minDateTime instanceof Date&&(tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())),void 0!==tp_inst._defaults.maxDate&&tp_inst._defaults.maxDate instanceof Date&&(tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())),void 0!==tp_inst._defaults.maxDateTime&&tp_inst._defaults.maxDateTime instanceof Date&&(tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())),tp_inst.$input.bind("focus",function(){tp_inst._onFocus()}),tp_inst},_addTimePicker:function(e){var t=$.trim(this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val());this.timeDefined=this._parseTime(t),this._limitMinMaxDateTime(e,!1),this._injectTimePicker(),this._afterInject()},_parseTime:function(e,t){if(this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),t||!this._defaults.timeOnly){var i=$.datepicker._get(this.inst,"dateFormat");try{var n=parseDateTimeInternal(i,this._defaults.timeFormat,e,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!n.timeObj)return!1;$.extend(this,n.timeObj)}catch(t){return $.timepicker.log("Error parsing the date/time string: "+t+"\ndate/time string = "+e+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+i),!1}return!0}var s=$.datepicker.parseTime(this._defaults.timeFormat,e,this._defaults);return!!s&&($.extend(this,s),!0)},_afterInject:function(){var e=this.inst.settings;$.isFunction(e.afterInject)&&e.afterInject.call(this)},_injectTimePicker:function(){var e=this.inst.dpDiv,t=this.inst.settings,i=this,n="",s="",o=null,r={},a={},l=null,c=0,d=0;if(0===e.find("div.ui-timepicker-div").length&&t.showTimepicker){var u=" ui_tpicker_unit_hide",h='<div class="ui-timepicker-div'+(t.isRTL?" ui-timepicker-rtl":"")+(t.oneLine&&"select"===t.controlType?" ui-timepicker-oneLine":"")+'"><dl><dt class="ui_tpicker_time_label"'+(t.showTime?"":u)+">"+t.timeText+'</dt><dd class="ui_tpicker_time '+(t.showTime?"":u)+'"></dd>';for(c=0,d=this.units.length;c<d;c++){if(n=this.units[c],s=n.substr(0,1).toUpperCase()+n.substr(1),o=null!==t["show"+s]?t["show"+s]:this.support[n],r[n]=parseInt(t[n+"Max"]-(t[n+"Max"]-t[n+"Min"])%t["step"+s],10),a[n]=0,h+='<dt class="ui_tpicker_'+n+"_label"+(o?"":u)+'">'+t[n+"Text"]+'</dt><dd class="ui_tpicker_'+n+(o?"":u)+'"><div class="ui_tpicker_'+n+"_slider"+(o?"":u)+'"></div>',o&&t[n+"Grid"]>0){if(h+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>',"hour"===n)for(var p=t[n+"Min"];p<=r[n];p+=parseInt(t[n+"Grid"],10)){a[n]++;var f=$.datepicker.formatTime(this.support.ampm?"hht":"HH",{hour:p},t);h+='<td data-for="'+n+'">'+f+"</td>"}else for(var m=t[n+"Min"];m<=r[n];m+=parseInt(t[n+"Grid"],10))a[n]++,h+='<td data-for="'+n+'">'+(m<10?"0":"")+m+"</td>";h+="</tr></table></div>"}h+="</dd>"}var g=null!==t.showTimezone?t.showTimezone:this.support.timezone;h+='<dt class="ui_tpicker_timezone_label'+(g?"":u)+'">'+t.timezoneText+"</dt>",h+='<dd class="ui_tpicker_timezone'+(g?"":u)+'"></dd>',h+="</dl></div>";var v=$(h);for(!0===t.timeOnly&&(v.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+t.timeOnlyTitle+"</div></div>"),e.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()),c=0,d=i.units.length;c<d;c++)n=i.units[c],s=n.substr(0,1).toUpperCase()+n.substr(1),o=null!==t["show"+s]?t["show"+s]:this.support[n],i[n+"_slider"]=i.control.create(i,v.find(".ui_tpicker_"+n+"_slider"),n,i[n],t[n+"Min"],r[n],t["step"+s]),o&&t[n+"Grid"]>0&&(l=100*a[n]*t[n+"Grid"]/(r[n]-t[n+"Min"]),v.find(".ui_tpicker_"+n+" table").css({width:l+"%",marginLeft:t.isRTL?"0":l/(-2*a[n])+"%",marginRight:t.isRTL?l/(-2*a[n])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(e){var t=$(this),s=t.html(),o=parseInt(s.replace(/[^0-9]/g),10),r=s.replace(/[^apm]/gi),a=t.data("for");"hour"===a&&(-1!==r.indexOf("p")&&o<12?o+=12:-1!==r.indexOf("a")&&12===o&&(o=0)),i.control.value(i,i[a+"_slider"],n,o),i._onTimeChange(),i._onSelectHandler()}).css({cursor:"pointer",width:100/a[n]+"%",textAlign:"center",overflow:"hidden"}));if(this.timezone_select=v.find(".ui_tpicker_timezone").append("<select></select>").find("select"),$.fn.append.apply(this.timezone_select,$.map(t.timezoneList,function(e,t){return $("<option />").val("object"==typeof e?e.value:e).text("object"==typeof e?e.label:e)})),void 0!==this.timezone&&null!==this.timezone&&""!==this.timezone){-1*new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12).getTimezoneOffset()===this.timezone?selectLocalTimezone(i):this.timezone_select.val(this.timezone)}else void 0!==this.hour&&null!==this.hour&&""!==this.hour?this.timezone_select.val(t.timezone):selectLocalTimezone(i);this.timezone_select.change(function(){i._onTimeChange(),i._onSelectHandler(),i._afterInject()});var b=e.find(".ui-datepicker-buttonpane");if(b.length?b.before(v):e.append(v),this.$timeObj=v.find(".ui_tpicker_time"),null!==this.inst){var y=this.timeDefined;this._onTimeChange(),this.timeDefined=y}if(this._defaults.addSliderAccess){var w=this._defaults.sliderAccessArgs,x=this._defaults.isRTL;w.isRTL=x,setTimeout(function(){if(0===v.find(".ui-slider-access").length){v.find(".ui-slider:visible").sliderAccess(w);var e=v.find(".ui-slider-access:eq(0)").outerWidth(!0);e&&v.find("table:visible").each(function(){var t=$(this),i=t.outerWidth(),n=t.css(x?"marginRight":"marginLeft").toString().replace("%",""),s=i-e,o=n*s/i+"%",r={width:s,marginRight:0,marginLeft:0};r[x?"marginRight":"marginLeft"]=o,t.css(r)})}},10)}i._limitMinMaxDateTime(this.inst,!0)}},_limitMinMaxDateTime:function(e,t){var i=this._defaults,n=new Date(e.selectedYear,e.selectedMonth,e.selectedDay);if(this._defaults.showTimepicker){if(null!==$.datepicker._get(e,"minDateTime")&&void 0!==$.datepicker._get(e,"minDateTime")&&n){var s=$.datepicker._get(e,"minDateTime"),o=new Date(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0,0);null!==this.hourMinOriginal&&null!==this.minuteMinOriginal&&null!==this.secondMinOriginal&&null!==this.millisecMinOriginal&&null!==this.microsecMinOriginal||(this.hourMinOriginal=i.hourMin,this.minuteMinOriginal=i.minuteMin,this.secondMinOriginal=i.secondMin,this.millisecMinOriginal=i.millisecMin,this.microsecMinOriginal=i.microsecMin),e.settings.timeOnly||o.getTime()===n.getTime()?(this._defaults.hourMin=s.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=s.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=s.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=s.getMilliseconds(),this.millisec<=this._defaults.millisecMin?(this.millisec=this._defaults.millisecMin,this._defaults.microsecMin=s.getMicroseconds()):(this.microsec<this._defaults.microsecMin&&(this.microsec=this._defaults.microsecMin),this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)}if(null!==$.datepicker._get(e,"maxDateTime")&&void 0!==$.datepicker._get(e,"maxDateTime")&&n){var r=$.datepicker._get(e,"maxDateTime"),a=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0);null!==this.hourMaxOriginal&&null!==this.minuteMaxOriginal&&null!==this.secondMaxOriginal&&null!==this.millisecMaxOriginal||(this.hourMaxOriginal=i.hourMax,this.minuteMaxOriginal=i.minuteMax,this.secondMaxOriginal=i.secondMax,this.millisecMaxOriginal=i.millisecMax,this.microsecMaxOriginal=i.microsecMax),e.settings.timeOnly||a.getTime()===n.getTime()?(this._defaults.hourMax=r.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=r.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=r.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=r.getMilliseconds(),this.millisec>=this._defaults.millisecMax?(this.millisec=this._defaults.millisecMax,this._defaults.microsecMax=r.getMicroseconds()):(this.microsec>this._defaults.microsecMax&&(this.microsec=this._defaults.microsecMax),this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)}if(null!==e.settings.minTime){var l=new Date("01/01/1970 "+e.settings.minTime);this.hour<l.getHours()?(this.hour=this._defaults.hourMin=l.getHours(),this.minute=this._defaults.minuteMin=l.getMinutes()):this.hour===l.getHours()&&this.minute<l.getMinutes()?this.minute=this._defaults.minuteMin=l.getMinutes():this._defaults.hourMin<l.getHours()?(this._defaults.hourMin=l.getHours(),this._defaults.minuteMin=l.getMinutes()):this._defaults.hourMin===l.getHours()===this.hour&&this._defaults.minuteMin<l.getMinutes()?this._defaults.minuteMin=l.getMinutes():this._defaults.minuteMin=0}if(null!==e.settings.maxTime){var c=new Date("01/01/1970 "+e.settings.maxTime);this.hour>c.getHours()?(this.hour=this._defaults.hourMax=c.getHours(),this.minute=this._defaults.minuteMax=c.getMinutes()):this.hour===c.getHours()&&this.minute>c.getMinutes()?this.minute=this._defaults.minuteMax=c.getMinutes():this._defaults.hourMax>c.getHours()?(this._defaults.hourMax=c.getHours(),this._defaults.minuteMax=c.getMinutes()):this._defaults.hourMax===c.getHours()===this.hour&&this._defaults.minuteMax>c.getMinutes()?this._defaults.minuteMax=c.getMinutes():this._defaults.minuteMax=59}if(void 0!==t&&!0===t){var d=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),u=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),h=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),p=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10),f=parseInt(this._defaults.microsecMax-(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10);this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:d,step:this._defaults.stepHour}),this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)),this.minute_slider&&(this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:u,step:this._defaults.stepMinute}),this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:h,step:this._defaults.stepSecond}),this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:p,step:this._defaults.stepMillisec}),this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec)),this.microsec_slider&&(this.control.options(this,this.microsec_slider,"microsec",{min:this._defaults.microsecMin,max:f,step:this._defaults.stepMicrosec}),this.control.value(this,this.microsec_slider,"microsec",this.microsec-this.microsec%this._defaults.stepMicrosec))}}},_onTimeChange:function(){if(this._defaults.showTimepicker){var e=!!this.hour_slider&&this.control.value(this,this.hour_slider,"hour"),t=!!this.minute_slider&&this.control.value(this,this.minute_slider,"minute"),i=!!this.second_slider&&this.control.value(this,this.second_slider,"second"),n=!!this.millisec_slider&&this.control.value(this,this.millisec_slider,"millisec"),s=!!this.microsec_slider&&this.control.value(this,this.microsec_slider,"microsec"),o=!!this.timezone_select&&this.timezone_select.val(),r=this._defaults,a=r.pickerTimeFormat||r.timeFormat,l=r.pickerTimeSuffix||r.timeSuffix;"object"==typeof e&&(e=!1),"object"==typeof t&&(t=!1),"object"==typeof i&&(i=!1),"object"==typeof n&&(n=!1),"object"==typeof s&&(s=!1),"object"==typeof o&&(o=!1),!1!==e&&(e=parseInt(e,10)),!1!==t&&(t=parseInt(t,10)),!1!==i&&(i=parseInt(i,10)),!1!==n&&(n=parseInt(n,10)),!1!==s&&(s=parseInt(s,10)),!1!==o&&(o=o.toString());var c=r[e<12?"amNames":"pmNames"][0],d=e!==parseInt(this.hour,10)||t!==parseInt(this.minute,10)||i!==parseInt(this.second,10)||n!==parseInt(this.millisec,10)||s!==parseInt(this.microsec,10)||this.ampm.length>0&&e<12!=(-1!==$.inArray(this.ampm.toUpperCase(),this.amNames))||null!==this.timezone&&o!==this.timezone.toString();d&&(!1!==e&&(this.hour=e),!1!==t&&(this.minute=t),!1!==i&&(this.second=i),!1!==n&&(this.millisec=n),!1!==s&&(this.microsec=s),!1!==o&&(this.timezone=o),this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),this.support.ampm&&(this.ampm=c),this.formattedTime=$.datepicker.formatTime(r.timeFormat,this,r),this.$timeObj&&(a===r.timeFormat?this.$timeObj.text(this.formattedTime+l):this.$timeObj.text($.datepicker.formatTime(a,this,r)+l)),this.timeDefined=!0,d&&this._updateDateTime()}},_onSelectHandler:function(){var e=this._defaults.onSelect||this.inst.settings.onSelect,t=this.$input?this.$input[0]:null;e&&t&&e.apply(t,[this.formattedDateTime,this])},_updateDateTime:function(e){e=this.inst||e;var t=e.currentYear>0?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(e.selectedYear,e.selectedMonth,e.selectedDay),i=$.datepicker._daylightSavingAdjust(t),n=$.datepicker._get(e,"dateFormat"),s=$.datepicker._getFormatConfig(e),o=null!==i&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(n,null===i?new Date:i,s);var r=this.formattedDate;if(""===e.lastVal&&(e.currentYear=e.selectedYear,e.currentMonth=e.selectedMonth,e.currentDay=e.selectedDay),!0===this._defaults.timeOnly&&!1===this._defaults.timeOnlyShowDate?r=this.formattedTime:(!0!==this._defaults.timeOnly&&(this._defaults.alwaysSetTime||o)||!0===this._defaults.timeOnly&&!0===this._defaults.timeOnlyShowDate)&&(r+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=r,this._defaults.showTimepicker)if(this.$altInput&&!1===this._defaults.timeOnly&&!0===this._defaults.altFieldTimeOnly)this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate);else if(this.$altInput){this.$input.val(r);var a="",l=null!==this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,c=null!==this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;this._defaults.timeOnly||(a=this._defaults.altFormat?$.datepicker.formatDate(this._defaults.altFormat,null===i?new Date:i,s):this.formattedDate)&&(a+=l),null!==this._defaults.altTimeFormat?a+=$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+c:a+=this.formattedTime+c,this.$altInput.val(a)}else this.$input.val(r);else this.$input.val(this.formattedDate);this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var e=$.datepicker._getInst(this.$input.get(0)),t=$.datepicker._get(e,"timepicker");if(t&&t._defaults.timeOnly&&e.input.val()!==e.lastVal)try{$.datepicker._updateDatepicker(e)}catch(e){$.timepicker.log(e)}}},_controls:{slider:{create:function(e,t,i,n,s,o,r){var a=e._defaults.isRTL;return t.prop("slide",null).slider({orientation:"horizontal",value:a?-1*n:n,min:a?-1*o:s,max:a?-1*s:o,step:r,slide:function(t,n){e.control.value(e,$(this),i,a?-1*n.value:n.value),e._onTimeChange()},stop:function(t,i){e._onSelectHandler()}})},options:function(e,t,i,n,s){if(e._defaults.isRTL){if("string"==typeof n)return"min"===n||"max"===n?void 0!==s?t.slider(n,-1*s):Math.abs(t.slider(n)):t.slider(n);var o=n.min,r=n.max;return n.min=n.max=null,void 0!==o&&(n.max=-1*o),void 0!==r&&(n.min=-1*r),t.slider(n)}return"string"==typeof n&&void 0!==s?t.slider(n,s):t.slider(n)},value:function(e,t,i,n){return e._defaults.isRTL?void 0!==n?t.slider("value",-1*n):Math.abs(t.slider("value")):void 0!==n?t.slider("value",n):t.slider("value")}},select:{create:function(e,t,i,n,s,o,r){for(var a='<select class="ui-timepicker-select ui-state-default ui-corner-all" data-unit="'+i+'" data-min="'+s+'" data-max="'+o+'" data-step="'+r+'">',l=e._defaults.pickerTimeFormat||e._defaults.timeFormat,c=s;c<=o;c+=r)a+='<option value="'+c+'"'+(c===n?" selected":"")+">",a+="hour"===i?$.datepicker.formatTime($.trim(l.replace(/[^ht ]/gi,"")),{hour:c},e._defaults):"millisec"===i||"microsec"===i||c>=10?c:"0"+c.toString(),a+="</option>";return a+="</select>",t.children("select").remove(),$(a).appendTo(t).change(function(t){e._onTimeChange(),e._onSelectHandler(),e._afterInject()}),t},options:function(e,t,i,n,s){var o={},r=t.children("select");if("string"==typeof n){if(void 0===s)return r.data(n);o[n]=s}else o=n;return e.control.create(e,t,r.data("unit"),r.val(),o.min>=0?o.min:r.data("min"),o.max||r.data("max"),o.step||r.data("step"))},value:function(e,t,i,n){var s=t.children("select");return void 0!==n?s.val(n):s.val()}}}}),$.fn.extend({timepicker:function(e){e=e||{};var t=Array.prototype.slice.call(arguments);return"object"==typeof e&&(t[0]=$.extend(e,{timeOnly:!0})),$(this).each(function(){$.fn.datetimepicker.apply($(this),t)})},datetimepicker:function(e){e=e||{};var t=arguments;return"string"==typeof e?"getDate"===e||"option"===e&&2===t.length&&"string"==typeof t[1]?$.fn.datepicker.apply($(this[0]),t):this.each(function(){var e=$(this);e.datepicker.apply(e,t)}):this.each(function(){var t=$(this);t.datepicker($.timepicker._newInst(t,e)._defaults)})}}),$.datepicker.parseDateTime=function(e,t,i,n,s){var o=parseDateTimeInternal(e,t,i,n,s);if(o.timeObj){var r=o.timeObj;o.date.setHours(r.hour,r.minute,r.second,r.millisec),o.date.setMicroseconds(r.microsec)}return o.date},$.datepicker.parseTime=function(e,t,i){var n=extendRemove(extendRemove({},$.timepicker._defaults),i||{}),s=(e.replace(/\'.*?\'/g,"").indexOf("Z"),function(e,t,i){var n,s=function(e,t){var i=[];return e&&$.merge(i,e),t&&$.merge(i,t),i=$.map(i,function(e){return e.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")}),"("+i.join("|")+")?"},o="^"+e.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(e){var t=e.length;switch(e.charAt(0).toLowerCase()){case"h":case"m":case"s":return 1===t?"(\\d?\\d)":"(\\d{"+t+"})";case"l":case"c":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return s(i.amNames,i.pmNames);default:return"("+e.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(e){return"\\"+e})+")?"}}).replace(/\s/g,"\\s?")+i.timeSuffix+"$",r=function(e){var t=e.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),i={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(t)for(var n=0;n<t.length;n++)-1===i[t[n].toString().charAt(0)]&&(i[t[n].toString().charAt(0)]=n+1);return i}(e),a="";n=t.match(new RegExp(o,"i"));var l={hour:0,minute:0,second:0,millisec:0,microsec:0};return!!n&&(-1!==r.t&&(void 0===n[r.t]||0===n[r.t].length?(a="",l.ampm=""):(a=-1!==$.inArray(n[r.t].toUpperCase(),$.map(i.amNames,function(e,t){return e.toUpperCase()}))?"AM":"PM",l.ampm=i["AM"===a?"amNames":"pmNames"][0])),-1!==r.h&&("AM"===a&&"12"===n[r.h]?l.hour=0:"PM"===a&&"12"!==n[r.h]?l.hour=parseInt(n[r.h],10)+12:l.hour=Number(n[r.h])),-1!==r.m&&(l.minute=Number(n[r.m])),-1!==r.s&&(l.second=Number(n[r.s])),-1!==r.l&&(l.millisec=Number(n[r.l])),-1!==r.c&&(l.microsec=Number(n[r.c])),-1!==r.z&&void 0!==n[r.z]&&(l.timezone=$.timepicker.timezoneOffsetNumber(n[r.z])),l)});return"function"==typeof n.parse?n.parse(e,t,n):"loose"===n.parse?function(e,t,i){try{var n=new Date("2012-01-01 "+t);if(isNaN(n.getTime())&&(n=new Date("2012-01-01T"+t),isNaN(n.getTime())&&(n=new Date("01/01/2012 "+t),isNaN(n.getTime()))))throw"Unable to parse time with native Date: "+t;return{hour:n.getHours(),minute:n.getMinutes(),second:n.getSeconds(),millisec:n.getMilliseconds(),microsec:n.getMicroseconds(),timezone:-1*n.getTimezoneOffset()}}catch(n){try{return s(e,t,i)}catch(i){$.timepicker.log("Unable to parse \ntimeString: "+t+"\ntimeFormat: "+e)}}return!1}(e,t,n):s(e,t,n)},$.datepicker.formatTime=function(e,t,i){i=i||{},i=$.extend({},$.timepicker._defaults,i),t=$.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},t);var n=e,s=i.amNames[0],o=parseInt(t.hour,10);return o>11&&(s=i.pmNames[0]),n=n.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(e){switch(e){case"HH":return("0"+o).slice(-2);case"H":return o;case"hh":return("0"+convert24to12(o)).slice(-2);case"h":return convert24to12(o);case"mm":return("0"+t.minute).slice(-2);case"m":return t.minute;case"ss":return("0"+t.second).slice(-2);case"s":return t.second;case"l":return("00"+t.millisec).slice(-3);case"c":return("00"+t.microsec).slice(-3);case"z":return $.timepicker.timezoneOffsetString(null===t.timezone?i.timezone:t.timezone,!1);case"Z":return $.timepicker.timezoneOffsetString(null===t.timezone?i.timezone:t.timezone,!0);case"T":return s.charAt(0).toUpperCase();case"TT":return s.toUpperCase();case"t":return s.charAt(0).toLowerCase();case"tt":return s.toLowerCase();default:return e.replace(/'/g,"")}})},$.datepicker._base_selectDate=$.datepicker._selectDate,$.datepicker._selectDate=function(e,t){var i,n=this._getInst($(e)[0]),s=this._get(n,"timepicker");s&&n.settings.showTimepicker?(s._limitMinMaxDateTime(n,!0),i=n.inline,n.inline=n.stay_open=!0,this._base_selectDate(e,t),n.inline=i,n.stay_open=!1,this._notifyChange(n),this._updateDatepicker(n)):this._base_selectDate(e,t)},$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker,$.datepicker._updateDatepicker=function(e){var t=e.input[0];if(!($.datepicker._curInst&&$.datepicker._curInst!==e&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!==t||"boolean"==typeof e.stay_open&&!1!==e.stay_open)){this._base_updateDatepicker(e);var i=this._get(e,"timepicker");i&&i._addTimePicker(e)}},$.datepicker._base_doKeyPress=$.datepicker._doKeyPress,$.datepicker._doKeyPress=function(e){var t=$.datepicker._getInst(e.target),i=$.datepicker._get(t,"timepicker");if(i&&$.datepicker._get(t,"constrainInput")){var n=i.support.ampm,s=null!==i._defaults.showTimezone?i._defaults.showTimezone:i.support.timezone,o=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=i._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,n?"APM":"").replace(/Tt/g,n?"AaPpMm":"").replace(/tT/g,n?"AaPpMm":"").replace(/T/g,n?"AP":"").replace(/tt/g,n?"apm":"").replace(/t/g,n?"ap":"")+" "+i._defaults.separator+i._defaults.timeSuffix+(s?i._defaults.timezoneList.join(""):"")+i._defaults.amNames.join("")+i._defaults.pmNames.join("")+o,a=String.fromCharCode(void 0===e.charCode?e.keyCode:e.charCode);return e.ctrlKey||a<" "||!o||r.indexOf(a)>-1}return $.datepicker._base_doKeyPress(e)},$.datepicker._base_updateAlternate=$.datepicker._updateAlternate,$.datepicker._updateAlternate=function(e){var t=this._get(e,"timepicker");if(t){var i=t._defaults.altField;if(i){var n=(t._defaults.altFormat||t._defaults.dateFormat,this._getDate(e)),s=$.datepicker._getFormatConfig(e),o="",r=t._defaults.altSeparator?t._defaults.altSeparator:t._defaults.separator,a=t._defaults.altTimeSuffix?t._defaults.altTimeSuffix:t._defaults.timeSuffix,l=null!==t._defaults.altTimeFormat?t._defaults.altTimeFormat:t._defaults.timeFormat;o+=$.datepicker.formatTime(l,t,t._defaults)+a,t._defaults.timeOnly||t._defaults.altFieldTimeOnly||null===n||(o=t._defaults.altFormat?$.datepicker.formatDate(t._defaults.altFormat,n,s)+r+o:t.formattedDate+r+o),$(i).val(e.input.val()?o:"")}}else $.datepicker._base_updateAlternate(e)},$.datepicker._base_doKeyUp=$.datepicker._doKeyUp,$.datepicker._doKeyUp=function(e){var t=$.datepicker._getInst(e.target),i=$.datepicker._get(t,"timepicker");if(i&&i._defaults.timeOnly&&t.input.val()!==t.lastVal)try{$.datepicker._updateDatepicker(t)}catch(e){$.timepicker.log(e)}return $.datepicker._base_doKeyUp(e)},$.datepicker._base_gotoToday=$.datepicker._gotoToday,$.datepicker._gotoToday=function(e){var t=this._getInst($(e)[0]),i=(t.dpDiv,this._get(t,"timepicker"));selectLocalTimezone(i);var n=new Date;this._setTime(t,n),this._setDate(t,n),this._base_gotoToday(e)},$.datepicker._disableTimepickerDatepicker=function(e){var t=this._getInst(e);if(t){var i=this._get(t,"timepicker");$(e).datepicker("getDate"),i&&(t.settings.showTimepicker=!1,i._defaults.showTimepicker=!1,i._updateDateTime(t))}},$.datepicker._enableTimepickerDatepicker=function(e){var t=this._getInst(e);if(t){var i=this._get(t,"timepicker");$(e).datepicker("getDate"),i&&(t.settings.showTimepicker=!0,i._defaults.showTimepicker=!0,i._addTimePicker(t),i._updateDateTime(t))}},$.datepicker._setTime=function(e,t){var i=this._get(e,"timepicker");if(i){var n=i._defaults;i.hour=t?t.getHours():n.hour,i.minute=t?t.getMinutes():n.minute,i.second=t?t.getSeconds():n.second,i.millisec=t?t.getMilliseconds():n.millisec,i.microsec=t?t.getMicroseconds():n.microsec,i._limitMinMaxDateTime(e,!0),i._onTimeChange(),i._updateDateTime(e)}},$.datepicker._setTimeDatepicker=function(e,t,i){var n=this._getInst(e);if(n){var s=this._get(n,"timepicker");if(s){this._setDateFromField(n);var o;t&&("string"==typeof t?(s._parseTime(t,i),o=new Date,o.setHours(s.hour,s.minute,s.second,s.millisec),o.setMicroseconds(s.microsec)):(o=new Date(t.getTime()),o.setMicroseconds(t.getMicroseconds())),"Invalid Date"===o.toString()&&(o=void 0),this._setTime(n,o))}}},$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker,$.datepicker._setDateDatepicker=function(e,t){var i=this._getInst(e),n=t;if(i){"string"==typeof t&&(n=new Date(t),n.getTime()||(this._base_setDateDatepicker.apply(this,arguments),n=$(e).datepicker("getDate")));var s,o=this._get(i,"timepicker");n instanceof Date?(s=new Date(n.getTime()),s.setMicroseconds(n.getMicroseconds())):s=n,o&&s&&(o.support.timezone||null!==o._defaults.timezone||(o.timezone=-1*s.getTimezoneOffset()),n=$.timepicker.timezoneAdjust(n,o.timezone),s=$.timepicker.timezoneAdjust(s,o.timezone)),this._updateDatepicker(i),this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(e,s,!0)}},$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker,$.datepicker._getDateDatepicker=function(e,t){var i=this._getInst(e);if(i){var n=this._get(i,"timepicker");if(n){void 0===i.lastVal&&this._setDateFromField(i,t);var s=this._getDate(i),o=$.trim(n.$altInput&&n._defaults.altFieldTimeOnly?n.$input.val()+" "+n.$altInput.val():n.$input.val());return s&&n._parseTime(o,!i.settings.timeOnly)&&(s.setHours(n.hour,n.minute,n.second,n.millisec),s.setMicroseconds(n.microsec),null!=n.timezone&&(n.support.timezone||null!==n._defaults.timezone||(n.timezone=-1*s.getTimezoneOffset()),s=$.timepicker.timezoneAdjust(s,n.timezone))),s}return this._base_getDateDatepicker(e,t)}},$.datepicker._base_parseDate=$.datepicker.parseDate,$.datepicker.parseDate=function(e,t,i){var n;try{n=this._base_parseDate(e,t,i)}catch(s){if(!(s.indexOf(":")>=0))throw s;n=this._base_parseDate(e,t.substring(0,t.length-(s.length-s.indexOf(":")-2)),i),$.timepicker.log("Error parsing the date string: "+s+"\ndate string = "+t+"\ndate format = "+e)}return n},$.datepicker._base_formatDate=$.datepicker._formatDate,$.datepicker._formatDate=function(e,t,i,n){var s=this._get(e,"timepicker");return s?(s._updateDateTime(e),s.$input.val()):this._base_formatDate(e)},$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker,$.datepicker._optionDatepicker=function(e,t,i){var n,s=this._getInst(e);if(!s)return null;var o=this._get(s,"timepicker");if(o){var r,a,l,c,d=null,u=null,h=null,p=o._defaults.evnts,f={};if("string"==typeof t){if("minDate"===t||"minDateTime"===t)d=i;else if("maxDate"===t||"maxDateTime"===t)u=i;else if("onSelect"===t)h=i;else if(p.hasOwnProperty(t)){if(void 0===i)return p[t];f[t]=i,n={}}}else if("object"==typeof t){t.minDate?d=t.minDate:t.minDateTime?d=t.minDateTime:t.maxDate?u=t.maxDate:t.maxDateTime&&(u=t.maxDateTime);for(r in p)p.hasOwnProperty(r)&&t[r]&&(f[r]=t[r])}for(r in f)f.hasOwnProperty(r)&&(p[r]=f[r],n||(n=$.extend({},t)),delete n[r]);if(n&&isEmptyObject(n))return;if(d?(d=0===d?new Date:new Date(d),o._defaults.minDate=d,o._defaults.minDateTime=d):u?(u=0===u?new Date:new Date(u),o._defaults.maxDate=u,o._defaults.maxDateTime=u):h&&(o._defaults.onSelect=h),d||u)return c=$(e),l=c.datetimepicker("getDate"),a=this._base_optionDatepicker.call($.datepicker,e,n||t,i),c.datetimepicker("setDate",l),a}return void 0===i?this._base_optionDatepicker.call($.datepicker,e,t):this._base_optionDatepicker.call($.datepicker,e,n||t,i)};var isEmptyObject=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},extendRemove=function(e,t){$.extend(e,t);for(var i in t)null!==t[i]&&void 0!==t[i]||(e[i]=t[i]);return e},detectSupport=function(e){var t=e.replace(/'.*?'/g,"").toLowerCase(),i=function(e,t){return-1!==e.indexOf(t)};return{hour:i(t,"h"),minute:i(t,"m"),second:i(t,"s"),millisec:i(t,"l"),microsec:i(t,"c"),timezone:i(t,"z"),ampm:i(t,"t")&&i(e,"h"),iso8601:i(e,"Z")}
},convert24to12=function(e){return e%=12,0===e&&(e=12),String(e)},computeEffectiveSetting=function(e,t){return e&&e[t]?e[t]:$.timepicker._defaults[t]},splitDateTime=function(e,t){var i=computeEffectiveSetting(t,"separator"),n=computeEffectiveSetting(t,"timeFormat"),s=n.split(i),o=s.length,r=e.split(i),a=r.length;return a>1?{dateString:r.splice(0,a-o).join(i),timeString:r.splice(0,o).join(i)}:{dateString:e,timeString:""}},parseDateTimeInternal=function(e,t,i,n,s){var o,r,a;if(r=splitDateTime(i,s),o=$.datepicker._base_parseDate(e,r.dateString,n),""===r.timeString)return{date:o};if(!(a=$.datepicker.parseTime(t,r.timeString,s)))throw"Wrong time format";return{date:o,timeObj:a}},selectLocalTimezone=function(e,t){if(e&&e.timezone_select){var i=t||new Date;e.timezone_select.val(-i.getTimezoneOffset())}};$.timepicker=new Timepicker,$.timepicker.timezoneOffsetString=function(e,t){if(isNaN(e)||e>840||e<-720)return e;var i=e,n=i%60,s=(i-n)/60,o=t?":":"",r=(i>=0?"+":"-")+("0"+Math.abs(s)).slice(-2)+o+("0"+Math.abs(n)).slice(-2);return"+00:00"===r?"Z":r},$.timepicker.timezoneOffsetNumber=function(e){var t=e.toString().replace(":","");return"Z"===t.toUpperCase()?0:/^(\-|\+)\d{4}$/.test(t)?("-"===t.substr(0,1)?-1:1)*(60*parseInt(t.substr(1,2),10)+parseInt(t.substr(3,2),10)):e},$.timepicker.timezoneAdjust=function(e,t){var i=$.timepicker.timezoneOffsetNumber(t);return isNaN(i)||e.setMinutes(e.getMinutes()+-e.getTimezoneOffset()-i),e},$.timepicker.timeRange=function(e,t,i){return $.timepicker.handleRange("timepicker",e,t,i)},$.timepicker.datetimeRange=function(e,t,i){$.timepicker.handleRange("datetimepicker",e,t,i)},$.timepicker.dateRange=function(e,t,i){$.timepicker.handleRange("datepicker",e,t,i)},$.timepicker.handleRange=function(e,t,i,n){function s(s,o){var r=t[e]("getDate"),a=i[e]("getDate"),l=s[e]("getDate");if(null!==r){var c=new Date(r.getTime()),d=new Date(r.getTime());c.setMilliseconds(c.getMilliseconds()+n.minInterval),d.setMilliseconds(d.getMilliseconds()+n.maxInterval),n.minInterval>0&&c>a?i[e]("setDate",c):n.maxInterval>0&&d<a?i[e]("setDate",d):r>a&&o[e]("setDate",l)}}function o(t,i,s){if(t.val()){var o=t[e].call(t,"getDate");null!==o&&n.minInterval>0&&("minDate"===s&&o.setMilliseconds(o.getMilliseconds()+n.minInterval),"maxDate"===s&&o.setMilliseconds(o.getMilliseconds()-n.minInterval)),o.getTime&&i[e].call(i,"option",s,o)}}n=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},n);var r=!1;return"timepicker"===e&&(r=!0,e="datetimepicker"),$.fn[e].call(t,$.extend({timeOnly:r,onClose:function(e,t){s($(this),i)},onSelect:function(e){o($(this),i,"minDate")}},n,n.start)),$.fn[e].call(i,$.extend({timeOnly:r,onClose:function(e,i){s($(this),t)},onSelect:function(e){o($(this),t,"maxDate")}},n,n.end)),s(t,i),o(t,i,"minDate"),o(i,t,"maxDate"),$([t.get(0),i.get(0)])},$.timepicker.log=function(){window.console&&window.console.log.apply(window.console,Array.prototype.slice.call(arguments))},$.timepicker._util={_extendRemove:extendRemove,_isEmptyObject:isEmptyObject,_convert24to12:convert24to12,_detectSupport:detectSupport,_selectLocalTimezone:selectLocalTimezone,_computeEffectiveSetting:computeEffectiveSetting,_splitDateTime:splitDateTime,_parseDateTimeInternal:parseDateTimeInternal},Date.prototype.getMicroseconds||(Date.prototype.microseconds=0,Date.prototype.getMicroseconds=function(){return this.microseconds},Date.prototype.setMicroseconds=function(e){return this.setMilliseconds(this.getMilliseconds()+Math.floor(e/1e3)),this.microseconds=e%1e3,this}),$.timepicker.version="1.5.3"}}),function(e){e.timepicker.regional.af={timeOnlyTitle:"Kies Tyd",timeText:"Tyd ",hourText:"Ure ",minuteText:"Minute",secondText:"Sekondes",millisecText:"Millisekondes",microsecText:"Mikrosekondes",timezoneText:"Tydsone",currentText:"Huidige Tyd",closeText:"Klaar",timeFormat:"HH:mm",timeSuffix:"",amNames:["AM","A"],pmNames:["PM","P"],isRTL:!1},e.timepicker.regional.am={timeOnlyTitle:"Ընտրեք ժամանակը",timeText:"Ժամանակը",hourText:"Ժամ",minuteText:"Րոպե",secondText:"Վարկյան",millisecText:"Միլիվարկյան",microsecText:"Միկրովարկյան",timezoneText:"Ժամային գոտին",currentText:"Այժմ",closeText:"Փակել",timeFormat:"HH:mm",timeSuffix:"",amNames:["AM","A"],pmNames:["PM","P"],isRTL:!1},e.timepicker.regional.bg={timeOnlyTitle:"Изберете време",timeText:"Време",hourText:"Час",minuteText:"Минути",secondText:"Секунди",millisecText:"Милисекунди",microsecText:"Микросекунди",timezoneText:"Часови пояс",currentText:"Сега",closeText:"Затвори",timeFormat:"HH:mm",timeSuffix:"",amNames:["AM","A"],pmNames:["PM","P"],isRTL:!1},e.timepicker.regional.ca={timeOnlyTitle:"Escollir una hora",timeText:"Hora",hourText:"Hores",minuteText:"Minuts",secondText:"Segons",millisecText:"Milisegons",microsecText:"Microsegons",timezoneText:"Fus horari",currentText:"Ara",closeText:"Tancar",timeFormat:"HH:mm",timeSuffix:"",amNames:["AM","A"],pmNames:["PM","P"],isRTL:!1},e.timepicker.regional.cs={timeOnlyTitle:"Vyberte čas",timeText:"Čas",hourText:"Hodiny",minuteText:"Minuty",secondText:"Vteřiny",millisecText:"Milisekundy",microsecText:"Mikrosekundy",timezoneText:"Časové pásmo",currentText:"Nyní",closeText:"Zavřít",timeFormat:"HH:mm",timeSuffix:"",amNames:["dop.","AM","A"],pmNames:["odp.","PM","P"],isRTL:!1},e.timepicker.regional.da={timeOnlyTitle:"Vælg tid",timeText:"Tid",hourText:"Time",minuteText:"Minut",secondText:"Sekund",millisecText:"Millisekund",microsecText:"Mikrosekund",timezoneText:"Tidszone",currentText:"Nu",closeText:"Luk",timeFormat:"HH:mm",timeSuffix:"",amNames:["am","AM","A"],pmNames:["pm","PM","P"],isRTL:!1},e.timepicker.regional.de={timeOnlyTitle:"Zeit wählen",timeText:"Zeit",hourText:"Stunde",minuteText:"Minute",secondText:"Sekunde",millisecText:"Millisekunde",microsecText:"Mikrosekunde",timezoneText:"Zeitzone",currentText:"Jetzt",closeText:"Fertig",timeFormat:"HH:mm",timeSuffix:"",amNames:["vorm.","AM","A"],pmNames:["nachm.","PM","P"],isRTL:!1},e.timepicker.regional.el={timeOnlyTitle:"Επιλογή ώρας",timeText:"Ώρα",hourText:"Ώρες",minuteText:"Λεπτά",secondText:"Δευτερόλεπτα",millisecText:"μιλιδευτερόλεπτο",microsecText:"Microseconds",timezoneText:"Ζώνη ώρας",currentText:"Τώρα",closeText:"Κλείσιμο",timeFormat:"HH:mm",timeSuffix:"",amNames:["π.μ.","AM","A"],pmNames:["μ.μ.","PM","P"],isRTL:!1},e.timepicker.regional.es={timeOnlyTitle:"Elegir una hora",timeText:"Hora",hourText:"Horas",minuteText:"Minutos",secondText:"Segundos",millisecText:"Milisegundos",microsecText:"Microsegundos",timezoneText:"Uso horario",currentText:"Hoy",closeText:"Cerrar",timeFormat:"HH:mm",timeSuffix:"",amNames:["a.m.","AM","A"],pmNames:["p.m.","PM","P"],isRTL:!1},e.timepicker.regional.et={timeOnlyTitle:"Vali aeg",timeText:"Aeg",hourText:"Tund",minuteText:"Minut",secondText:"Sekund",millisecText:"Millisekundis",microsecText:"Mikrosekundis",timezoneText:"Ajavöönd",currentText:"Praegu",closeText:"Valmis",timeFormat:"HH:mm",timeSuffix:"",amNames:["AM","A"],pmNames:["PM","P"],isRTL:!1},e.timepicker.regional.eu={timeOnlyTitle:"Aukeratu ordua",timeText:"Ordua",hourText:"Orduak",minuteText:"Minutuak",secondText:"Segundoak",millisecText:"Milisegundoak",microsecText:"Mikrosegundoak",timezoneText:"Ordu-eremua",currentText:"Orain",closeText:"Itxi",timeFormat:"HH:mm",timeSuffix:"",amNames:["a.m.","AM","A"],pmNames:["p.m.","PM","P"],isRTL:!1},e.timepicker.regional.fi={timeOnlyTitle:"Valitse aika",timeText:"Aika",hourText:"Tunti",minuteText:"Minuutti",secondText:"Sekunti",millisecText:"Millisekunnin",microsecText:"Mikrosekuntia",timezoneText:"Aikavyöhyke",currentText:"Nyt",closeText:"Sulje",timeFormat:"HH:mm",timeSuffix:"",amNames:["ap.","AM","A"],pmNames:["ip.","PM","P"],isRTL:!1},e.timepicker.regional.fr={timeOnlyTitle:"Choisir une heure",timeText:"Heure",hourText:"Heures",minuteText:"Minutes",secondText:"Secondes",millisecText:"Millisecondes",microsecText:"Microsecondes",timezoneText:"Fuseau horaire",currentText:"Maintenant",closeText:"Terminé",timeFormat:"HH:mm",timeSuffix:"",amNames:["AM","A"],pmNames:["PM","P"],isRTL:!1},e.timepicker.regional.gl={timeOnlyTitle:"Elixir unha hora",timeText:"Hora",hourText:"Horas",minuteText:"Minutos",secondText:"Segundos",millisecText:"Milisegundos",microsecText:"Microssegundos",timezoneText:"Fuso horario",currentText:"Agora",closeText:"Pechar",timeFormat:"HH:mm",timeSuffix:"",amNames:["a.m.","AM","A"],pmNames:["p.m.","PM","P"],isRTL:!1},e.timepicker.regional.he={timeOnlyTitle:"בחירת זמן",timeText:"שעה",hourText:"שעות",minuteText:"דקות",secondText:"שניות",millisecText:"אלפית השנייה",microsecText:"מיקרו",timezoneText:"אזור זמן",currentText:"עכשיו",closeText:"סגור",timeFormat:"HH:mm",timeSuffix:"",amNames:['לפנה"צ',"AM","A"],pmNames:['אחה"צ',"PM","P"],isRTL:!0},e.timepicker.regional.hr={timeOnlyTitle:"Odaberi vrijeme",timeText:"Vrijeme",hourText:"Sati",minuteText:"Minute",secondText:"Sekunde",millisecText:"Milisekunde",microsecText:"Mikrosekunde",timezoneText:"Vremenska zona",currentText:"Sada",closeText:"Gotovo",timeFormat:"HH:mm",timeSuffix:"",amNames:["a.m.","AM","A"],pmNames:["p.m.","PM","P"],isRTL:!1},e.timepicker.regional.hu={timeOnlyTitle:"Válasszon időpontot",timeText:"Idő",hourText:"Óra",minuteText:"Perc",secondText:"Másodperc",millisecText:"Milliszekundumos",microsecText:"Ezredmásodperc",timezoneText:"Időzóna",currentText:"Most",closeText:"Kész",timeFormat:"HH:mm",timeSuffix:"",amNames:["de.","AM","A"],pmNames:["du.","PM","P"],isRTL:!1},e.timepicker.regional.id={timeOnlyTitle:"Pilih Waktu",timeText:"Waktu",hourText:"Pukul",minuteText:"Menit",secondText:"Detik",millisecText:"Milidetik",microsecText:"Mikrodetik",timezoneText:"Zona Waktu",currentText:"Sekarang",closeText:"OK",timeFormat:"HH:mm",timeSuffix:"",amNames:["AM","A"],pmNames:["PM","P"],isRTL:!1},e.timepicker.regional.it={timeOnlyTitle:"Scegli orario",timeText:"Orario",hourText:"Ora",minuteText:"Minuti",secondText:"Secondi",millisecText:"Millisecondi",microsecText:"Microsecondi",timezoneText:"Fuso orario",currentText:"Adesso",closeText:"Chiudi",timeFormat:"HH:mm",timeSuffix:"",amNames:["m.","AM","A"],pmNames:["p.","PM","P"],isRTL:!1},e.timepicker.regional.ja={timeOnlyTitle:"時間を選択",timeText:"時間",hourText:"時",minuteText:"分",secondText:"秒",millisecText:"ミリ秒",microsecText:"マイクロ秒",timezoneText:"タイムゾーン",currentText:"現時刻",closeText:"閉じる",timeFormat:"HH:mm",timeSuffix:"",amNames:["午前","AM","A"],pmNames:["午後","PM","P"],isRTL:!1},e.timepicker.regional.ko={timeOnlyTitle:"시간 선택",timeText:"시간",hourText:"시",minuteText:"분",secondText:"초",millisecText:"밀리초",microsecText:"마이크로",timezoneText:"표준 시간대",currentText:"현재 시각",closeText:"닫기",timeFormat:"tt h:mm",timeSuffix:"",amNames:["오전","AM","A"],pmNames:["오후","PM","P"],isRTL:!1},e.timepicker.regional.lt={timeOnlyTitle:"Pasirinkite laiką",timeText:"Laikas",hourText:"Valandos",minuteText:"Minutės",secondText:"Sekundės",millisecText:"Milisekundės",microsecText:"Mikrosekundės",timezoneText:"Laiko zona",currentText:"Dabar",closeText:"Uždaryti",timeFormat:"HH:mm",timeSuffix:"",amNames:["priešpiet","AM","A"],pmNames:["popiet","PM","P"],isRTL:!1},e.timepicker.regional.lv={timeOnlyTitle:"Ievadiet laiku",timeText:"Laiks",hourText:"Stundas",minuteText:"Minūtes",secondText:"Sekundes",millisecText:"Milisekundes",microsecText:"Mikrosekundes",timezoneText:"Laika josla",currentText:"Tagad",closeText:"Aizvērt",timeFormat:"HH:mm",timeSuffix:"",amNames:["AM","AM","A"],pmNames:["PM","PM","P"],isRTL:!1},e.timepicker.regional.nl={timeOnlyTitle:"Tijdstip",timeText:"Tijd",hourText:"Uur",minuteText:"Minuut",secondText:"Seconde",millisecText:"Milliseconde",microsecText:"Microseconde",timezoneText:"Tijdzone",currentText:"Vandaag",closeText:"Sluiten",timeFormat:"HH:mm",timeSuffix:"",amNames:["AM","A"],pmNames:["PM","P"],isRTL:!1},e.timepicker.regional.no={timeOnlyTitle:"Velg tid",timeText:"Tid",hourText:"Time",minuteText:"Minutt",secondText:"Sekund",millisecText:"Millisekund",microsecText:"mikrosekund",timezoneText:"Tidssone",currentText:"Nå",closeText:"Lukk",timeFormat:"HH:mm",timeSuffix:"",amNames:["am","AM","A"],pmNames:["pm","PM","P"],isRTL:!1},e.timepicker.regional.pl={timeOnlyTitle:"Wybierz godzinę",timeText:"Czas",hourText:"Godzina",minuteText:"Minuta",secondText:"Sekunda",millisecText:"Milisekunda",microsecText:"Mikrosekunda",timezoneText:"Strefa czasowa",currentText:"Teraz",closeText:"Gotowe",timeFormat:"HH:mm",timeSuffix:"",amNames:["AM","A"],pmNames:["PM","P"],isRTL:!1},e.timepicker.regional["pt-BR"]={timeOnlyTitle:"Escolha o horário",timeText:"Horário",hourText:"Hora",minuteText:"Minutos",secondText:"Segundos",millisecText:"Milissegundos",microsecText:"Microssegundos",timezoneText:"Fuso horário",currentText:"Agora",closeText:"Fechar",timeFormat:"HH:mm",timeSuffix:"",amNames:["a.m.","AM","A"],pmNames:["p.m.","PM","P"],isRTL:!1},e.timepicker.regional.pt={timeOnlyTitle:"Escolha uma hora",timeText:"Hora",hourText:"Horas",minuteText:"Minutos",secondText:"Segundos",millisecText:"Milissegundos",microsecText:"Microssegundos",timezoneText:"Fuso horário",currentText:"Agora",closeText:"Fechar",timeFormat:"HH:mm",timeSuffix:"",amNames:["a.m.","AM","A"],pmNames:["p.m.","PM","P"],isRTL:!1},e.timepicker.regional.ro={timeOnlyTitle:"Alegeţi o oră",timeText:"Timp",hourText:"Ore",minuteText:"Minute",secondText:"Secunde",millisecText:"Milisecunde",microsecText:"Microsecunde",timezoneText:"Fus orar",currentText:"Acum",closeText:"Închide",timeFormat:"HH:mm",timeSuffix:"",amNames:["AM","A"],pmNames:["PM","P"],isRTL:!1},e.timepicker.regional.ru={timeOnlyTitle:"Выберите время",timeText:"Время",hourText:"Часы",minuteText:"Минуты",secondText:"Секунды",millisecText:"Миллисекунды",microsecText:"Микросекунды",timezoneText:"Часовой пояс",currentText:"Сейчас",closeText:"Закрыть",timeFormat:"HH:mm",timeSuffix:"",amNames:["AM","A"],pmNames:["PM","P"],isRTL:!1},e.timepicker.regional.sk={timeOnlyTitle:"Zvoľte čas",timeText:"Čas",hourText:"Hodiny",minuteText:"Minúty",secondText:"Sekundy",millisecText:"Milisekundy",microsecText:"Mikrosekundy",timezoneText:"Časové pásmo",currentText:"Teraz",closeText:"Zavrieť",timeFormat:"H:m",timeSuffix:"",amNames:["dop.","AM","A"],pmNames:["pop.","PM","P"],isRTL:!1},e.timepicker.regional.sl={timeOnlyTitle:"Izberite čas",timeText:"Čas",hourText:"Ura",minuteText:"Minute",secondText:"Sekunde",millisecText:"Milisekunde",microsecText:"Mikrosekunde",timezoneText:"Časovni pas",currentText:"Sedaj",closeText:"Zapri",timeFormat:"HH:mm",timeSuffix:"",amNames:["dop.","AM","A"],pmNames:["pop.","PM","P"],isRTL:!1},e.timepicker.regional["sr-RS"]={timeOnlyTitle:"Одаберите време",timeText:"Време",hourText:"Сати",minuteText:"Минути",secondText:"Секунде",millisecText:"Милисекунде",microsecText:"Микросекунде",timezoneText:"Временска зона",currentText:"Сада",closeText:"Затвори",timeFormat:"HH:mm",timeSuffix:"",amNames:["AM","A"],pmNames:["PM","P"],isRTL:!1},e.timepicker.regional["sr-YU"]={timeOnlyTitle:"Odaberite vreme",timeText:"Vreme",hourText:"Sati",minuteText:"Minuti",secondText:"Sekunde",millisecText:"Milisekunde",microsecText:"Mikrosekunde",timezoneText:"Vremenska zona",currentText:"Sada",closeText:"Zatvori",timeFormat:"HH:mm",timeSuffix:"",amNames:["AM","A"],pmNames:["PM","P"],isRTL:!1},e.timepicker.regional.sv={timeOnlyTitle:"Välj en tid",timeText:"Tid",hourText:"Timme",minuteText:"Minut",secondText:"Sekund",millisecText:"Millisekund",microsecText:"Mikrosekund",timezoneText:"Tidszon",currentText:"Nu",closeText:"Stäng",timeFormat:"HH:mm",timeSuffix:"",amNames:["AM","A"],pmNames:["PM","P"],isRTL:!1},e.timepicker.regional.th={timeOnlyTitle:"เลือกเวลา",timeText:"เวลา ",hourText:"ชั่วโมง ",minuteText:"นาที",secondText:"วินาที",millisecText:"มิลลิวินาที",microsecText:"ไมโคริวินาที",timezoneText:"เขตเวลา",currentText:"เวลาปัจจุบัน",closeText:"ปิด",timeFormat:"hh:mm tt",timeSuffix:""},e.timepicker.regional.tr={timeOnlyTitle:"Zaman Seçiniz",timeText:"Zaman",hourText:"Saat",minuteText:"Dakika",secondText:"Saniye",millisecText:"Milisaniye",microsecText:"Mikrosaniye",timezoneText:"Zaman Dilimi",currentText:"Şu an",closeText:"Tamam",timeFormat:"HH:mm",timeSuffix:"",amNames:["ÖÖ","Ö"],pmNames:["ÖS","S"],isRTL:!1},e.timepicker.regional.uk={timeOnlyTitle:"Виберіть час",timeText:"Час",hourText:"Години",minuteText:"Хвилини",secondText:"Секунди",millisecText:"Мілісекунди",microsecText:"Мікросекунди",timezoneText:"Часовий пояс",currentText:"Зараз",closeText:"Закрити",timeFormat:"HH:mm",timeSuffix:"",amNames:["AM","A"],pmNames:["PM","P"],isRTL:!1},e.timepicker.regional.vi={timeOnlyTitle:"Chọn giờ",timeText:"Thời gian",hourText:"Giờ",minuteText:"Phút",secondText:"Giây",millisecText:"Mili giây",microsecText:"Micrô giây",timezoneText:"Múi giờ",currentText:"Hiện thời",closeText:"Đóng",timeFormat:"HH:mm",timeSuffix:"",amNames:["SA","S"],pmNames:["CH","C"],isRTL:!1},e.timepicker.regional["zh-CN"]={timeOnlyTitle:"选择时间",timeText:"时间",hourText:"小时",minuteText:"分钟",secondText:"秒钟",millisecText:"毫秒",microsecText:"微秒",timezoneText:"时区",currentText:"现在时间",closeText:"关闭",timeFormat:"HH:mm",timeSuffix:"",amNames:["AM","A"],pmNames:["PM","P"],isRTL:!1},e.timepicker.regional["zh-TW"]={timeOnlyTitle:"選擇時分秒",timeText:"時間",hourText:"時",minuteText:"分",secondText:"秒",millisecText:"毫秒",microsecText:"微秒",timezoneText:"時區",currentText:"現在時間",closeText:"確定",timeFormat:"HH:mm",timeSuffix:"",amNames:["上午","AM","A"],pmNames:["下午","PM","P"],isRTL:!1}}(jQuery),function(e){e.fn.extend({sliderAccess:function(t){return t=t||{},t.touchonly=void 0===t.touchonly||t.touchonly,!0!==t.touchonly||"ontouchend"in document?e(this).each(function(i,n){var s=e(this),o=e.extend({},{where:"after",step:s.slider("option","step"),upIcon:"ui-icon-plus",downIcon:"ui-icon-minus",text:!1,upText:"+",downText:"-",buttonset:!0,buttonsetTag:"span",isRTL:!1},t),r=e("<"+o.buttonsetTag+' class="ui-slider-access"><button data-icon="'+o.downIcon+'" data-step="'+(o.isRTL?o.step:-1*o.step)+'">'+o.downText+'</button><button data-icon="'+o.upIcon+'" data-step="'+(o.isRTL?-1*o.step:o.step)+'">'+o.upText+"</button></"+o.buttonsetTag+">");r.children("button").each(function(t,i){var n=e(this);n.button({text:o.text,icons:{primary:n.data("icon")}}).click(function(e){var t=n.data("step"),i=s.slider("value"),o=i+=1*t,r=s.slider("option","min"),a=s.slider("option","max"),l=s.slider("option","slide")||function(){},c=s.slider("option","stop")||function(){};e.preventDefault(),o<r||o>a||(s.slider("value",o),l.call(s,null,{value:o}),c.call(s,null,{value:o}))})}),s[o.where](r),o.buttonset&&(r.removeClass("ui-corner-right").removeClass("ui-corner-left").buttonset(),r.eq(0).addClass("ui-corner-left"),r.eq(1).addClass("ui-corner-right"));var a=r.css({marginLeft:"after"===o.where&&!o.isRTL||"before"===o.where&&o.isRTL?10:0,marginRight:"before"===o.where&&!o.isRTL||"after"===o.where&&o.isRTL?10:0}).outerWidth(!0)+5,l=s.outerWidth(!0);s.css("display","inline-block").width(l-a)}):e(this)}})}(jQuery),$("body").on({mouseenter:function(e){var t=e.screenX,i=e.screenY,n=$("#screenshot").width(),s=$("#screenshot").height();if(t<=600){var o=70,r=s/2;xOffset=r,yOffset=o}else{var o=n+70,r=s/2;xOffset=r,yOffset=-o}if(i>=700){var r=s+70;xOffset=r}else if(i<=250){var r=s/4-50;xOffset=r}this.t=this.title,this.title="";""!=this.t&&this.t;$("body").append("<p id='screenshot'><img src='"+this.rel+"'  /></p>"),$("#screenshot").css("top",e.pageY-xOffset+"px").css("left",e.pageX+yOffset+"px").fadeIn("slow")},mouseleave:function(){this.title=this.t,$("#screenshot").remove()}},"a.screenshot"),function(e){function t(e){return"object"==typeof e?e:{top:e,left:e}}var i=e.scrollTo=function(t,i,n){e(window).scrollTo(t,i,n)};i.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1},i.window=function(t){return e(window).scrollable()},e.fn.scrollable=function(){return this.map(function(){var t=this;if(t.nodeName&&-1==e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"]))return t;var i=(t.contentWindow||t).document||t.ownerDocument||t;return e.browser.safari||"BackCompat"==i.compatMode?i.body:i.documentElement})},e.fn.scrollTo=function(n,s,o){return"object"==typeof s&&(o=s,s=0),"function"==typeof o&&(o={onAfter:o}),"max"==n&&(n=9e9),o=e.extend({},i.defaults,o),s=s||o.speed||o.duration,o.queue=o.queue&&o.axis.length>1,o.queue&&(s/=2),o.offset=t(o.offset),o.over=t(o.over),this.scrollable().each(function(){function i(e){c.animate(u,s,o.easing,e&&function(){e.call(this,n,o)})}function r(e){var t="scroll"+e;if(!h)return l[t];var i="client"+e,n=l.ownerDocument.documentElement,s=l.ownerDocument.body;return Math.max(n[t],s[t])-Math.min(n[i],s[i])}var a,l=this,c=e(l),d=n,u={},h=c.is("html,body");switch(typeof d){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px)?$/.test(d)){d=t(d);break}d=e(d,this);case"object":(d.is||d.style)&&(a=(d=e(d)).offset())}e.each(o.axis.split(""),function(e,t){var n="x"==t?"Left":"Top",s=n.toLowerCase(),p="scroll"+n,f=l[p],m="x"==t?"Width":"Height";a?(u[p]=a[s]+(h?0:f-c.offset()[s]),o.margin&&(u[p]-=parseInt(d.css("margin"+n))||0,u[p]-=parseInt(d.css("border"+n+"Width"))||0),u[p]+=o.offset[s]||0,o.over[s]&&(u[p]+=d[m.toLowerCase()]()*o.over[s])):u[p]=d[s],/^\d+$/.test(u[p])&&(u[p]=u[p]<=0?0:Math.min(u[p],r(m))),!e&&o.queue&&(f!=u[p]&&i(o.onAfterFirst),delete u[p])}),i(o.onAfter)}).end()}}(jQuery),function(e){e.widget("ui.multiselect",{options:{sortable:!0,searchable:!0,doubleClickable:!0,animated:"fast",show:"slideDown",hide:"slideUp",dividerLocation:.6,availableFirst:!1,nodeComparator:function(e,t){var i=e.text(),n=t.text();return i==n?0:i<n?-1:1}},_create:function(){this.element.hide(),this.id=this.element.attr("id"),this.container=e('<div class="ui-multiselect ui-helper-clearfix ui-widget"></div>').insertAfter(this.element),this.count=0,this.selectedContainer=e('<div class="selected"></div>').appendTo(this.container),this.availableContainer=e('<div class="available"></div>')[this.options.availableFirst?"prependTo":"appendTo"](this.container),this.selectedActions=e('<div class="actions ui-widget-header ui-helper-clearfix"><span class="count">0 выбрано</span><a href="#" class="remove-all">Удалить все</a></div>').appendTo(this.selectedContainer),this.availableActions=e('<div class="actions ui-widget-header ui-helper-clearfix"><input type="text" class="search empty ui-widget-content ui-corner-all"/><a href="#" class="add-all">'+e.ui.multiselect.locale.addAll+"</a></div>").appendTo(this.availableContainer),this.selectedList=e('<ul class="selected connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind("selectstart",function(){return!1}).appendTo(this.selectedContainer),this.availableList=e('<ul class="available connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind("selectstart",function(){return!1}).appendTo(this.availableContainer);var t=this;this.container.width(this.element.width()+1),this.selectedContainer.width(Math.floor(this.element.width()*this.options.dividerLocation)),this.availableContainer.width(Math.floor(this.element.width()*(1-this.options.dividerLocation))),this.selectedList.height(Math.max(this.element.height()-this.selectedActions.height(),1)),this.availableList.height(Math.max(this.element.height()-this.availableActions.height(),1)),this.options.animated||(this.options.show="show",this.options.hide="hide"),this._populateLists(this.element.find("option")),this.options.sortable&&this.selectedList.sortable({placeholder:"ui-state-highlight",axis:"y",update:function(i,n){t.selectedList.find("li").each(function(){e(this).data("optionLink")&&e(this).data("optionLink").remove().appendTo(t.element)})},receive:function(i,n){n.item.data("optionLink").attr("selected",!0),t.count+=1,t._updateCount(),t.selectedList.children(".ui-draggable").each(function(){e(this).removeClass("ui-draggable"),e(this).data("optionLink",n.item.data("optionLink")),e(this).data("idx",n.item.data("idx")),t._applyItemState(e(this),!0)}),setTimeout(function(){n.item.remove()},1)}}),this.options.searchable?this._registerSearchEvents(this.availableContainer.find("input.search")):e(".search").hide(),this.container.find(".remove-all").click(function(){return t._populateLists(t.element.find("option").removeAttr("selected")),!1}),this.container.find(".add-all").click(function(){var i=t.element.find("option").not(":selected");return t.availableList.children("li:hidden").length>1?t.availableList.children("li").each(function(t){e(this).is(":visible")&&e(i[t-1]).attr("selected","selected")}):i.attr("selected","selected"),t._populateLists(t.element.find("option")),!1})},destroy:function(){this.element.show(),this.container.remove(),e.Widget.prototype.destroy.apply(this,arguments)},_populateLists:function(t){this.selectedList.children(".ui-element").remove(),this.availableList.children(".ui-element").remove(),this.count=0;var i=this;e(t.map(function(e){var t=i._getOptionNode(this).appendTo(this.selected?i.selectedList:i.availableList).show();return this.selected&&(i.count+=1),i._applyItemState(t,this.selected),t.data("idx",e),t[0]}));this._updateCount(),i._filter.apply(this.availableContainer.find("input.search"),[i.availableList])},_updateCount:function(){this.element.trigger("change"),this.selectedContainer.find("span.count").text(this.count+" "+e.ui.multiselect.locale.itemsCount)},_getOptionNode:function(t){t=e(t);var i=e('<li class="ui-state-default ui-element" title="'+t.text()+'" data-selected-value="'+t.val()+'"><span class="ui-icon"/>'+t.text()+'<a href="#" class="action"><span class="ui-corner-all ui-icon"/></a></li>').hide();return i.data("optionLink",t),i},_cloneWithData:function(e){var t=e.clone(!1,!1);return t.data("optionLink",e.data("optionLink")),t.data("idx",e.data("idx")),t},_setSelected:function(t,i){if(t.data("optionLink").attr("selected",i),i){var n=this._cloneWithData(t);return t[this.options.hide](this.options.animated,function(){e(this).remove()}),n.appendTo(this.selectedList).hide()[this.options.show](this.options.animated),this._applyItemState(n,!0),n}var s=this.availableList.find("li"),o=this.options.nodeComparator,r=null,a=t.data("idx"),l=o(t,e(s[a]));if(l){for(;a>=0&&a<s.length;)if(l>0?a++:a--,l!=o(t,e(s[a]))){r=s[l>0?a:a+1];break}}else r=s[a];var c=this._cloneWithData(t);return r?c.insertBefore(e(r)):c.appendTo(this.availableList),t[this.options.hide](this.options.animated,function(){e(this).remove()}),c.hide()[this.options.show](this.options.animated),this._applyItemState(c,!1),c},_applyItemState:function(e,t){t?(this.options.sortable?e.children("span").addClass("ui-icon-arrowthick-2-n-s").removeClass("ui-helper-hidden").addClass("ui-icon"):e.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"),e.find("a.action span").addClass("ui-icon-minus").removeClass("ui-icon-plus"),this._registerRemoveEvents(e.find("a.action"))):(e.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"),e.find("a.action span").addClass("ui-icon-plus").removeClass("ui-icon-minus"),this._registerAddEvents(e.find("a.action"))),this._registerDoubleClickEvents(e),this._registerHoverEvents(e)},_filter:function(t){var i=e(this),n=t.children("li"),s=n.map(function(){return e(this).text().toLowerCase()}),o=e.trim(i.val().toLowerCase()),r=[];o?(n.hide(),s.each(function(e){this.indexOf(o)>-1&&r.push(e)}),e.each(r,function(){e(n[this]).show()})):n.show()},_registerDoubleClickEvents:function(t){this.options.doubleClickable&&t.dblclick(function(i){0===e(i.target).closest(".action").length&&t.find("a.action").click()})},_registerHoverEvents:function(t){t.removeClass("ui-state-hover"),t.mouseover(function(){e(this).addClass("ui-state-hover")}),t.mouseout(function(){e(this).removeClass("ui-state-hover")})},_registerAddEvents:function(t){var i=this;t.click(function(){i._setSelected(e(this).parent(),!0);return i.count+=1,i._updateCount(),!1}),this.options.sortable&&t.each(function(){e(this).parent().draggable({connectToSortable:i.selectedList,helper:function(){var t=i._cloneWithData(e(this)).width(e(this).width()-50);return t.width(e(this).width()),t},appendTo:i.container,containment:i.container,revert:"invalid"})})},_registerRemoveEvents:function(t){var i=this;t.click(function(){return i._setSelected(e(this).parent(),!1),i.count-=1,i._updateCount(),!1})},_registerSearchEvents:function(t){var i=this;t.focus(function(){e(this).addClass("ui-state-active")}).blur(function(){e(this).removeClass("ui-state-active")}).keypress(function(e){if(13==e.keyCode)return!1}).keyup(function(){i._filter.apply(this,[i.availableList])})}}),e.extend(e.ui.multiselect,{locale:{addAll:"Добавить все",removeAll:"Удалить все",itemsCount:"выбрано"}})}(jQuery),function(e){"use strict";var t=function(t,i){this.options=e.extend({},e.fn.editableform.defaults,i),this.$div=e(t),this.options.scope||(this.options.scope=this)};t.prototype={constructor:t,initInput:function(){this.input=this.options.input,this.value=this.input.str2value(this.options.value),this.input.prerender()},initTemplate:function(){this.$form=e(e.fn.editableform.template)},initButtons:function(){var t=this.$form.find(".editable-buttons");t.append(e.fn.editableform.buttons),"bottom"===this.options.showbuttons&&t.addClass("editable-buttons-bottom")},render:function(){this.$loading=e(e.fn.editableform.loading),this.$div.empty().append(this.$loading),this.initTemplate(),this.options.showbuttons?this.initButtons():this.$form.find(".editable-buttons").remove(),this.showLoading(),this.isSaving=!1,this.$div.triggerHandler("rendering"),this.initInput(),this.$form.find("div.editable-input").append(this.input.$tpl),this.$div.append(this.$form),e.when(this.input.render()).then(e.proxy(function(){if(this.options.showbuttons||this.input.autosubmit(),this.$form.find(".editable-cancel").click(e.proxy(this.cancel,this)),this.input.error)this.error(this.input.error),this.$form.find(".editable-submit").attr("disabled",!0),this.input.$input.attr("disabled",!0),this.$form.submit(function(e){e.preventDefault()});else{this.error(!1),this.input.$input.removeAttr("disabled"),this.$form.find(".editable-submit").removeAttr("disabled");var t=null===this.value||void 0===this.value||""===this.value?this.options.defaultValue:this.value;this.input.value2input(t),this.$form.submit(e.proxy(this.submit,this))}this.$div.triggerHandler("rendered"),this.showForm(),this.input.postrender&&this.input.postrender()},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var e,t;this.$form?(e=this.$form.outerWidth(),t=this.$form.outerHeight(),e&&this.$loading.width(e),t&&this.$loading.height(t),this.$form.hide()):(e=this.$loading.parent().width())&&this.$loading.width(e),this.$loading.show()},showForm:function(e){this.$loading.hide(),this.$form.show(),!1!==e&&this.input.activate(),this.$div.triggerHandler("show")},error:function(t){var i,n=this.$form.find(".control-group"),s=this.$form.find(".editable-error-block");if(!1===t)n.removeClass(e.fn.editableform.errorGroupClass),s.removeClass(e.fn.editableform.errorBlockClass).empty().hide();else{if(t){i=t.split("\n");for(var o=0;o<i.length;o++)i[o]=e("<div>").text(i[o]).html();t=i.join("<br>")}n.addClass(e.fn.editableform.errorGroupClass),s.addClass(e.fn.editableform.errorBlockClass).html(t).show()}},submit:function(t){t.stopPropagation(),t.preventDefault();var i,n=this.input.input2value();if(i=this.validate(n))return this.error(i),void this.showForm();if(!this.options.savenochange&&this.input.value2str(n)==this.input.value2str(this.value))return void this.$div.triggerHandler("nochange");var s=this.input.value2submit(n);this.isSaving=!0,e.when(this.save(s)).done(e.proxy(function(e){this.isSaving=!1;var t="function"==typeof this.options.success?this.options.success.call(this.options.scope,e,n):null;return!1===t?(this.error(!1),void this.showForm(!1)):"string"==typeof t?(this.error(t),void this.showForm()):(t&&"object"==typeof t&&t.hasOwnProperty("newValue")&&(n=t.newValue),this.error(!1),this.value=n,void this.$div.triggerHandler("save",{newValue:n,submitValue:s,response:e}))},this)).fail(e.proxy(function(e){this.isSaving=!1;var t
;t="function"==typeof this.options.error?this.options.error.call(this.options.scope,e,n):"string"==typeof e?e:e.responseText||e.statusText||"Unknown error!",this.error(t),this.showForm()},this))},save:function(t){this.options.pk=e.fn.editableutils.tryParseJson(this.options.pk,!0);var i,n="function"==typeof this.options.pk?this.options.pk.call(this.options.scope):this.options.pk,s=!!("function"==typeof this.options.url||this.options.url&&("always"===this.options.send||"auto"===this.options.send&&null!==n&&void 0!==n));if(s)return this.showLoading(),i={name:this.options.name||"",value:t,pk:n},"function"==typeof this.options.params?i=this.options.params.call(this.options.scope,i):(this.options.params=e.fn.editableutils.tryParseJson(this.options.params,!0),e.extend(i,this.options.params)),"function"==typeof this.options.url?this.options.url.call(this.options.scope,i):e.ajax(e.extend({url:this.options.url,data:i,type:"POST"},this.options.ajaxOptions))},validate:function(e){if(void 0===e&&(e=this.value),"function"==typeof this.options.validate)return this.options.validate.call(this.options.scope,e)},option:function(e,t){e in this.options&&(this.options[e]=t),"value"===e&&this.setValue(t)},setValue:function(e,t){this.value=t?this.input.str2value(e):e,this.$form&&this.$form.is(":visible")&&this.input.value2input(this.value)}},e.fn.editableform=function(i){var n=arguments;return this.each(function(){var s=e(this),o=s.data("editableform"),r="object"==typeof i&&i;o||s.data("editableform",o=new t(this,r)),"string"==typeof i&&o[i].apply(o,Array.prototype.slice.call(n,1))})},e.fn.editableform.Constructor=t,e.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:!0,scope:null,savenochange:!1},e.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>',e.fn.editableform.loading='<div class="editableform-loading"></div>',e.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>',e.fn.editableform.errorGroupClass=null,e.fn.editableform.errorBlockClass="editable-error",e.fn.editableform.engine="jquery"}(window.jQuery),function(e){"use strict";e.fn.editableutils={inherit:function(e,t){var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.superclass=t.prototype},setCursorPosition:function(e,t){if(e.setSelectionRange)e.setSelectionRange(t,t);else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}},tryParseJson:function(e,t){if("string"==typeof e&&e.length&&e.match(/^[\{\[].*[\}\]]$/))if(t)try{e=new Function("return "+e)()}catch(e){}finally{return e}else e=new Function("return "+e)();return e},sliceObj:function(t,i,n){var s,o,r={};if(!e.isArray(i)||!i.length)return r;for(var a=0;a<i.length;a++)s=i[a],t.hasOwnProperty(s)&&(r[s]=t[s]),!0!==n&&(o=s.toLowerCase(),t.hasOwnProperty(o)&&(r[s]=t[o]));return r},getConfigData:function(t){var i={};return e.each(t.data(),function(e,t){("object"!=typeof t||t&&"object"==typeof t&&(t.constructor===Object||t.constructor===Array))&&(i[e]=t)}),i},objectKeys:function(e){if(Object.keys)return Object.keys(e);if(e!==Object(e))throw new TypeError("Object.keys called on a non-object");var t,i=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&i.push(t);return i},escape:function(t){return e("<div>").text(t).html()},itemsByValue:function(t,i,n){if(!i||null===t)return[];if("function"!=typeof n){var s=n||"value";n=function(e){return e[s]}}var o=e.isArray(t),r=[],a=this;return e.each(i,function(i,s){if(s.children)r=r.concat(a.itemsByValue(t,s.children,n));else if(o)e.grep(t,function(e){return e==(s&&"object"==typeof s?n(s):s)}).length&&r.push(s);else{var l=s&&"object"==typeof s?n(s):s;t==l&&r.push(s)}}),r},createInput:function(t){var i,n,s=t.type;return"date"===s&&("inline"===t.mode?e.fn.editabletypes.datefield?s="datefield":e.fn.editabletypes.dateuifield&&(s="dateuifield"):e.fn.editabletypes.date?s="date":e.fn.editabletypes.dateui&&(s="dateui"),"date"!==s||e.fn.editabletypes.date||(s="combodate")),"datetime"===s&&"inline"===t.mode&&(s="datetimefield"),"wysihtml5"!==s||e.fn.editabletypes[s]||(s="textarea"),"function"==typeof e.fn.editabletypes[s]?(i=e.fn.editabletypes[s],n=this.sliceObj(t,this.objectKeys(i.defaults)),new i(n)):(e.error("Unknown type: "+s),!1)},supportsTransitions:function(){var e=document.body||document.documentElement,t=e.style,i="transition",n=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof t[i])return!0;i=i.charAt(0).toUpperCase()+i.substr(1);for(var s=0;s<n.length;s++)if("string"==typeof t[n[s]+i])return!0;return!1}}}(window.jQuery),function(e){"use strict";var t=function(e,t){this.init(e,t)},i=function(e,t){this.init(e,t)};t.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(i,n){this.$element=e(i),this.options=e.extend({},e.fn.editableContainer.defaults,n),this.splitOptions(),this.formOptions.scope=this.$element[0],this.initContainer(),this.delayedHide=!1,this.$element.on("destroyed",e.proxy(function(){this.destroy()},this)),e(document).data("editable-handlers-attached")||(e(document).on("keyup.editable",function(t){27===t.which&&e(".editable-open").editableContainer("hide")}),e(document).on("click.editable",function(i){var n,s=e(i.target),o=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(e.contains(document.documentElement,i.target)&&!s.is(document)){for(n=0;n<o.length;n++)if(s.is(o[n])||s.parents(o[n]).length)return;t.prototype.closeOthers(i.target)}}),e(document).data("editable-handlers-attached",!0))},splitOptions:function(){if(this.containerOptions={},this.formOptions={},!e.fn[this.containerName])throw new Error(this.containerName+" not found. Have you included corresponding js file?");for(var t in this.options)t in this.defaults?this.containerOptions[t]=this.options[t]:this.formOptions[t]=this.options[t]},tip:function(){return this.container()?this.container().$tip:null},container:function(){var e;return this.containerDataName&&(e=this.$element.data(this.containerDataName))?e:e=this.$element.data(this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:e.proxy(this.save,this),nochange:e.proxy(function(){this.hide("nochange")},this),cancel:e.proxy(function(){this.hide("cancel")},this),show:e.proxy(function(){this.delayedHide?(this.hide(this.delayedHide.reason),this.delayedHide=!1):this.setPosition()},this),rendering:e.proxy(this.setPosition,this),resize:e.proxy(this.setPosition,this),rendered:e.proxy(function(){this.$element.triggerHandler("shown",e(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(t){this.$element.addClass("editable-open"),!1!==t&&this.closeOthers(this.$element[0]),this.innerShow(),this.tip().addClass(this.containerClass),this.$form,this.$form=e("<div>"),this.tip().is(this.innerCss)?this.tip().append(this.$form):this.tip().find(this.innerCss).append(this.$form),this.renderForm()},hide:function(e){if(this.tip()&&this.tip().is(":visible")&&this.$element.hasClass("editable-open")){if(this.$form.data("editableform").isSaving)return void(this.delayedHide={reason:e});this.delayedHide=!1,this.$element.removeClass("editable-open"),this.innerHide(),this.$element.triggerHandler("hidden",e||"manual")}},innerShow:function(){},innerHide:function(){},toggle:function(e){this.container()&&this.tip()&&this.tip().is(":visible")?this.hide():this.show(e)},setPosition:function(){},save:function(e,t){this.$element.triggerHandler("save",t),this.hide("save")},option:function(e,t){this.options[e]=t,e in this.containerOptions?(this.containerOptions[e]=t,this.setContainerOption(e,t)):(this.formOptions[e]=t,this.$form&&this.$form.editableform("option",e,t))},setContainerOption:function(e,t){this.call("option",e,t)},destroy:function(){this.hide(),this.innerDestroy(),this.$element.off("destroyed"),this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(t){e(".editable-open").each(function(i,n){if(n!==t&&!e(n).find(t).length){var s=e(n),o=s.data("editableContainer");o&&("cancel"===o.options.onblur?s.data("editableContainer").hide("onblur"):"submit"===o.options.onblur&&s.data("editableContainer").tip().find("form").submit())}})},activate:function(){this.tip&&this.tip().is(":visible")&&this.$form&&this.$form.data("editableform").input.activate()}},e.fn.editableContainer=function(n){var s=arguments;return this.each(function(){var o=e(this),r=o.data("editableContainer"),a="object"==typeof n&&n,l="inline"===a.mode?i:t;r||o.data("editableContainer",r=new l(this,a)),"string"==typeof n&&r[n].apply(r,Array.prototype.slice.call(s,1))})},e.fn.editableContainer.Popup=t,e.fn.editableContainer.Inline=i,e.fn.editableContainer.defaults={value:null,placement:"top",autohide:!0,onblur:"cancel",anim:!1,mode:"popup"},jQuery.event.special.destroyed={remove:function(e){e.handler&&e.handler()}}}(window.jQuery),function(e){"use strict";e.extend(e.fn.editableContainer.Inline.prototype,e.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=e("<span></span>"),this.options.anim||(this.options.anim=0)},splitOptions:function(){this.containerOptions={},this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide(),this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,e.proxy(function(){this.$element.show(),this.innerDestroy()},this))},innerDestroy:function(){this.tip()&&this.tip().empty().remove()}})}(window.jQuery),function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.editable.defaults,i,e.fn.editableutils.getConfigData(this.$element)),this.options.selector?this.initLive():this.init(),this.options.highlight&&!e.fn.editableutils.supportsTransitions()&&(this.options.highlight=!1)};t.prototype={constructor:t,init:function(){var t,i=!1;if(this.options.name=this.options.name||this.$element.attr("id"),this.options.scope=this.$element[0],this.input=e.fn.editableutils.createInput(this.options),this.input){switch(void 0===this.options.value||null===this.options.value?(this.value=this.input.html2value(e.trim(this.$element.html())),i=!0):(this.options.value=e.fn.editableutils.tryParseJson(this.options.value,!0),"string"==typeof this.options.value?this.value=this.input.str2value(this.options.value):this.value=this.options.value),this.$element.addClass("editable"),"textarea"===this.input.type&&this.$element.addClass("editable-pre-wrapped"),"manual"!==this.options.toggle?(this.$element.addClass("editable-click"),this.$element.on(this.options.toggle+".editable",e.proxy(function(e){if(this.options.disabled||e.preventDefault(),"mouseenter"===this.options.toggle)this.show();else{var t="click"!==this.options.toggle;this.toggle(t)}},this))):this.$element.attr("tabindex",-1),"function"==typeof this.options.display&&(this.options.autotext="always"),this.options.autotext){case"always":t=!0;break;case"auto":t=!e.trim(this.$element.text()).length&&null!==this.value&&void 0!==this.value&&!i;break;default:t=!1}e.when(!t||this.render()).then(e.proxy(function(){this.options.disabled?this.disable():this.enable(),this.$element.triggerHandler("init",this)},this))}},initLive:function(){var t=this.options.selector;this.options.selector=!1,this.options.autotext="never",this.$element.on(this.options.toggle+".editable",t,e.proxy(function(t){var i=e(t.target);i.data("editable")||(i.hasClass(this.options.emptyclass)&&i.empty(),i.editable(this.options).trigger(t))},this))},render:function(e){if(!1!==this.options.display)return this.input.value2htmlFinal?this.input.value2html(this.value,this.$element[0],this.options.display,e):"function"==typeof this.options.display?this.options.display.call(this.$element[0],this.value,e):this.input.value2html(this.value,this.$element[0])},enable:function(){this.options.disabled=!1,this.$element.removeClass("editable-disabled"),this.handleEmpty(this.isEmpty),"manual"!==this.options.toggle&&"-1"===this.$element.attr("tabindex")&&this.$element.removeAttr("tabindex")},disable:function(){this.options.disabled=!0,this.hide(),this.$element.addClass("editable-disabled"),this.handleEmpty(this.isEmpty),this.$element.attr("tabindex",-1)},toggleDisabled:function(){this.options.disabled?this.enable():this.disable()},option:function(t,i){return t&&"object"==typeof t?void e.each(t,e.proxy(function(t,i){this.option(e.trim(t),i)},this)):(this.options[t]=i,"disabled"===t?i?this.disable():this.enable():("value"===t&&this.setValue(i),this.container&&this.container.option(t,i),void(this.input.option&&this.input.option(t,i))))},handleEmpty:function(t){!1!==this.options.display&&(void 0!==t?this.isEmpty=t:"function"==typeof this.input.isEmpty?this.isEmpty=this.input.isEmpty(this.$element):this.isEmpty=""===e.trim(this.$element.html()),this.options.disabled?this.isEmpty&&(this.$element.empty(),this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass)):this.isEmpty?(this.$element.html(this.options.emptytext),this.options.emptyclass&&this.$element.addClass(this.options.emptyclass)):this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass))},show:function(t){if(!this.options.disabled){if(this.container){if(this.container.tip().is(":visible"))return}else{var i=e.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(i),this.$element.on("save.internal",e.proxy(this.save,this)),this.container=this.$element.data("editableContainer")}this.container.show(t)}},hide:function(){this.container&&this.container.hide()},toggle:function(e){this.container&&this.container.tip().is(":visible")?this.hide():this.show(e)},save:function(e,t){if(this.options.unsavedclass){var i=!1;i=i||"function"==typeof this.options.url,i=i||!1===this.options.display,i=i||void 0!==t.response,i=i||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(t.newValue),i?this.$element.removeClass(this.options.unsavedclass):this.$element.addClass(this.options.unsavedclass)}if(this.options.highlight){var n=this.$element,s=n.css("background-color");n.css("background-color",this.options.highlight),setTimeout(function(){"transparent"===s&&(s=""),n.css("background-color",s),n.addClass("editable-bg-transition"),setTimeout(function(){n.removeClass("editable-bg-transition")},1700)},10)}this.setValue(t.newValue,!1,t.response)},validate:function(){if("function"==typeof this.options.validate)return this.options.validate.call(this,this.value)},setValue:function(t,i,n){this.value=i?this.input.str2value(t):t,this.container&&this.container.option("value",this.value),e.when(this.render(n)).then(e.proxy(function(){this.handleEmpty()},this))},activate:function(){this.container&&this.container.activate()},destroy:function(){this.disable(),this.container&&this.container.destroy(),this.input.destroy(),"manual"!==this.options.toggle&&(this.$element.removeClass("editable-click"),this.$element.off(this.options.toggle+".editable")),this.$element.off("save.internal"),this.$element.removeClass("editable editable-open editable-disabled"),this.$element.removeData("editable")}},e.fn.editable=function(i){var n={},s=arguments;switch(i){case"validate":return this.each(function(){var t,i=e(this),s=i.data("editable");s&&(t=s.validate())&&(n[s.options.name]=t)}),n;case"getValue":return 2===arguments.length&&!0===arguments[1]?n=this.eq(0).data("editable").value:this.each(function(){var t=e(this),i=t.data("editable");i&&void 0!==i.value&&null!==i.value&&(n[i.options.name]=i.input.value2submit(i.value))}),n;case"submit":var o,r=arguments[1]||{},a=this,l=this.editable("validate");return e.isEmptyObject(l)?(o=this.editable("getValue"),r.data&&e.extend(o,r.data),e.ajax(e.extend({url:r.url,data:o,type:"POST"},r.ajaxOptions)).success(function(e){"function"==typeof r.success&&r.success.call(a,e,r)}).error(function(){"function"==typeof r.error&&r.error.apply(a,arguments)})):"function"==typeof r.error&&r.error.call(a,l),this}return this.each(function(){var n=e(this),o=n.data("editable"),r="object"==typeof i&&i;if(r&&r.selector)return void(o=new t(this,r));o||n.data("editable",o=new t(this,r)),"string"==typeof i&&o[i].apply(o,Array.prototype.slice.call(s,1))})},e.fn.editable.defaults={type:"text",disabled:!1,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}}(window.jQuery),function(e){"use strict";e.fn.editabletypes={};var t=function(){};t.prototype={init:function(t,i,n){this.type=t,this.options=e.extend({},n,i)},prerender:function(){this.$tpl=e(this.options.tpl),this.$input=this.$tpl,this.$clear=null,this.error=null},render:function(){},value2html:function(t,i){e(i)[this.options.escape?"text":"html"](e.trim(t))},html2value:function(t){return e("<div>").html(t).text()},value2str:function(e){return e},str2value:function(e){return e},value2submit:function(e){return e},value2input:function(e){this.$input.val(e)},input2value:function(){return this.$input.val()},activate:function(){this.$input.is(":visible")&&this.$input.focus()},clear:function(){this.$input.val(null)},escape:function(t){return e("<div>").text(t).html()},autosubmit:function(){},destroy:function(){},setClass:function(){this.options.inputclass&&this.$input.addClass(this.options.inputclass)},setAttr:function(e){void 0!==this.options[e]&&null!==this.options[e]&&this.$input.attr(e,this.options[e])},option:function(e,t){this.options[e]=t}},t.defaults={tpl:"",inputclass:null,escape:!0,scope:null,showbuttons:!0},e.extend(e.fn.editabletypes,{abstractinput:t})}(window.jQuery),function(e){"use strict";var t=function(e){};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput),e.extend(t.prototype,{render:function(){var t=e.Deferred();return this.error=null,this.onSourceReady(function(){this.renderList(),t.resolve()},function(){this.error=this.options.sourceError,t.resolve()}),t.promise()},html2value:function(e){return null},value2html:function(t,i,n,s){var o=e.Deferred(),r=function(){"function"==typeof n?n.call(i,t,this.sourceData,s):this.value2htmlFinal(t,i),o.resolve()};return null===t?r.call(this):this.onSourceReady(r,function(){o.resolve()}),o.promise()},onSourceReady:function(t,i){var n;if(e.isFunction(this.options.source)?(n=this.options.source.call(this.options.scope),this.sourceData=null):n=this.options.source,this.options.sourceCache&&e.isArray(this.sourceData))return void t.call(this);try{n=e.fn.editableutils.tryParseJson(n,!1)}catch(e){return void i.call(this)}if("string"==typeof n){if(this.options.sourceCache){var s,o=n;if(e(document).data(o)||e(document).data(o,{}),s=e(document).data(o),!1===s.loading&&s.sourceData)return this.sourceData=s.sourceData,this.doPrepend(),void t.call(this);if(!0===s.loading)return s.callbacks.push(e.proxy(function(){this.sourceData=s.sourceData,this.doPrepend(),t.call(this)},this)),void s.err_callbacks.push(e.proxy(i,this));s.loading=!0,s.callbacks=[],s.err_callbacks=[]}var r=e.extend({url:n,type:"get",cache:!1,dataType:"json",success:e.proxy(function(n){s&&(s.loading=!1),this.sourceData=this.makeArray(n),e.isArray(this.sourceData)?(s&&(s.sourceData=this.sourceData,e.each(s.callbacks,function(){this.call()})),this.doPrepend(),t.call(this)):(i.call(this),s&&e.each(s.err_callbacks,function(){this.call()}))},this),error:e.proxy(function(){i.call(this),s&&(s.loading=!1,e.each(s.err_callbacks,function(){this.call()}))},this)},this.options.sourceOptions);e.ajax(r)}else this.sourceData=this.makeArray(n),e.isArray(this.sourceData)?(this.doPrepend(),t.call(this)):i.call(this)},doPrepend:function(){null!==this.options.prepend&&void 0!==this.options.prepend&&(e.isArray(this.prependData)||(e.isFunction(this.options.prepend)&&(this.options.prepend=this.options.prepend.call(this.options.scope)),this.options.prepend=e.fn.editableutils.tryParseJson(this.options.prepend,!0),"string"==typeof this.options.prepend&&(this.options.prepend={"":this.options.prepend}),this.prependData=this.makeArray(this.options.prepend)),e.isArray(this.prependData)&&e.isArray(this.sourceData)&&(this.sourceData=this.prependData.concat(this.sourceData)))},renderList:function(){},value2htmlFinal:function(e,t){},makeArray:function(t){var i,n,s,o,r=[];if(!t||"string"==typeof t)return null;if(e.isArray(t)){o=function(e,t){if(n={value:e,text:t},i++>=2)return!1};for(var a=0;a<t.length;a++)s=t[a],"object"==typeof s?(i=0,e.each(s,o),1===i?r.push(n):i>1&&(s.children&&(s.children=this.makeArray(s.children)),r.push(s))):r.push({value:s,text:s})}else e.each(t,function(e,t){r.push({value:e,text:t})});return r},option:function(e,t){this.options[e]=t,"source"===e&&(this.sourceData=null),"prepend"===e&&(this.prependData=null)}}),t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{source:null,prepend:!1,sourceError:"Error when loading list",sourceCache:!0,sourceOptions:null}),e.fn.editabletypes.list=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("text",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput),e.extend(t.prototype,{render:function(){this.renderClear(),this.setClass(),this.setAttr("placeholder")},activate:function(){this.$input.is(":visible")&&(this.$input.focus(),e.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length),this.toggleClear&&this.toggleClear())},renderClear:function(){this.options.clear&&(this.$clear=e('<span class="editable-clear-x"></span>'),this.$input.after(this.$clear).css("padding-right",24).keyup(e.proxy(function(t){if(!~e.inArray(t.keyCode,[40,38,9,13,27])){clearTimeout(this.t);var i=this;this.t=setTimeout(function(){i.toggleClear(t)},100)}},this)).parent().css("position","relative"),this.$clear.click(e.proxy(this.clear,this)))},postrender:function(){},toggleClear:function(e){if(this.$clear){var t=this.$input.val().length,i=this.$clear.is(":visible");t&&!i&&this.$clear.show(),!t&&i&&this.$clear.hide()}},clear:function(){this.$clear.hide(),this.$input.val("").focus()}}),t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:!0}),e.fn.editabletypes.text=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("textarea",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput),e.extend(t.prototype,{render:function(){this.setClass(),this.setAttr("placeholder"),this.setAttr("rows"),this.$input.keydown(function(t){t.ctrlKey&&13===t.which&&e(this).closest("form").submit()})},activate:function(){e.fn.editabletypes.text.prototype.activate.call(this)}}),t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7}),e.fn.editabletypes.textarea=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("select",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.list),e.extend(t.prototype,{renderList:function(){this.$input.empty();var t=function(i,n){var s;if(e.isArray(n))for(var o=0;o<n.length;o++)s={},n[o].children?(s.label=n[o].text,i.append(t(e("<optgroup>",s),n[o].children))):(s.value=n[o].value,n[o].disabled&&(s.disabled=!0),i.append(e("<option>",s).text(n[o].text)));return i};t(this.$input,this.sourceData),this.setClass(),this.$input.on("keydown.editable",function(t){13===t.which&&e(this).closest("form").submit()})},value2htmlFinal:function(t,i){var n="",s=e.fn.editableutils.itemsByValue(t,this.sourceData);s.length&&(n=s[0].text),e.fn.editabletypes.abstractinput.prototype.value2html.call(this,n,i)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){e(this).closest("form").submit()})}}),t.defaults=e.extend({},e.fn.editabletypes.list.defaults,{tpl:"<select></select>"}),e.fn.editabletypes.select=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("checklist",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.list),e.extend(t.prototype,{renderList:function(){var t;if(this.$tpl.empty(),e.isArray(this.sourceData)){for(var i=0;i<this.sourceData.length;i++)t=e("<label>").append(e("<input>",{type:"checkbox",value:this.sourceData[i].value})).append(e("<span>").text(" "+this.sourceData[i].text)),e("<div>").append(t).appendTo(this.$tpl);this.$input=this.$tpl.find('input[type="checkbox"]'),this.setClass()}},value2str:function(t){return e.isArray(t)?t.sort().join(e.trim(this.options.separator)):""},str2value:function(t){var i,n=null;return"string"==typeof t&&t.length?(i=new RegExp("\\s*"+e.trim(this.options.separator)+"\\s*"),n=t.split(i)):n=e.isArray(t)?t:[t],n},value2input:function(t){this.$input.prop("checked",!1),e.isArray(t)&&t.length&&this.$input.each(function(i,n){var s=e(n);e.each(t,function(e,t){s.val()==t&&s.prop("checked",!0)})})},input2value:function(){var t=[];return this.$input.filter(":checked").each(function(i,n){t.push(e(n).val())}),t},value2htmlFinal:function(t,i){var n=[],s=e.fn.editableutils.itemsByValue(t,this.sourceData),o=this.options.escape;s.length?(e.each(s,function(t,i){var s=o?e.fn.editableutils.escape(i.text):i.text;n.push(s)}),e(i).html(n.join("<br>"))):e(i).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(t){13===t.which&&e(this).closest("form").submit()})}}),t.defaults=e.extend({},e.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","}),e.fn.editabletypes.checklist=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("password",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.text),e.extend(t.prototype,{value2html:function(t,i){t?e(i).text("[hidden]"):e(i).empty()},html2value:function(e){return null}}),t.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="password">'}),e.fn.editabletypes.password=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("email",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.text),t.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="email">'}),e.fn.editabletypes.email=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("url",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.text),t.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="url">'}),e.fn.editabletypes.url=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("tel",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.text),t.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'}),e.fn.editabletypes.tel=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("number",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.text),e.extend(t.prototype,{render:function(){t.superclass.render.call(this),this.setAttr("min"),this.setAttr("max"),this.setAttr("step")},postrender:function(){this.$clear&&this.$clear.css({right:24})}}),t.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null}),e.fn.editabletypes.number=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("range",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.number),e.extend(t.prototype,{render:function(){this.$input=this.$tpl.filter("input"),this.setClass(),this.setAttr("min"),this.setAttr("max"),this.setAttr("step"),this.$input.on("input",function(){e(this).siblings("output").text(e(this).val())})},activate:function(){this.$input.focus()}}),t.defaults=e.extend({},e.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"}),e.fn.editabletypes.range=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("time",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput),e.extend(t.prototype,{render:function(){this.setClass()}}),t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'}),e.fn.editabletypes.time=t}(window.jQuery),function(e){"use strict";var t=function(i){if(this.init("select2",i,t.defaults),i.select2=i.select2||{},this.sourceData=null,i.placeholder&&(i.select2.placeholder=i.placeholder),!i.select2.tags&&i.source){var n=i.source;e.isFunction(i.source)&&(n=i.source.call(i.scope)),"string"==typeof n?(i.select2.ajax=i.select2.ajax||{},i.select2.ajax.data||(i.select2.ajax.data=function(e){return{query:e}}),i.select2.ajax.results||(i.select2.ajax.results=function(e){return{results:e}}),i.select2.ajax.url=n):(this.sourceData=this.convertSource(n),i.select2.data=this.sourceData)}if(this.options.select2=e.extend({},t.defaults.select2,i.select2),this.isMultiple=this.options.select2.tags||this.options.select2.multiple,this.isRemote="ajax"in this.options.select2,this.idFunc=this.options.select2.id,"function"!=typeof this.idFunc){var s=this.idFunc||"id";this.idFunc=function(e){return e[s]}}this.formatSelection=this.options.select2.formatSelection,"function"!=typeof this.formatSelection&&(this.formatSelection=function(e){return e.text})};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput),e.extend(t.prototype,{render:function(){this.setClass(),this.isRemote&&this.$input.on("select2-loaded",e.proxy(function(e){this.sourceData=e.items.results},this)),this.isMultiple&&this.$input.on("change",function(){e(this).closest("form").parent().triggerHandler("resize")})},value2html:function(i,n){var s,o="",r=this;this.options.select2.tags?s=i:this.sourceData&&(s=e.fn.editableutils.itemsByValue(i,this.sourceData,this.idFunc)),e.isArray(s)?(o=[],e.each(s,function(e,t){o.push(t&&"object"==typeof t?r.formatSelection(t):t)})):s&&(o=r.formatSelection(s)),o=e.isArray(o)?o.join(this.options.viewseparator):o,t.superclass.value2html.call(this,o,n)},html2value:function(e){return this.options.select2.tags?this.str2value(e,this.options.viewseparator):null},value2input:function(t){if(this.$input.data("select2")?this.$input.val(t).trigger("change",!0):(this.$input.val(t),this.$input.select2(this.options.select2)),this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var i=this.options.select2.id,n=this.options.select2.formatSelection;if(!i&&!n){var s={id:t,text:e(this.options.scope).text()};this.$input.select2("data",s)}}},input2value:function(){return this.$input.select2("val")},str2value:function(t,i){if("string"!=typeof t||!this.isMultiple)return t;i=i||this.options.select2.separator||e.fn.select2.defaults.separator;var n,s,o;if(null===t||t.length<1)return null;for(n=t.split(i),s=0,o=n.length;s<o;s+=1)n[s]=e.trim(n[s]);return n},autosubmit:function(){this.$input.on("change",function(t,i){i||e(this).closest("form").submit()})},convertSource:function(t){if(e.isArray(t)&&t.length&&void 0!==t[0].value)for(var i=0;i<t.length;i++)void 0!==t[i].value&&(t[i].id=t[i].value,delete t[i].value);return t},destroy:function(){this.$input.data("select2")&&this.$input.select2("destroy")}}),t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "}),e.fn.editabletypes.select2=t}(window.jQuery),function(e){var t=function(t,i){
if(this.$element=e(t),!this.$element.is("input"))return void e.error("Combodate should be applied to INPUT element");this.options=e.extend({},e.fn.combodate.defaults,i,this.$element.data()),this.init()};t.prototype={constructor:t,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=e('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.$widget.on("change","select",e.proxy(function(){this.$element.val(this.getValue())},this)),this.$widget.find("select").css("width","auto"),this.$element.hide().after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var t=this.options.template;return e.each(this.map,function(e,i){i=i[0];var n=new RegExp(i+"+"),s=i.length>1?i.substring(1,2):i;t=t.replace(n,"{"+s+"}")}),t=t.replace(/ /g,"&nbsp;"),e.each(this.map,function(e,i){i=i[0];var n=i.length>1?i.substring(1,2):i;t=t.replace("{"+n+"}",'<select class="'+e+'"></select>')}),t},initCombos:function(){var t=this;e.each(this.map,function(e,i){var n,s,o=t.$widget.find("."+e);o.length&&(t["$"+e]=o,n="fill"+e.charAt(0).toUpperCase()+e.slice(1),s=t[n](),t["$"+e].html(t.renderItems(s)))})},initItems:function(e){var t,i=[];if("name"===this.options.firstItem){t=moment.relativeTime||moment.langData()._relativeTime;var n="function"==typeof t[e]?t[e](1,!0,e,!1):t[e];n=n.split(" ").reverse()[0],i.push(["",n])}else"empty"===this.options.firstItem&&i.push(["",""]);return i},renderItems:function(e){for(var t=[],i=0;i<e.length;i++)t.push('<option value="'+e[i][0]+'">'+e[i][1]+"</option>");return t.join("\n")},fillDay:function(){var e,t,i=this.initItems("d"),n=-1!==this.options.template.indexOf("DD");for(t=1;t<=31;t++)e=n?this.leadZero(t):t,i.push([t,e]);return i},fillMonth:function(){var e,t,i=this.initItems("M"),n=-1!==this.options.template.indexOf("MMMM"),s=-1!==this.options.template.indexOf("MMM"),o=-1!==this.options.template.indexOf("MM");for(t=0;t<=11;t++)e=n?moment().date(1).month(t).format("MMMM"):s?moment().date(1).month(t).format("MMM"):o?this.leadZero(t+1):t+1,i.push([t,e]);return i},fillYear:function(){var e,t,i=[],n=-1!==this.options.template.indexOf("YYYY");for(t=this.options.maxYear;t>=this.options.minYear;t--)e=n?t:(t+"").substring(2),i[this.options.yearDescending?"push":"unshift"]([t,e]);return i=this.initItems("y").concat(i)},fillHour:function(){var e,t,i=this.initItems("h"),n=-1!==this.options.template.indexOf("h"),s=(this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),o=n?1:0,r=n?12:23;for(t=o;t<=r;t++)e=s?this.leadZero(t):t,i.push([t,e]);return i},fillMinute:function(){var e,t,i=this.initItems("m"),n=-1!==this.options.template.indexOf("mm");for(t=0;t<=59;t+=this.options.minuteStep)e=n?this.leadZero(t):t,i.push([t,e]);return i},fillSecond:function(){var e,t,i=this.initItems("s"),n=-1!==this.options.template.indexOf("ss");for(t=0;t<=59;t+=this.options.secondStep)e=n?this.leadZero(t):t,i.push([t,e]);return i},fillAmpm:function(){var e=-1!==this.options.template.indexOf("a");this.options.template.indexOf("A");return[["am",e?"am":"AM"],["pm",e?"pm":"PM"]]},getValue:function(t){var i,n={},s=this,o=!1;return e.each(this.map,function(e,t){if("ampm"!==e){var i="day"===e?1:0;return n[e]=s["$"+e]?parseInt(s["$"+e].val(),10):i,isNaN(n[e])?(o=!0,!1):void 0}}),o?"":(this.$ampm&&(12===n.hour?n.hour="am"===this.$ampm.val()?0:12:n.hour="am"===this.$ampm.val()?n.hour:n.hour+12),i=moment([n.year,n.month,n.day,n.hour,n.minute,n.second]),this.highlight(i),t=void 0===t?this.options.format:t,null===t?i.isValid()?i:null:i.isValid()?i.format(t):"")},setValue:function(t){function i(t,i){var n={};return t.children("option").each(function(t,s){var o,r=e(s).attr("value");""!==r&&(o=Math.abs(r-i),(void 0===n.distance||o<n.distance)&&(n={value:r,distance:o}))}),n.value}if(t){var n="string"==typeof t?moment(t,this.options.format):moment(t),s=this,o={};n.isValid()&&(e.each(this.map,function(e,t){"ampm"!==e&&(o[e]=n[t[1]]())}),this.$ampm&&(o.hour>=12?(o.ampm="pm",o.hour>12&&(o.hour-=12)):(o.ampm="am",0===o.hour&&(o.hour=12))),e.each(o,function(e,t){s["$"+e]&&("minute"===e&&s.options.minuteStep>1&&s.options.roundTime&&(t=i(s["$"+e],t)),"second"===e&&s.options.secondStep>1&&s.options.roundTime&&(t=i(s["$"+e],t)),s["$"+e].val(t))}),this.$element.val(n.format(this.options.format)))}},highlight:function(e){e.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(e){return e<=9?"0"+e:e},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},e.fn.combodate=function(i){var n,s=Array.apply(null,arguments);return s.shift(),"getValue"===i&&this.length&&(n=this.eq(0).data("combodate"))?n.getValue.apply(n,s):this.each(function(){var n=e(this),o=n.data("combodate"),r="object"==typeof i&&i;o||n.data("combodate",o=new t(this,r)),"string"==typeof i&&"function"==typeof o[i]&&o[i].apply(o,s)})},e.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:!0}}(window.jQuery),function(e){"use strict";var t=function(i){this.init("combodate",i,t.defaults),this.options.viewformat||(this.options.viewformat=this.options.format),i.combodate=e.fn.editableutils.tryParseJson(i.combodate,!0),this.options.combodate=e.extend({},t.defaults.combodate,i.combodate,{format:this.options.format,template:this.options.template})};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput),e.extend(t.prototype,{render:function(){this.$input.combodate(this.options.combodate),"bs3"===e.fn.editableform.engine&&this.$input.siblings().find("select").addClass("form-control"),this.options.inputclass&&this.$input.siblings().find("select").addClass(this.options.inputclass)},value2html:function(e,i){var n=e?e.format(this.options.viewformat):"";t.superclass.value2html.call(this,n,i)},html2value:function(e){return e?moment(e,this.options.viewformat):null},value2str:function(e){return e?e.format(this.options.format):""},str2value:function(e){return e?moment(e,this.options.format):null},value2submit:function(e){return this.value2str(e)},value2input:function(e){this.$input.combodate("setValue",e)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}}),t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null}),e.fn.editabletypes.combodate=t}(window.jQuery),function(e){"use strict";var t=e.fn.editableform.Constructor.prototype.initInput;e.extend(e.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=e(e.fn.editableform.template),this.$form.find(".control-group").addClass("form-group"),this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){t.apply(this);var i=null===this.input.options.inputclass||!1===this.input.options.inputclass,n="text,select,textarea,password,email,url,tel,number,range,time,typeaheadjs".split(",");~e.inArray(this.input.type,n)&&(this.input.$input.addClass("form-control"),i&&(this.input.options.inputclass="input-sm",this.input.$input.addClass("input-sm")));for(var s=this.$form.find(".editable-buttons"),o=i?["input-sm"]:this.input.options.inputclass.split(" "),r=0;r<o.length;r++)"input-lg"===o[r].toLowerCase()&&s.find("button").removeClass("btn-sm").addClass("btn-lg")}}),e.fn.editableform.buttons='<button type="submit" class="btn btn-primary btn-sm editable-submit"><i class="glyphicon glyphicon-ok"></i></button><button type="button" class="btn btn-default btn-sm editable-cancel"><i class="glyphicon glyphicon-remove"></i></button>',e.fn.editableform.errorGroupClass="has-error",e.fn.editableform.errorBlockClass=null,e.fn.editableform.engine="bs3"}(window.jQuery),function(e){"use strict";e.extend(e.fn.editableContainer.Popup.prototype,{containerName:"popover",containerDataName:"bs.popover",innerCss:".popover-content",defaults:e.fn.popover.Constructor.DEFAULTS,initContainer:function(){e.extend(this.containerOptions,{trigger:"manual",selector:!1,content:" ",template:this.defaults.template});var t;this.$element.data("template")&&(t=this.$element.data("template"),this.$element.removeData("template")),this.call(this.containerOptions),t&&this.$element.data("template",t)},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(e,t){this.container().options[e]=t},setPosition:function(){(function(){var e=this.tip(),t="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,i=this.getPosition(),n=e[0].offsetWidth,s=e[0].offsetHeight,o=this.getCalculatedOffset(t,i,n,s);this.applyPlacement(o,t)}).call(this.container())}})}(window.jQuery),function(e){function t(){return new Date(Date.UTC.apply(Date,arguments))}function i(t,i){var n,s=e(t).data(),o={},r=new RegExp("^"+i.toLowerCase()+"([A-Z])"),i=new RegExp("^"+i.toLowerCase());for(var a in s)i.test(a)&&(n=a.replace(r,function(e,t){return t.toLowerCase()}),o[n]=s[a]);return o}function n(t){var i={};if(d[t]||(t=t.split("-")[0],d[t])){var n=d[t];return e.each(c,function(e,t){t in n&&(i[t]=n[t])}),i}}var s=function(t,i){this._process_options(i),this.element=e(t),this.isInline=!1,this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".add-on, .btn"),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=e(u.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this.o.startDate),this.setEndDate(this.o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};s.prototype={constructor:s,_process_options:function(t){this._o=e.extend({},this._o,t);var i=this.o=e.extend({},this._o),n=i.language;switch(d[n]||(n=n.split("-")[0],d[n]||(n=l.language)),i.language=n,i.startView){case 2:case"decade":i.startView=2;break;case 1:case"year":i.startView=1;break;default:i.startView=0}switch(i.minViewMode){case 1:case"months":i.minViewMode=1;break;case 2:case"years":i.minViewMode=2;break;default:i.minViewMode=0}i.startView=Math.max(i.startView,i.minViewMode),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var s=u.parseFormat(i.format);i.startDate!==-1/0&&(i.startDate=u.parseDate(i.startDate,s,i.language)),i.endDate!==1/0&&(i.endDate=u.parseDate(i.endDate,s,i.language)),i.daysOfWeekDisabled=i.daysOfWeekDisabled||[],e.isArray(i.daysOfWeekDisabled)||(i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/)),i.daysOfWeekDisabled=e.map(i.daysOfWeekDisabled,function(e){return parseInt(e,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var t,i,n=0;n<e.length;n++)t=e[n][0],i=e[n][1],t.on(i)},_unapplyEvents:function(e){for(var t,i,n=0;n<e.length;n++)t=e[n][0],i=e[n][1],t.off(i)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{mousedown:e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).size()||this.picker.is(e.target)||this.picker.find(e.target).size()||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,i){var n=i||this.date,s=new Date(n.getTime()+6e4*n.getTimezoneOffset());this.element.trigger({type:t,date:s,format:e.proxy(function(e){var t=e||this.o.format;return u.formatDate(n,t,this.o.language)},this)})},show:function(e){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),this._attachSecondaryEvents(),e&&e.preventDefault(),this._trigger("show")},hide:function(e){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},getDate:function(){var e=this.getUTCDate();return new Date(e.getTime()+6e4*e.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(e){this.setUTCDate(new Date(e.getTime()-6e4*e.getTimezoneOffset()))},setUTCDate:function(e){this.date=e,this.setValue()},setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e):this.component&&this.element.find("input").val(e)},getFormattedDate:function(e){return void 0===e&&(e=this.o.format),u.formatDate(this.date,e,this.o.language)},setStartDate:function(e){this._process_options({startDate:e}),this.update(),this.updateNavArrows()},setEndDate:function(e){this._process_options({endDate:e}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var t=parseInt(this.element.parents().filter(function(){return"auto"!=e(this).css("z-index")}).first().css("z-index"))+10,i=this.component?this.component.parent().offset():this.element.offset(),n=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:i.top+n,left:i.left,zIndex:t})}},_allow_update:!0,update:function(){if(this._allow_update){var e,t=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(e=arguments[0],t=!0):(e=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date),this.date=u.parseDate(e,this.o.format,this.o.language),t&&this.setValue(),this.date<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.date>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=new Date(this.date),this.fill()}},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){var i='<th class="cw">&nbsp;</th>';t+=i,this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}for(;e<this.o.weekStart+7;)t+='<th class="dow">'+d[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=0;t<12;)e+='<span class="month">'+d[this.o.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(t){t&&t.length?this.range=e.map(t,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var i=[],n=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),o=this.date.valueOf(),r=new Date;return t.getUTCFullYear()<n||t.getUTCFullYear()==n&&t.getUTCMonth()<s?i.push("old"):(t.getUTCFullYear()>n||t.getUTCFullYear()==n&&t.getUTCMonth()>s)&&i.push("new"),this.o.todayHighlight&&t.getUTCFullYear()==r.getFullYear()&&t.getUTCMonth()==r.getMonth()&&t.getUTCDate()==r.getDate()&&i.push("today"),o&&t.valueOf()==o&&i.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled))&&i.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),-1!=e.inArray(t.valueOf(),this.range)&&i.push("selected")),i},fill:function(){var i,n=new Date(this.viewDate),s=n.getUTCFullYear(),o=n.getUTCMonth(),r=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,a=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,l=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,c=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0;this.date&&this.date.valueOf();this.picker.find(".datepicker-days thead th.datepicker-switch").text(d[this.o.language].months[o]+" "+s),this.picker.find("tfoot th.today").text(d[this.o.language].today).toggle(!1!==this.o.todayBtn),this.picker.find("tfoot th.clear").text(d[this.o.language].clear).toggle(!1!==this.o.clearBtn),this.updateNavArrows(),this.fillMonths();var h=t(s,o-1,28,0,0,0,0),p=u.getDaysInMonth(h.getUTCFullYear(),h.getUTCMonth());h.setUTCDate(p),h.setUTCDate(p-(h.getUTCDay()-this.o.weekStart+7)%7);var f=new Date(h);f.setUTCDate(f.getUTCDate()+42),f=f.valueOf();for(var m,g=[];h.valueOf()<f;){if(h.getUTCDay()==this.o.weekStart&&(g.push("<tr>"),this.o.calendarWeeks)){var v=new Date(+h+(this.o.weekStart-h.getUTCDay()-7)%7*864e5),b=new Date(+v+(11-v.getUTCDay())%7*864e5),y=new Date(+(y=t(b.getUTCFullYear(),0,1))+(11-y.getUTCDay())%7*864e5),w=(b-y)/864e5/7+1;g.push('<td class="cw">'+w+"</td>")}m=this.getClassNames(h),m.push("day");var x=this.o.beforeShowDay(h);void 0===x?x={}:"boolean"==typeof x?x={enabled:x}:"string"==typeof x&&(x={classes:x}),!1===x.enabled&&m.push("disabled"),x.classes&&(m=m.concat(x.classes.split(/\s+/))),x.tooltip&&(i=x.tooltip),m=e.unique(m),g.push('<td class="'+m.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+h.getUTCDate()+"</td>"),h.getUTCDay()==this.o.weekEnd&&g.push("</tr>"),h.setUTCDate(h.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(g.join(""));var C=this.date&&this.date.getUTCFullYear(),E=this.picker.find(".datepicker-months").find("th:eq(1)").text(s).end().find("span").removeClass("active");C&&C==s&&E.eq(this.date.getUTCMonth()).addClass("active"),(s<r||s>l)&&E.addClass("disabled"),s==r&&E.slice(0,a).addClass("disabled"),s==l&&E.slice(c+1).addClass("disabled"),g="",s=10*parseInt(s/10,10);var k=this.picker.find(".datepicker-years").find("th:eq(1)").text(s+"-"+(s+9)).end().find("td");s-=1;for(var T=-1;T<11;T++)g+='<span class="year'+(-1==T?" old":10==T?" new":"")+(C==s?" active":"")+(s<r||s>l?" disabled":"")+'">'+s+"</span>",s+=1;k.html(g)},updateNavArrows:function(){if(this._allow_update){var e=new Date(this.viewDate),t=e.getUTCFullYear(),i=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-1/0&&t<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-1/0&&t<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(i){i.preventDefault();var n=e(i.target).closest("span, td, th");if(1==n.length)switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var s=u.modes[this.viewMode].navStep*("prev"==n[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,s);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,s)}this.fill();break;case"today":var o=new Date;o=t(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0),this.showMode(-2);var r="linked"==this.o.todayBtn?null:"view";this._setDate(o,r);break;case"clear":var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.val("").change(),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide()}break;case"span":if(!n.is(".disabled")){if(this.viewDate.setUTCDate(1),n.is(".month")){var l=1,c=n.parent().find("span").index(n),d=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(c),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(t(d,c,l,0,0,0,0))}else{var d=parseInt(n.text(),10)||0,l=1,c=0;this.viewDate.setUTCFullYear(d),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(t(d,c,l,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){var l=parseInt(n.text(),10)||1,d=this.viewDate.getUTCFullYear(),c=this.viewDate.getUTCMonth();n.is(".old")?0===c?(c=11,d-=1):c-=1:n.is(".new")&&(11==c?(c=0,d+=1):c+=1),this._setDate(t(d,c,l,0,0,0,0))}}},_setDate:function(e,t){t&&"date"!=t||(this.date=new Date(e)),t&&"view"!=t||(this.viewDate=new Date(e)),this.fill(),this.setValue(),this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&(i.change(),!this.o.autoclose||t&&"date"!=t||this.hide())},moveMonth:function(e,t){if(!t)return e;var i,n,s=new Date(e.valueOf()),o=s.getUTCDate(),r=s.getUTCMonth(),a=Math.abs(t);if(t=t>0?1:-1,1==a)n=-1==t?function(){return s.getUTCMonth()==r}:function(){return s.getUTCMonth()!=i},i=r+t,s.setUTCMonth(i),(i<0||i>11)&&(i=(i+12)%12);else{for(var l=0;l<a;l++)s=this.moveMonth(s,t);i=s.getUTCMonth(),s.setUTCDate(o),n=function(){return i!=s.getUTCMonth()}}for(;n();)s.setUTCDate(--o),s.setUTCMonth(i);return s},moveYear:function(e,t){return this.moveMonth(e,12*t)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":not(:visible)"))return void(27==e.keyCode&&this.show());var t,i,n,s=!1;switch(e.keyCode){case 27:this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=37==e.keyCode?-1:1,e.ctrlKey?(i=this.moveYear(this.date,t),n=this.moveYear(this.viewDate,t)):e.shiftKey?(i=this.moveMonth(this.date,t),n=this.moveMonth(this.viewDate,t)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+t),n=new Date(this.viewDate),n.setUTCDate(this.viewDate.getUTCDate()+t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),e.preventDefault(),s=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=38==e.keyCode?-1:1,e.ctrlKey?(i=this.moveYear(this.date,t),n=this.moveYear(this.viewDate,t)):e.shiftKey?(i=this.moveMonth(this.date,t),n=this.moveMonth(this.viewDate,t)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+7*t),n=new Date(this.viewDate),n.setUTCDate(this.viewDate.getUTCDate()+7*t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),e.preventDefault(),s=!0);break;case 13:this.hide(),e.preventDefault();break;case 9:this.hide()}if(s){this._trigger("changeDate");var o;this.isInput?o=this.element:this.component&&(o=this.element.find("input")),o&&o.change()}},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".datepicker-"+u.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var o=function(t,i){this.element=e(t),this.inputs=e.map(i.inputs,function(e){return e.jquery?e[0]:e}),delete i.inputs,e(this.inputs).datepicker(i).bind("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")}),this.updateDates()};o.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.date}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,i){i.setRange(t)})},dateUpdated:function(t){var i=e(t.target).data("datepicker"),n=i.getUTCDate(),s=e.inArray(t.target,this.inputs),o=this.inputs.length;if(-1!=s){if(n<this.dates[s])for(;s>=0&&n<this.dates[s];)this.pickers[s--].setUTCDate(n);else if(n>this.dates[s])for(;s<o&&n>this.dates[s];)this.pickers[s++].setUTCDate(n);this.updateDates()}},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var r=e.fn.datepicker,a=e.fn.datepicker=function(t){var r=Array.apply(null,arguments);r.shift();var a;return this.each(function(){var c=e(this),d=c.data("datepicker"),u="object"==typeof t&&t;if(!d){var h=i(this,"date"),p=e.extend({},l,h,u),f=n(p.language),m=e.extend({},l,f,h,u);if(c.is(".input-daterange")||m.inputs){var g={inputs:m.inputs||c.find("input").toArray()};c.data("datepicker",d=new o(this,e.extend(m,g)))}else c.data("datepicker",d=new s(this,m))}if("string"==typeof t&&"function"==typeof d[t]&&void 0!==(a=d[t].apply(d,r)))return!1}),void 0!==a?a:this},l=e.fn.datepicker.defaults={autoclose:!1,beforeShowDay:e.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},c=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=s;var d=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},u={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},getDaysInMonth:function(e,t){return[31,u.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\0").split("\0"),i=e.match(this.validParts);if(!t||!t.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(i,n,o){if(i instanceof Date)return i;if("string"==typeof n&&(n=u.parseFormat(n)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){var r,a,l=/([\-+]\d+)([dmwy])/,c=i.match(/([\-+]\d+)([dmwy])/g);i=new Date;for(var h=0;h<c.length;h++)switch(r=l.exec(c[h]),a=parseInt(r[1]),r[2]){case"d":i.setUTCDate(i.getUTCDate()+a);break;case"m":i=s.prototype.moveMonth.call(s.prototype,i,a);break;case"w":i.setUTCDate(i.getUTCDate()+7*a);break;case"y":i=s.prototype.moveYear.call(s.prototype,i,a)}return t(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}var p,f,r,c=i&&i.match(this.nonpunctuation)||[],i=new Date,m={},g=["yyyy","yy","M","MM","m","mm","d","dd"],v={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){for(t-=1;t<0;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!=t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};v.M=v.MM=v.mm=v.m,v.dd=v.d,i=t(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var b=n.parts.slice();if(c.length!=b.length&&(b=e(b).filter(function(t,i){return-1!==e.inArray(i,g)}).toArray()),c.length==b.length){for(var h=0,y=b.length;h<y;h++){if(p=parseInt(c[h],10),r=b[h],isNaN(p))switch(r){case"MM":f=e(d[o].months).filter(function(){var e=this.slice(0,c[h].length);return e==c[h].slice(0,e.length)}),p=e.inArray(f[0],d[o].months)+1;break;case"M":f=e(d[o].monthsShort).filter(function(){var e=this.slice(0,c[h].length);return e==c[h].slice(0,e.length)}),p=e.inArray(f[0],d[o].monthsShort)+1}m[r]=p}for(var w,h=0;h<g.length;h++)(w=g[h])in m&&!isNaN(m[w])&&v[w](i,m[w])}return i},formatDate:function(t,i,n){"string"==typeof i&&(i=u.parseFormat(i));var s={d:t.getUTCDate(),D:d[n].daysShort[t.getUTCDay()],DD:d[n].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:d[n].monthsShort[t.getUTCMonth()],MM:d[n].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};s.dd=(s.d<10?"0":"")+s.d,s.mm=(s.m<10?"0":"")+s.m;for(var t=[],o=e.extend([],i.separators),r=0,a=i.parts.length;r<=a;r++)o.length&&t.push(o.shift()),t.push(s[i.parts[r]]);return t.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};u.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+u.headTemplate+"<tbody></tbody>"+u.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+u.headTemplate+u.contTemplate+u.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+u.headTemplate+u.contTemplate+u.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=u,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=r,this},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=e(this);i.data("datepicker")||(t.preventDefault(),a.call(i,"show"))}),e(function(){a.call(e('[data-provide="datepicker-inline"]'))})}(window.jQuery),function(e){"use strict";e.fn.bdatepicker=e.fn.datepicker.noConflict(),e.fn.datepicker||(e.fn.datepicker=e.fn.bdatepicker);var t=function(e){this.init("date",e,t.defaults),this.initPicker(e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput),e.extend(t.prototype,{initPicker:function(t,i){this.options.viewformat||(this.options.viewformat=this.options.format),t.datepicker=e.fn.editableutils.tryParseJson(t.datepicker,!0),this.options.datepicker=e.extend({},i.datepicker,t.datepicker,{format:this.options.viewformat}),this.options.datepicker.language=this.options.datepicker.language||"en",this.dpg=e.fn.bdatepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker),this.options.clear&&(this.$clear=e('<a href="#"></a>').html(this.options.clear).click(e.proxy(function(e){e.preventDefault(),e.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(e('<div class="editable-clear">').append(this.$clear)))},value2html:function(e,i){var n=e?this.dpg.formatDate(e,this.parsedViewFormat,this.options.datepicker.language):"";t.superclass.value2html.call(this,n,i)},
html2value:function(e){return this.parseDate(e,this.parsedViewFormat)},value2str:function(e){return e?this.dpg.formatDate(e,this.parsedFormat,this.options.datepicker.language):""},str2value:function(e){return this.parseDate(e,this.parsedFormat)},value2submit:function(e){return this.value2str(e)},value2input:function(e){this.$input.bdatepicker("update",e)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".day",function(t){if(!e(t.currentTarget).is(".old")&&!e(t.currentTarget).is(".new")){var i=e(this).closest("form");setTimeout(function(){i.submit()},200)}})},parseDate:function(e,t){var i,n=null;return e&&(n=this.dpg.parseDate(e,t,this.options.datepicker.language),"string"==typeof e&&(i=this.dpg.formatDate(n,t,this.options.datepicker.language),e!==i&&(n=null))),n}}),t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!1},clear:"&times; clear"}),e.fn.editabletypes.date=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("datefield",e,t.defaults),this.initPicker(e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.date),e.extend(t.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.bdatepicker(this.options.datepicker),this.$input.off("focus keydown"),this.$input.keyup(e.proxy(function(){this.$tpl.removeData("date"),this.$tpl.bdatepicker("update")},this))},value2input:function(e){this.$input.val(e?this.dpg.formatDate(e,this.parsedViewFormat,this.options.datepicker.language):""),this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){e.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),t.defaults=e.extend({},e.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!0}}),e.fn.editabletypes.datefield=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("datetime",e,t.defaults),this.initPicker(e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput),e.extend(t.prototype,{initPicker:function(t,i){this.options.viewformat||(this.options.viewformat=this.options.format),t.datetimepicker=e.fn.editableutils.tryParseJson(t.datetimepicker,!0),this.options.datetimepicker=e.extend({},i.datetimepicker,t.datetimepicker,{format:this.options.viewformat}),this.options.datetimepicker.language=this.options.datetimepicker.language||"en",this.dpg=e.fn.datetimepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker),this.$input.on("changeMode",function(t){var i=e(this).closest("form").parent();setTimeout(function(){i.triggerHandler("resize")},0)}),this.options.clear&&(this.$clear=e('<a href="#"></a>').html(this.options.clear).click(e.proxy(function(e){e.preventDefault(),e.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(e('<div class="editable-clear">').append(this.$clear)))},value2html:function(e,i){var n=e?this.dpg.formatDate(this.toUTC(e),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";if(!i)return n;t.superclass.value2html.call(this,n,i)},html2value:function(e){var t=this.parseDate(e,this.parsedViewFormat);return t?this.fromUTC(t):null},value2str:function(e){return e?this.dpg.formatDate(this.toUTC(e),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(e){var t=this.parseDate(e,this.parsedFormat);return t?this.fromUTC(t):null},value2submit:function(e){return this.value2str(e)},value2input:function(e){e&&this.$input.data("datetimepicker").setDate(e)},input2value:function(){var e=this.$input.data("datetimepicker");return e.date?e.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".minute",function(t){var i=e(this).closest("form");setTimeout(function(){i.submit()},200)})},toUTC:function(e){return e?new Date(e.valueOf()-6e4*e.getTimezoneOffset()):e},fromUTC:function(e){return e?new Date(e.valueOf()+6e4*e.getTimezoneOffset()):e},parseDate:function(e,t){var i,n=null;return e&&(n=this.dpg.parseDate(e,t,this.options.datetimepicker.language,this.options.formatType),"string"==typeof e&&(i=this.dpg.formatDate(n,t,this.options.datetimepicker.language,this.options.formatType),e!==i&&(n=null))),n}}),t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:!1,autoclose:!1},clear:"&times; clear"}),e.fn.editabletypes.datetime=t}(window.jQuery),function(e){"use strict";var t=function(e){this.init("datetimefield",e,t.defaults),this.initPicker(e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.datetime),e.extend(t.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.datetimepicker(this.options.datetimepicker),this.$input.off("focus keydown"),this.$input.keyup(e.proxy(function(){this.$tpl.removeData("date"),this.$tpl.datetimepicker("update")},this))},value2input:function(e){this.$input.val(this.value2html(e)),this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){e.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),t.defaults=e.extend({},e.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:!1,autoclose:!0}}),e.fn.editabletypes.datetimefield=t}(window.jQuery),function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return define([],e);this.CodeMirror=e()}}(function(){"use strict";function e(i,n){if(!(this instanceof e))return new e(i,n);this.options=n=n?Fs(n):{},Fs(Yo,n,!1),p(n);var s=n.value;"string"==typeof s&&(s=new vr(s,n.mode)),this.doc=s;var o=new e.inputStyles[n.inputStyle](this),r=this.display=new t(i,s,o);r.wrapper.CodeMirror=this,c(this),a(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),n.autofocus&&!Eo&&r.input.focus(),v(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new Ts,keySeq:null,specialChars:null};var l=this;po&&11>fo&&setTimeout(function(){l.display.input.reset(!0)},20),Ht(this),Ws(),bt(this),this.curOp.forceUpdate=!0,Vn(this,s),n.autofocus&&!Eo||l.hasFocus()?setTimeout(Ns(hi,this),20):pi(this);for(var d in qo)qo.hasOwnProperty(d)&&qo[d](this,n[d],Go);C(this),n.finishInit&&n.finishInit(this);for(var u=0;u<Jo.length;++u)Jo[u](this);wt(this),mo&&n.lineWrapping&&"optimizelegibility"==getComputedStyle(r.lineDiv).textRendering&&(r.lineDiv.style.textRendering="auto")}function t(e,t,i){var n=this;this.input=i,n.scrollbarFiller=Ps("div",null,"CodeMirror-scrollbar-filler"),n.scrollbarFiller.setAttribute("cm-not-content","true"),n.gutterFiller=Ps("div",null,"CodeMirror-gutter-filler"),n.gutterFiller.setAttribute("cm-not-content","true"),n.lineDiv=Ps("div",null,"CodeMirror-code"),n.selectionDiv=Ps("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=Ps("div",null,"CodeMirror-cursors"),n.measure=Ps("div",null,"CodeMirror-measure"),n.lineMeasure=Ps("div",null,"CodeMirror-measure"),n.lineSpace=Ps("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none"),n.mover=Ps("div",[Ps("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=Ps("div",[n.mover],"CodeMirror-sizer"),n.sizerWidth=null,n.heightForcer=Ps("div",null,null,"position: absolute; height: "+Sr+"px; width: 1px;"),n.gutters=Ps("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=Ps("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=Ps("div",[n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),po&&8>fo&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),mo||co&&Eo||(n.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(n.wrapper):e(n.wrapper)),n.viewFrom=n.viewTo=t.first,n.reportedViewFrom=n.reportedViewTo=t.first,n.view=[],n.renderedView=null,n.externalMeasured=null,n.viewOffset=0,n.lastWrapHeight=n.lastWrapWidth=0,n.updateLineNumbers=null,n.nativeBarWidth=n.barHeight=n.barWidth=0,n.scrollbarsClipped=!1,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.alignWidgets=!1,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null,n.activeTouch=null,i.init(n)}function i(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),n(t)}function n(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,Ie(e,100),e.state.modeGen++,e.curOp&&Ft(e)}function s(e){e.options.lineWrapping?(jr(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(zr(e.display.wrapper,"CodeMirror-wrap"),h(e)),r(e),Ft(e),ot(e),setTimeout(function(){b(e)},100)}function o(e){var t=gt(e.display),i=e.options.lineWrapping,n=i&&Math.max(5,e.display.scroller.clientWidth/vt(e.display)-3);return function(s){if(bn(e.doc,s))return 0;var o=0;if(s.widgets)for(var r=0;r<s.widgets.length;r++)s.widgets[r].height&&(o+=s.widgets[r].height);return i?o+(Math.ceil(s.text.length/n)||1)*t:o+t}}function r(e){var t=e.doc,i=o(e);t.iter(function(e){var t=i(e);t!=e.height&&Xn(e,t)})}function a(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ot(e)}function l(e){c(e),Ft(e),setTimeout(function(){x(e)},20)}function c(e){var t=e.display.gutters,i=e.options.gutters;Bs(t);for(var n=0;n<i.length;++n){var s=i[n],o=t.appendChild(Ps("div",null,"CodeMirror-gutter "+s));"CodeMirror-linenumbers"==s&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none",d(e)}function d(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function u(e){if(0==e.height)return 0;for(var t,i=e.text.length,n=e;t=un(n);){var s=t.find(0,!0);n=s.from.line,i+=s.from.ch-s.to.ch}for(n=e;t=hn(n);){var s=t.find(0,!0);i-=n.text.length-s.from.ch,n=s.to.line,i+=n.text.length-s.to.ch}return i}function h(e){var t=e.display,i=e.doc;t.maxLine=Yn(i,i.first),t.maxLineLength=u(t.maxLine),t.maxLineChanged=!0,i.iter(function(e){var i=u(e);i>t.maxLineLength&&(t.maxLineLength=i,t.maxLine=e)})}function p(e){var t=$s(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function f(e){var t=e.display,i=t.gutters.offsetWidth,n=Math.round(e.doc.height+ze(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?i:0,docHeight:n,scrollHeight:n+Ke(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}function m(e,t,i){this.cm=i;var n=this.vert=Ps("div",[Ps("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),s=this.horiz=Ps("div",[Ps("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(n),e(s),Er(n,"scroll",function(){n.clientHeight&&t(n.scrollTop,"vertical")}),Er(s,"scroll",function(){s.clientWidth&&t(s.scrollLeft,"horizontal")}),this.checkedOverlay=!1,po&&8>fo&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function g(){}function v(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&zr(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new e.scrollbarModel[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),Er(e,"mousedown",function(){t.state.focused&&setTimeout(function(){t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,i){"horizontal"==i?ei(t,e):Jt(t,e)},t),t.display.scrollbars.addClass&&jr(t.display.wrapper,t.display.scrollbars.addClass)}function b(e,t){t||(t=f(e));var i=e.display.barWidth,n=e.display.barHeight;y(e,t);for(var s=0;4>s&&i!=e.display.barWidth||n!=e.display.barHeight;s++)i!=e.display.barWidth&&e.options.lineWrapping&&A(e),y(e,f(e)),i=e.display.barWidth,n=e.display.barHeight}function y(e,t){var i=e.display,n=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=n.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=n.bottom)+"px",n.right&&n.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=n.bottom+"px",i.scrollbarFiller.style.width=n.right+"px"):i.scrollbarFiller.style.display="",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=n.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}function w(e,t,i){var n=i&&null!=i.top?Math.max(0,i.top):e.scroller.scrollTop;n=Math.floor(n-Ue(e));var s=i&&null!=i.bottom?i.bottom:n+e.wrapper.clientHeight,o=Zn(t,n),r=Zn(t,s);if(i&&i.ensure){var a=i.ensure.from.line,l=i.ensure.to.line;o>a?(o=a,r=Zn(t,Jn(Yn(t,a))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=r&&(o=Zn(t,Jn(Yn(t,l))-e.wrapper.clientHeight),r=l)}return{from:o,to:Math.max(r,o+1)}}function x(e){var t=e.display,i=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=k(t)-t.scroller.scrollLeft+e.doc.scrollLeft,s=t.gutters.offsetWidth,o=n+"px",r=0;r<i.length;r++)if(!i[r].hidden){e.options.fixedGutter&&i[r].gutter&&(i[r].gutter.style.left=o);var a=i[r].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=n+s+"px")}}function C(e){if(!e.options.lineNumbers)return!1;var t=e.doc,i=E(e.options,t.first+t.size-1),n=e.display;if(i.length!=n.lineNumChars){var s=n.measure.appendChild(Ps("div",[Ps("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=s.firstChild.offsetWidth,r=s.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-r)+1,n.lineNumWidth=n.lineNumInnerWidth+r,n.lineNumChars=n.lineNumInnerWidth?i.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",d(e),!0}return!1}function E(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function k(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function T(e,t,i){var n=e.display;this.viewport=t,this.visible=w(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=We(e),this.force=i,this.dims=F(e),this.events=[]}function _(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Ke(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Ke(e)+"px",t.scrollbarsClipped=!0)}function S(e,t){var i=e.display,n=e.doc;if(t.editorIsHidden)return Lt(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==Bt(e))return!1;C(e)&&(Lt(e),t.dims=F(e));var s=n.first+n.size,o=Math.max(t.visible.from-e.options.viewportMargin,n.first),r=Math.min(s,t.visible.to+e.options.viewportMargin);i.viewFrom<o&&o-i.viewFrom<20&&(o=Math.max(n.first,i.viewFrom)),i.viewTo>r&&i.viewTo-r<20&&(r=Math.min(s,i.viewTo)),Mo&&(o=gn(e.doc,o),r=vn(e.doc,r));var a=o!=i.viewFrom||r!=i.viewTo||i.lastWrapHeight!=t.wrapperHeight||i.lastWrapWidth!=t.wrapperWidth;Pt(e,o,r),i.viewOffset=Jn(Yn(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var l=Bt(e);if(!a&&0==l&&!t.force&&i.renderedView==i.view&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var c=Us();return l>4&&(i.lineDiv.style.display="none"),N(e,i.updateLineNumbers,t.dims),l>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,c&&Us()!=c&&c.offsetHeight&&c.focus(),Bs(i.cursorDiv),Bs(i.selectionDiv),i.gutters.style.height=0,a&&(i.lastWrapHeight=t.wrapperHeight,i.lastWrapWidth=t.wrapperWidth,Ie(e,400)),i.updateLineNumbers=null,!0}function D(e,t){for(var i=t.viewport,n=!0;(n&&e.options.lineWrapping&&t.oldDisplayWidth!=We(e)||(i&&null!=i.top&&(i={top:Math.min(e.doc.height+ze(e.display)-Ve(e),i.top)}),t.visible=w(e.display,e.doc,i),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&S(e,t);n=!1){A(e);var s=f(e);Oe(e),M(e,s),b(e,s)}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function $(e,t){var i=new T(e,t);if(S(e,i)){A(e),D(e,i);var n=f(e);Oe(e),M(e,n),b(e,n),i.finish()}}function M(e,t){e.display.sizer.style.minHeight=t.docHeight+"px";var i=t.docHeight+e.display.barHeight;e.display.heightForcer.style.top=i+"px",e.display.gutters.style.height=Math.max(i+Ke(e),t.clientHeight)+"px"}function A(e){for(var t=e.display,i=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var s,o=t.view[n];if(!o.hidden){if(po&&8>fo){var r=o.node.offsetTop+o.node.offsetHeight;s=r-i,i=r}else{var a=o.node.getBoundingClientRect();s=a.bottom-a.top}var l=o.line.height-s;if(2>s&&(s=gt(t)),(l>.001||-.001>l)&&(Xn(o.line,s),O(o.line),o.rest))for(var c=0;c<o.rest.length;c++)O(o.rest[c])}}}function O(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function F(e){for(var t=e.display,i={},n={},s=t.gutters.clientLeft,o=t.gutters.firstChild,r=0;o;o=o.nextSibling,++r)i[e.options.gutters[r]]=o.offsetLeft+o.clientLeft+s,n[e.options.gutters[r]]=o.clientWidth;return{fixedPos:k(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function N(e,t,i){function n(t){var i=t.nextSibling;return mo&&ko&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),i}for(var s=e.display,o=e.options.lineNumbers,r=s.lineDiv,a=r.firstChild,l=s.view,c=s.viewFrom,d=0;d<l.length;d++){var u=l[d];if(u.hidden);else if(u.node&&u.node.parentNode==r){for(;a!=u.node;)a=n(a);var h=o&&null!=t&&c>=t&&u.lineNumber;u.changes&&($s(u.changes,"gutter")>-1&&(h=!1),L(e,u,c,i)),h&&(Bs(u.lineNumber),u.lineNumber.appendChild(document.createTextNode(E(e.options,c)))),a=u.node.nextSibling}else{var p=j(e,u,c,i);r.insertBefore(p,a)}c+=u.size}for(;a;)a=n(a)}function L(e,t,i,n){for(var s=0;s<t.changes.length;s++){var o=t.changes[s];"text"==o?B(e,t):"gutter"==o?U(e,t,i,n):"class"==o?H(t):"widget"==o&&z(e,t,n)}t.changes=null}function R(e){return e.node==e.text&&(e.node=Ps("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),po&&8>fo&&(e.node.style.zIndex=2)),e.node}function I(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var i=R(e);e.background=i.insertBefore(Ps("div",null,t),i.firstChild)}}function P(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):Nn(e,t)}function B(e,t){var i=t.text.className,n=P(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,H(t)):i&&(t.text.className=i)}function H(e){I(e),e.line.wrapClass?R(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function U(e,t,i,n){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null);var s=t.line.gutterMarkers;if(e.options.lineNumbers||s){var o=R(t),r=t.gutter=Ps("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px");if(e.display.input.setUneditable(r),o.insertBefore(r,t.text),t.line.gutterClass&&(r.className+=" "+t.line.gutterClass),!e.options.lineNumbers||s&&s["CodeMirror-linenumbers"]||(t.lineNumber=r.appendChild(Ps("div",E(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),s)for(var a=0;a<e.options.gutters.length;++a){var l=e.options.gutters[a],c=s.hasOwnProperty(l)&&s[l];c&&r.appendChild(Ps("div",[c],"CodeMirror-gutter-elt","left: "+n.gutterLeft[l]+"px; width: "+n.gutterWidth[l]+"px"))}}}function z(e,t,i){t.alignable&&(t.alignable=null);for(var n,s=t.node.firstChild;s;s=n){var n=s.nextSibling;"CodeMirror-linewidget"==s.className&&t.node.removeChild(s)}K(e,t,i)}function j(e,t,i,n){var s=P(e,t);return t.text=t.node=s.pre,s.bgClass&&(t.bgClass=s.bgClass),s.textClass&&(t.textClass=s.textClass),H(t),U(e,t,i,n),K(e,t,n),t.node}function K(e,t,i){if(W(e,t.line,t,i,!0),t.rest)for(var n=0;n<t.rest.length;n++)W(e,t.rest[n],t,i,!1)}function W(e,t,i,n,s){if(t.widgets)for(var o=R(i),r=0,a=t.widgets;r<a.length;++r){var l=a[r],c=Ps("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),V(l,c,i,n),e.display.input.setUneditable(c),s&&l.above?o.insertBefore(c,i.gutter||i.text):o.appendChild(c),ys(l,"redraw")}}function V(e,t,i,n){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var s=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(s-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=s+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}function Y(e){return Ao(e.line,e.ch)}function q(e,t){return Oo(e,t)<0?t:e}function G(e,t){return Oo(e,t)<0?e:t}function X(e){e.state.focused||(e.display.input.focus(),hi(e))}function Q(e){return e.options.readOnly||e.doc.cantEdit}function Z(e,t,i,n,s){var o=e.doc;e.display.shift=!1,n||(n=o.sel);var r=Vr(t),a=null;e.state.pasteIncoming&&n.ranges.length>1&&(Fo&&Fo.join("\n")==t?a=n.ranges.length%Fo.length==0&&Ms(Fo,Vr):r.length==n.ranges.length&&(a=Ms(r,function(e){return[e]})));for(var l=n.ranges.length-1;l>=0;l--){var c=n.ranges[l],d=c.from(),u=c.to();c.empty()&&(i&&i>0?d=Ao(d.line,d.ch-i):e.state.overwrite&&!e.state.pasteIncoming&&(u=Ao(u.line,Math.min(Yn(o,u.line).text.length,u.ch+Ds(r).length))));var h=e.curOp.updateInput,p={from:d,to:u,text:a?a[l%a.length]:r,origin:s||(e.state.pasteIncoming?"paste":e.state.cutIncoming?"cut":"+input")};xi(e.doc,p),ys(e,"inputRead",e,p)}t&&!e.state.pasteIncoming&&J(e,t),Fi(e),e.curOp.updateInput=h,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function J(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var i=e.doc.sel,n=i.ranges.length-1;n>=0;n--){var s=i.ranges[n];if(!(s.head.ch>100||n&&i.ranges[n-1].head.line==s.head.line)){var o=e.getModeAt(s.head),r=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(t.indexOf(o.electricChars.charAt(a))>-1){r=Li(e,s.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Yn(e.doc,s.head.line).text.slice(0,s.head.ch))&&(r=Li(e,s.head.line,"smart"));r&&ys(e,"electricInput",e,s.head.line)}}}function ee(e){for(var t=[],i=[],n=0;n<e.doc.sel.ranges.length;n++){var s=e.doc.sel.ranges[n].head.line,o={anchor:Ao(s,0),head:Ao(s+1,0)};i.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:i}}function te(e){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck","false")}function ie(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Ts,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function ne(){var e=Ps("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),t=Ps("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return mo?e.style.width="1000px":e.setAttribute("wrap","off"),Co&&(e.style.border="1px solid black"),te(e),t}function se(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ts,this.gracePeriod=!1}function oe(e,t){var i=Qe(e,t.line);if(!i||i.hidden)return null;var n=Yn(e.doc,t.line),s=qe(i,n,t.line),o=es(n),r="left";if(o){r=oo(o,t.ch)%2?"right":"left"}var a=et(s.map,t.ch,r);return a.offset="right"==a.collapse?a.end:a.start,a}function re(e,t){return t&&(e.bad=!0),e}function ae(e,t,i){var n;if(t==e.display.lineDiv){if(!(n=e.display.lineDiv.childNodes[i]))return re(e.clipPos(Ao(e.display.viewTo-1)),!0);t=null,i=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var s=0;s<e.display.view.length;s++){var o=e.display.view[s];if(o.node==n)return le(o,t,i)}}function le(e,t,i){function n(t,i,n){for(var s=-1;s<(d?d.length:0);s++)for(var o=0>s?c.map:d[s],r=0;r<o.length;r+=3){var a=o[r+2];if(a==t||a==i){var l=Qn(0>s?e.line:e.rest[s]),u=o[r]+n;return(0>n||a!=t)&&(u=o[r+(n?1:0)]),Ao(l,u)}}}var s=e.text.firstChild,o=!1;if(!t||!Br(s,t))return re(Ao(Qn(e.line),0),!0);if(t==s&&(o=!0,t=s.childNodes[i],i=0,!t)){var r=e.rest?Ds(e.rest):e.line;return re(Ao(Qn(r),r.text.length),o)}var a=3==t.nodeType?t:null,l=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,i&&(i=a.nodeValue.length));l.parentNode!=s;)l=l.parentNode;var c=e.measure,d=c.maps,u=n(a,l,i);if(u)return re(u,o);for(var h=l.nextSibling,p=a?a.nodeValue.length-i:0;h;h=h.nextSibling){if(u=n(h,h.firstChild,0))return re(Ao(u.line,u.ch-p),o);p+=h.textContent.length}for(var f=l.previousSibling,p=i;f;f=f.previousSibling){if(u=n(f,f.firstChild,-1))return re(Ao(u.line,u.ch+p),o);p+=h.textContent.length}}function ce(e,t,i,n,s){function o(e){return function(t){return t.id==e}}function r(t){if(1==t.nodeType){var i=t.getAttribute("cm-text");if(null!=i)return""==i&&(i=t.textContent.replace(/\u200b/g,"")),void(a+=i);var c,d=t.getAttribute("cm-marker");if(d){var u=e.findMarks(Ao(n,0),Ao(s+1,0),o(+d));return void(u.length&&(c=u[0].find())&&(a+=qn(e.doc,c.from,c.to).join("\n")))}if("false"==t.getAttribute("contenteditable"))return;for(var h=0;h<t.childNodes.length;h++)r(t.childNodes[h]);/^(pre|div|p)$/i.test(t.nodeName)&&(l=!0)}else if(3==t.nodeType){var p=t.nodeValue;if(!p)return;l&&(a+="\n",l=!1),a+=p}}for(var a="",l=!1;r(t),t!=i;)t=t.nextSibling;return a}function de(e,t){this.ranges=e,this.primIndex=t}function ue(e,t){this.anchor=e,this.head=t}function he(e,t){var i=e[t];e.sort(function(e,t){return Oo(e.from(),t.from())}),t=$s(e,i);for(var n=1;n<e.length;n++){var s=e[n],o=e[n-1];if(Oo(o.to(),s.from())>=0){var r=G(o.from(),s.from()),a=q(o.to(),s.to()),l=o.empty()?s.from()==s.head:o.from()==o.head;t>=n&&--t,e.splice(--n,2,new ue(l?a:r,l?r:a))}}return new de(e,t)}function pe(e,t){return new de([new ue(e,t||e)],0)}function fe(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function me(e,t){if(t.line<e.first)return Ao(e.first,0);var i=e.first+e.size-1;return t.line>i?Ao(i,Yn(e,i).text.length):ge(t,Yn(e,t.line).text.length)}function ge(e,t){var i=e.ch;return null==i||i>t?Ao(e.line,t):0>i?Ao(e.line,0):e}function ve(e,t){return t>=e.first&&t<e.first+e.size}function be(e,t){for(var i=[],n=0;n<t.length;n++)i[n]=me(e,t[n]);return i}function ye(e,t,i,n){if(e.cm&&e.cm.display.shift||e.extend){var s=t.anchor;if(n){var o=Oo(i,s)<0;o!=Oo(n,s)<0?(s=i,i=n):o!=Oo(i,n)<0&&(i=n)}return new ue(s,i)}return new ue(n||i,i)}function we(e,t,i,n){_e(e,new de([ye(e,e.sel.primary(),t,i)],0),n)}function xe(e,t,i){for(var n=[],s=0;s<e.sel.ranges.length;s++)n[s]=ye(e,e.sel.ranges[s],t[s],null);_e(e,he(n,e.sel.primIndex),i)}function Ce(e,t,i,n){var s=e.sel.ranges.slice(0);s[t]=i,_e(e,he(s,e.sel.primIndex),n)}function Ee(e,t,i,n){_e(e,pe(t,i),n)}function ke(e,t){var i={ranges:t.ranges,update:function(t){this.ranges=[];for(var i=0;i<t.length;i++)this.ranges[i]=new ue(me(e,t[i].anchor),me(e,t[i].head))}};return Tr(e,"beforeSelectionChange",e,i),e.cm&&Tr(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?he(i.ranges,i.ranges.length-1):t}function Te(e,t,i){var n=e.history.done,s=Ds(n);s&&s.ranges?(n[n.length-1]=t,Se(e,t,i)):_e(e,t,i)}function _e(e,t,i){Se(e,t,i),as(e,e.sel,e.cm?e.cm.curOp.id:NaN,i)}function Se(e,t,i){(Es(e,"beforeSelectionChange")||e.cm&&Es(e.cm,"beforeSelectionChange"))&&(t=ke(e,t)),De(e,Me(e,t,i&&i.bias||(Oo(t.primary().head,e.sel.primary().head)<0?-1:1),!0)),i&&!1===i.scroll||!e.cm||Fi(e.cm)}function De(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,Cs(e.cm)),ys(e,"cursorActivity",e))}function $e(e){De(e,Me(e,e.sel,null,!1),$r)}function Me(e,t,i,n){for(var s,o=0;o<t.ranges.length;o++){var r=t.ranges[o],a=Ae(e,r.anchor,i,n),l=Ae(e,r.head,i,n);(s||a!=r.anchor||l!=r.head)&&(s||(s=t.ranges.slice(0,o)),s[o]=new ue(a,l))}return s?he(s,t.primIndex):t}function Ae(e,t,i,n){var s=!1,o=t,r=i||1;e.cantEdit=!1;e:for(;;){var a=Yn(e,o.line);if(a.markedSpans)for(var l=0;l<a.markedSpans.length;++l){var c=a.markedSpans[l],d=c.marker;if((null==c.from||(d.inclusiveLeft?c.from<=o.ch:c.from<o.ch))&&(null==c.to||(d.inclusiveRight?c.to>=o.ch:c.to>o.ch))){if(n&&(Tr(d,"beforeCursorEnter"),d.explicitlyCleared)){if(a.markedSpans){--l;continue}break}if(!d.atomic)continue;var u=d.find(0>r?-1:1);if(0==Oo(u,o)&&(u.ch+=r,u.ch<0?u=u.line>e.first?me(e,Ao(u.line-1)):null:u.ch>a.text.length&&(u=u.line<e.first+e.size-1?Ao(u.line+1,0):null),!u)){if(s)return n?(e.cantEdit=!0,Ao(e.first,0)):Ae(e,t,i,!0);s=!0,u=t,r=-r}o=u;continue e}}return o}}function Oe(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Fe(e,t){for(var i=e.doc,n={},s=n.cursors=document.createDocumentFragment(),o=n.selection=document.createDocumentFragment(),r=0;r<i.sel.ranges.length;r++)if(!1!==t||r!=i.sel.primIndex){var a=i.sel.ranges[r],l=a.empty();(l||e.options.showCursorWhenSelecting)&&Ne(e,a,s),l||Le(e,a,o)}return n}function Ne(e,t,i){var n=ut(e,t.head,"div",null,null,!e.options.singleCursorHeightPerLine),s=i.appendChild(Ps("div"," ","CodeMirror-cursor"));if(s.style.left=n.left+"px",s.style.top=n.top+"px",s.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",n.other){var o=i.appendChild(Ps("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=n.other.left+"px",o.style.top=n.other.top+"px",o.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function Le(e,t,i){function n(e,t,i,n){0>t&&(t=0),t=Math.round(t),n=Math.round(n),
a.appendChild(Ps("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==i?d-e:i)+"px; height: "+(n-t)+"px"))}function s(t,i,s){function o(i,n){return dt(e,Ao(t,i),"div",u,n)}var a,l,u=Yn(r,t),h=u.text.length;return Xs(es(u),i||0,null==s?h:s,function(e,t,r){var u,p,f,m=o(e,"left");if(e==t)u=m,p=f=m.left;else{if(u=o(t-1,"right"),"rtl"==r){var g=m;m=u,u=g}p=m.left,f=u.right}null==i&&0==e&&(p=c),u.top-m.top>3&&(n(p,m.top,null,m.bottom),p=c,m.bottom<u.top&&n(p,m.bottom,null,u.top)),null==s&&t==h&&(f=d),(!a||m.top<a.top||m.top==a.top&&m.left<a.left)&&(a=m),(!l||u.bottom>l.bottom||u.bottom==l.bottom&&u.right>l.right)&&(l=u),c+1>p&&(p=c),n(p,u.top,f-p,u.bottom)}),{start:a,end:l}}var o=e.display,r=e.doc,a=document.createDocumentFragment(),l=je(e.display),c=l.left,d=Math.max(o.sizerWidth,We(e)-o.sizer.offsetLeft)-l.right,u=t.from(),h=t.to();if(u.line==h.line)s(u.line,u.ch,h.ch);else{var p=Yn(r,u.line),f=Yn(r,h.line),m=fn(p)==fn(f),g=s(u.line,u.ch,m?p.text.length+1:null).end,v=s(h.line,m?0:null,h.ch).start;m&&(g.top<v.top-2?(n(g.right,g.top,null,g.bottom),n(c,v.top,v.left,v.bottom)):n(g.right,g.top,v.left-g.right,g.bottom)),g.bottom<v.top&&n(c,g.bottom,null,v.top)}i.appendChild(a)}function Re(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Ie(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,Ns(Pe,e))}function Pe(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var i=+new Date+e.options.workTime,n=tr(t.mode,He(e,t.frontier)),s=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(t.frontier>=e.display.viewFrom){var r=o.styles,a=Mn(e,o,n,!0);o.styles=a.styles;var l=o.styleClasses,c=a.classes;c?o.styleClasses=c:l&&(o.styleClasses=null);for(var d=!r||r.length!=o.styles.length||l!=c&&(!l||!c||l.bgClass!=c.bgClass||l.textClass!=c.textClass),u=0;!d&&u<r.length;++u)d=r[u]!=o.styles[u];d&&s.push(t.frontier),o.stateAfter=tr(t.mode,n)}else On(e,o.text,n),o.stateAfter=t.frontier%5==0?tr(t.mode,n):null;return++t.frontier,+new Date>i?(Ie(e,e.options.workDelay),!0):void 0}),s.length&&St(e,function(){for(var t=0;t<s.length;t++)Nt(e,s[t],"text")})}}function Be(e,t,i){for(var n,s,o=e.doc,r=i?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>r;--a){if(a<=o.first)return o.first;var l=Yn(o,a-1);if(l.stateAfter&&(!i||a<=o.frontier))return a;var c=Or(l.text,null,e.options.tabSize);(null==s||n>c)&&(s=a-1,n=c)}return s}function He(e,t,i){var n=e.doc,s=e.display;if(!n.mode.startState)return!0;var o=Be(e,t,i),r=o>n.first&&Yn(n,o-1).stateAfter;return r=r?tr(n.mode,r):ir(n.mode),n.iter(o,t,function(i){On(e,i.text,r);var a=o==t-1||o%5==0||o>=s.viewFrom&&o<s.viewTo;i.stateAfter=a?tr(n.mode,r):null,++o}),i&&(n.frontier=o),r}function Ue(e){return e.lineSpace.offsetTop}function ze(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function je(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=Hs(e.measure,Ps("pre","x")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(e.cachedPaddingH=n),n}function Ke(e){return Sr-e.display.nativeBarWidth}function We(e){return e.display.scroller.clientWidth-Ke(e)-e.display.barWidth}function Ve(e){return e.display.scroller.clientHeight-Ke(e)-e.display.barHeight}function Ye(e,t,i){var n=e.options.lineWrapping,s=n&&We(e);if(!t.measure.heights||n&&t.measure.width!=s){var o=t.measure.heights=[];if(n){t.measure.width=s;for(var r=t.text.firstChild.getClientRects(),a=0;a<r.length-1;a++){var l=r[a],c=r[a+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-i.top)}}o.push(i.bottom-i.top)}}function qe(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var n=0;n<e.rest.length;n++)if(Qn(e.rest[n])>i)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}function Ge(e,t){t=fn(t);var i=Qn(t),n=e.display.externalMeasured=new At(e.doc,t,i);n.lineN=i;var s=n.built=Nn(e,n);return n.text=s.pre,Hs(e.display.lineMeasure,s.pre),n}function Xe(e,t,i,n){return Je(e,Ze(e,t),i,n)}function Qe(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Rt(e,t)];var i=e.display.externalMeasured;return i&&t>=i.lineN&&t<i.lineN+i.size?i:void 0}function Ze(e,t){var i=Qn(t),n=Qe(e,i);n&&!n.text?n=null:n&&n.changes&&L(e,n,i,F(e)),n||(n=Ge(e,t));var s=qe(n,t,i);return{line:t,view:n,rect:null,map:s.map,cache:s.cache,before:s.before,hasHeights:!1}}function Je(e,t,i,n,s){t.before&&(i=-1);var o,r=i+(n||"");return t.cache.hasOwnProperty(r)?o=t.cache[r]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Ye(e,t.view,t.rect),t.hasHeights=!0),o=tt(e,t,i,n),o.bogus||(t.cache[r]=o)),{left:o.left,right:o.right,top:s?o.rtop:o.top,bottom:s?o.rbottom:o.bottom}}function et(e,t,i){for(var n,s,o,r,a=0;a<e.length;a+=3){var l=e[a],c=e[a+1];if(l>t?(s=0,o=1,r="left"):c>t?(s=t-l,o=s+1):(a==e.length-3||t==c&&e[a+3]>t)&&(o=c-l,s=o-1,t>=c&&(r="right")),null!=s){if(n=e[a+2],l==c&&i==(n.insertLeft?"left":"right")&&(r=i),"left"==i&&0==s)for(;a&&e[a-2]==e[a-3]&&e[a-1].insertLeft;)n=e[2+(a-=3)],r="left";if("right"==i&&s==c-l)for(;a<e.length-3&&e[a+3]==e[a+4]&&!e[a+5].insertLeft;)n=e[(a+=3)+2],r="right";break}}return{node:n,start:s,end:o,collapse:r,coverStart:l,coverEnd:c}}function tt(e,t,i,n){var s,o=et(t.map,i,n),r=o.node,a=o.start,l=o.end,c=o.collapse;if(3==r.nodeType){for(var d=0;4>d;d++){for(;a&&Is(t.line.text.charAt(o.coverStart+a));)--a;for(;o.coverStart+l<o.coverEnd&&Is(t.line.text.charAt(o.coverStart+l));)++l;if(po&&9>fo&&0==a&&l==o.coverEnd-o.coverStart)s=r.parentNode.getBoundingClientRect();else if(po&&e.options.lineWrapping){var u=Lr(r,a,l).getClientRects();s=u.length?u["right"==n?u.length-1:0]:Io}else s=Lr(r,a,l).getBoundingClientRect()||Io;if(s.left||s.right||0==a)break;l=a,a-=1,c="right"}po&&11>fo&&(s=it(e.display.measure,s))}else{a>0&&(c=n="right");var u;s=e.options.lineWrapping&&(u=r.getClientRects()).length>1?u["right"==n?u.length-1:0]:r.getBoundingClientRect()}if(po&&9>fo&&!a&&(!s||!s.left&&!s.right)){var h=r.parentNode.getClientRects()[0];s=h?{left:h.left,right:h.left+vt(e.display),top:h.top,bottom:h.bottom}:Io}for(var p=s.top-t.rect.top,f=s.bottom-t.rect.top,m=(p+f)/2,g=t.view.measure.heights,d=0;d<g.length-1&&!(m<g[d]);d++);var v=d?g[d-1]:0,b=g[d],y={left:("right"==c?s.right:s.left)-t.rect.left,right:("left"==c?s.left:s.right)-t.rect.left,top:v,bottom:b};return s.left||s.right||(y.bogus=!0),e.options.singleCursorHeightPerLine||(y.rtop=p,y.rbottom=f),y}function it(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Gs(e))return t;var i=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*n,bottom:t.bottom*n}}function nt(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function st(e){e.display.externalMeasure=null,Bs(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)nt(e.display.view[t])}function ot(e){st(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function rt(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function at(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function lt(e,t,i,n){if(t.widgets)for(var s=0;s<t.widgets.length;++s)if(t.widgets[s].above){var o=xn(t.widgets[s]);i.top+=o,i.bottom+=o}if("line"==n)return i;n||(n="local");var r=Jn(t);if("local"==n?r+=Ue(e.display):r-=e.display.viewOffset,"page"==n||"window"==n){var a=e.display.lineSpace.getBoundingClientRect();r+=a.top+("window"==n?0:at());var l=a.left+("window"==n?0:rt());i.left+=l,i.right+=l}return i.top+=r,i.bottom+=r,i}function ct(e,t,i){if("div"==i)return t;var n=t.left,s=t.top;if("page"==i)n-=rt(),s-=at();else if("local"==i||!i){var o=e.display.sizer.getBoundingClientRect();n+=o.left,s+=o.top}var r=e.display.lineSpace.getBoundingClientRect();return{left:n-r.left,top:s-r.top}}function dt(e,t,i,n,s){return n||(n=Yn(e.doc,t.line)),lt(e,n,Xe(e,n,t.ch,s),i)}function ut(e,t,i,n,s,o){function r(t,r){var a=Je(e,s,t,r?"right":"left",o);return r?a.left=a.right:a.right=a.left,lt(e,n,a,i)}function a(e,t){var i=l[t],n=i.level%2;return e==Qs(i)&&t&&i.level<l[t-1].level?(i=l[--t],e=Zs(i)-(i.level%2?0:1),n=!0):e==Zs(i)&&t<l.length-1&&i.level<l[t+1].level&&(i=l[++t],e=Qs(i)-i.level%2,n=!1),n&&e==i.to&&e>i.from?r(e-1):r(e,n)}n=n||Yn(e.doc,t.line),s||(s=Ze(e,n));var l=es(n),c=t.ch;if(!l)return r(c);var d=oo(l,c),u=a(c,d);return null!=Qr&&(u.other=a(c,Qr)),u}function ht(e,t){var i=0,t=me(e.doc,t);e.options.lineWrapping||(i=vt(e.display)*t.ch);var n=Yn(e.doc,t.line),s=Jn(n)+Ue(e.display);return{left:i,right:i,top:s,bottom:s+n.height}}function pt(e,t,i,n){var s=Ao(e,t);return s.xRel=n,i&&(s.outside=!0),s}function ft(e,t,i){var n=e.doc;if(0>(i+=e.display.viewOffset))return pt(n.first,0,!0,-1);var s=Zn(n,i),o=n.first+n.size-1;if(s>o)return pt(n.first+n.size-1,Yn(n,o).text.length,!0,1);0>t&&(t=0);for(var r=Yn(n,s);;){var a=mt(e,r,s,t,i),l=hn(r),c=l&&l.find(0,!0);if(!l||!(a.ch>c.from.ch||a.ch==c.from.ch&&a.xRel>0))return a;s=Qn(r=c.to.line)}}function mt(e,t,i,n,s){function o(n){var s=ut(e,Ao(i,n),"line",t,c);return a=!0,r>s.bottom?s.left-l:r<s.top?s.left+l:(a=!1,s.left)}var r=s-Jn(t),a=!1,l=2*e.display.wrapper.clientWidth,c=Ze(e,t),d=es(t),u=t.text.length,h=Js(t),p=eo(t),f=o(h),m=a,g=o(p),v=a;if(n>g)return pt(i,p,v,1);for(;;){if(d?p==h||p==ao(t,h,1):1>=p-h){for(var b=f>n||g-n>=n-f?h:p,y=n-(b==h?f:g);Is(t.text.charAt(b));)++b;return pt(i,b,b==h?m:v,-1>y?-1:y>1?1:0)}var w=Math.ceil(u/2),x=h+w;if(d){x=h;for(var C=0;w>C;++C)x=ao(t,x,1)}var E=o(x);E>n?(p=x,g=E,(v=a)&&(g+=1e3),u=w):(h=x,f=E,m=a,u-=w)}}function gt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==No){No=Ps("pre");for(var t=0;49>t;++t)No.appendChild(document.createTextNode("x")),No.appendChild(Ps("br"));No.appendChild(document.createTextNode("x"))}Hs(e.measure,No);var i=No.offsetHeight/50;return i>3&&(e.cachedTextHeight=i),Bs(e.measure),i||1}function vt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=Ps("span","xxxxxxxxxx"),i=Ps("pre",[t]);Hs(e.measure,i);var n=t.getBoundingClientRect(),s=(n.right-n.left)/10;return s>2&&(e.cachedCharWidth=s),s||10}function bt(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Bo},Po?Po.ops.push(e.curOp):e.curOp.ownsGroup=Po={ops:[e.curOp],delayedCallbacks:[]}}function yt(e){var t=e.delayedCallbacks,i=0;do{for(;i<t.length;i++)t[i]();for(var n=0;n<e.ops.length;n++){var s=e.ops[n];if(s.cursorActivityHandlers)for(;s.cursorActivityCalled<s.cursorActivityHandlers.length;)s.cursorActivityHandlers[s.cursorActivityCalled++](s.cm)}}while(i<t.length)}function wt(e){var t=e.curOp,i=t.ownsGroup;if(i)try{yt(i)}finally{Po=null;for(var n=0;n<i.ops.length;n++)i.ops[n].cm.curOp=null;xt(i)}}function xt(e){for(var t=e.ops,i=0;i<t.length;i++)Ct(t[i]);for(var i=0;i<t.length;i++)Et(t[i]);for(var i=0;i<t.length;i++)kt(t[i]);for(var i=0;i<t.length;i++)Tt(t[i]);for(var i=0;i<t.length;i++)_t(t[i])}function Ct(e){var t=e.cm,i=t.display;_(t),e.updateMaxLine&&h(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new T(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Et(e){e.updatedDisplay=e.mustUpdate&&S(e.cm,e.update)}function kt(e){var t=e.cm,i=t.display;e.updatedDisplay&&A(t),e.barMeasure=f(t),i.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Xe(t,i.maxLine,i.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+e.adjustWidthTo+Ke(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+e.adjustWidthTo-We(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=i.input.prepareSelection())}function Tt(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&ei(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1),e.preparedSelection&&t.display.input.showSelection(e.preparedSelection),e.updatedDisplay&&M(t,e.barMeasure),(e.updatedDisplay||e.startHeight!=t.doc.height)&&b(t,e.barMeasure),e.selectionChanged&&Re(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),e.focus&&e.focus==Us()&&X(e.cm)}function _t(e){var t=e.cm,i=t.display,n=t.doc;if(e.updatedDisplay&&D(t,e.update),null==i.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(i.wheelStartX=i.wheelStartY=null),null==e.scrollTop||i.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(n.scrollTop=Math.max(0,Math.min(i.scroller.scrollHeight-i.scroller.clientHeight,e.scrollTop)),i.scrollbars.setScrollTop(n.scrollTop),i.scroller.scrollTop=n.scrollTop),null==e.scrollLeft||i.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(n.scrollLeft=Math.max(0,Math.min(i.scroller.scrollWidth-We(t),e.scrollLeft)),i.scrollbars.setScrollLeft(n.scrollLeft),i.scroller.scrollLeft=n.scrollLeft,x(t)),e.scrollToPos){var s=$i(t,me(n,e.scrollToPos.from),me(n,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&Di(t,s)}var o=e.maybeHiddenMarkers,r=e.maybeUnhiddenMarkers;if(o)for(var a=0;a<o.length;++a)o[a].lines.length||Tr(o[a],"hide");if(r)for(var a=0;a<r.length;++a)r[a].lines.length&&Tr(r[a],"unhide");i.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Tr(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function St(e,t){if(e.curOp)return t();bt(e);try{return t()}finally{wt(e)}}function Dt(e,t){return function(){if(e.curOp)return t.apply(e,arguments);bt(e);try{return t.apply(e,arguments)}finally{wt(e)}}}function $t(e){return function(){if(this.curOp)return e.apply(this,arguments);bt(this);try{return e.apply(this,arguments)}finally{wt(this)}}}function Mt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);bt(t);try{return e.apply(this,arguments)}finally{wt(t)}}}function At(e,t,i){this.line=t,this.rest=mn(t),this.size=this.rest?Qn(Ds(this.rest))-i+1:1,this.node=this.text=null,this.hidden=bn(e,t)}function Ot(e,t,i){for(var n,s=[],o=t;i>o;o=n){var r=new At(e.doc,Yn(e.doc,o),o);n=o+r.size,s.push(r)}return s}function Ft(e,t,i,n){null==t&&(t=e.doc.first),null==i&&(i=e.doc.first+e.doc.size),n||(n=0);var s=e.display;if(n&&i<s.viewTo&&(null==s.updateLineNumbers||s.updateLineNumbers>t)&&(s.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=s.viewTo)Mo&&gn(e.doc,t)<s.viewTo&&Lt(e);else if(i<=s.viewFrom)Mo&&vn(e.doc,i+n)>s.viewFrom?Lt(e):(s.viewFrom+=n,s.viewTo+=n);else if(t<=s.viewFrom&&i>=s.viewTo)Lt(e);else if(t<=s.viewFrom){var o=It(e,i,i+n,1);o?(s.view=s.view.slice(o.index),s.viewFrom=o.lineN,s.viewTo+=n):Lt(e)}else if(i>=s.viewTo){var o=It(e,t,t,-1);o?(s.view=s.view.slice(0,o.index),s.viewTo=o.lineN):Lt(e)}else{var r=It(e,t,t,-1),a=It(e,i,i+n,1);r&&a?(s.view=s.view.slice(0,r.index).concat(Ot(e,r.lineN,a.lineN)).concat(s.view.slice(a.index)),s.viewTo+=n):Lt(e)}var l=s.externalMeasured;l&&(i<l.lineN?l.lineN+=n:t<l.lineN+l.size&&(s.externalMeasured=null))}function Nt(e,t,i){e.curOp.viewChanged=!0;var n=e.display,s=e.display.externalMeasured;if(s&&t>=s.lineN&&t<s.lineN+s.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var o=n.view[Rt(e,t)];if(null!=o.node){var r=o.changes||(o.changes=[]);-1==$s(r,i)&&r.push(i)}}}function Lt(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Rt(e,t){if(t>=e.display.viewTo)return null;if(0>(t-=e.display.viewFrom))return null;for(var i=e.display.view,n=0;n<i.length;n++)if(0>(t-=i[n].size))return n}function It(e,t,i,n){var s,o=Rt(e,t),r=e.display.view;if(!Mo||i==e.doc.first+e.doc.size)return{index:o,lineN:i};for(var a=0,l=e.display.viewFrom;o>a;a++)l+=r[a].size;if(l!=t){if(n>0){if(o==r.length-1)return null;s=l+r[o].size-t,o++}else s=l-t;t+=s,i+=s}for(;gn(e.doc,i)!=i;){if(o==(0>n?0:r.length-1))return null;i+=n*r[o-(0>n?1:0)].size,o+=n}return{index:o,lineN:i}}function Pt(e,t,i){var n=e.display;0==n.view.length||t>=n.viewTo||i<=n.viewFrom?(n.view=Ot(e,t,i),n.viewFrom=t):(n.viewFrom>t?n.view=Ot(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(Rt(e,t))),n.viewFrom=t,n.viewTo<i?n.view=n.view.concat(Ot(e,n.viewTo,i)):n.viewTo>i&&(n.view=n.view.slice(0,Rt(e,i)))),n.viewTo=i}function Bt(e){for(var t=e.display.view,i=0,n=0;n<t.length;n++){var s=t[n];s.hidden||s.node&&!s.changes||++i}return i}function Ht(e){function t(){s.activeTouch&&(o=setTimeout(function(){s.activeTouch=null},1e3),r=s.activeTouch,r.end=+new Date)}function i(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function n(e,t){if(null==t.left)return!0;var i=t.left-e.left,n=t.top-e.top;return i*i+n*n>400}var s=e.display;Er(s.scroller,"mousedown",Dt(e,Wt)),po&&11>fo?Er(s.scroller,"dblclick",Dt(e,function(t){if(!xs(e,t)){var i=Kt(e,t);if(i&&!Xt(e,t)&&!jt(e.display,t)){wr(t);var n=e.findWordAt(i);we(e.doc,n.anchor,n.head)}}})):Er(s.scroller,"dblclick",function(t){xs(e,t)||wr(t)}),Do||Er(s.scroller,"contextmenu",function(t){fi(e,t)});var o,r={end:0};Er(s.scroller,"touchstart",function(e){if(!i(e)){clearTimeout(o);var t=+new Date;s.activeTouch={start:t,moved:!1,prev:t-r.end<=300?r:null},1==e.touches.length&&(s.activeTouch.left=e.touches[0].pageX,s.activeTouch.top=e.touches[0].pageY)}}),Er(s.scroller,"touchmove",function(){s.activeTouch&&(s.activeTouch.moved=!0)}),Er(s.scroller,"touchend",function(i){var o=s.activeTouch;if(o&&!jt(s,i)&&null!=o.left&&!o.moved&&new Date-o.start<300){var r,a=e.coordsChar(s.activeTouch,"page");r=!o.prev||n(o,o.prev)?new ue(a,a):!o.prev.prev||n(o,o.prev.prev)?e.findWordAt(a):new ue(Ao(a.line,0),me(e.doc,Ao(a.line+1,0))),e.setSelection(r.anchor,r.head),e.focus(),wr(i)}t()}),Er(s.scroller,"touchcancel",t),Er(s.scroller,"scroll",function(){s.scroller.clientHeight&&(Jt(e,s.scroller.scrollTop),ei(e,s.scroller.scrollLeft,!0),Tr(e,"scroll",e))}),Er(s.scroller,"mousewheel",function(t){ti(e,t)}),Er(s.scroller,"DOMMouseScroll",function(t){ti(e,t)}),Er(s.wrapper,"scroll",function(){s.wrapper.scrollTop=s.wrapper.scrollLeft=0}),s.dragFunctions={simple:function(t){xs(e,t)||Cr(t)},start:function(t){Zt(e,t)},drop:Dt(e,Qt)};var a=s.input.getField();Er(a,"keyup",function(t){ci.call(e,t)}),Er(a,"keydown",Dt(e,ai)),Er(a,"keypress",Dt(e,di)),Er(a,"focus",Ns(hi,e)),Er(a,"blur",Ns(pi,e))}function Ut(t,i,n){if(!i!=!(n&&n!=e.Init)){var s=t.display.dragFunctions,o=i?Er:kr;o(t.display.scroller,"dragstart",s.start),o(t.display.scroller,"dragenter",s.simple),o(t.display.scroller,"dragover",s.simple),o(t.display.scroller,"drop",s.drop)}}function zt(e){var t=e.display;(t.lastWrapHeight!=t.wrapper.clientHeight||t.lastWrapWidth!=t.wrapper.clientWidth)&&(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function jt(e,t){for(var i=vs(t);i!=e.wrapper;i=i.parentNode)if(!i||1==i.nodeType&&"true"==i.getAttribute("cm-ignore-events")||i.parentNode==e.sizer&&i!=e.mover)return!0}function Kt(e,t,i,n){var s=e.display;if(!i&&"true"==vs(t).getAttribute("cm-not-content"))return null;var o,r,a=s.lineSpace.getBoundingClientRect();try{o=t.clientX-a.left,r=t.clientY-a.top}catch(t){return null}var l,c=ft(e,o,r);if(n&&1==c.xRel&&(l=Yn(e.doc,c.line).text).length==c.ch){var d=Or(l,l.length,e.options.tabSize)-l.length;c=Ao(c.line,Math.max(0,Math.round((o-je(e.display).left)/vt(e.display))-d))}return c}function Wt(e){var t=this,i=t.display;if(!(i.activeTouch&&i.input.supportsTouch()||xs(t,e))){if(i.shift=e.shiftKey,jt(i,e))return void(mo||(i.scroller.draggable=!1,setTimeout(function(){i.scroller.draggable=!0},100)));if(!Xt(t,e)){var n=Kt(t,e);switch(window.focus(),bs(e)){case 1:n?Vt(t,e,n):vs(e)==i.scroller&&wr(e);break;case 2:mo&&(t.state.lastMiddleDown=+new Date),n&&we(t.doc,n),setTimeout(function(){i.input.focus()},20),wr(e);break;case 3:Do?fi(t,e):ui(t)}}}}function Vt(e,t,i){po?setTimeout(Ns(X,e),0):e.curOp.focus=Us();var n,s=+new Date;Ro&&Ro.time>s-400&&0==Oo(Ro.pos,i)?n="triple":Lo&&Lo.time>s-400&&0==Oo(Lo.pos,i)?(n="double",Ro={time:s,pos:i}):(n="single",Lo={time:s,pos:i});var o,r=e.doc.sel,a=ko?t.metaKey:t.ctrlKey;e.options.dragDrop&&Wr&&!Q(e)&&"single"==n&&(o=r.contains(i))>-1&&!r.ranges[o].empty()?Yt(e,t,i,a):qt(e,t,i,n,a)}function Yt(e,t,i,n){var s=e.display,o=+new Date,r=Dt(e,function(a){mo&&(s.scroller.draggable=!1),e.state.draggingText=!1,kr(document,"mouseup",r),kr(s.scroller,"drop",r),Math.abs(t.clientX-a.clientX)+Math.abs(t.clientY-a.clientY)<10&&(wr(a),!n&&+new Date-200<o&&we(e.doc,i),mo||po&&9==fo?setTimeout(function(){document.body.focus(),s.input.focus()},20):s.input.focus())});mo&&(s.scroller.draggable=!0),e.state.draggingText=r,s.scroller.dragDrop&&s.scroller.dragDrop(),Er(document,"mouseup",r),Er(s.scroller,"drop",r)}function qt(e,t,i,n,s){function o(t){if(0!=Oo(g,t))if(g=t,"rect"==n){for(var s=[],o=e.options.tabSize,r=Or(Yn(c,i.line).text,i.ch,o),a=Or(Yn(c,t.line).text,t.ch,o),l=Math.min(r,a),p=Math.max(r,a),f=Math.min(i.line,t.line),m=Math.min(e.lastLine(),Math.max(i.line,t.line));m>=f;f++){var v=Yn(c,f).text,b=_s(v,l,o);l==p?s.push(new ue(Ao(f,b),Ao(f,b))):v.length>b&&s.push(new ue(Ao(f,b),Ao(f,_s(v,p,o))))}s.length||s.push(new ue(i,i)),_e(c,he(h.ranges.slice(0,u).concat(s),u),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var y=d,w=y.anchor,x=t;if("single"!=n){if("double"==n)var C=e.findWordAt(t);else var C=new ue(Ao(t.line,0),me(c,Ao(t.line+1,0)));Oo(C.anchor,w)>0?(x=C.head,w=G(y.from(),C.anchor)):(x=C.anchor,w=q(y.to(),C.head))}var s=h.ranges.slice(0);s[u]=new ue(me(c,w),x),_e(c,he(s,u),Mr)}}function r(t){var i=++b,s=Kt(e,t,!0,"rect"==n);if(s)if(0!=Oo(s,g)){e.curOp.focus=Us(),o(s);var a=w(l,c);(s.line>=a.to||s.line<a.from)&&setTimeout(Dt(e,function(){b==i&&r(t)}),150)}else{var d=t.clientY<v.top?-20:t.clientY>v.bottom?20:0;d&&setTimeout(Dt(e,function(){b==i&&(l.scroller.scrollTop+=d,r(t))}),50)}}function a(e){b=1/0,wr(e),l.input.focus(),kr(document,"mousemove",y),kr(document,"mouseup",x),c.history.lastSelOrigin=null}var l=e.display,c=e.doc;wr(t);var d,u,h=c.sel,p=h.ranges;if(s&&!t.shiftKey?(u=c.sel.contains(i),d=u>-1?p[u]:new ue(i,i)):(d=c.sel.primary(),u=c.sel.primIndex),t.altKey)n="rect",s||(d=new ue(i,i)),i=Kt(e,t,!0,!0),u=-1;else if("double"==n){var f=e.findWordAt(i);d=e.display.shift||c.extend?ye(c,d,f.anchor,f.head):f}else if("triple"==n){var m=new ue(Ao(i.line,0),me(c,Ao(i.line+1,0)));d=e.display.shift||c.extend?ye(c,d,m.anchor,m.head):m}else d=ye(c,d,i);s?-1==u?(u=p.length,_e(c,he(p.concat([d]),u),{scroll:!1,origin:"*mouse"})):p.length>1&&p[u].empty()&&"single"==n&&!t.shiftKey?(_e(c,he(p.slice(0,u).concat(p.slice(u+1)),0)),h=c.sel):Ce(c,u,d,Mr):(u=0,_e(c,new de([d],0),Mr),h=c.sel);var g=i,v=l.wrapper.getBoundingClientRect(),b=0,y=Dt(e,function(e){bs(e)?r(e):a(e)}),x=Dt(e,a);Er(document,"mousemove",y),Er(document,"mouseup",x)}function Gt(e,t,i,n,s){try{var o=t.clientX,r=t.clientY}catch(t){return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&wr(t);var a=e.display,l=a.lineDiv.getBoundingClientRect();if(r>l.bottom||!Es(e,i))return gs(t);r-=l.top-a.viewOffset;for(var c=0;c<e.options.gutters.length;++c){var d=a.gutters.childNodes[c];if(d&&d.getBoundingClientRect().right>=o){return s(e,i,e,Zn(e.doc,r),e.options.gutters[c],t),gs(t)}}}function Xt(e,t){return Gt(e,t,"gutterClick",!0,ys)}function Qt(e){var t=this;if(!xs(t,e)&&!jt(t.display,e)){wr(e),po&&(Ho=+new Date);var i=Kt(t,e,!0),n=e.dataTransfer.files;if(i&&!Q(t))if(n&&n.length&&window.FileReader&&window.File)for(var s=n.length,o=Array(s),r=0,a=0;s>a;++a)!function(e,n){var a=new FileReader;a.onload=Dt(t,function(){if(o[n]=a.result,++r==s){i=me(t.doc,i);var e={from:i,to:i,text:Vr(o.join("\n")),origin:"paste"};xi(t.doc,e),Te(t.doc,pe(i,Vo(e)))}}),a.readAsText(e)}(n[a],a);else{if(t.state.draggingText&&t.doc.sel.contains(i)>-1)return t.state.draggingText(e),void setTimeout(function(){t.display.input.focus()},20);try{var o=e.dataTransfer.getData("Text");if(o){if(t.state.draggingText&&!(ko?e.altKey:e.ctrlKey))var l=t.listSelections();if(Se(t.doc,pe(i,i)),l)for(var a=0;a<l.length;++a)Si(t.doc,"",l[a].anchor,l[a].head,"drag");t.replaceSelection(o,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Zt(e,t){if(po&&(!e.state.draggingText||+new Date-Ho<100))return void Cr(t);if(!xs(e,t)&&!jt(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!yo)){var i=Ps("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",bo&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),t.dataTransfer.setDragImage(i,0,0),bo&&i.parentNode.removeChild(i)}}function Jt(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,co||$(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),co&&$(e),Ie(e,100))}function ei(e,t,i){(i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,x(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function ti(e,t){var i=jo(t),n=i.x,s=i.y,o=e.display,r=o.scroller;if(n&&r.scrollWidth>r.clientWidth||s&&r.scrollHeight>r.clientHeight){if(s&&ko&&mo)e:for(var a=t.target,l=o.view;a!=r;a=a.parentNode)for(var c=0;c<l.length;c++)if(l[c].node==a){e.display.currentWheelTarget=a;break e}if(n&&!co&&!bo&&null!=zo)return s&&Jt(e,Math.max(0,Math.min(r.scrollTop+s*zo,r.scrollHeight-r.clientHeight))),ei(e,Math.max(0,Math.min(r.scrollLeft+n*zo,r.scrollWidth-r.clientWidth))),wr(t),void(o.wheelStartX=null);if(s&&null!=zo){var d=s*zo,u=e.doc.scrollTop,h=u+o.wrapper.clientHeight;0>d?u=Math.max(0,u+d-50):h=Math.min(e.doc.height,h+d+50),$(e,{top:u,bottom:h})}20>Uo&&(null==o.wheelStartX?(o.wheelStartX=r.scrollLeft,o.wheelStartY=r.scrollTop,o.wheelDX=n,o.wheelDY=s,setTimeout(function(){if(null!=o.wheelStartX){var e=r.scrollLeft-o.wheelStartX,t=r.scrollTop-o.wheelStartY,i=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,i&&(zo=(zo*Uo+i)/(Uo+1),++Uo)}},200)):(o.wheelDX+=n,o.wheelDY+=s))}}function ii(e,t,i){if("string"==typeof t&&!(t=nr[t]))return!1;e.display.input.ensurePolled();var n=e.display.shift,s=!1;try{Q(e)&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),s=t(e)!=Dr}finally{e.display.shift=n,e.state.suppressEdits=!1}return s}function ni(e,t,i){for(var n=0;n<e.state.keyMaps.length;n++){var s=or(t,e.state.keyMaps[n],i,e);if(s)return s}return e.options.extraKeys&&or(t,e.options.extraKeys,i,e)||or(t,e.options.keyMap,i,e)}function si(e,t,i,n){var s=e.state.keySeq;if(s){if(rr(t))return"handled";Ko.set(50,function(){e.state.keySeq==s&&(e.state.keySeq=null,e.display.input.reset())}),t=s+" "+t}var o=ni(e,t,n);return"multi"==o&&(e.state.keySeq=t),"handled"==o&&ys(e,"keyHandled",e,t,i),("handled"==o||"multi"==o)&&(wr(i),Re(e)),s&&!o&&/\'$/.test(t)?(wr(i),!0):!!o}function oi(e,t){var i=ar(t,!0);return!!i&&(t.shiftKey&&!e.state.keySeq?si(e,"Shift-"+i,t,function(t){return ii(e,t,!0)})||si(e,i,t,function(t){return("string"==typeof t?/^go[A-Z]/.test(t):t.motion)?ii(e,t):void 0}):si(e,i,t,function(t){return ii(e,t)}))}function ri(e,t,i){return si(e,"'"+i+"'",t,function(t){return ii(e,t,!0)})}function ai(e){var t=this;if(t.curOp.focus=Us(),!xs(t,e)){po&&11>fo&&27==e.keyCode&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=16==i||e.shiftKey;var n=oi(t,e);bo&&(Wo=n?i:null,!n&&88==i&&!qr&&(ko?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=i||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||li(t)}}function li(e){function t(e){18!=e.keyCode&&e.altKey||(zr(i,"CodeMirror-crosshair"),kr(document,"keyup",t),kr(document,"mouseover",t))}var i=e.display.lineDiv;jr(i,"CodeMirror-crosshair"),Er(document,"keyup",t),Er(document,"mouseover",t)}function ci(e){16==e.keyCode&&(this.doc.sel.shift=!1),xs(this,e)}function di(e){var t=this;if(!(jt(t.display,e)||xs(t,e)||e.ctrlKey&&!e.altKey||ko&&e.metaKey)){var i=e.keyCode,n=e.charCode;if(bo&&i==Wo)return Wo=null,void wr(e);if(!bo||e.which&&!(e.which<10)||!oi(t,e)){ri(t,e,String.fromCharCode(null==n?i:n))||t.display.input.onKeyPress(e)}}}function ui(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,pi(e))},100)}function hi(e){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(Tr(e,"focus",e),e.state.focused=!0,jr(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),mo&&setTimeout(function(){e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Re(e))}function pi(e){e.state.delayingBlurEvent||(e.state.focused&&(Tr(e,"blur",e),e.state.focused=!1,zr(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function fi(e,t){jt(e.display,t)||mi(e,t)||e.display.input.onContextMenu(t)}function mi(e,t){return!!Es(e,"gutterContextMenu")&&Gt(e,t,"gutterContextMenu",!1,Tr)}function gi(e,t){if(Oo(e,t.from)<0)return e;if(Oo(e,t.to)<=0)return Vo(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=Vo(t).ch-t.to.ch),Ao(i,n)}function vi(e,t){for(var i=[],n=0;n<e.sel.ranges.length;n++){var s=e.sel.ranges[n];i.push(new ue(gi(s.anchor,t),gi(s.head,t)))}return he(i,e.sel.primIndex)}function bi(e,t,i){return e.line==t.line?Ao(i.line,e.ch-t.ch+i.ch):Ao(i.line+(e.line-t.line),e.ch)}function yi(e,t,i){for(var n=[],s=Ao(e.first,0),o=s,r=0;r<t.length;r++){var a=t[r],l=bi(a.from,s,o),c=bi(Vo(a),s,o);if(s=a.to,o=c,"around"==i){var d=e.sel.ranges[r],u=Oo(d.head,d.anchor)<0;n[r]=new ue(u?c:l,u?l:c)}else n[r]=new ue(l,l)}return new de(n,e.sel.primIndex)}function wi(e,t,i){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return i&&(n.update=function(t,i,n,s){t&&(this.from=me(e,t)),i&&(this.to=me(e,i)),n&&(this.text=n),void 0!==s&&(this.origin=s)}),Tr(e,"beforeChange",e,n),e.cm&&Tr(e.cm,"beforeChange",e.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function xi(e,t,i){if(e.cm){if(!e.cm.curOp)return Dt(e.cm,xi)(e,t,i);if(e.cm.state.suppressEdits)return}if(!(Es(e,"beforeChange")||e.cm&&Es(e.cm,"beforeChange"))||(t=wi(e,t,!0))){var n=$o&&!i&&sn(e,t.from,t.to);if(n)for(var s=n.length-1;s>=0;--s)Ci(e,{from:n[s].from,to:n[s].to,text:s?[""]:t.text});else Ci(e,t)}}function Ci(e,t){if(1!=t.text.length||""!=t.text[0]||0!=Oo(t.from,t.to)){var i=vi(e,t);os(e,t,i,e.cm?e.cm.curOp.id:NaN),Ti(e,t,i,en(e,t));var n=[];Wn(e,function(e,i){i||-1!=$s(n,e.history)||(ms(e.history,t),n.push(e.history)),Ti(e,t,null,en(e,t))})}}function Ei(e,t,i){if(!e.cm||!e.cm.state.suppressEdits){for(var n,s=e.history,o=e.sel,r="undo"==t?s.done:s.undone,a="undo"==t?s.undone:s.done,l=0;l<r.length&&(n=r[l],i?!n.ranges||n.equals(e.sel):n.ranges);l++);if(l!=r.length){for(s.lastOrigin=s.lastSelOrigin=null;n=r.pop(),
n.ranges;){if(ls(n,a),i&&!n.equals(e.sel))return void _e(e,n,{clearRedo:!1});o=n}var c=[];ls(o,a),a.push({changes:c,generation:s.generation}),s.generation=n.generation||++s.maxGeneration;for(var d=Es(e,"beforeChange")||e.cm&&Es(e.cm,"beforeChange"),l=n.changes.length-1;l>=0;--l){var u=n.changes[l];if(u.origin=t,d&&!wi(e,u,!1))return void(r.length=0);c.push(is(e,u));var h=l?vi(e,u):Ds(r);Ti(e,u,h,nn(e,u)),!l&&e.cm&&e.cm.scrollIntoView({from:u.from,to:Vo(u)});var p=[];Wn(e,function(e,t){t||-1!=$s(p,e.history)||(ms(e.history,u),p.push(e.history)),Ti(e,u,null,nn(e,u))})}}}}function ki(e,t){if(0!=t&&(e.first+=t,e.sel=new de(Ms(e.sel.ranges,function(e){return new ue(Ao(e.anchor.line+t,e.anchor.ch),Ao(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Ft(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,n=i.viewFrom;n<i.viewTo;n++)Nt(e.cm,n,"gutter")}}function Ti(e,t,i,n){if(e.cm&&!e.cm.curOp)return Dt(e.cm,Ti)(e,t,i,n);if(t.to.line<e.first)return void ki(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var s=t.text.length-1-(e.first-t.from.line);ki(e,s),t={from:Ao(e.first,0),to:Ao(t.to.line+s,t.to.ch),text:[Ds(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:Ao(o,Yn(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=qn(e,t.from,t.to),i||(i=vi(e,t)),e.cm?_i(e.cm,t,n):zn(e,t,n),Se(e,i,$r)}}function _i(e,t,i){var n=e.doc,s=e.display,r=t.from,a=t.to,l=!1,c=r.line;e.options.lineWrapping||(c=Qn(fn(Yn(n,r.line))),n.iter(c,a.line+1,function(e){return e==s.maxLine?(l=!0,!0):void 0})),n.sel.contains(t.from,t.to)>-1&&Cs(e),zn(n,t,i,o(e)),e.options.lineWrapping||(n.iter(c,r.line+t.text.length,function(e){var t=u(e);t>s.maxLineLength&&(s.maxLine=e,s.maxLineLength=t,s.maxLineChanged=!0,l=!1)}),l&&(e.curOp.updateMaxLine=!0)),n.frontier=Math.min(n.frontier,r.line),Ie(e,400);var d=t.text.length-(a.line-r.line)-1;t.full?Ft(e):r.line!=a.line||1!=t.text.length||Un(e.doc,t)?Ft(e,r.line,a.line+1,d):Nt(e,r.line,"text");var h=Es(e,"changes"),p=Es(e,"change");if(p||h){var f={from:r,to:a,text:t.text,removed:t.removed,origin:t.origin};p&&ys(e,"change",e,f),h&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(f)}e.display.selForContextMenu=null}function Si(e,t,i,n,s){if(n||(n=i),Oo(n,i)<0){var o=n;n=i,i=o}"string"==typeof t&&(t=Vr(t)),xi(e,{from:i,to:n,text:t,origin:s})}function Di(e,t){if(!xs(e,"scrollCursorIntoView")){var i=e.display,n=i.sizer.getBoundingClientRect(),s=null;if(t.top+n.top<0?s=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(s=!1),null!=s&&!xo){var o=Ps("div","​",null,"position: absolute; top: "+(t.top-i.viewOffset-Ue(e.display))+"px; height: "+(t.bottom-t.top+Ke(e)+i.barHeight)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(s),e.display.lineSpace.removeChild(o)}}}function $i(e,t,i,n){null==n&&(n=0);for(var s=0;5>s;s++){var o=!1,r=ut(e,t),a=i&&i!=t?ut(e,i):r,l=Ai(e,Math.min(r.left,a.left),Math.min(r.top,a.top)-n,Math.max(r.left,a.left),Math.max(r.bottom,a.bottom)+n),c=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=l.scrollTop&&(Jt(e,l.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(o=!0)),null!=l.scrollLeft&&(ei(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(o=!0)),!o)break}return r}function Mi(e,t,i,n,s){var o=Ai(e,t,i,n,s);null!=o.scrollTop&&Jt(e,o.scrollTop),null!=o.scrollLeft&&ei(e,o.scrollLeft)}function Ai(e,t,i,n,s){var o=e.display,r=gt(e.display);0>i&&(i=0);var a=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,l=Ve(e),c={};s-i>l&&(s=i+l);var d=e.doc.height+ze(o),u=r>i,h=s>d-r;if(a>i)c.scrollTop=u?0:i;else if(s>a+l){var p=Math.min(i,(h?d:s)-l);p!=a&&(c.scrollTop=p)}var f=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft,m=We(e)-(e.options.fixedGutter?o.gutters.offsetWidth:0),g=n-t>m;return g&&(n=t+m),10>t?c.scrollLeft=0:f>t?c.scrollLeft=Math.max(0,t-(g?0:10)):n>m+f-3&&(c.scrollLeft=n+(g?0:10)-m),c}function Oi(e,t,i){(null!=t||null!=i)&&Ni(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=i&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+i)}function Fi(e){Ni(e);var t=e.getCursor(),i=t,n=t;e.options.lineWrapping||(i=t.ch?Ao(t.line,t.ch-1):t,n=Ao(t.line,t.ch+1)),e.curOp.scrollToPos={from:i,to:n,margin:e.options.cursorScrollMargin,isCursor:!0}}function Ni(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var i=ht(e,t.from),n=ht(e,t.to),s=Ai(e,Math.min(i.left,n.left),Math.min(i.top,n.top)-t.margin,Math.max(i.right,n.right),Math.max(i.bottom,n.bottom)+t.margin);e.scrollTo(s.scrollLeft,s.scrollTop)}}function Li(e,t,i,n){var s,o=e.doc;null==i&&(i="add"),"smart"==i&&(o.mode.indent?s=He(e,t):i="prev");var r=e.options.tabSize,a=Yn(o,t),l=Or(a.text,null,r);a.stateAfter&&(a.stateAfter=null);var c,d=a.text.match(/^\s*/)[0];if(n||/\S/.test(a.text)){if("smart"==i&&((c=o.mode.indent(s,a.text.slice(d.length),a.text))==Dr||c>150)){if(!n)return;i="prev"}}else c=0,i="not";"prev"==i?c=t>o.first?Or(Yn(o,t-1).text,null,r):0:"add"==i?c=l+e.options.indentUnit:"subtract"==i?c=l-e.options.indentUnit:"number"==typeof i&&(c=l+i),c=Math.max(0,c);var u="",h=0;if(e.options.indentWithTabs)for(var p=Math.floor(c/r);p;--p)h+=r,u+="\t";if(c>h&&(u+=Ss(c-h)),u!=d)return Si(o,u,Ao(t,0),Ao(t,d.length),"+input"),a.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var f=o.sel.ranges[p];if(f.head.line==t&&f.head.ch<d.length){var h=Ao(t,d.length);Ce(o,p,new ue(h,h));break}}}function Ri(e,t,i,n){var s=t,o=t;return"number"==typeof t?o=Yn(e,fe(e,t)):s=Qn(t),null==s?null:(n(o,s)&&e.cm&&Nt(e.cm,s,i),o)}function Ii(e,t){for(var i=e.doc.sel.ranges,n=[],s=0;s<i.length;s++){for(var o=t(i[s]);n.length&&Oo(o.from,Ds(n).to)<=0;){var r=n.pop();if(Oo(r.from,o.from)<0){o.from=r.from;break}}n.push(o)}St(e,function(){for(var t=n.length-1;t>=0;t--)Si(e.doc,"",n[t].from,n[t].to,"+delete");Fi(e)})}function Pi(e,t,i,n,s){function o(){var t=a+i;return t<e.first||t>=e.first+e.size?u=!1:(a=t,d=Yn(e,t))}function r(e){var t=(s?ao:lo)(d,l,i,!0);if(null==t){if(e||!o())return u=!1;l=s?(0>i?eo:Js)(d):0>i?d.text.length:0}else l=t;return!0}var a=t.line,l=t.ch,c=i,d=Yn(e,a),u=!0;if("char"==n)r();else if("column"==n)r(!0);else if("word"==n||"group"==n)for(var h=null,p="group"==n,f=e.cm&&e.cm.getHelper(t,"wordChars"),m=!0;!(0>i)||r(!m);m=!1){var g=d.text.charAt(l)||"\n",v=Ls(g,f)?"w":p&&"\n"==g?"n":!p||/\s/.test(g)?null:"p";if(!p||m||v||(v="s"),h&&h!=v){0>i&&(i=1,r());break}if(v&&(h=v),i>0&&!r(!m))break}var b=Ae(e,Ao(a,l),c,!0);return u||(b.hitSide=!0),b}function Bi(e,t,i,n){var s,o=e.doc,r=t.left;if("page"==n){var a=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);s=t.top+i*(a-(0>i?1.5:.5)*gt(e.display))}else"line"==n&&(s=i>0?t.bottom+3:t.top-3);for(;;){var l=ft(e,r,s);if(!l.outside)break;if(0>i?0>=s:s>=o.height){l.hitSide=!0;break}s+=5*i}return l}function Hi(t,i,n,s){e.defaults[t]=i,n&&(qo[t]=s?function(e,t,i){i!=Go&&n(e,t,i)}:n)}function Ui(e){for(var t,i,n,s,o=e.split(/-(?!$)/),e=o[o.length-1],r=0;r<o.length-1;r++){var a=o[r];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else{if(!/^s(hift)$/i.test(a))throw new Error("Unrecognized modifier name: "+a);n=!0}}return t&&(e="Alt-"+e),i&&(e="Ctrl-"+e),s&&(e="Cmd-"+e),n&&(e="Shift-"+e),e}function zi(e){return"string"==typeof e?sr[e]:e}function ji(e,t,i,n,s){if(n&&n.shared)return Ki(e,t,i,n,s);if(e.cm&&!e.cm.curOp)return Dt(e.cm,ji)(e,t,i,n,s);var o=new dr(e,s),r=Oo(t,i);if(n&&Fs(n,o,!1),r>0||0==r&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=Ps("span",[o.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),n.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(pn(e,t.line,t,i,o)||t.line!=i.line&&pn(e,i.line,t,i,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Mo=!0}o.addToHistory&&os(e,{from:t,to:i,origin:"markText"},e.sel,NaN);var a,l=t.line,c=e.cm;if(e.iter(l,i.line+1,function(e){c&&o.collapsed&&!c.options.lineWrapping&&fn(e)==c.display.maxLine&&(a=!0),o.collapsed&&l!=t.line&&Xn(e,0),Qi(e,new qi(o,l==t.line?t.ch:null,l==i.line?i.ch:null)),++l}),o.collapsed&&e.iter(t.line,i.line+1,function(t){bn(e,t)&&Xn(t,0)}),o.clearOnEnter&&Er(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&($o=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++cr,o.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),o.collapsed)Ft(c,t.line,i.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var d=t.line;d<=i.line;d++)Nt(c,d,"text");o.atomic&&$e(c.doc),ys(c,"markerAdded",c,o)}return o}function Ki(e,t,i,n,s){n=Fs(n),n.shared=!1;var o=[ji(e,t,i,n,s)],r=o[0],a=n.widgetNode;return Wn(e,function(e){a&&(n.widgetNode=a.cloneNode(!0)),o.push(ji(e,me(e,t),me(e,i),n,s));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;r=Ds(o)}),new ur(o,r)}function Wi(e){return e.findMarks(Ao(e.first,0),e.clipPos(Ao(e.lastLine())),function(e){return e.parent})}function Vi(e,t){for(var i=0;i<t.length;i++){var n=t[i],s=n.find(),o=e.clipPos(s.from),r=e.clipPos(s.to);if(Oo(o,r)){var a=ji(e,o,r,n.primary,n.primary.type);n.markers.push(a),a.parent=n}}}function Yi(e){for(var t=0;t<e.length;t++){var i=e[t],n=[i.primary.doc];Wn(i.primary.doc,function(e){n.push(e)});for(var s=0;s<i.markers.length;s++){var o=i.markers[s];-1==$s(n,o.doc)&&(o.parent=null,i.markers.splice(s--,1))}}}function qi(e,t,i){this.marker=e,this.from=t,this.to=i}function Gi(e,t){if(e)for(var i=0;i<e.length;++i){var n=e[i];if(n.marker==t)return n}}function Xi(e,t){for(var i,n=0;n<e.length;++n)e[n]!=t&&(i||(i=[])).push(e[n]);return i}function Qi(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Zi(e,t,i){if(e)for(var n,s=0;s<e.length;++s){var o=e[s],r=o.marker,a=null==o.from||(r.inclusiveLeft?o.from<=t:o.from<t);if(a||o.from==t&&"bookmark"==r.type&&(!i||!o.marker.insertLeft)){var l=null==o.to||(r.inclusiveRight?o.to>=t:o.to>t);(n||(n=[])).push(new qi(r,o.from,l?null:o.to))}}return n}function Ji(e,t,i){if(e)for(var n,s=0;s<e.length;++s){var o=e[s],r=o.marker,a=null==o.to||(r.inclusiveRight?o.to>=t:o.to>t);if(a||o.from==t&&"bookmark"==r.type&&(!i||o.marker.insertLeft)){var l=null==o.from||(r.inclusiveLeft?o.from<=t:o.from<t);(n||(n=[])).push(new qi(r,l?null:o.from-t,null==o.to?null:o.to-t))}}return n}function en(e,t){if(t.full)return null;var i=ve(e,t.from.line)&&Yn(e,t.from.line).markedSpans,n=ve(e,t.to.line)&&Yn(e,t.to.line).markedSpans;if(!i&&!n)return null;var s=t.from.ch,o=t.to.ch,r=0==Oo(t.from,t.to),a=Zi(i,s,r),l=Ji(n,o,r),c=1==t.text.length,d=Ds(t.text).length+(c?s:0);if(a)for(var u=0;u<a.length;++u){var h=a[u];if(null==h.to){var p=Gi(l,h.marker);p?c&&(h.to=null==p.to?null:p.to+d):h.to=s}}if(l)for(var u=0;u<l.length;++u){var h=l[u];if(null!=h.to&&(h.to+=d),null==h.from){var p=Gi(a,h.marker);p||(h.from=d,c&&(a||(a=[])).push(h))}else h.from+=d,c&&(a||(a=[])).push(h)}a&&(a=tn(a)),l&&l!=a&&(l=tn(l));var f=[a];if(!c){var m,g=t.text.length-2;if(g>0&&a)for(var u=0;u<a.length;++u)null==a[u].to&&(m||(m=[])).push(new qi(a[u].marker,null,null));for(var u=0;g>u;++u)f.push(m);f.push(l)}return f}function tn(e){for(var t=0;t<e.length;++t){var i=e[t];null!=i.from&&i.from==i.to&&!1!==i.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function nn(e,t){var i=us(e,t),n=en(e,t);if(!i)return n;if(!n)return i;for(var s=0;s<i.length;++s){var o=i[s],r=n[s];if(o&&r)e:for(var a=0;a<r.length;++a){for(var l=r[a],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else r&&(i[s]=r)}return i}function sn(e,t,i){var n=null;if(e.iter(t.line,i.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var i=e.markedSpans[t].marker;!i.readOnly||n&&-1!=$s(n,i)||(n||(n=[])).push(i)}}),!n)return null;for(var s=[{from:t,to:i}],o=0;o<n.length;++o)for(var r=n[o],a=r.find(0),l=0;l<s.length;++l){var c=s[l];if(!(Oo(c.to,a.from)<0||Oo(c.from,a.to)>0)){var d=[l,1],u=Oo(c.from,a.from),h=Oo(c.to,a.to);(0>u||!r.inclusiveLeft&&!u)&&d.push({from:c.from,to:a.from}),(h>0||!r.inclusiveRight&&!h)&&d.push({from:a.to,to:c.to}),s.splice.apply(s,d),l+=d.length-1}}return s}function on(e){var t=e.markedSpans;if(t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function rn(e,t){if(t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function an(e){return e.inclusiveLeft?-1:0}function ln(e){return e.inclusiveRight?1:0}function cn(e,t){var i=e.lines.length-t.lines.length;if(0!=i)return i;var n=e.find(),s=t.find(),o=Oo(n.from,s.from)||an(e)-an(t);if(o)return-o;var r=Oo(n.to,s.to)||ln(e)-ln(t);return r||t.id-e.id}function dn(e,t){var i,n=Mo&&e.markedSpans;if(n)for(var s,o=0;o<n.length;++o)s=n[o],s.marker.collapsed&&null==(t?s.from:s.to)&&(!i||cn(i,s.marker)<0)&&(i=s.marker);return i}function un(e){return dn(e,!0)}function hn(e){return dn(e,!1)}function pn(e,t,i,n,s){var o=Yn(e,t),r=Mo&&o.markedSpans;if(r)for(var a=0;a<r.length;++a){var l=r[a];if(l.marker.collapsed){var c=l.marker.find(0),d=Oo(c.from,i)||an(l.marker)-an(s),u=Oo(c.to,n)||ln(l.marker)-ln(s);if(!(d>=0&&0>=u||0>=d&&u>=0)&&(0>=d&&(Oo(c.to,i)>0||l.marker.inclusiveRight&&s.inclusiveLeft)||d>=0&&(Oo(c.from,n)<0||l.marker.inclusiveLeft&&s.inclusiveRight)))return!0}}}function fn(e){for(var t;t=un(e);)e=t.find(-1,!0).line;return e}function mn(e){for(var t,i;t=hn(e);)e=t.find(1,!0).line,(i||(i=[])).push(e);return i}function gn(e,t){var i=Yn(e,t),n=fn(i);return i==n?t:Qn(n)}function vn(e,t){if(t>e.lastLine())return t;var i,n=Yn(e,t);if(!bn(e,n))return t;for(;i=hn(n);)n=i.find(1,!0).line;return Qn(n)+1}function bn(e,t){var i=Mo&&t.markedSpans;if(i)for(var n,s=0;s<i.length;++s)if(n=i[s],n.marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&yn(e,t,n))return!0}}function yn(e,t,i){if(null==i.to){var n=i.marker.find(1,!0);return yn(e,n.line,Gi(n.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var s,o=0;o<t.markedSpans.length;++o)if(s=t.markedSpans[o],s.marker.collapsed&&!s.marker.widgetNode&&s.from==i.to&&(null==s.to||s.to!=i.from)&&(s.marker.inclusiveLeft||i.marker.inclusiveRight)&&yn(e,t,s))return!0}function wn(e,t,i){Jn(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Oi(e,null,i)}function xn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!Br(document.body,e.node)){var i="position: relative;";e.coverGutter&&(i+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(i+="width: "+t.display.wrapper.clientWidth+"px;"),Hs(t.display.measure,Ps("div",[e.node],null,i))}return e.height=e.node.offsetHeight}function Cn(e,t,i,n){var s=new hr(e,i,n),o=e.cm;return o&&s.noHScroll&&(o.display.alignWidgets=!0),Ri(e,t,"widget",function(t){var i=t.widgets||(t.widgets=[]);if(null==s.insertAt?i.push(s):i.splice(Math.min(i.length-1,Math.max(0,s.insertAt)),0,s),s.line=t,o&&!bn(e,t)){var n=Jn(t)<e.scrollTop;Xn(t,t.height+xn(s)),n&&Oi(o,null,s.height),o.curOp.forceUpdate=!0}return!0}),s}function En(e,t,i,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),on(e),rn(e,i);var s=n?n(e):1;s!=e.height&&Xn(e,s)}function kn(e){e.parent=null,on(e)}function Tn(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var n=i[1]?"bgClass":"textClass";null==t[n]?t[n]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(t[n])||(t[n]+=" "+i[2])}return e}function _n(t,i){if(t.blankLine)return t.blankLine(i);if(t.innerMode){var n=e.innerMode(t,i);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function Sn(t,i,n,s){for(var o=0;10>o;o++){s&&(s[0]=e.innerMode(t,n).mode);var r=t.token(i,n);if(i.pos>i.start)return r}throw new Error("Mode "+t.name+" failed to advance stream.")}function Dn(e,t,i,n){function s(e){return{start:u.start,end:u.pos,string:u.current(),type:o||null,state:e?tr(r.mode,d):d}}var o,r=e.doc,a=r.mode;t=me(r,t);var l,c=Yn(r,t.line),d=He(e,t.line,i),u=new lr(c.text,e.options.tabSize);for(n&&(l=[]);(n||u.pos<t.ch)&&!u.eol();)u.start=u.pos,o=Sn(a,u,d),n&&l.push(s(!0));return n?l:s()}function $n(e,t,i,n,s,o,r){var a=i.flattenSpans;null==a&&(a=e.options.flattenSpans);var l,c=0,d=null,u=new lr(t,e.options.tabSize),h=e.options.addModeClass&&[null];for(""==t&&Tn(_n(i,n),o);!u.eol();){if(u.pos>e.options.maxHighlightLength?(a=!1,r&&On(e,t,n,u.pos),u.pos=t.length,l=null):l=Tn(Sn(i,u,n,h),o),h){var p=h[0].name;p&&(l="m-"+(l?p+" "+l:p))}if(!a||d!=l){for(;c<u.start;)c=Math.min(u.start,c+5e4),s(c,d);d=l}u.start=u.pos}for(;c<u.pos;){var f=Math.min(u.pos,c+5e4);s(f,d),c=f}}function Mn(e,t,i,n){var s=[e.state.modeGen],o={};$n(e,t.text,e.doc.mode,i,function(e,t){s.push(e,t)},o,n);for(var r=0;r<e.state.overlays.length;++r){var a=e.state.overlays[r],l=1,c=0;$n(e,t.text,a.mode,!0,function(e,t){for(var i=l;e>c;){var n=s[l];n>e&&s.splice(l,1,e,s[l+1],n),l+=2,c=Math.min(e,n)}if(t)if(a.opaque)s.splice(i,l-i,e,"cm-overlay "+t),l=i+2;else for(;l>i;i+=2){var o=s[i+1];s[i+1]=(o?o+" ":"")+"cm-overlay "+t}},o)}return{styles:s,classes:o.bgClass||o.textClass?o:null}}function An(e,t,i){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=Mn(e,t,t.stateAfter=He(e,Qn(t)));t.styles=n.styles,n.classes?t.styleClasses=n.classes:t.styleClasses&&(t.styleClasses=null),i===e.doc.frontier&&e.doc.frontier++}return t.styles}function On(e,t,i,n){var s=e.doc.mode,o=new lr(t,e.options.tabSize);for(o.start=o.pos=n||0,""==t&&_n(s,i);!o.eol()&&o.pos<=e.options.maxHighlightLength;)Sn(s,o,i),o.start=o.pos}function Fn(e,t){if(!e||/^\s*$/.test(e))return null;var i=t.addModeClass?mr:fr;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))}function Nn(e,t){var i=Ps("span",null,null,mo?"padding-right: .1px":null),n={pre:Ps("pre",[i]),content:i,col:0,pos:0,cm:e,splitSpaces:(po||mo)&&e.getOption("lineWrapping")};t.measure={};for(var s=0;s<=(t.rest?t.rest.length:0);s++){var o,r=s?t.rest[s-1]:t.line;n.pos=0,n.addToken=Rn,qs(e.display.measure)&&(o=es(r))&&(n.addToken=Pn(n.addToken,o)),n.map=[];Hn(r,n,An(e,r,t!=e.display.externalMeasured&&Qn(r))),r.styleClasses&&(r.styleClasses.bgClass&&(n.bgClass=js(r.styleClasses.bgClass,n.bgClass||"")),r.styleClasses.textClass&&(n.textClass=js(r.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(Ys(e.display.measure))),0==s?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return mo&&/\bcm-tab\b/.test(n.content.lastChild.className)&&(n.content.className="cm-tab-wrap-hack"),Tr(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=js(n.pre.className,n.textClass||"")),n}function Ln(e){var t=Ps("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Rn(e,t,i,n,s,o,r){if(t){var a=e.splitSpaces?t.replace(/ {3,}/g,In):t,l=e.cm.state.specialChars,c=!1;if(l.test(t))for(var d=document.createDocumentFragment(),u=0;;){l.lastIndex=u;var h=l.exec(t),p=h?h.index-u:t.length-u;if(p){var f=document.createTextNode(a.slice(u,u+p));d.appendChild(po&&9>fo?Ps("span",[f]):f),e.map.push(e.pos,e.pos+p,f),e.col+=p,e.pos+=p}if(!h)break;if(u+=p+1,"\t"==h[0]){var m=e.cm.options.tabSize,g=m-e.col%m,f=d.appendChild(Ps("span",Ss(g),"cm-tab"));f.setAttribute("role","presentation"),f.setAttribute("cm-text","\t"),e.col+=g}else{var f=e.cm.options.specialCharPlaceholder(h[0]);f.setAttribute("cm-text",h[0]),d.appendChild(po&&9>fo?Ps("span",[f]):f),e.col+=1}e.map.push(e.pos,e.pos+1,f),e.pos++}else{e.col+=t.length;var d=document.createTextNode(a);e.map.push(e.pos,e.pos+t.length,d),po&&9>fo&&(c=!0),e.pos+=t.length}if(i||n||s||c||r){var v=i||"";n&&(v+=n),s&&(v+=s);var b=Ps("span",[d],v,r);return o&&(b.title=o),e.content.appendChild(b)}e.content.appendChild(d)}}function In(e){for(var t=" ",i=0;i<e.length-2;++i)t+=i%2?" ":" ";return t+=" "}function Pn(e,t){return function(i,n,s,o,r,a,l){s=s?s+" cm-force-border":"cm-force-border";for(var c=i.pos,d=c+n.length;;){for(var u=0;u<t.length;u++){var h=t[u];if(h.to>c&&h.from<=c)break}if(h.to>=d)return e(i,n,s,o,r,a,l);e(i,n.slice(0,h.to-c),s,o,null,a,l),o=null,n=n.slice(h.to-c),c=h.to}}}function Bn(e,t,i,n){var s=!n&&i.widgetNode;s&&e.map.push(e.pos,e.pos+t,s),!n&&e.cm.display.input.needsContentAttribute&&(s||(s=e.content.appendChild(document.createElement("span"))),s.setAttribute("cm-marker",i.id)),s&&(e.cm.display.input.setUneditable(s),e.content.appendChild(s)),e.pos+=t}function Hn(e,t,i){var n=e.markedSpans,s=e.text,o=0;if(n)for(var r,a,l,c,d,u,h,p=s.length,f=0,m=1,g="",v=0;;){if(v==f){l=c=d=u=a="",h=null,v=1/0;for(var b=[],y=0;y<n.length;++y){var w=n[y],x=w.marker;"bookmark"==x.type&&w.from==f&&x.widgetNode?b.push(x):w.from<=f&&(null==w.to||w.to>f||x.collapsed&&w.to==f&&w.from==f)?(null!=w.to&&w.to!=f&&v>w.to&&(v=w.to,c=""),x.className&&(l+=" "+x.className),x.css&&(a=x.css),x.startStyle&&w.from==f&&(d+=" "+x.startStyle),x.endStyle&&w.to==v&&(c+=" "+x.endStyle),x.title&&!u&&(u=x.title),x.collapsed&&(!h||cn(h.marker,x)<0)&&(h=w)):w.from>f&&v>w.from&&(v=w.from)}if(h&&(h.from||0)==f){if(Bn(t,(null==h.to?p+1:h.to)-f,h.marker,null==h.from),null==h.to)return;h.to==f&&(h=!1)}if(!h&&b.length)for(var y=0;y<b.length;++y)Bn(t,0,b[y])}if(f>=p)break;for(var C=Math.min(p,v);;){if(g){var E=f+g.length;if(!h){var k=E>C?g.slice(0,C-f):g;t.addToken(t,k,r?r+l:l,d,f+k.length==v?c:"",u,a)}if(E>=C){g=g.slice(C-f),f=C;break}f=E,d=""}g=s.slice(o,o=i[m++]),r=Fn(i[m++],t.cm.options)}}else for(var m=1;m<i.length;m+=2)t.addToken(t,s.slice(o,o=i[m]),Fn(i[m+1],t.cm.options))}function Un(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Ds(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function zn(e,t,i,n){function s(e){return i?i[e]:null}function o(e,i,s){En(e,i,s,n),ys(e,"change",e,t)}function r(e,t){for(var i=e,o=[];t>i;++i)o.push(new pr(c[i],s(i),n));return o}var a=t.from,l=t.to,c=t.text,d=Yn(e,a.line),u=Yn(e,l.line),h=Ds(c),p=s(c.length-1),f=l.line-a.line;if(t.full)e.insert(0,r(0,c.length)),e.remove(c.length,e.size-c.length);else if(Un(e,t)){var m=r(0,c.length-1);o(u,u.text,p),f&&e.remove(a.line,f),m.length&&e.insert(a.line,m)}else if(d==u)if(1==c.length)o(d,d.text.slice(0,a.ch)+h+d.text.slice(l.ch),p);else{var m=r(1,c.length-1);m.push(new pr(h+d.text.slice(l.ch),p,n)),o(d,d.text.slice(0,a.ch)+c[0],s(0)),e.insert(a.line+1,m)}else if(1==c.length)o(d,d.text.slice(0,a.ch)+c[0]+u.text.slice(l.ch),s(0)),e.remove(a.line+1,f);else{o(d,d.text.slice(0,a.ch)+c[0],s(0)),o(u,h+u.text.slice(l.ch),p);var m=r(1,c.length-1);f>1&&e.remove(a.line+1,f-1),e.insert(a.line+1,m)}ys(e,"change",e,t)}function jn(e){this.lines=e,this.parent=null;for(var t=0,i=0;t<e.length;++t)e[t].parent=this,i+=e[t].height;this.height=i}function Kn(e){this.children=e;for(var t=0,i=0,n=0;n<e.length;++n){var s=e[n];t+=s.chunkSize(),i+=s.height,s.parent=this}this.size=t,this.height=i,this.parent=null}function Wn(e,t,i){function n(e,s,o){if(e.linked)for(var r=0;r<e.linked.length;++r){var a=e.linked[r];if(a.doc!=s){var l=o&&a.sharedHist;(!i||l)&&(t(a.doc,l),n(a.doc,e,l))}}}n(e,null,!0)}function Vn(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,r(e),i(e),e.options.lineWrapping||h(e),e.options.mode=t.modeOption,Ft(e)}function Yn(e,t){if(0>(t-=e.first)||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var n=0;;++n){var s=i.children[n],o=s.chunkSize();if(o>t){i=s;break}t-=o}return i.lines[t]}function qn(e,t,i){var n=[],s=t.line;return e.iter(t.line,i.line+1,function(e){var o=e.text;s==i.line&&(o=o.slice(0,i.ch)),s==t.line&&(o=o.slice(t.ch)),n.push(o),++s}),n}function Gn(e,t,i){var n=[];return e.iter(t,i,function(e){n.push(e.text)}),n}function Xn(e,t){var i=t-e.height;if(i)for(var n=e;n;n=n.parent)n.height+=i}function Qn(e){if(null==e.parent)return null;for(var t=e.parent,i=$s(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var s=0;n.children[s]!=t;++s)i+=n.children[s].chunkSize();return i+t.first}function Zn(e,t){var i=e.first;e:do{for(var n=0;n<e.children.length;++n){var s=e.children[n],o=s.height;if(o>t){e=s;continue e}t-=o,i+=s.chunkSize()}return i}while(!e.lines);for(var n=0;n<e.lines.length;++n){var r=e.lines[n],a=r.height;if(a>t)break;t-=a}return i+n}function Jn(e){e=fn(e);for(var t=0,i=e.parent,n=0;n<i.lines.length;++n){var s=i.lines[n];if(s==e)break;t+=s.height}for(var o=i.parent;o;i=o,o=i.parent)for(var n=0;n<o.children.length;++n){var r=o.children[n];if(r==i)break;t+=r.height}return t}function es(e){var t=e.order;return null==t&&(t=e.order=Zr(e.text)),t}function ts(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function is(e,t){var i={from:Y(t.from),to:Vo(t),text:qn(e,t.from,t.to)};return cs(e,i,t.from.line,t.to.line+1),Wn(e,function(e){cs(e,i,t.from.line,t.to.line+1)},!0),i}function ns(e){for(;e.length;){if(!Ds(e).ranges)break;e.pop()}}function ss(e,t){return t?(ns(e.done),Ds(e.done)):e.done.length&&!Ds(e.done).ranges?Ds(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Ds(e.done)):void 0}function os(e,t,i,n){var s=e.history;s.undone.length=0;var o,r=+new Date;if((s.lastOp==n||s.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&s.lastModTime>r-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=ss(s,s.lastOp==n))){var a=Ds(o.changes);0==Oo(t.from,t.to)&&0==Oo(t.from,a.to)?a.to=Vo(t):o.changes.push(is(e,t))}else{var l=Ds(s.done);for(l&&l.ranges||ls(e.sel,s.done),o={changes:[is(e,t)],generation:s.generation},s.done.push(o);s.done.length>s.undoDepth;)s.done.shift(),s.done[0].ranges||s.done.shift()}s.done.push(i),s.generation=++s.maxGeneration,s.lastModTime=s.lastSelTime=r,s.lastOp=s.lastSelOp=n,s.lastOrigin=s.lastSelOrigin=t.origin,a||Tr(e,"historyAdded")}function rs(e,t,i,n){var s=t.charAt(0);return"*"==s||"+"==s&&i.ranges.length==n.ranges.length&&i.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function as(e,t,i,n){var s=e.history,o=n&&n.origin;i==s.lastSelOp||o&&s.lastSelOrigin==o&&(s.lastModTime==s.lastSelTime&&s.lastOrigin==o||rs(e,o,Ds(s.done),t))?s.done[s.done.length-1]=t:ls(t,s.done),s.lastSelTime=+new Date,s.lastSelOrigin=o,s.lastSelOp=i,n&&!1!==n.clearRedo&&ns(s.undone)}function ls(e,t){var i=Ds(t);i&&i.ranges&&i.equals(e)||t.push(e)}function cs(e,t,i,n){var s=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,i),Math.min(e.first+e.size,n),function(i){i.markedSpans&&((s||(s=t["spans_"+e.id]={}))[o]=i.markedSpans),++o})}function ds(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t||(t=e.slice(0,i)):t&&t.push(e[i]);return t?t.length?t:null:e}function us(e,t){var i=t["spans_"+e.id];if(!i)return null;for(var n=0,s=[];n<t.text.length;++n)s.push(ds(i[n]));return s}function hs(e,t,i){for(var n=0,s=[];n<e.length;++n){var o=e[n];if(o.ranges)s.push(i?de.prototype.deepCopy.call(o):o);else{var r=o.changes,a=[];s.push({changes:a});for(var l=0;l<r.length;++l){var c,d=r[l];if(a.push({from:d.from,to:d.to,text:d.text}),t)for(var u in d)(c=u.match(/^spans_(\d+)$/))&&$s(t,Number(c[1]))>-1&&(Ds(a)[u]=d[u],delete d[u])}}}return s}function ps(e,t,i,n){i<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function fs(e,t,i,n){for(var s=0;s<e.length;++s){var o=e[s],r=!0;if(o.ranges){o.copied||(o=e[s]=o.deepCopy(),o.copied=!0);for(var a=0;a<o.ranges.length;a++)ps(o.ranges[a].anchor,t,i,n),ps(o.ranges[a].head,t,i,n)}else{for(var a=0;a<o.changes.length;++a){var l=o.changes[a];if(i<l.from.line)l.from=Ao(l.from.line+n,l.from.ch),l.to=Ao(l.to.line+n,l.to.ch);else if(t<=l.to.line){r=!1;break}}r||(e.splice(0,s+1),s=0)}}}function ms(e,t){var i=t.from.line,n=t.to.line,s=t.text.length-(n-i)-1;fs(e.done,i,n,s),fs(e.undone,i,n,s)}function gs(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function vs(e){return e.target||e.srcElement}function bs(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),ko&&e.ctrlKey&&1==t&&(t=3),t}function ys(e,t){var i=e._handlers&&e._handlers[t];if(i){var n,s=Array.prototype.slice.call(arguments,2);Po?n=Po.delayedCallbacks:_r?n=_r:(n=_r=[],setTimeout(ws,0));for(var o=0;o<i.length;++o)n.push(function(e){return function(){e.apply(null,s)}}(i[o]))}}function ws(){var e=_r;_r=null;for(var t=0;t<e.length;++t)e[t]()}function xs(e,t,i){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Tr(e,i||t.type,e,t),gs(t)||t.codemirrorIgnore}function Cs(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)-1==$s(i,t[n])&&i.push(t[n])}function Es(e,t){var i=e._handlers&&e._handlers[t];return i&&i.length>0}function ks(e){e.prototype.on=function(e,t){Er(this,e,t)},e.prototype.off=function(e,t){kr(this,e,t)}}function Ts(){this.id=null}function _s(e,t,i){for(var n=0,s=0;;){var o=e.indexOf("\t",n);-1==o&&(o=e.length);var r=o-n;if(o==e.length||s+r>=t)return n+Math.min(r,t-s);if(s+=o-n,s+=i-s%i,n=o+1,s>=t)return n}}function Ss(e){for(;Fr.length<=e;)Fr.push(Ds(Fr)+" ");return Fr[e]}function Ds(e){return e[e.length-1]}function $s(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}function Ms(e,t){for(var i=[],n=0;n<e.length;n++)i[n]=t(e[n],n);return i}function As(){}function Os(e,t){var i;return Object.create?i=Object.create(e):(As.prototype=e,i=new As),t&&Fs(t,i),i}function Fs(e,t,i){t||(t={});for(var n in e)!e.hasOwnProperty(n)||!1===i&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function Ns(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Ls(e,t){return t?!!(t.source.indexOf("\\w")>-1&&Ir(e))||t.test(e):Ir(e)}function Rs(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function Is(e){return e.charCodeAt(0)>=768&&Pr.test(e)}function Ps(e,t,i,n){var s=document.createElement(e);if(i&&(s.className=i),n&&(s.style.cssText=n),"string"==typeof t)s.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)s.appendChild(t[o]);return s}function Bs(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function Hs(e,t){return Bs(e).appendChild(t)}function Us(){return document.activeElement}function zs(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function js(e,t){for(var i=e.split(" "),n=0;n<i.length;n++)i[n]&&!zs(i[n]).test(t)&&(t+=" "+i[n]);return t}function Ks(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),i=0;i<t.length;i++){var n=t[i].CodeMirror;n&&e(n)}}function Ws(){Kr||(Vs(),Kr=!0)}function Vs(){var e;Er(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Ks(zt)},100))}),Er(window,"blur",function(){Ks(pi)})}function Ys(e){if(null==Hr){var t=Ps("span","​");Hs(e,Ps("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Hr=t.offsetWidth<=1&&t.offsetHeight>2&&!(po&&8>fo))}var i=Hr?Ps("span","​"):Ps("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}function qs(e){if(null!=Ur)return Ur;var t=Hs(e,document.createTextNode("AخA")),i=Lr(t,0,1).getBoundingClientRect();if(!i||i.left==i.right)return!1;var n=Lr(t,1,2).getBoundingClientRect();return Ur=n.right-i.right<3}function Gs(e){if(null!=Gr)return Gr;var t=Hs(e,Ps("span","x")),i=t.getBoundingClientRect(),n=Lr(t,0,1).getBoundingClientRect();return Gr=Math.abs(i.left-n.left)>1}function Xs(e,t,i,n){if(!e)return n(t,i,"ltr");for(var s=!1,o=0;o<e.length;++o){var r=e[o];(r.from<i&&r.to>t||t==i&&r.to==t)&&(n(Math.max(r.from,t),Math.min(r.to,i),1==r.level?"rtl":"ltr"),s=!0)}s||n(t,i,"ltr")}function Qs(e){
return e.level%2?e.to:e.from}function Zs(e){return e.level%2?e.from:e.to}function Js(e){var t=es(e);return t?Qs(t[0]):0}function eo(e){var t=es(e);return t?Zs(Ds(t)):e.text.length}function to(e,t){var i=Yn(e.doc,t),n=fn(i);n!=i&&(t=Qn(n));var s=es(n),o=s?s[0].level%2?eo(n):Js(n):0;return Ao(t,o)}function io(e,t){for(var i,n=Yn(e.doc,t);i=hn(n);)n=i.find(1,!0).line,t=null;var s=es(n),o=s?s[0].level%2?Js(n):eo(n):n.text.length;return Ao(null==t?Qn(n):t,o)}function no(e,t){var i=to(e,t.line),n=Yn(e.doc,i.line),s=es(n);if(!s||0==s[0].level){var o=Math.max(0,n.text.search(/\S/)),r=t.line==i.line&&t.ch<=o&&t.ch;return Ao(i.line,r?0:o)}return i}function so(e,t,i){var n=e[0].level;return t==n||i!=n&&i>t}function oo(e,t){Qr=null;for(var i,n=0;n<e.length;++n){var s=e[n];if(s.from<t&&s.to>t)return n;if(s.from==t||s.to==t){if(null!=i)return so(e,s.level,e[i].level)?(s.from!=s.to&&(Qr=i),n):(s.from!=s.to&&(Qr=n),i);i=n}}return i}function ro(e,t,i,n){if(!n)return t+i;do{t+=i}while(t>0&&Is(e.text.charAt(t)));return t}function ao(e,t,i,n){var s=es(e);if(!s)return lo(e,t,i,n);for(var o=oo(s,t),r=s[o],a=ro(e,t,r.level%2?-i:i,n);;){if(a>r.from&&a<r.to)return a;if(a==r.from||a==r.to)return oo(s,a)==o?a:(r=s[o+=i],i>0==r.level%2?r.to:r.from);if(!(r=s[o+=i]))return null;a=i>0==r.level%2?ro(e,r.to,-1,n):ro(e,r.from,1,n)}}function lo(e,t,i,n){var s=t+i;if(n)for(;s>0&&Is(e.text.charAt(s));)s+=i;return 0>s||s>e.text.length?null:s}var co=/gecko\/\d/i.test(navigator.userAgent),uo=/MSIE \d/.test(navigator.userAgent),ho=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),po=uo||ho,fo=po&&(uo?document.documentMode||6:ho[1]),mo=/WebKit\//.test(navigator.userAgent),go=mo&&/Qt\/\d+\.\d+/.test(navigator.userAgent),vo=/Chrome\//.test(navigator.userAgent),bo=/Opera\//.test(navigator.userAgent),yo=/Apple Computer/.test(navigator.vendor),wo=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),xo=/PhantomJS/.test(navigator.userAgent),Co=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Eo=Co||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),ko=Co||/Mac/.test(navigator.platform),To=/win/i.test(navigator.platform),_o=bo&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);_o&&(_o=Number(_o[1])),_o&&_o>=15&&(bo=!1,mo=!0);var So=ko&&(go||bo&&(null==_o||12.11>_o)),Do=co||po&&fo>=9,$o=!1,Mo=!1;m.prototype=Fs({update:function(e){var t=e.scrollWidth>e.clientWidth+1,i=e.scrollHeight>e.clientHeight+1,n=e.nativeBarWidth;if(i){this.vert.style.display="block",this.vert.style.bottom=t?n+"px":"0";var s=e.viewHeight-(t?n:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+s)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=i?n+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(i?n:0);this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+o+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedOverlay&&e.clientHeight>0&&(0==n&&this.overlayHack(),this.checkedOverlay=!0),{right:i?n:0,bottom:t?n:0}},setScrollLeft:function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e)},setScrollTop:function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e)},overlayHack:function(){var e=ko&&!wo?"12px":"18px";this.horiz.style.minHeight=this.vert.style.minWidth=e;var t=this,i=function(e){vs(e)!=t.vert&&vs(e)!=t.horiz&&Dt(t.cm,Wt)(e)};Er(this.vert,"mousedown",i),Er(this.horiz,"mousedown",i)},clear:function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},m.prototype),g.prototype=Fs({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},g.prototype),e.scrollbarModel={native:m,null:g},T.prototype.signal=function(e,t){Es(e,t)&&this.events.push(arguments)},T.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Tr.apply(null,this.events[e])};var Ao=e.Pos=function(e,t){return this instanceof Ao?(this.line=e,void(this.ch=t)):new Ao(e,t)},Oo=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch},Fo=null;ie.prototype=Fs({init:function(e){function t(e){if(n.somethingSelected())Fo=n.getSelections(),i.inaccurateSelection&&(i.prevInput="",i.inaccurateSelection=!1,o.value=Fo.join("\n"),Nr(o));else{if(!n.options.lineWiseCopyCut)return;var t=ee(n);Fo=t.text,"cut"==e.type?n.setSelections(t.ranges,null,$r):(i.prevInput="",o.value=t.text.join("\n"),Nr(o))}"cut"==e.type&&(n.state.cutIncoming=!0)}var i=this,n=this.cm,s=this.wrapper=ne(),o=this.textarea=s.firstChild;e.wrapper.insertBefore(s,e.wrapper.firstChild),Co&&(o.style.width="0px"),Er(o,"input",function(){po&&fo>=9&&i.hasSelection&&(i.hasSelection=null),i.poll()}),Er(o,"paste",function(){if(mo&&!n.state.fakedLastChar&&!(new Date-n.state.lastMiddleDown<200)){var e=o.selectionStart,t=o.selectionEnd;o.value+="$",o.selectionEnd=t,o.selectionStart=e,n.state.fakedLastChar=!0}n.state.pasteIncoming=!0,i.fastPoll()}),Er(o,"cut",t),Er(o,"copy",t),Er(e.scroller,"paste",function(t){jt(e,t)||(n.state.pasteIncoming=!0,i.focus())}),Er(e.lineSpace,"selectstart",function(t){jt(e,t)||wr(t)}),Er(o,"compositionstart",function(){var e=n.getCursor("from");i.composing={start:e,range:n.markText(e,n.getCursor("to"),{className:"CodeMirror-composing"})}}),Er(o,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},prepareSelection:function(){var e=this.cm,t=e.display,i=e.doc,n=Fe(e);if(e.options.moveInputWithCursor){var s=ut(e,i.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),r=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,s.top+r.top-o.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,s.left+r.left-o.left))}return n},showSelection:function(e){var t=this.cm,i=t.display;Hs(i.cursorDiv,e.cursors),Hs(i.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},reset:function(e){if(!this.contextMenuPending){var t,i,n=this.cm,s=n.doc;if(n.somethingSelected()){this.prevInput="";var o=s.sel.primary();t=qr&&(o.to().line-o.from().line>100||(i=n.getSelection()).length>1e3);var r=t?"-":i||n.getSelection();this.textarea.value=r,n.state.focused&&Nr(this.textarea),po&&fo>=9&&(this.hasSelection=r)}else e||(this.prevInput=this.textarea.value="",po&&fo>=9&&(this.hasSelection=null));this.inaccurateSelection=t}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!Eo||Us()!=this.textarea))try{this.textarea.focus()}catch(e){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var e=this;e.pollingFast||e.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},fastPoll:function(){function e(){i.poll()||t?(i.pollingFast=!1,i.slowPoll()):(t=!0,i.polling.set(60,e))}var t=!1,i=this;i.pollingFast=!0,i.polling.set(20,e)},poll:function(){var e=this.cm,t=this.textarea,i=this.prevInput;if(!e.state.focused||Yr(t)&&!i||Q(e)||e.options.disableInput||e.state.keySeq)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var n=t.value;if(n==i&&!e.somethingSelected())return!1;if(po&&fo>=9&&this.hasSelection===n||ko&&/[\uf700-\uf7ff]/.test(n))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var s=n.charCodeAt(0);if(8203!=s||i||(i="​"),8666==s)return this.reset(),this.cm.execCommand("undo")}for(var o=0,r=Math.min(i.length,n.length);r>o&&i.charCodeAt(o)==n.charCodeAt(o);)++o;var a=this;return St(e,function(){Z(e,n.slice(o),i.length-o,null,a.composing?"*compose":null),n.length>1e3||n.indexOf("\n")>-1?t.value=a.prevInput="":a.prevInput=n,a.composing&&(a.composing.range.clear(),a.composing.range=e.markText(a.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){po&&fo>=9&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){function t(){if(null!=r.selectionStart){var e=s.somethingSelected(),t="​"+(e?r.value:"");r.value="⇚",r.value=t,n.prevInput=e?"":"​",r.selectionStart=1,r.selectionEnd=t.length,o.selForContextMenu=s.doc.sel}}function i(){if(n.contextMenuPending=!1,n.wrapper.style.position="relative",r.style.cssText=c,po&&9>fo&&o.scrollbars.setScrollTop(o.scroller.scrollTop=l),null!=r.selectionStart){(!po||po&&9>fo)&&t();var e=0,i=function(){o.selForContextMenu==s.doc.sel&&0==r.selectionStart&&r.selectionEnd>0&&"​"==n.prevInput?Dt(s,nr.selectAll)(s):e++<10?o.detectingSelectAll=setTimeout(i,500):o.input.reset()};o.detectingSelectAll=setTimeout(i,200)}}var n=this,s=n.cm,o=s.display,r=n.textarea,a=Kt(s,e),l=o.scroller.scrollTop;if(a&&!bo){s.options.resetSelectionOnContextMenu&&-1==s.doc.sel.contains(a)&&Dt(s,_e)(s.doc,pe(a),$r);var c=r.style.cssText;if(n.wrapper.style.position="absolute",r.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(po?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",mo)var d=window.scrollY;if(o.input.focus(),mo&&window.scrollTo(null,d),o.input.reset(),s.somethingSelected()||(r.value=n.prevInput=" "),n.contextMenuPending=!0,o.selForContextMenu=s.doc.sel,clearTimeout(o.detectingSelectAll),po&&fo>=9&&t(),Do){Cr(e);var u=function(){kr(window,"mouseup",u),setTimeout(i,20)};Er(window,"mouseup",u)}else setTimeout(i,50)}},setUneditable:As,needsContentAttribute:!1},ie.prototype),se.prototype=Fs({init:function(e){function t(e){if(n.somethingSelected())Fo=n.getSelections(),"cut"==e.type&&n.replaceSelection("",null,"cut");else{if(!n.options.lineWiseCopyCut)return;var t=ee(n);Fo=t.text,"cut"==e.type&&n.operation(function(){n.setSelections(t.ranges,0,$r),n.replaceSelection("",null,"cut")})}if(e.clipboardData&&!Co)e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/plain",Fo.join("\n"));else{var i=ne(),s=i.firstChild;n.display.lineSpace.insertBefore(i,n.display.lineSpace.firstChild),s.value=Fo.join("\n");var o=document.activeElement;Nr(s),setTimeout(function(){n.display.lineSpace.removeChild(i),o.focus()},50)}}var i=this,n=i.cm,s=i.div=e.lineDiv;s.contentEditable="true",te(s),Er(s,"paste",function(e){var t=e.clipboardData&&e.clipboardData.getData("text/plain");t&&(e.preventDefault(),n.replaceSelection(t,null,"paste"))}),Er(s,"compositionstart",function(e){var t=e.data;if(i.composing={sel:n.doc.sel,data:t,startData:t},t){var s=n.doc.sel.primary(),o=n.getLine(s.head.line),r=o.indexOf(t,Math.max(0,s.head.ch-t.length));r>-1&&r<=s.head.ch&&(i.composing.sel=pe(Ao(s.head.line,r),Ao(s.head.line,r+t.length)))}}),Er(s,"compositionupdate",function(e){i.composing.data=e.data}),Er(s,"compositionend",function(e){var t=i.composing;t&&(e.data==t.startData||/\u200b/.test(e.data)||(t.data=e.data),setTimeout(function(){t.handled||i.applyComposition(t),i.composing==t&&(i.composing=null)},50))}),Er(s,"touchstart",function(){i.forceCompositionEnd()}),Er(s,"input",function(){i.composing||i.pollContent()||St(i.cm,function(){Ft(n)})}),Er(s,"copy",t),Er(s,"cut",t)},prepareSelection:function(){var e=Fe(this.cm,!1);return e.focus=this.cm.state.focused,e},showSelection:function(e){e&&this.cm.display.view.length&&(e.focus&&this.showPrimarySelection(),this.showMultipleSelections(e))},showPrimarySelection:function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),i=ae(this.cm,e.anchorNode,e.anchorOffset),n=ae(this.cm,e.focusNode,e.focusOffset);if(!i||i.bad||!n||n.bad||0!=Oo(G(i,n),t.from())||0!=Oo(q(i,n),t.to())){var s=oe(this.cm,t.from()),o=oe(this.cm,t.to());if(s||o){var r=this.cm.display.view,a=e.rangeCount&&e.getRangeAt(0);if(s){if(!o){var l=r[r.length-1].measure,c=l.maps?l.maps[l.maps.length-1]:l.map;o={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}}}else s={node:r[0].measure.map[2],offset:0};try{var d=Lr(s.node,s.offset,o.offset,o.node)}catch(e){}d&&(e.removeAllRanges(),e.addRange(d),a&&null==e.anchorNode?e.addRange(a):co&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){e.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(e){Hs(this.cm.display.cursorDiv,e.cursors),Hs(this.cm.display.selectionDiv,e.selection)},rememberSelection:function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},selectionInEditor:function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return Br(this.div,t)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}var t=this;this.selectionInEditor()?this.pollSelection():St(this.cm,function(){t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,e)},selectionChanged:function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;this.rememberSelection();var i=ae(t,e.anchorNode,e.anchorOffset),n=ae(t,e.focusNode,e.focusOffset);i&&n&&St(t,function(){_e(t.doc,pe(i,n),$r),(i.bad||n.bad)&&(t.curOp.selectionChanged=!0)})}},pollContent:function(){var e=this.cm,t=e.display,i=e.doc.sel.primary(),n=i.from(),s=i.to();if(n.line<t.viewFrom||s.line>t.viewTo-1)return!1;var o;if(n.line==t.viewFrom||0==(o=Rt(e,n.line)))var r=Qn(t.view[0].line),a=t.view[0].node;else var r=Qn(t.view[o].line),a=t.view[o-1].node.nextSibling;var l=Rt(e,s.line);if(l==t.view.length-1)var c=t.viewTo-1,d=t.view[l].node;else var c=Qn(t.view[l+1].line)-1,d=t.view[l+1].node.previousSibling;for(var u=Vr(ce(e,a,d,r,c)),h=qn(e.doc,Ao(r,0),Ao(c,Yn(e.doc,c).text.length));u.length>1&&h.length>1;)if(Ds(u)==Ds(h))u.pop(),h.pop(),c--;else{if(u[0]!=h[0])break;u.shift(),h.shift(),r++}for(var p=0,f=0,m=u[0],g=h[0],v=Math.min(m.length,g.length);v>p&&m.charCodeAt(p)==g.charCodeAt(p);)++p;for(var b=Ds(u),y=Ds(h),w=Math.min(b.length-(1==u.length?p:0),y.length-(1==h.length?p:0));w>f&&b.charCodeAt(b.length-f-1)==y.charCodeAt(y.length-f-1);)++f;u[u.length-1]=b.slice(0,b.length-f),u[0]=u[0].slice(p);var x=Ao(r,p),C=Ao(c,h.length?Ds(h).length-f:0);return u.length>1||u[0]||Oo(x,C)?(Si(e.doc,u,x,C,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(e){e.data&&e.data!=e.startData&&Dt(this.cm,Z)(this.cm,e.data,0,e.sel)},setUneditable:function(e){e.setAttribute("contenteditable","false")},onKeyPress:function(e){e.preventDefault(),Dt(this.cm,Z)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},onContextMenu:As,resetPosition:As,needsContentAttribute:!0},se.prototype),e.inputStyles={textarea:ie,contenteditable:se},de.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],n=e.ranges[t];if(0!=Oo(i.anchor,n.anchor)||0!=Oo(i.head,n.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new ue(Y(this.ranges[t].anchor),Y(this.ranges[t].head));return new de(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var i=0;i<this.ranges.length;i++){var n=this.ranges[i];if(Oo(t,n.from())>=0&&Oo(e,n.to())<=0)return i}return-1}},ue.prototype={from:function(){return G(this.anchor,this.head)},to:function(){return q(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var No,Lo,Ro,Io={left:0,right:0,top:0,bottom:0},Po=null,Bo=0,Ho=0,Uo=0,zo=null;po?zo=-.53:co?zo=15:vo?zo=-.7:yo&&(zo=-1/3);var jo=function(e){var t=e.wheelDeltaX,i=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==i&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:null==i&&(i=e.wheelDelta),{x:t,y:i}};e.wheelEventPixels=function(e){var t=jo(e);return t.x*=zo,t.y*=zo,t};var Ko=new Ts,Wo=null,Vo=e.changeEnd=function(e){return e.text?Ao(e.from.line+e.text.length-1,Ds(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var i=this.options,n=i[e];(i[e]!=t||"mode"==e)&&(i[e]=t,qo.hasOwnProperty(e)&&Dt(this,qo[e])(this,t,n))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](zi(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,i=0;i<t.length;++i)if(t[i]==e||t[i].name==e)return t.splice(i,1),!0},addOverlay:$t(function(t,i){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:t,opaque:i&&i.opaque}),this.state.modeGen++,Ft(this)}),removeOverlay:$t(function(e){for(var t=this.state.overlays,i=0;i<t.length;++i){var n=t[i].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(i,1),this.state.modeGen++,void Ft(this)}}),indentLine:$t(function(e,t,i){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),ve(this.doc,e)&&Li(this,e,t,i)}),indentSelection:$t(function(e){for(var t=this.doc.sel.ranges,i=-1,n=0;n<t.length;n++){var s=t[n];if(s.empty())s.head.line>i&&(Li(this,s.head.line,e,!0),i=s.head.line,n==this.doc.sel.primIndex&&Fi(this));else{var o=s.from(),r=s.to(),a=Math.max(i,o.line);i=Math.min(this.lastLine(),r.line-(r.ch?0:1))+1;for(var l=a;i>l;++l)Li(this,l,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&c[n].from().ch>0&&Ce(this.doc,n,new ue(o,c[n].to()),$r)}}}),getTokenAt:function(e,t){return Dn(this,e,t)},getLineTokens:function(e,t){return Dn(this,Ao(e),t,!0)},getTokenTypeAt:function(e){e=me(this.doc,e);var t,i=An(this,Yn(this.doc,e.line)),n=0,s=(i.length-1)/2,o=e.ch;if(0==o)t=i[2];else for(;;){var r=n+s>>1;if((r?i[2*r-1]:0)>=o)s=r;else{if(!(i[2*r+1]<o)){t=i[2*r+2];break}n=r+1}}var a=t?t.indexOf("cm-overlay "):-1;return 0>a?t:0==a?null:t.slice(0,a-1)},getModeAt:function(t){var i=this.doc.mode;return i.innerMode?e.innerMode(i,this.getTokenAt(t).state).mode:i},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!er.hasOwnProperty(t))return i;var n=er[t],s=this.getModeAt(e);if("string"==typeof s[t])n[s[t]]&&i.push(n[s[t]]);else if(s[t])for(var o=0;o<s[t].length;o++){var r=n[s[t][o]];r&&i.push(r)}else s.helperType&&n[s.helperType]?i.push(n[s.helperType]):n[s.name]&&i.push(n[s.name]);for(var o=0;o<n._global.length;o++){var a=n._global[o];a.pred(s,this)&&-1==$s(i,a.val)&&i.push(a.val)}return i},getStateAfter:function(e,t){var i=this.doc;return e=fe(i,null==e?i.first+i.size-1:e),He(this,e+1,t)},cursorCoords:function(e,t){var i,n=this.doc.sel.primary();return i=null==e?n.head:"object"==typeof e?me(this.doc,e):e?n.from():n.to(),ut(this,i,t||"page")},charCoords:function(e,t){return dt(this,me(this.doc,e),t||"page")},coordsChar:function(e,t){return e=ct(this,e,t||"page"),ft(this,e.left,e.top)},lineAtHeight:function(e,t){return e=ct(this,{top:e,left:0},t||"page").top,Zn(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var i,n=!1;if("number"==typeof e){var s=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>s&&(e=s,n=!0),i=Yn(this.doc,e)}else i=e;return lt(this,i,{top:0,left:0},t||"page").top+(n?this.doc.height-Jn(i):0)},defaultTextHeight:function(){return gt(this.display)},defaultCharWidth:function(){return vt(this.display)},setGutterMarker:$t(function(e,t,i){return Ri(this.doc,e,"gutter",function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=i,!i&&Rs(n)&&(e.gutterMarkers=null),!0})}),clearGutter:$t(function(e){var t=this,i=t.doc,n=i.first;i.iter(function(i){i.gutterMarkers&&i.gutterMarkers[e]&&(i.gutterMarkers[e]=null,Nt(t,n,"gutter"),Rs(i.gutterMarkers)&&(i.gutterMarkers=null)),++n})}),lineInfo:function(e){if("number"==typeof e){if(!ve(this.doc,e))return null;var t=e;if(!(e=Yn(this.doc,e)))return null}else{var t=Qn(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,i,n,s){var o=this.display;e=ut(this,me(this.doc,e));var r=e.bottom,a=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),o.sizer.appendChild(t),"over"==n)r=e.top;else if("above"==n||"near"==n){var l=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?r=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(r=e.bottom),a+t.offsetWidth>c&&(a=c-t.offsetWidth)}t.style.top=r+"px",t.style.left=t.style.right="","right"==s?(a=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==s?a=0:"middle"==s&&(a=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=a+"px"),i&&Mi(this,a,r,a+t.offsetWidth,r+t.offsetHeight)},triggerOnKeyDown:$t(ai),triggerOnKeyPress:$t(di),triggerOnKeyUp:ci,execCommand:function(e){return nr.hasOwnProperty(e)?nr[e](this):void 0},triggerElectric:$t(function(e){J(this,e)}),findPosH:function(e,t,i,n){var s=1;0>t&&(s=-1,t=-t);for(var o=0,r=me(this.doc,e);t>o&&(r=Pi(this.doc,r,s,i,n),!r.hitSide);++o);return r},moveH:$t(function(e,t){var i=this;i.extendSelectionsBy(function(n){return i.display.shift||i.doc.extend||n.empty()?Pi(i.doc,n.head,e,t,i.options.rtlMoveVisually):0>e?n.from():n.to()},Ar)}),deleteH:$t(function(e,t){var i=this.doc.sel,n=this.doc;i.somethingSelected()?n.replaceSelection("",null,"+delete"):Ii(this,function(i){var s=Pi(n,i.head,e,t,!1);return 0>e?{from:s,to:i.head}:{from:i.head,to:s}})}),findPosV:function(e,t,i,n){var s=1,o=n;0>t&&(s=-1,t=-t);for(var r=0,a=me(this.doc,e);t>r;++r){var l=ut(this,a,"div");if(null==o?o=l.left:l.left=o,a=Bi(this,l,s,i),a.hitSide)break}return a},moveV:$t(function(e,t){var i=this,n=this.doc,s=[],o=!i.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(r){if(o)return 0>e?r.from():r.to();var a=ut(i,r.head,"div");null!=r.goalColumn&&(a.left=r.goalColumn),s.push(a.left);var l=Bi(i,a,e,t);return"page"==t&&r==n.sel.primary()&&Oi(i,null,dt(i,l,"div").top-a.top),l},Ar),s.length)for(var r=0;r<n.sel.ranges.length;r++)n.sel.ranges[r].goalColumn=s[r]}),findWordAt:function(e){var t=this.doc,i=Yn(t,e.line).text,n=e.ch,s=e.ch;if(i){var o=this.getHelper(e,"wordChars");(e.xRel<0||s==i.length)&&n?--n:++s;for(var r=i.charAt(n),a=Ls(r,o)?function(e){return Ls(e,o)}:/\s/.test(r)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!Ls(e)};n>0&&a(i.charAt(n-1));)--n;for(;s<i.length&&a(i.charAt(s));)++s}return new ue(Ao(e.line,n),Ao(e.line,s))},toggleOverwrite:function(e){(null==e||e!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?jr(this.display.cursorDiv,"CodeMirror-overwrite"):zr(this.display.cursorDiv,"CodeMirror-overwrite"),Tr(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Us()},scrollTo:$t(function(e,t){(null!=e||null!=t)&&Ni(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Ke(this)-this.display.barHeight,width:e.scrollWidth-Ke(this)-this.display.barWidth,clientHeight:Ve(this),clientWidth:We(this)}},scrollIntoView:$t(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:Ao(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)Ni(this),this.curOp.scrollToPos=e;else{var i=Ai(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(i.scrollLeft,i.scrollTop)}}),setSize:$t(function(e,t){function i(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var n=this;null!=e&&(n.display.wrapper.style.width=i(e)),null!=t&&(n.display.wrapper.style.height=i(t)),n.options.lineWrapping&&st(this);var s=n.display.viewFrom;n.doc.iter(s,n.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Nt(n,s,"widget");break}++s}),n.curOp.forceUpdate=!0,Tr(n,"refresh",this)}),operation:function(e){return St(this,e)},refresh:$t(function(){var e=this.display.cachedTextHeight;Ft(this),this.curOp.forceUpdate=!0,ot(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),d(this),(null==e||Math.abs(e-gt(this.display))>.5)&&r(this),Tr(this,"refresh",this)}),swapDoc:$t(function(e){var t=this.doc;return t.cm=null,Vn(this,e),ot(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,ys(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ks(e);var Yo=e.defaults={},qo=e.optionHandlers={},Go=e.Init={toString:function(){return"CodeMirror.Init"}};Hi("value","",function(e,t){e.setValue(t)},!0),Hi("mode",null,function(e,t){e.doc.modeOption=t,i(e)},!0),Hi("indentUnit",2,i,!0),Hi("indentWithTabs",!1),Hi("smartIndent",!0),Hi("tabSize",4,function(e){n(e),ot(e),Ft(e)},!0),Hi("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,i,n){t.state.specialChars=new RegExp(i.source+(i.test("\t")?"":"|\t"),"g"),n!=e.Init&&t.refresh()}),Hi("specialCharPlaceholder",Ln,function(e){e.refresh()},!0),Hi("electricChars",!0),Hi("inputStyle",Eo?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),Hi("rtlMoveVisually",!To),Hi("wholeLineUpdateBefore",!0),Hi("theme","default",function(e){a(e),l(e)},!0),Hi("keyMap","default",function(t,i,n){var s=zi(i),o=n!=e.Init&&zi(n);o&&o.detach&&o.detach(t,s),s.attach&&s.attach(t,o||null)}),Hi("extraKeys",null),Hi("lineWrapping",!1,s,!0),Hi("gutters",[],function(e){p(e.options),l(e)},!0),Hi("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?k(e.display)+"px":"0",e.refresh()},!0),Hi("coverGutterNextToScrollbar",!1,function(e){b(e)},!0),Hi("scrollbarStyle","native",function(e){v(e),b(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),Hi("lineNumbers",!1,function(e){p(e.options),l(e)},!0),Hi("firstLineNumber",1,l,!0),Hi("lineNumberFormatter",function(e){return e},l,!0),Hi("showCursorWhenSelecting",!1,Oe,!0),Hi("resetSelectionOnContextMenu",!0),Hi("lineWiseCopyCut",!0),Hi("readOnly",!1,function(e,t){"nocursor"==t?(pi(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||e.display.input.reset())}),Hi("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),Hi("dragDrop",!0,Ut),Hi("cursorBlinkRate",530),Hi("cursorScrollMargin",0),Hi("cursorHeight",1,Oe,!0),Hi("singleCursorHeightPerLine",!0,Oe,!0),Hi("workTime",100),Hi("workDelay",100),Hi("flattenSpans",!0,n,!0),Hi("addModeClass",!1,n,!0),Hi("pollInterval",100),Hi("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),Hi("historyEventDelay",1250),Hi("viewportMargin",10,function(e){e.refresh()},!0),Hi("maxHighlightLength",1e4,n,!0),Hi("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),Hi("tabindex",null,function(e,t){e.display.input.getField().tabIndex=t||""}),Hi("autofocus",null);var Xo=e.modes={},Qo=e.mimeModes={};e.defineMode=function(t,i){e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2&&(i.dependencies=Array.prototype.slice.call(arguments,2)),Xo[t]=i},e.defineMIME=function(e,t){Qo[e]=t},e.resolveMode=function(t){if("string"==typeof t&&Qo.hasOwnProperty(t))t=Qo[t];else if(t&&"string"==typeof t.name&&Qo.hasOwnProperty(t.name)){var i=Qo[t.name];"string"==typeof i&&(i={name:i}),t=Os(i,t),t.name=i.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,i){var i=e.resolveMode(i),n=Xo[i.name];if(!n)return e.getMode(t,"text/plain");var s=n(t,i);if(Zo.hasOwnProperty(i.name)){var o=Zo[i.name];for(var r in o)o.hasOwnProperty(r)&&(s.hasOwnProperty(r)&&(s["_"+r]=s[r]),s[r]=o[r])}if(s.name=i.name,i.helperType&&(s.helperType=i.helperType),i.modeProps)for(var r in i.modeProps)s[r]=i.modeProps[r];return s},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var Zo=e.modeExtensions={};e.extendMode=function(e,t){Fs(t,Zo.hasOwnProperty(e)?Zo[e]:Zo[e]={})},e.defineExtension=function(t,i){e.prototype[t]=i},e.defineDocExtension=function(e,t){vr.prototype[e]=t},e.defineOption=Hi;var Jo=[];e.defineInitHook=function(e){Jo.push(e)};var er=e.helpers={};e.registerHelper=function(t,i,n){er.hasOwnProperty(t)||(er[t]=e[t]={_global:[]}),er[t][i]=n},e.registerGlobalHelper=function(t,i,n,s){e.registerHelper(t,i,s),er[t]._global.push({pred:n,val:s})};var tr=e.copyState=function(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var i={};for(var n in t){var s=t[n];s instanceof Array&&(s=s.concat([])),i[n]=s}return i},ir=e.startState=function(e,t,i){return!e.startState||e.startState(t,i)};e.innerMode=function(e,t){for(;e.innerMode;){var i=e.innerMode(t);if(!i||i.mode==e)break;t=i.state,e=i.mode}return i||{mode:e,state:t}};var nr=e.commands={selectAll:function(e){e.setSelection(Ao(e.firstLine(),0),Ao(e.lastLine()),$r)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),$r)},killLine:function(e){Ii(e,function(t){if(t.empty()){var i=Yn(e.doc,t.head.line).text.length;return t.head.ch==i&&t.head.line<e.lastLine()?{from:t.head,to:Ao(t.head.line+1,0)}:{from:t.head,to:Ao(t.head.line,i)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){Ii(e,function(t){return{from:Ao(t.from().line,0),to:me(e.doc,Ao(t.to().line+1,0))}})},delLineLeft:function(e){Ii(e,function(e){return{from:Ao(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){Ii(e,function(t){var i=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:i},"div"),to:t.from()}})},delWrappedLineRight:function(e){Ii(e,function(t){var i=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:n}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},
goDocStart:function(e){e.extendSelection(Ao(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(Ao(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return to(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return no(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return io(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var i=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div")},Ar)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var i=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:i},"div")},Ar)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var i=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:i},"div");return n.ch<e.getLine(n.line).search(/\S/)?no(e,t.head):n},Ar)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),n=e.options.tabSize,s=0;s<i.length;s++){var o=i[s].from(),r=Or(e.getLine(o.line),o.ch,n);t.push(new Array(n-r%n+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){St(e,function(){for(var t=e.listSelections(),i=[],n=0;n<t.length;n++){var s=t[n].head,o=Yn(e.doc,s.line).text;if(o)if(s.ch==o.length&&(s=new Ao(s.line,s.ch-1)),s.ch>0)s=new Ao(s.line,s.ch+1),e.replaceRange(o.charAt(s.ch-1)+o.charAt(s.ch-2),Ao(s.line,s.ch-2),s,"+transpose");else if(s.line>e.doc.first){var r=Yn(e.doc,s.line-1).text;r&&e.replaceRange(o.charAt(0)+"\n"+r.charAt(r.length-1),Ao(s.line-1,r.length-1),Ao(s.line,1),"+transpose")}i.push(new ue(s,s))}e.setSelections(i)})},newlineAndIndent:function(e){St(e,function(){for(var t=e.listSelections().length,i=0;t>i;i++){var n=e.listSelections()[i];e.replaceRange("\n",n.anchor,n.head,"+input"),e.indentLine(n.from().line+1,null,!0),Fi(e)}})},toggleOverwrite:function(e){e.toggleOverwrite()}},sr=e.keyMap={};sr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},sr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},sr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},sr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},sr.default=ko?sr.macDefault:sr.pcDefault,e.normalizeKeyMap=function(e){var t={};for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if("..."==n){delete e[i];continue}for(var s=Ms(i.split(" "),Ui),o=0;o<s.length;o++){var r,a;o==s.length-1?(a=s.join(" "),r=n):(a=s.slice(0,o+1).join(" "),r="...");var l=t[a];if(l){if(l!=r)throw new Error("Inconsistent bindings for "+a)}else t[a]=r}delete e[i]}for(var c in t)e[c]=t[c];return e};var or=e.lookupKey=function(e,t,i,n){t=zi(t);var s=t.call?t.call(e,n):t[e];if(!1===s)return"nothing";if("..."===s)return"multi";if(null!=s&&i(s))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return or(e,t.fallthrough,i,n);for(var o=0;o<t.fallthrough.length;o++){var r=or(e,t.fallthrough[o],i,n);if(r)return r}}},rr=e.isModifierKey=function(e){var t="string"==typeof e?e:Xr[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},ar=e.keyName=function(e,t){if(bo&&34==e.keyCode&&e.char)return!1;var i=Xr[e.keyCode],n=i;return null!=n&&!e.altGraphKey&&(e.altKey&&"Alt"!=i&&(n="Alt-"+n),(So?e.metaKey:e.ctrlKey)&&"Ctrl"!=i&&(n="Ctrl-"+n),(So?e.ctrlKey:e.metaKey)&&"Cmd"!=i&&(n="Cmd-"+n),!t&&e.shiftKey&&"Shift"!=i&&(n="Shift-"+n),n)};e.fromTextArea=function(t,i){function n(){t.value=l.getValue()}if(i=i?Fs(i):{},i.value=t.value,!i.tabindex&&t.tabIndex&&(i.tabindex=t.tabIndex),!i.placeholder&&t.placeholder&&(i.placeholder=t.placeholder),null==i.autofocus){var s=Us();i.autofocus=s==t||null!=t.getAttribute("autofocus")&&s==document.body}if(t.form&&(Er(t.form,"submit",n),!i.leaveSubmitMethodAlone)){var o=t.form,r=o.submit;try{var a=o.submit=function(){n(),o.submit=r,o.submit(),o.submit=a}}catch(e){}}i.finishInit=function(e){e.save=n,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,n(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(kr(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=r))}},t.style.display="none";var l=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},i);return l};var lr=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};lr.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var i=t==e;else var i=t&&(e.test?e.test(t):e(t));return i?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Or(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Or(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Or(this.string,null,this.tabSize)-(this.lineStart?Or(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,i){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}var s=function(e){return i?e.toLowerCase():e};return s(this.string.substr(this.pos,e.length))==s(e)?(!1!==t&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var cr=0,dr=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++cr};ks(dr),dr.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&bt(e),Es(this,"clear")){var i=this.find();i&&ys(this,"clear",i.from,i.to)}for(var n=null,s=null,o=0;o<this.lines.length;++o){var r=this.lines[o],a=Gi(r.markedSpans,this);e&&!this.collapsed?Nt(e,Qn(r),"text"):e&&(null!=a.to&&(s=Qn(r)),null!=a.from&&(n=Qn(r))),r.markedSpans=Xi(r.markedSpans,a),null==a.from&&this.collapsed&&!bn(this.doc,r)&&e&&Xn(r,gt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var l=fn(this.lines[o]),c=u(l);c>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=n&&e&&this.collapsed&&Ft(e,n,s+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&$e(e.doc)),e&&ys(e,"markerCleared",e,this),t&&wt(e),this.parent&&this.parent.clear()}},dr.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var i,n,s=0;s<this.lines.length;++s){var o=this.lines[s],r=Gi(o.markedSpans,this);if(null!=r.from&&(i=Ao(t?o:Qn(o),r.from),-1==e))return i;if(null!=r.to&&(n=Ao(t?o:Qn(o),r.to),1==e))return n}return i&&{from:i,to:n}},dr.prototype.changed=function(){var e=this.find(-1,!0),t=this,i=this.doc.cm;e&&i&&St(i,function(){var n=e.line,s=Qn(e.line),o=Qe(i,s);if(o&&(nt(o),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!bn(t.doc,n)&&null!=t.height){var r=t.height;t.height=null;var a=xn(t)-r;a&&Xn(n,n.height+a)}})},dr.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=$s(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},dr.prototype.detachLine=function(e){if(this.lines.splice($s(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var cr=0,ur=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};ks(ur),ur.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ys(this,"clear")}},ur.prototype.find=function(e,t){return this.primary.find(e,t)};var hr=e.LineWidget=function(e,t,i){if(i)for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n]);this.doc=e,this.node=t};ks(hr),hr.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,i=this.line,n=Qn(i);if(null!=n&&t){for(var s=0;s<t.length;++s)t[s]==this&&t.splice(s--,1);t.length||(i.widgets=null);var o=xn(this);Xn(i,Math.max(0,i.height-o)),e&&St(e,function(){wn(e,i,-o),Nt(e,n,"widget")})}},hr.prototype.changed=function(){var e=this.height,t=this.doc.cm,i=this.line;this.height=null;var n=xn(this)-e;n&&(Xn(i,i.height+n),t&&St(t,function(){t.curOp.forceUpdate=!0,wn(t,i,n)}))};var pr=e.Line=function(e,t,i){this.text=e,rn(this,t),this.height=i?i(this):1};ks(pr),pr.prototype.lineNo=function(){return Qn(this)};var fr={},mr={};jn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i=e,n=e+t;n>i;++i){var s=this.lines[i];this.height-=s.height,kn(s),ys(s,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,i){for(var n=e+t;n>e;++e)if(i(this.lines[e]))return!0}},Kn.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var n=this.children[i],s=n.chunkSize();if(s>e){var o=Math.min(t,s-e),r=n.height;if(n.removeInner(e,o),this.height-=r-n.height,s==o&&(this.children.splice(i--,1),n.parent=null),0==(t-=o))break;e=0}else e-=s}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof jn))){var a=[];this.collapse(a),this.children=[new jn(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var n=0;n<this.children.length;++n){var s=this.children[n],o=s.chunkSize();if(o>=e){if(s.insertInner(e,t,i),s.lines&&s.lines.length>50){for(;s.lines.length>50;){var r=s.lines.splice(s.lines.length-25,25),a=new jn(r);s.height-=a.height,this.children.splice(n+1,0,a),a.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),i=new Kn(t);if(e.parent){e.size-=i.size,e.height-=i.height;var n=$s(e.parent.children,e);e.parent.children.splice(n+1,0,i)}else{var s=new Kn(e.children);s.parent=e,e.children=[s,i],e=s}i.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var n=0;n<this.children.length;++n){var s=this.children[n],o=s.chunkSize();if(o>e){var r=Math.min(t,o-e);if(s.iterN(e,r,i))return!0;if(0==(t-=r))break;e=0}else e-=o}}};var gr=0,vr=e.Doc=function(e,t,i){if(!(this instanceof vr))return new vr(e,t,i);null==i&&(i=0),Kn.call(this,[new jn([new pr("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=i;var n=Ao(i,0);this.sel=pe(n),this.history=new ts(null),this.id=++gr,this.modeOption=t,"string"==typeof e&&(e=Vr(e)),zn(this,{from:n,to:n,text:e}),_e(this,pe(n),$r)};vr.prototype=Os(Kn.prototype,{constructor:vr,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,n=0;n<t.length;++n)i+=t[n].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Gn(this,this.first,this.first+this.size);return!1===e?t:t.join(e||"\n")},setValue:Mt(function(e){var t=Ao(this.first,0),i=this.first+this.size-1;xi(this,{from:t,to:Ao(i,Yn(this,i).text.length),text:Vr(e),origin:"setValue",full:!0},!0),_e(this,pe(t))}),replaceRange:function(e,t,i,n){t=me(this,t),i=i?me(this,i):t,Si(this,e,t,i,n)},getRange:function(e,t,i){var n=qn(this,me(this,e),me(this,t));return!1===i?n:n.join(i||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){return ve(this,e)?Yn(this,e):void 0},getLineNumber:function(e){return Qn(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Yn(this,e)),fn(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return me(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Mt(function(e,t,i){Ee(this,me(this,"number"==typeof e?Ao(e,t||0):e),null,i)}),setSelection:Mt(function(e,t,i){Ee(this,me(this,e),me(this,t||e),i)}),extendSelection:Mt(function(e,t,i){we(this,me(this,e),t&&me(this,t),i)}),extendSelections:Mt(function(e,t){xe(this,be(this,e))}),extendSelectionsBy:Mt(function(e,t){xe(this,Ms(this.sel.ranges,e),t)}),setSelections:Mt(function(e,t,i){if(e.length){for(var n=0,s=[];n<e.length;n++)s[n]=new ue(me(this,e[n].anchor),me(this,e[n].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),_e(this,he(s,t),i)}}),addSelection:Mt(function(e,t,i){var n=this.sel.ranges.slice(0);n.push(new ue(me(this,e),me(this,t||e))),_e(this,he(n,n.length-1),i)}),getSelection:function(e){for(var t,i=this.sel.ranges,n=0;n<i.length;n++){var s=qn(this,i[n].from(),i[n].to());t=t?t.concat(s):s}return!1===e?t:t.join(e||"\n")},getSelections:function(e){for(var t=[],i=this.sel.ranges,n=0;n<i.length;n++){var s=qn(this,i[n].from(),i[n].to());!1!==e&&(s=s.join(e||"\n")),t[n]=s}return t},replaceSelection:function(e,t,i){for(var n=[],s=0;s<this.sel.ranges.length;s++)n[s]=e;this.replaceSelections(n,t,i||"+input")},replaceSelections:Mt(function(e,t,i){for(var n=[],s=this.sel,o=0;o<s.ranges.length;o++){var r=s.ranges[o];n[o]={from:r.from(),to:r.to(),text:Vr(e[o]),origin:i}}for(var a=t&&"end"!=t&&yi(this,n,t),o=n.length-1;o>=0;o--)xi(this,n[o]);a?Te(this,a):this.cm&&Fi(this.cm)}),undo:Mt(function(){Ei(this,"undo")}),redo:Mt(function(){Ei(this,"redo")}),undoSelection:Mt(function(){Ei(this,"undo",!0)}),redoSelection:Mt(function(){Ei(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var n=0;n<e.undone.length;n++)e.undone[n].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){this.history=new ts(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:hs(this.history.done),undone:hs(this.history.undone)}},setHistory:function(e){var t=this.history=new ts(this.history.maxGeneration);t.done=hs(e.done.slice(0),null,!0),t.undone=hs(e.undone.slice(0),null,!0)},addLineClass:Mt(function(e,t,i){return Ri(this,e,"gutter"==t?"gutter":"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[n]){if(zs(i).test(e[n]))return!1;e[n]+=" "+i}else e[n]=i;return!0})}),removeLineClass:Mt(function(e,t,i){return Ri(this,e,"gutter"==t?"gutter":"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",s=e[n];if(!s)return!1;if(null==i)e[n]=null;else{var o=s.match(zs(i));if(!o)return!1;var r=o.index+o[0].length;e[n]=s.slice(0,o.index)+(o.index&&r!=s.length?" ":"")+s.slice(r)||null}return!0})}),addLineWidget:Mt(function(e,t,i){return Cn(this,e,t,i)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,i){return ji(this,me(this,e),me(this,t),i,"range")},setBookmark:function(e,t){var i={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=me(this,e),ji(this,e,e,i,"bookmark")},findMarksAt:function(e){e=me(this,e);var t=[],i=Yn(this,e.line).markedSpans;if(i)for(var n=0;n<i.length;++n){var s=i[n];(null==s.from||s.from<=e.ch)&&(null==s.to||s.to>=e.ch)&&t.push(s.marker.parent||s.marker)}return t},findMarks:function(e,t,i){e=me(this,e),t=me(this,t);var n=[],s=e.line;return this.iter(e.line,t.line+1,function(o){var r=o.markedSpans;if(r)for(var a=0;a<r.length;a++){var l=r[a];s==e.line&&e.ch>l.to||null==l.from&&s!=e.line||s==t.line&&l.from>t.ch||i&&!i(l.marker)||n.push(l.marker.parent||l.marker)}++s}),n},getAllMarks:function(){var e=[];return this.iter(function(t){var i=t.markedSpans;if(i)for(var n=0;n<i.length;++n)null!=i[n].from&&e.push(i[n].marker)}),e},posFromIndex:function(e){var t,i=this.first;return this.iter(function(n){var s=n.text.length+1;return s>e?(t=e,!0):(e-=s,void++i)}),me(this,Ao(i,t))},indexFromPos:function(e){e=me(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new vr(Gn(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,i=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<i&&(i=e.to);var n=new vr(Gn(this,t,i),e.mode||this.modeOption,t);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Vi(n,Wi(this)),n},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var i=0;i<this.linked.length;++i){var n=this.linked[i];if(n.doc==t){this.linked.splice(i,1),t.unlinkDoc(this),Yi(Wi(this));break}}if(t.history==this.history){var s=[t.id];Wn(t,function(e){s.push(e.id)},!0),t.history=new ts(null),t.history.done=hs(this.history.done,s),t.history.undone=hs(this.history.undone,s)}},iterLinkedDocs:function(e){Wn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),vr.prototype.eachLine=vr.prototype.iter;var br="iter insert remove copy getEditor".split(" ");for(var yr in vr.prototype)vr.prototype.hasOwnProperty(yr)&&$s(br,yr)<0&&(e.prototype[yr]=function(e){return function(){return e.apply(this.doc,arguments)}}(vr.prototype[yr]));ks(vr);var wr=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},xr=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},Cr=e.e_stop=function(e){wr(e),xr(e)},Er=e.on=function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var n=e._handlers||(e._handlers={}),s=n[t]||(n[t]=[]);s.push(i)}},kr=e.off=function(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else{var n=e._handlers&&e._handlers[t];if(!n)return;for(var s=0;s<n.length;++s)if(n[s]==i){n.splice(s,1);break}}},Tr=e.signal=function(e,t){var i=e._handlers&&e._handlers[t];if(i)for(var n=Array.prototype.slice.call(arguments,2),s=0;s<i.length;++s)i[s].apply(null,n)},_r=null,Sr=30,Dr=e.Pass={toString:function(){return"CodeMirror.Pass"}},$r={scroll:!1},Mr={origin:"*mouse"},Ar={origin:"+move"};Ts.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var Or=e.countColumn=function(e,t,i,n,s){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=n||0,r=s||0;;){var a=e.indexOf("\t",o);if(0>a||a>=t)return r+(t-o);r+=a-o,r+=i-r%i,o=a+1}},Fr=[""],Nr=function(e){e.select()};Co?Nr=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:po&&(Nr=function(e){try{e.select()}catch(e){}});var Lr,Rr=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Ir=e.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Rr.test(e))},Pr=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;Lr=document.createRange?function(e,t,i,n){var s=document.createRange();return s.setEnd(n||e,i),s.setStart(e,t),s}:function(e,t,i){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(e){return n}return n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",t),n};var Br=e.contains=function(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)};po&&11>fo&&(Us=function(){try{return document.activeElement}catch(e){return document.body}});var Hr,Ur,zr=e.rmClass=function(e,t){var i=e.className,n=zs(t).exec(i);if(n){var s=i.slice(n.index+n[0].length);e.className=i.slice(0,n.index)+(s?n[1]+s:"")}},jr=e.addClass=function(e,t){var i=e.className;zs(t).test(i)||(e.className+=(i?" ":"")+t)},Kr=!1,Wr=function(){if(po&&9>fo)return!1;var e=Ps("div");return"draggable"in e||"dragDrop"in e}(),Vr=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,i=[],n=e.length;n>=t;){var s=e.indexOf("\n",t);-1==s&&(s=e.length);var o=e.slice(t,"\r"==e.charAt(s-1)?s-1:s),r=o.indexOf("\r");-1!=r?(i.push(o.slice(0,r)),t+=r+1):(i.push(o),t=s+1)}return i}:function(e){return e.split(/\r\n?|\n/)},Yr=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},qr=function(){var e=Ps("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Gr=null,Xr={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};e.keyNames=Xr,function(){for(var e=0;10>e;e++)Xr[e+48]=Xr[e+96]=String(e);for(var e=65;90>=e;e++)Xr[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)Xr[e+111]=Xr[e+63235]="F"+e}();var Qr,Zr=function(){function e(e){return 247>=e?i.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1773>=e?n.charAt(e-1536):e>=1774&&2220>=e?"r":e>=8192&&8203>=e?"w":8204==e?"b":"L"}function t(e,t,i){this.level=e,this.from=t,this.to=i}var i="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",s=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,r=/[LRr]/,a=/[Lb1n]/,l=/[1n]/,c="L";return function(i){if(!s.test(i))return!1;for(var n,d=i.length,u=[],h=0;d>h;++h)u.push(n=e(i.charCodeAt(h)));for(var h=0,p=c;d>h;++h){var n=u[h];"m"==n?u[h]=p:p=n}for(var h=0,f=c;d>h;++h){var n=u[h];"1"==n&&"r"==f?u[h]="n":r.test(n)&&(f=n,"r"==n&&(u[h]="R"))}for(var h=1,p=u[0];d-1>h;++h){var n=u[h];"+"==n&&"1"==p&&"1"==u[h+1]?u[h]="1":","!=n||p!=u[h+1]||"1"!=p&&"n"!=p||(u[h]=p),p=n}for(var h=0;d>h;++h){var n=u[h];if(","==n)u[h]="N";else if("%"==n){for(var m=h+1;d>m&&"%"==u[m];++m);for(var g=h&&"!"==u[h-1]||d>m&&"1"==u[m]?"1":"N",v=h;m>v;++v)u[v]=g;h=m-1}}for(var h=0,f=c;d>h;++h){var n=u[h];"L"==f&&"1"==n?u[h]="L":r.test(n)&&(f=n)}for(var h=0;d>h;++h)if(o.test(u[h])){for(var m=h+1;d>m&&o.test(u[m]);++m);for(var b="L"==(h?u[h-1]:c),y="L"==(d>m?u[m]:c),g=b||y?"L":"R",v=h;m>v;++v)u[v]=g;h=m-1}for(var w,x=[],h=0;d>h;)if(a.test(u[h])){var C=h;for(++h;d>h&&a.test(u[h]);++h);x.push(new t(0,C,h))}else{var E=h,k=x.length;for(++h;d>h&&"L"!=u[h];++h);for(var v=E;h>v;)if(l.test(u[v])){v>E&&x.splice(k,0,new t(1,E,v));var T=v;for(++v;h>v&&l.test(u[v]);++v);x.splice(k,0,new t(2,T,v)),E=v}else++v;h>E&&x.splice(k,0,new t(1,E,h))}return 1==x[0].level&&(w=i.match(/^\s+/))&&(x[0].from=w[0].length,x.unshift(new t(0,0,w[0].length))),1==Ds(x).level&&(w=i.match(/\s+$/))&&(Ds(x).to-=w[0].length,x.push(new t(0,d-w[0].length,d))),2==x[0].level&&x.unshift(new t(1,x[0].to,x[0].to)),x[0].level!=Ds(x).level&&x.push(new t(x[0].level,d,d)),x}}();return e.version="5.3.0",e}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("xml",function(t,i){function n(e,t){function i(i){return t.tokenize=i,i(e,t)}var n=e.next();if("<"==n)return e.eat("!")?e.eat("[")?e.match("CDATA[")?i(r("atom","]]>")):null:e.match("--")?i(r("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),i(a(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=r("meta","?>"),"meta"):(E=e.eat("/")?"closeTag":"openTag",t.tokenize=s,"tag bracket");if("&"==n){var o;return o=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),o?"atom":"error"}return e.eatWhile(/[^&<]/),null}function s(e,t){var i=e.next();if(">"==i||"/"==i&&e.eat(">"))return t.tokenize=n,E=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return E="equals",null;if("<"==i){t.tokenize=n,t.state=u,t.tagName=t.tagStart=null;var s=t.tokenize(e,t);return s?s+" tag error":"tag error"}return/[\'\"]/.test(i)?(t.tokenize=o(i),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function o(e){var t=function(t,i){for(;!t.eol();)if(t.next()==e){i.tokenize=s;break}return"string"};return t.isInAttribute=!0,t}function r(e,t){return function(i,s){for(;!i.eol();){if(i.match(t)){s.tokenize=n;break}i.next()}return e}}function a(e){return function(t,i){for(var s;null!=(s=t.next());){if("<"==s)return i.tokenize=a(e+1),i.tokenize(t,i);if(">"==s){if(1==e){i.tokenize=n;break}return i.tokenize=a(e-1),i.tokenize(t,i)}}return"meta"}}function l(e,t,i){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=i,
(T.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function c(e){e.context&&(e.context=e.context.prev)}function d(e,t){for(var i;;){if(!e.context)return;if(i=e.context.tagName,!T.contextGrabbers.hasOwnProperty(i)||!T.contextGrabbers[i].hasOwnProperty(t))return;c(e)}}function u(e,t,i){return"openTag"==e?(i.tagStart=t.column(),h):"closeTag"==e?p:u}function h(e,t,i){return"word"==e?(i.tagName=t.current(),k="tag",g):(k="error",h)}function p(e,t,i){if("word"==e){var n=t.current();return i.context&&i.context.tagName!=n&&T.implicitlyClosed.hasOwnProperty(i.context.tagName)&&c(i),i.context&&i.context.tagName==n?(k="tag",f):(k="tag error",m)}return k="error",m}function f(e,t,i){return"endTag"!=e?(k="error",f):(c(i),u)}function m(e,t,i){return k="error",f(e,t,i)}function g(e,t,i){if("word"==e)return k="attribute",v;if("endTag"==e||"selfcloseTag"==e){var n=i.tagName,s=i.tagStart;return i.tagName=i.tagStart=null,"selfcloseTag"==e||T.autoSelfClosers.hasOwnProperty(n)?d(i,n):(d(i,n),i.context=new l(i,n,s==i.indented)),u}return k="error",g}function v(e,t,i){return"equals"==e?b:(T.allowMissing||(k="error"),g(e,t,i))}function b(e,t,i){return"string"==e?y:"word"==e&&T.allowUnquoted?(k="string",g):(k="error",g(e,t,i))}function y(e,t,i){return"string"==e?y:g(e,t,i)}var w=t.indentUnit,x=i.multilineTagIndentFactor||1,C=i.multilineTagIndentPastTag;null==C&&(C=!0);var E,k,T=i.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},_=i.alignCDATA;return{startState:function(){return{tokenize:n,state:u,indented:0,tagName:null,tagStart:null,context:null}},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;E=null;var i=t.tokenize(e,t);return(i||E)&&"comment"!=i&&(k=null,t.state=t.state(E||i,e,t),k&&(i="error"==k?i+" error":k)),i},indent:function(t,i,o){var r=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+w;if(r&&r.noIndent)return e.Pass;if(t.tokenize!=s&&t.tokenize!=n)return o?o.match(/^(\s*)/)[0].length:0;if(t.tagName)return C?t.tagStart+t.tagName.length+2:t.tagStart+w*x;if(_&&/<!\[CDATA\[/.test(i))return 0;var a=i&&/^<(\/)?([\w_:\.-]*)/.exec(i);if(a&&a[1])for(;r;){if(r.tagName==a[2]){r=r.prev;break}if(!T.implicitlyClosed.hasOwnProperty(r.tagName))break;r=r.prev}else if(a)for(;r;){var l=T.contextGrabbers[r.tagName];if(!l||!l.hasOwnProperty(a[2]))break;r=r.prev}for(;r&&!r.startOfLine;)r=r.prev;return r?r.indent+w:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:i.htmlMode?"html":"xml",helperType:i.htmlMode?"html":"xml"}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){var t=function(i,n){this.id=++e.FE.ID,this.opts=e.extend(!0,{},e.extend({},t.DEFAULTS,"object"==typeof n&&n));var s=JSON.stringify(this.opts);e.FE.OPTS_MAPPING[s]=e.FE.OPTS_MAPPING[s]||this.id,this.sid=e.FE.OPTS_MAPPING[s],e.FE.SHARED[this.sid]=e.FE.SHARED[this.sid]||{},this.shared=e.FE.SHARED[this.sid],this.shared.count=(this.shared.count||0)+1,this.$oel=e(i),this.$oel.data("froala.editor",this),this.o_doc=i.ownerDocument,this.o_win="defaultView"in this.o_doc?this.o_doc.defaultView:this.o_doc.parentWindow;var o=e(this.o_win).scrollTop();this.$oel.on("froala.doInit",e.proxy(function(){this.$oel.off("froala.doInit"),this.doc=this.$el.get(0).ownerDocument,this.win="defaultView"in this.doc?this.doc.defaultView:this.doc.parentWindow,this.$doc=e(this.doc),this.$win=e(this.win),this.opts.pluginsEnabled||(this.opts.pluginsEnabled=Object.keys(e.FE.PLUGINS)),this.opts.initOnClick?(this.load(e.FE.MODULES),this.$el.on("touchstart.init",function(){e(this).data("touched",!0)}),this.$el.on("touchmove.init",function(){e(this).removeData("touched")}),this.$el.on("mousedown.init touchend.init dragenter.init focus.init",e.proxy(function(t){if("touchend"==t.type&&!this.$el.data("touched"))return!0;if(1===t.which||!t.which){this.$el.off("mousedown.init touchstart.init touchmove.init touchend.init dragenter.init focus.init"),this.load(e.FE.MODULES),this.load(e.FE.PLUGINS);var i=t.originalEvent&&t.originalEvent.originalTarget;i&&"IMG"==i.tagName&&e(i).trigger("mousedown"),void 0===this.ul&&this.destroy(),"touchend"==t.type&&this.image&&t.originalEvent&&t.originalEvent.target&&e(t.originalEvent.target).is("img")&&setTimeout(e.proxy(function(){this.image.edit(e(t.originalEvent.target))},this),100),this.ready=!0,this.events.trigger("initialized")}},this))):(this.load(e.FE.MODULES),this.load(e.FE.PLUGINS),e(this.o_win).scrollTop(o),void 0===this.ul&&this.destroy(),this.ready=!0,this.events.trigger("initialized"))},this)),this._init()};t.DEFAULTS={initOnClick:!1,pluginsEnabled:null},t.MODULES={},t.PLUGINS={},t.VERSION="2.4.0",t.INSTANCES=[],t.OPTS_MAPPING={},t.SHARED={},t.ID=0,t.prototype._init=function(){var t=this.$oel.prop("tagName"),i=e.proxy(function(){"TEXTAREA"!=t&&(this._original_html=this._original_html||this.$oel.html()),this.$box=this.$box||this.$oel,this.opts.fullPage&&(this.opts.iframe=!0),this.opts.iframe?(this.$iframe=e('<iframe src="about:blank" frameBorder="0">'),this.$wp=e("<div></div>"),this.$box.html(this.$wp),this.$wp.append(this.$iframe),this.$iframe.get(0).contentWindow.document.open(),this.$iframe.get(0).contentWindow.document.write("<!DOCTYPE html>"),this.$iframe.get(0).contentWindow.document.write("<html><head></head><body></body></html>"),this.$iframe.get(0).contentWindow.document.close(),this.$el=this.$iframe.contents().find("body"),this.el=this.$el.get(0),this.$head=this.$iframe.contents().find("head"),this.$html=this.$iframe.contents().find("html"),this.iframe_document=this.$iframe.get(0).contentWindow.document,this.$oel.trigger("froala.doInit")):(this.$el=e("<div></div>"),this.el=this.$el.get(0),this.$wp=e("<div></div>").append(this.$el),this.$box.html(this.$wp),this.$oel.trigger("froala.doInit"))},this),n=e.proxy(function(){this.$box=e("<div>"),this.$oel.before(this.$box).hide(),this._original_html=this.$oel.val(),this.$oel.parents("form").on("submit."+this.id,e.proxy(function(){this.events.trigger("form.submit")},this)),this.$oel.parents("form").on("reset."+this.id,e.proxy(function(){this.events.trigger("form.reset")},this)),i()},this),s=e.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.$el.attr("contenteditable",!0).css("outline","none").css("display","inline-block"),this.opts.multiLine=!1,this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),o=e.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),r=e.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.on("click.popup",function(e){e.preventDefault()}),this.$oel.trigger("froala.doInit")},this);this.opts.editInPopup?r():"TEXTAREA"==t?n():"A"==t?s():"IMG"==t?o():"BUTTON"==t||"INPUT"==t?(this.opts.editInPopup=!0,this.opts.toolbarInline=!1,r()):i()},t.prototype.load=function(t){for(var i in t)if(t.hasOwnProperty(i)){if(this[i])continue;if(e.FE.PLUGINS[i]&&this.opts.pluginsEnabled.indexOf(i)<0)continue;if(this[i]=new t[i](this),this[i]._init&&(this[i]._init(),this.opts.initOnClick&&"core"==i))return!1}},t.prototype.destroy=function(){this.shared.count--,this.events.$off();var t=this.html.get();if(this.events.trigger("destroy",[],!0),this.events.trigger("shared.destroy",void 0,!0),0===this.shared.count){for(var i in this.shared)this.shared.hasOwnProperty(i)&&(this.shared[i],e.FE.SHARED[this.sid][i]=null);e.FE.SHARED[this.sid]={}}this.$oel.parents("form").off("."+this.id),this.$oel.off("click.popup"),this.$oel.removeData("froala.editor"),this.$oel.off("froalaEditor"),this.core.destroy(t),e.FE.INSTANCES.splice(e.FE.INSTANCES.indexOf(this),1)},e.fn.froalaEditor=function(i){for(var n=[],s=0;s<arguments.length;s++)n.push(arguments[s]);if("string"==typeof i){var o=[];return this.each(function(){var t=e(this),s=t.data("froala.editor");if(s){var r,a;if(i.indexOf(".")>0&&s[i.split(".")[0]]?(s[i.split(".")[0]]&&(r=s[i.split(".")[0]]),a=i.split(".")[1]):(r=s,a=i.split(".")[0]),!r[a])return e.error("Method "+i+" does not exist in Froala Editor.");var l=r[a].apply(s,n.slice(1));void 0===l?o.push(this):0===o.length&&o.push(l)}}),1==o.length?o[0]:o}if("object"==typeof i||!i)return this.each(function(){e(this).data("froala.editor")||new t(this,i)})},e.fn.froalaEditor.Constructor=t,e.FroalaEditor=t,e.FE=t,e.FE.XS=0,e.FE.SM=1,e.FE.MD=2,e.FE.LG=3,e.FE.MODULES.helpers=function(t){function i(){var e,t,i=-1;return"Microsoft Internet Explorer"==navigator.appName?(e=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})"),null!==t.exec(e)&&(i=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=navigator.userAgent,t=new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})"),null!==t.exec(e)&&(i=parseFloat(RegExp.$1))),i}function n(){var e={},t=i();if(t>0)e.msie=!0;else{var n=navigator.userAgent.toLowerCase(),s=/(edge)[ \/]([\w.]+)/.exec(n)||/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[],o={browser:s[1]||"",version:s[2]||"0"};s[1]&&(e[o.browser]=!0),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0)}return e.msie&&(e.version=t),e}function s(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&!a()}function o(){return/(Android)/g.test(navigator.userAgent)&&!a()}function r(){return/(Blackberry)/g.test(navigator.userAgent)}function a(){return/(Windows Phone)/gi.test(navigator.userAgent)}function l(){return o()||s()||r()}function c(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}function d(e){return parseInt(e,10)||0}function u(){var t=e('<div class="fr-visibility-helper"></div>').appendTo("body"),i=d(t.css("margin-left"));return t.remove(),i}function h(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}function p(e){return!!/^(https?:|ftps?:|)\/\//i.test(e)&&(e=String(e).replace(/</g,"%3C").replace(/>/g,"%3E").replace(/"/g,"%22").replace(/ /g,"%20"),/(http|ftp|https):\/\/[a-z\u00a1-\uffff0-9{}]+(\.[a-z\u00a1-\uffff0-9{}]*)*([a-z\u00a1-\uffff0-9.,@?^=%&amp;:\/~+#-_{}]*[a-z\u00a1-\uffff0-9@?^=%&amp;\/~+#-_{}])?/gi.test(e))}function f(e){if(/^(https?:|ftps?:|)\/\//i.test(e)){if(!p(e)&&!p("http:"+e))return""}else e=encodeURIComponent(e).replace(/%23/g,"#").replace(/%2F/g,"/").replace(/%25/g,"%").replace(/mailto%3A/gi,"mailto:").replace(/file%3A/gi,"file:").replace(/sms%3A/gi,"sms:").replace(/tel%3A/gi,"tel:").replace(/notes%3A/gi,"notes:").replace(/data%3Aimage/gi,"data:image").replace(/blob%3A/gi,"blob:").replace(/webkit-fake-url%3A/gi,"webkit-fake-url:").replace(/%3F/g,"?").replace(/%3D/g,"=").replace(/%26/g,"&").replace(/&amp;/g,"&").replace(/%2C/g,",").replace(/%3B/g,";").replace(/%2B/g,"+").replace(/%40/g,"@").replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%7B/g,"{").replace(/%7D/g,"}");return e}function m(e){return e&&!e.propertyIsEnumerable("length")&&"object"==typeof e&&"number"==typeof e.length}function g(e){function t(e){return("0"+parseInt(e,10).toString(16)).slice(-2)}try{return e&&"transparent"!==e?/^#[0-9A-F]{6}$/i.test(e)?e:(e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),("#"+t(e[1])+t(e[2])+t(e[3])).toUpperCase()):""}catch(e){return null}}function v(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,i,n){return t+t+i+i+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?"rgb("+parseInt(i[1],16)+", "+parseInt(i[2],16)+", "+parseInt(i[3],16)+")":""}function b(t){var i=(t.css("text-align")||"").replace(/-(.*)-/g,"");if(["left","right","justify","center"].indexOf(i)<0){if(!C){var n=e('<div dir="auto" style="text-align: initial; position: fixed; left: -3000px;"><span id="s1">.</span><span id="s2">.</span></div>');e("body").append(n);var s=n.find("#s1").get(0).getBoundingClientRect().left,o=n.find("#s2").get(0).getBoundingClientRect().left;n.remove(),C=s<o?"left":"right"}i=C}return i}function y(){return null==E&&(E=navigator.platform.toUpperCase().indexOf("MAC")>=0),E}function w(){function e(e,t){var s=e[t];e[t]=function(e){var t,o=!1,r=!1;if(e.match(n)){e=e.replace(n,""),this.parentNode||(i.appendChild(this),r=!0);var a=this.parentNode;return this.id||(this.id="rootedQuerySelector_id_"+(new Date).getTime(),o=!0),t=s.call(a,"#"+this.id+" "+e),o&&(this.id=""),r&&i.removeChild(this),t}return s.call(this,e)}}var i=t.o_doc.createElement("div");try{i.querySelectorAll(":scope *")}catch(t){var n=/^\s*:scope/gi;e(HTMLElement.prototype,"querySelector"),e(HTMLElement.prototype,"querySelectorAll")}}function x(){t.browser=n(),w()}var C,E=null;return{_init:x,isIOS:s,isMac:y,isAndroid:o,isBlackberry:r,isWindowsPhone:a,isMobile:l,requestAnimationFrame:c,getPX:d,screenSize:u,isTouch:h,sanitizeURL:f,isArray:m,RGBToHex:g,HEXtoRGB:v,isURL:p,getAlignment:b}},e.FE.MODULES.events=function(t){function i(e,t,i){b(e,t,i)}function n(){i(t.$el,"cut copy paste beforepaste",function(e){x(e.type,[e])})}function s(){i(t.$el,"click mouseup mousedown touchstart touchend dragenter dragover dragleave dragend drop dragstart",function(e){x(e.type,[e])}),v("mousedown",function(){for(var i=0;i<e.FE.INSTANCES.length;i++)e.FE.INSTANCES[i]!=t&&e.FE.INSTANCES[i].popups&&e.FE.INSTANCES[i].popups.areVisible()&&e.FE.INSTANCES[i].$el.find(".fr-marker").remove()})}function o(){i(t.$el,"keydown keypress keyup input",function(e){x(e.type,[e])})}function r(){i(t.$win,t._mousedown,function(e){x("window.mousedown",[e]),p()}),i(t.$win,t._mouseup,function(e){x("window.mouseup",[e])}),i(t.$win,"cut copy keydown keyup touchmove touchend",function(e){x("window."+e.type,[e])})}function a(){i(t.$doc,"dragend drop",function(e){x("document."+e.type,[e])})}function l(i){if(void 0===i&&(i=!0),!t.$wp)return!1;if(t.helpers.isIOS()&&t.$win.get(0).focus(),!t.core.hasFocus()&&i){var n=t.$win.scrollTop();return t.$el.focus(),n!=t.$win.scrollTop()&&t.$win.scrollTop(n),!1}if(!t.core.hasFocus()||t.$el.find(".fr-marker").length>0)return!1;if(t.selection.info(t.el).atStart&&t.selection.isCollapsed()&&null!=t.html.defaultTag()){var s=t.markers.insert();if(s&&!t.node.blockParent(s)){e(s).remove();var o=t.$el.find(t.html.blockTagsQuery()).get(0);o&&(e(o).prepend(e.FE.MARKERS),t.selection.restore())}else s&&e(s).remove()}}function c(){i(t.$el,"focus",function(e){m()&&(l(!1),!1===D&&x(e.type,[e]))}),i(t.$el,"blur",function(e){m()&&!0===D&&(x(e.type,[e]),p())}),v("focus",function(){D=!0}),v("blur",function(){D=!1})}function d(){t.helpers.isMobile()?(t._mousedown="touchstart",t._mouseup="touchend",t._move="touchmove",t._mousemove="touchmove"):(t._mousedown="mousedown",t._mouseup="mouseup",t._move="",t._mousemove="mousemove")}function u(i){var n=e(i.currentTarget);return t.edit.isDisabled()||t.node.hasClass(n.get(0),"fr-disabled")?(i.preventDefault(),!1):"mousedown"===i.type&&1!==i.which||(t.helpers.isMobile()||i.preventDefault(),(t.helpers.isAndroid()||t.helpers.isWindowsPhone())&&0===n.parents(".fr-dropdown-menu").length&&(i.preventDefault(),i.stopPropagation()),n.addClass("fr-selected"),void t.events.trigger("commands.mousedown",[n]))}function h(i,n){var s=e(i.currentTarget);if(t.edit.isDisabled()||t.node.hasClass(s.get(0),"fr-disabled"))return i.preventDefault(),!1;if("mouseup"===i.type&&1!==i.which)return!0;if(!t.node.hasClass(s.get(0),"fr-selected"))return!0;if("touchmove"!=i.type){if(i.stopPropagation(),i.stopImmediatePropagation(),i.preventDefault(),!t.node.hasClass(s.get(0),"fr-selected"))return e(".fr-selected").removeClass("fr-selected"),!1;if(e(".fr-selected").removeClass("fr-selected"),s.data("dragging")||s.attr("disabled"))return s.removeData("dragging"),!1;var o=s.data("timeout");o&&(clearTimeout(o),s.removeData("timeout")),n.apply(t,[i])}else s.data("timeout")||s.data("timeout",setTimeout(function(){s.data("dragging",!0)},100))}function p(){_=!0}function f(){_=!1}function m(){return _}function g(e,i,n){b(e,t._mousedown,i,function(e){t.edit.isDisabled()||u(e)},!0),b(e,t._mouseup+" "+t._move,i,function(e){t.edit.isDisabled()||h(e,n)},!0),b(e,"mousedown click mouseup",i,function(e){t.edit.isDisabled()||e.stopPropagation()},!0),v("window.mouseup",function(){t.edit.isDisabled()||(e.find(i).removeClass("fr-selected"),p())})}function v(e,i,n){var s=e.split(" ");if(s.length>1){for(var o=0;o<s.length;o++)v(s[o],i,n);return!0}void 0===n&&(n=!1);var r;r=0!=e.indexOf("shared.")?S[e]=S[e]||[]:t.shared._events[e]=t.shared._events[e]||[],n?r.unshift(i):r.push(i)}function b(e,i,n,s,o){"function"==typeof n&&(o=s,s=n,n=!1);var r=o?t.shared.$_events:$,a=o?t.sid:t.id;n?e.on(i.split(" ").join(".ed"+a+" ")+".ed"+a,n,s):e.on(i.split(" ").join(".ed"+a+" ")+".ed"+a,s),r.indexOf(e.get(0))<0&&r.push(e.get(0))}function y(t,i){for(var n=0;n<t.length;n++)e(t[n]).off(".ed"+i)}function w(){y($,t.id),$=[],0==t.shared.count&&(y(t.shared.$_events,t.sid),t.shared.$_events=null)}function x(i,n,s){if(!t.edit.isDisabled()||s){var o;if(0!=i.indexOf("shared."))o=S[i];else{if(t.shared.count>0)return!1;o=t.shared._events[i]}var r;if(o)for(var a=0;a<o.length;a++)if(!1===(r=o[a].apply(t,n)))return!1;return!1!==(r=t.$oel.triggerHandler("froalaEditor."+i,e.merge([t],n||[])))&&r}}function C(i,n,s){if(!t.edit.isDisabled()||s){var o;if(0!=i.indexOf("shared."))o=S[i];else{if(t.shared.count>0)return!1;o=t.shared._events[i]}var r;if(o)for(var a=0;a<o.length;a++)void 0!==(r=o[a].apply(t,[n]))&&(n=r);return r=t.$oel.triggerHandler("froalaEditor."+i,e.merge([t],[n])),void 0!==r&&(n=r),n}}function E(){for(var e in S)S.hasOwnProperty(e)&&delete S[e]}function k(){for(var e in t.shared._events)t.shared._events.hasOwnProperty(e)&&delete t.shared._events[e]}function T(){t.shared.$_events=t.shared.$_events||[],t.shared._events={},d(),s(),r(),a(),o(),c(),p(),n(),v("destroy",E),v("shared.destroy",k)}var _,S={},D=!1,$=[];return{_init:T,on:v,trigger:x,bindClick:g,disableBlur:f,enableBlur:p,blurActive:m,focus:l,chainTrigger:C,$on:b,$off:w}},e.FE.MODULES.node=function(t){function i(e){return e&&"IFRAME"!=e.tagName?Array.prototype.slice.call(e.childNodes||[]):[]}function n(t){return!!t&&t.nodeType==Node.ELEMENT_NODE&&e.FE.BLOCK_TAGS.indexOf(t.tagName.toLowerCase())>=0}function s(s,o){if(!s)return!0;if(s.querySelector("table"))return!1;var r=i(s);1==r.length&&n(r[0])&&(r=i(r[0]));for(var a=!1,l=0;l<r.length;l++){var c=r[l];if(!(o&&t.node.hasClass(c,"fr-marker")||c.nodeType==Node.TEXT_NODE&&0==c.textContent.length)){if("BR"!=c.tagName&&(c.textContent||"").replace(/\u200B/gi,"").replace(/\n/g,"").length>0)return!1;if(a)return!1;"BR"==c.tagName&&(a=!0)}}return!(s.querySelectorAll(e.FE.VOID_ELEMENTS.join(",")).length-s.querySelectorAll("br").length||s.querySelector(t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||s.querySelectorAll(e.FE.BLOCK_TAGS.join(",")).length>1||s.querySelector(t.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)"))}function o(e){for(;e&&e.parentNode!==t.el&&(!e.parentNode||!t.node.hasClass(e.parentNode,"fr-inner"));)if(e=e.parentNode,n(e))return e;return null}function r(i,s,o){if(void 0===s&&(s=[]),void 0===o&&(o=!0),s.push(t.el),s.indexOf(i.parentNode)>=0||i.parentNode&&t.node.hasClass(i.parentNode,"fr-inner")||i.parentNode&&e.FE.SIMPLE_ENTER_TAGS.indexOf(i.parentNode.tagName)>=0&&o)return null;for(;s.indexOf(i.parentNode)<0&&i.parentNode&&!t.node.hasClass(i.parentNode,"fr-inner")&&(e.FE.SIMPLE_ENTER_TAGS.indexOf(i.parentNode.tagName)<0||!o)&&(!n(i)||!n(i.parentNode)||!o);)i=i.parentNode;return i}function a(e){var t={},i=e.attributes;if(i)for(var n=0;n<i.length;n++){var s=i[n];t[s.nodeName]=s.value}return t}function l(e){for(var t="",i=a(e),n=Object.keys(i).sort(),s=0;s<n.length;s++){var o=n[s],r=i[o];t+=r.indexOf('"')<0?" "+o+'="'+r+'"':" "+o+"='"+r+"'"}return t}function c(e){for(var t=e.attributes,i=0;i<t.length;i++){var n=t[i];e.removeAttribute(n.nodeName)}}function d(e){return"<"+e.tagName.toLowerCase()+l(e)+">"}function u(e){return"</"+e.tagName.toLowerCase()+">"}function h(e,i){void 0===i&&(i=!0);for(var n=e.previousSibling;n&&i&&t.node.hasClass(n,"fr-marker");)n=n.previousSibling;return!n||n.nodeType==Node.TEXT_NODE&&""===n.textContent&&h(n)}function p(e,i){void 0===i&&(i=!0);for(var n=e.nextSibling;n&&i&&t.node.hasClass(n,"fr-marker");)n=n.nextSibling;return!n||n.nodeType==Node.TEXT_NODE&&""===n.textContent&&p(n)}function f(t){return t&&t.nodeType==Node.ELEMENT_NODE&&e.FE.VOID_ELEMENTS.indexOf((t.tagName||"").toLowerCase())>=0}function m(e){return!!e&&["UL","OL"].indexOf(e.tagName)>=0}function g(e){return e===t.el}function v(e){return e&&e.nodeType==Node.ELEMENT_NODE&&e.getAttribute("class")&&(e.getAttribute("class")||"").indexOf("fr-deletable")>=0}function b(e){return e===t.doc.activeElement&&(!t.doc.hasFocus||t.doc.hasFocus())&&!!(g(e)||e.type||e.href||~e.tabIndex)}function y(e){return(!e.getAttribute||"false"!=e.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(e.tagName)<0}function w(e,t){return e instanceof jQuery&&(e=e.get(0)),e&&e.classList&&e.classList.contains(t)}function x(e){return t.browser.msie?e:{acceptNode:e}}return{isBlock:n,isEmpty:s,blockParent:o,deepestParent:r,rawAttributes:a,attributes:l,clearAttributes:c,openTagString:d,closeTagString:u,isFirstSibling:h,isLastSibling:p,isList:m,isElement:g,contents:i,isVoid:f,hasFocus:b,isEditable:y,isDeletable:v,hasClass:w,filter:x}},e.FE.INVISIBLE_SPACE="&#8203;",e.FE.START_MARKER='<span class="fr-marker" data-id="0" data-type="true" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",e.FE.END_MARKER='<span class="fr-marker" data-id="0" data-type="false" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",e.FE.MARKERS=e.FE.START_MARKER+e.FE.END_MARKER,e.FE.MODULES.markers=function(t){function i(i,n){return e('<span class="fr-marker" data-id="'+n+'" data-type="'+i+'" style="display: '+(t.browser.safari?"none":"inline-block")+'; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",t.doc)[0]}function n(n,s,o){try{var r=n.cloneRange();if(r.collapse(s),r.insertNode(i(s,o)),!0===s&&n.collapsed)for(var a=t.$el.find('span.fr-marker[data-type="true"][data-id="'+o+'"]'),l=a.get(0).nextSibling;l&&l.nodeType===Node.TEXT_NODE&&0===l.textContent.length;)e(l).remove(),l=a.nextSibling;if(!0===s&&!n.collapsed){var a=t.$el.find('span.fr-marker[data-type="true"][data-id="'+o+'"]').get(0),l=a.nextSibling;if(l&&l.nodeType===Node.ELEMENT_NODE&&t.node.isBlock(l)){var c=[l];do{l=c[0],c=t.node.contents(l)}while(c[0]&&t.node.isBlock(c[0]));e(l).prepend(e(a))}}if(!1===s&&!n.collapsed){var a=t.$el.find('span.fr-marker[data-type="false"][data-id="'+o+'"]').get(0),l=a.previousSibling;if(l&&l.nodeType===Node.ELEMENT_NODE&&t.node.isBlock(l)){var c=[l];do{l=c[c.length-1],c=t.node.contents(l)}while(c[c.length-1]&&t.node.isBlock(c[c.length-1]));e(l).append(e(a))}a.parentNode&&["TD","TH"].indexOf(a.parentNode.tagName)>=0&&a.parentNode.previousSibling&&!a.previousSibling&&e(a.parentNode.previousSibling).append(a)}var d=t.$el.find('span.fr-marker[data-type="'+s+'"][data-id="'+o+'"]').get(0);return d&&(d.style.display="none"),d}catch(e){return null}}function s(){if(!t.$wp)return null;try{var i=t.selection.ranges(0),n=i.commonAncestorContainer;if(n!=t.el&&0==t.$el.find(n).length)return null;var s=i.cloneRange(),o=i.cloneRange();s.collapse(!0);var r=e('<span class="fr-marker" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",t.doc)[0];if(s.insertNode(r),r=t.$el.find("span.fr-marker").get(0)){for(var a=r.nextSibling;a&&a.nodeType===Node.TEXT_NODE&&0===a.textContent.length;)e(a).remove(),a=t.$el.find("span.fr-marker").get(0).nextSibling;return t.selection.clear(),t.selection.get().addRange(o),r}return null}catch(e){}}function o(){t.selection.isCollapsed()||t.selection.remove();var i=t.$el.find(".fr-marker").get(0);if(null==i&&(i=s()),null==i)return null;var n=t.node.deepestParent(i);if(n||(n=t.node.blockParent(i))&&"LI"!=n.tagName&&(n=null),n)if(t.node.isBlock(n)&&t.node.isEmpty(n))e(n).replaceWith('<span class="fr-marker"></span>');else if(t.cursor.isAtStart(i,n))e(n).before('<span class="fr-marker"></span>'),e(i).remove();else if(t.cursor.isAtEnd(i,n))e(n).after('<span class="fr-marker"></span>'),e(i).remove();else{var o=i,r="",a="";do{o=o.parentNode,r+=t.node.closeTagString(o),a=t.node.openTagString(o)+a}while(o!=n);e(i).replaceWith('<span id="fr-break"></span>');var l=t.node.openTagString(n)+e(n).html()+t.node.closeTagString(n);l=l.replace(/<span id="fr-break"><\/span>/g,r+'<span class="fr-marker"></span>'+a),e(n).replaceWith(l)}return t.$el.find(".fr-marker").get(0)}function r(e){var i=e.clientX,n=e.clientY;a();var o,r=null;if(void 0!==t.doc.caretPositionFromPoint?(o=t.doc.caretPositionFromPoint(i,n),r=t.doc.createRange(),r.setStart(o.offsetNode,o.offset),r.setEnd(o.offsetNode,o.offset)):void 0!==t.doc.caretRangeFromPoint&&(o=t.doc.caretRangeFromPoint(i,n),r=t.doc.createRange(),r.setStart(o.startContainer,o.startOffset),r.setEnd(o.startContainer,o.startOffset)),null!==r&&void 0!==t.win.getSelection){var l=t.win.getSelection();l.removeAllRanges(),l.addRange(r)}else if(void 0!==t.doc.body.createTextRange)try{r=t.doc.body.createTextRange(),r.moveToPoint(i,n);var c=r.duplicate();c.moveToPoint(i,n),r.setEndPoint("EndToEnd",c),r.select()}catch(e){return!1}s()}function a(){t.$el.find(".fr-marker").remove()}return{place:n,insert:s,split:o,insertAtPoint:r,remove:a}},e.FE.MODULES.selection=function(t){function i(){var e="";return t.win.getSelection?e=t.win.getSelection():t.doc.getSelection?e=t.doc.getSelection():t.doc.selection&&(e=t.doc.selection.createRange().text),e.toString()}function n(){return t.win.getSelection?t.win.getSelection():t.doc.getSelection?t.doc.getSelection():t.doc.selection.createRange()}function s(e){var i=n(),s=[];if(i&&i.getRangeAt&&i.rangeCount)for(var s=[],o=0;o<i.rangeCount;o++)s.push(i.getRangeAt(o));else s=t.doc.createRange?[t.doc.createRange()]:[];return void 0!==e?s[e]:s}function o(){var e=n();try{e.removeAllRanges?e.removeAllRanges():e.empty?e.empty():e.clear&&e.clear()}catch(e){}}function r(){var o=n();try{if(o.rangeCount){var r=s(0),a=r.startContainer;if(a.nodeType==Node.TEXT_NODE&&r.startOffset==(a.textContent||"").length&&a.nextSibling&&(a=a.nextSibling),a.nodeType==Node.ELEMENT_NODE){var l=!1;if(a.childNodes.length>0&&a.childNodes[r.startOffset]){for(var c=a.childNodes[r.startOffset];c&&c.nodeType==Node.TEXT_NODE&&0==c.textContent.length;)c=c.nextSibling;if(c&&c.textContent.replace(/\u200B/g,"")===i().replace(/\u200B/g,"")&&(a=c,l=!0),!l&&a.childNodes.length>1&&r.startOffset>0&&a.childNodes[r.startOffset-1]){for(var c=a.childNodes[r.startOffset-1];c&&c.nodeType==Node.TEXT_NODE&&0==c.textContent.length;)c=c.nextSibling;c&&c.textContent.replace(/\u200B/g,"")===i().replace(/\u200B/g,"")&&(a=c,l=!0)}}else if(!r.collapsed&&a.nextSibling&&a.nextSibling.nodeType==Node.ELEMENT_NODE){var c=a.nextSibling;c&&c.textContent.replace(/\u200B/g,"")===i().replace(/\u200B/g,"")&&(a=c,l=!0)}!l&&a.childNodes.length>0&&e(a.childNodes[0]).text().replace(/\u200B/g,"")===i().replace(/\u200B/g,"")&&["BR","IMG","HR"].indexOf(a.childNodes[0].tagName)<0&&(a=a.childNodes[0])}for(;a.nodeType!=Node.ELEMENT_NODE&&a.parentNode;)a=a.parentNode;for(var d=a;d&&"HTML"!=d.tagName;){if(d==t.el)return a;d=e(d).parent()[0]}}}catch(e){}return t.el}function a(){var o=n();try{if(o.rangeCount){var r=s(0),a=r.endContainer;if(a.nodeType==Node.ELEMENT_NODE){var l=!1;if(a.childNodes.length>0&&a.childNodes[r.endOffset]&&e(a.childNodes[r.endOffset]).text()===i())a=a.childNodes[r.endOffset],l=!0;else if(!r.collapsed&&a.previousSibling&&a.previousSibling.nodeType==Node.ELEMENT_NODE){var c=a.previousSibling;c&&c.textContent.replace(/\u200B/g,"")===i().replace(/\u200B/g,"")&&(a=c,l=!0)}else if(!r.collapsed&&a.childNodes.length>0&&a.childNodes[r.endOffset]){var c=a.childNodes[r.endOffset].previousSibling;c.nodeType==Node.ELEMENT_NODE&&c&&c.textContent.replace(/\u200B/g,"")===i().replace(/\u200B/g,"")&&(a=c,l=!0)}!l&&a.childNodes.length>0&&e(a.childNodes[a.childNodes.length-1]).text()===i()&&["BR","IMG","HR"].indexOf(a.childNodes[a.childNodes.length-1].tagName)<0&&(a=a.childNodes[a.childNodes.length-1])}for(a.nodeType==Node.TEXT_NODE&&0==r.endOffset&&a.previousSibling&&a.previousSibling.nodeType==Node.ELEMENT_NODE&&(a=a.previousSibling);a.nodeType!=Node.ELEMENT_NODE&&a.parentNode;)a=a.parentNode;for(var d=a;d&&"HTML"!=d.tagName;){if(d==t.el)return a;d=e(d).parent()[0]}}}catch(e){}return t.el}function l(e,t){var i=e;return i.nodeType==Node.ELEMENT_NODE&&i.childNodes.length>0&&i.childNodes[t]&&(i=i.childNodes[t]),i.nodeType==Node.TEXT_NODE&&(i=i.parentNode),i}function c(){var i=[],o=n();if(y()&&o.rangeCount)for(var r=s(),a=0;a<r.length;a++){var c=r[a],d=l(c.startContainer,c.startOffset),u=l(c.endContainer,c.endOffset);t.node.isBlock(d)&&i.indexOf(d)<0&&i.push(d);var h=t.node.blockParent(d);h&&i.indexOf(h)<0&&i.push(h);for(var p=[],f=d;f!==u&&f!==t.el;)p.indexOf(f)<0&&f.children&&f.children.length?(p.push(f),f=f.children[0]):f.nextSibling?f=f.nextSibling:f.parentNode&&(f=f.parentNode,p.push(f)),t.node.isBlock(f)&&p.indexOf(f)<0&&i.indexOf(f)<0&&(f!==u||c.endOffset>0)&&i.push(f);t.node.isBlock(u)&&i.indexOf(u)<0&&c.endOffset>0&&i.push(u);var h=t.node.blockParent(u);h&&i.indexOf(h)<0&&i.push(h)}for(var a=i.length-1;a>0;a--)e(i[a]).find(i).length&&("LI"!=i[a].tagName||1==i[a].children.length&&i.indexOf(i[a].children[0])>=0)&&i.splice(a,1);return i}function d(){if(t.$wp){t.markers.remove();for(var e=s(),i=[],n=0;n<e.length;n++)if(e[n].startContainer!==t.doc){var o=e[n],r=o.collapsed,a=t.markers.place(o,!0,n),l=t.markers.place(o,!1,n);if(t.el.normalize(),t.browser.safari&&!r){var o=t.doc.createRange();o.setStartAfter(a),o.setEndBefore(l),i.push(o)}}if(t.browser.safari&&i.length){t.selection.clear();for(var n=0;n<i.length;n++)t.selection.get().addRange(i[n])}}}function u(){var i=t.el.querySelectorAll('.fr-marker[data-type="true"]');if(!t.$wp)return t.markers.remove(),!1;if(0===i.length)return!1;if(t.browser.msie||t.browser.edge)for(var s=0;s<i.length;s++)i[s].style.display="inline-block";t.core.hasFocus()||t.browser.msie||t.browser.webkit||t.$el.focus(),o();for(var r=n(),s=0;s<i.length;s++){var a=e(i[s]).data("id"),l=i[s],c=t.doc.createRange(),d=t.$el.find('.fr-marker[data-type="false"][data-id="'+a+'"]');(t.browser.msie||t.browser.edge)&&d.css("display","inline-block");var u=null;if(d.length>0){d=d[0];try{for(var p=!1,f=l.nextSibling;f&&f.nodeType==Node.TEXT_NODE&&0==f.textContent.length;){var m=f;f=f.nextSibling,e(m).remove()}for(var g=d.nextSibling;g&&g.nodeType==Node.TEXT_NODE&&0==g.textContent.length;){var m=g;g=g.nextSibling,e(m).remove()}if(l.nextSibling==d||d.nextSibling==l){
for(var v=l.nextSibling==d?l:d,b=v==l?d:l,y=v.previousSibling;y&&y.nodeType==Node.TEXT_NODE&&0==y.length;){var m=y;y=y.previousSibling,e(m).remove()}if(y&&y.nodeType==Node.TEXT_NODE)for(;y&&y.previousSibling&&y.previousSibling.nodeType==Node.TEXT_NODE;)y.previousSibling.textContent=y.previousSibling.textContent+y.textContent,y=y.previousSibling,e(y.nextSibling).remove();for(var w=b.nextSibling;w&&w.nodeType==Node.TEXT_NODE&&0==w.length;){var m=w;w=w.nextSibling,e(m).remove()}if(w&&w.nodeType==Node.TEXT_NODE)for(;w&&w.nextSibling&&w.nextSibling.nodeType==Node.TEXT_NODE;)w.nextSibling.textContent=w.textContent+w.nextSibling.textContent,w=w.nextSibling,e(w.previousSibling).remove();if(y&&(t.node.isVoid(y)||t.node.isBlock(y))&&(y=null),w&&(t.node.isVoid(w)||t.node.isBlock(w))&&(w=null),y&&w&&y.nodeType==Node.TEXT_NODE&&w.nodeType==Node.TEXT_NODE){e(l).remove(),e(d).remove();var x=y.textContent.length;y.textContent=y.textContent+w.textContent,e(w).remove(),t.spaces.normalize(y),c.setStart(y,x),c.setEnd(y,x),p=!0}else!y&&w&&w.nodeType==Node.TEXT_NODE?(e(l).remove(),e(d).remove(),t.spaces.normalize(w),u=e(t.doc.createTextNode("​")),e(w).before(u),c.setStart(w,0),c.setEnd(w,0),p=!0):!w&&y&&y.nodeType==Node.TEXT_NODE&&(e(l).remove(),e(d).remove(),t.spaces.normalize(y),u=e(t.doc.createTextNode("​")),e(y).after(u),c.setStart(y,y.textContent.length),c.setEnd(y,y.textContent.length),p=!0)}if(!p){var C,E;if(t.browser.chrome&&l.nextSibling==d)C=h(d,c,!0)||c.setStartAfter(d),E=h(l,c,!1)||c.setEndBefore(l);else{l.previousSibling==d&&(l=d,d=l.nextSibling),d.nextSibling&&"BR"===d.nextSibling.tagName||!d.nextSibling&&t.node.isBlock(l.previousSibling)||l.previousSibling&&"BR"==l.previousSibling.tagName||(l.style.display="inline",d.style.display="inline",u=e(t.doc.createTextNode("​")));var k=l.previousSibling;k&&k.style&&"block"==t.win.getComputedStyle(k).display&&!t.opts.enter==e.FE.ENTER_BR?(c.setEndAfter(k),c.setStartAfter(k)):(C=h(l,c,!0)||e(l).before(u)&&c.setStartBefore(l),E=h(d,c,!1)||e(d).after(u)&&c.setEndAfter(d))}"function"==typeof C&&C(),"function"==typeof E&&E()}}catch(e){}}u&&u.remove();try{r.addRange(c)}catch(e){}}t.markers.remove()}function h(i,n,s){var o=i.previousSibling,r=i.nextSibling;if(o&&r&&o.nodeType==Node.TEXT_NODE&&r.nodeType==Node.TEXT_NODE){var a=o.textContent.length;return s?(r.textContent=o.textContent+r.textContent,e(o).remove(),e(i).remove(),t.spaces.normalize(r),function(){n.setStart(r,a)}):(o.textContent=o.textContent+r.textContent,e(r).remove(),e(i).remove(),t.spaces.normalize(o),function(){n.setEnd(o,a)})}if(o&&!r&&o.nodeType==Node.TEXT_NODE){var a=o.textContent.length;return s?(t.spaces.normalize(o),function(){n.setStart(o,a)}):(t.spaces.normalize(o),function(){n.setEnd(o,a)})}return!(!r||o||r.nodeType!=Node.TEXT_NODE)&&(s?(t.spaces.normalize(r),function(){n.setStart(r,0)}):(t.spaces.normalize(r),function(){n.setEnd(r,0)}))}function p(){return!0}function f(){for(var e=s(),t=0;t<e.length;t++)if(!e[t].collapsed)return!1;return!0}function m(e){var i,n,s=!1,o=!1;if(t.win.getSelection){var r=t.win.getSelection();r.rangeCount&&(i=r.getRangeAt(0),n=i.cloneRange(),n.selectNodeContents(e),n.setEnd(i.startContainer,i.startOffset),s=""===n.toString(),n.selectNodeContents(e),n.setStart(i.endContainer,i.endOffset),o=""===n.toString())}else t.doc.selection&&"Control"!=t.doc.selection.type&&(i=t.doc.selection.createRange(),n=i.duplicate(),n.moveToElementText(e),n.setEndPoint("EndToStart",i),s=""===n.text,n.moveToElementText(e),n.setEndPoint("StartToEnd",i),o=""===n.text);return{atStart:s,atEnd:o}}function g(){if(f())return!1;t.$el.find("td, th, img").prepend('<span class="fr-mk">'+e.FE.INVISIBLE_SPACE+"</span>");var i=!1,n=m(t.el);return n.atStart&&n.atEnd&&(i=!0),t.$el.find(".fr-mk").remove(),i}function v(i,n){void 0===n&&(n=!0);var s=e(i).html();s&&s.replace(/\u200b/g,"").length!=s.length&&e(i).html(s.replace(/\u200b/g,""));for(var o=t.node.contents(i),r=0;r<o.length;r++)o[r].nodeType!=Node.ELEMENT_NODE?e(o[r]).remove():(v(o[r],0==r),0==r&&(n=!1));i.nodeType==Node.TEXT_NODE?e(i).replaceWith('<span data-first="true" data-text="true"></span>'):n&&e(i).attr("data-first",!0)}function b(i,n){var s=t.node.contents(i.get(0));["TD","TH"].indexOf(i.get(0).tagName)>=0&&1==i.find(".fr-marker").length&&t.node.hasClass(s[0],"fr-marker")&&i.attr("data-del-cell",!0);for(var o=0;o<s.length;o++){var r=s[o];t.node.hasClass(r,"fr-marker")?n=(n+1)%2:n?e(r).find(".fr-marker").length>0?n=b(e(r),n):["TD","TH"].indexOf(r.tagName)<0&&!t.node.hasClass(r,"fr-inner")?!t.opts.keepFormatOnDelete||t.$el.find("[data-first]").length>0?e(r).remove():v(r):t.node.hasClass(r,"fr-inner")?0==e(r).find(".fr-inner").length?e(r).html("<br>"):e(r).find(".fr-inner").filter(function(){return 0==e(this).find("fr-inner").length}).html("<br>"):(e(r).empty(),e(r).attr("data-del-cell",!0)):e(r).find(".fr-marker").length>0&&(n=b(e(r),n))}return n}function y(){try{if(!t.$wp)return!1;for(var e=s(0),i=e.commonAncestorContainer;i&&!t.node.isElement(i);)i=i.parentNode;return!!t.node.isElement(i)}catch(e){return!1}}function w(){if(f())return!0;d();for(var i=t.$el.find('.fr-marker[data-type="true"]'),n=0;n<i.length;n++)for(var s=i[n];!function(t){for(var i=t.previousSibling;i&&i.nodeType==Node.TEXT_NODE&&0==i.textContent.length;){var n=i,i=i.previousSibling;e(n).remove()}return i}(s)&&!t.node.isBlock(s.parentNode)&&!t.$el.is(s.parentNode);)e(s.parentNode).before(s);for(var o=t.$el.find('.fr-marker[data-type="false"]'),n=0;n<o.length;n++){for(var r=o[n];!function(t){for(var i=t.nextSibling;i&&i.nodeType==Node.TEXT_NODE&&0==i.textContent.length;){var n=i,i=i.nextSibling;e(n).remove()}return i}(r)&&!t.node.isBlock(r.parentNode)&&!t.$el.is(r.parentNode);)e(r.parentNode).after(r);r.parentNode&&t.node.isBlock(r.parentNode)&&t.node.isEmpty(r.parentNode)&&!t.$el.is(r.parentNode)&&t.opts.keepFormatOnDelete&&e(r.parentNode).after(r)}if(p()){b(t.$el,0);var a=t.$el.find('[data-first="true"]');if(a.length)t.$el.find(".fr-marker").remove(),a.append(e.FE.INVISIBLE_SPACE+e.FE.MARKERS).removeAttr("data-first"),a.attr("data-text")&&a.replaceWith(a.html());else{t.$el.find("table").filter(function(){return e(this).find("[data-del-cell]").length>0&&e(this).find("[data-del-cell]").length==e(this).find("td, th").length}).remove(),t.$el.find("[data-del-cell]").removeAttr("data-del-cell");for(var i=t.$el.find('.fr-marker[data-type="true"]'),n=0;n<i.length;n++){var l=i[n],c=l.nextSibling,h=t.$el.find('.fr-marker[data-type="false"][data-id="'+e(l).data("id")+'"]').get(0);if(h){if(c&&c==h);else if(l){var m=t.node.blockParent(l),g=t.node.blockParent(h),v=!1,y=!1;if(m&&["UL","OL"].indexOf(m.tagName)>=0&&(m=null,v=!0),g&&["UL","OL"].indexOf(g.tagName)>=0&&(g=null,y=!0),e(l).after(h),m==g);else if(null!=m||v)if(null!=g||y||0!=e(m).parentsUntil(t.$el,"table").length)m&&g&&0==e(m).parentsUntil(t.$el,"table").length&&0==e(g).parentsUntil(t.$el,"table").length&&(e(m).append(e(g).html()),e(g).remove());else{for(var c=m;!c.nextSibling&&c.parentNode!=t.el;)c=c.parentNode;for(c=c.nextSibling;c&&"BR"!=c.tagName;){var w=c.nextSibling;e(m).append(c),c=w}c&&"BR"==c.tagName&&e(c).remove()}else{var x=t.node.deepestParent(l);x?(e(x).after(e(g).html()),e(g).remove()):0==e(g).parentsUntil(t.$el,"table").length&&(e(l).next().after(e(g).html()),e(g).remove())}}}else h=e(l).clone().attr("data-type",!1),e(l).after(h)}}}t.opts.keepFormatOnDelete||t.html.fillEmptyBlocks(),t.html.cleanEmptyTags(!0),t.clean.lists(),t.spaces.normalize();var C=t.$el.find(".fr-marker:last").get(0),E=t.$el.find(".fr-marker:first").get(0);!C.nextSibling&&E.previousSibling&&"BR"==E.previousSibling.tagName&&t.node.isElement(C.parentNode)&&t.node.isElement(E.parentNode)&&t.$el.append("<br>"),u()}function x(i){if(!i||i.getElementsByClassName("fr-marker").length>0)return!1;for(var n=i.firstChild;n&&t.node.isBlock(n);)i=n,n=n.firstChild;i.innerHTML=e.FE.MARKERS+i.innerHTML}function C(i){if(!i||i.getElementsByClassName("fr-marker").length>0)return!1;for(var n=i.lastChild;n&&t.node.isBlock(n);)i=n,n=n.lastChild;i.innerHTML=i.innerHTML+e.FE.MARKERS}function E(i,n){void 0===n&&(n=!0);for(var s=i.previousSibling;s&&s.nodeType==Node.TEXT_NODE&&0==s.textContent.length;)s=s.previousSibling;return s?(t.node.isBlock(s)?C(s):"BR"==s.tagName?e(s).before(e.FE.MARKERS):e(s).after(e.FE.MARKERS),!0):!!n&&(t.node.isBlock(i)?x(i):e(i).before(e.FE.MARKERS),!0)}function k(i,n){void 0===n&&(n=!0);for(var s=i.nextSibling;s&&s.nodeType==Node.TEXT_NODE&&0==s.textContent.length;)s=s.nextSibling;return s?(t.node.isBlock(s)?x(s):e(s).before(e.FE.MARKERS),!0):!!n&&(t.node.isBlock(i)?C(i):e(i).after(e.FE.MARKERS),!0)}return{text:i,get:n,ranges:s,clear:o,element:r,endElement:a,save:d,restore:u,isCollapsed:f,isFull:g,inEditor:y,remove:w,blocks:c,info:m,setAtEnd:C,setAtStart:x,setBefore:E,setAfter:k,rangeElement:l}},e.extend(e.FE.DEFAULTS,{htmlAllowedTags:["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","br","button","canvas","caption","cite","code","col","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","queue","rp","rt","ruby","s","samp","script","style","section","select","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","var","video","wbr"],htmlRemoveTags:["script","style"],htmlAllowedAttrs:["accept","accept-charset","accesskey","action","align","allowfullscreen","allowtransparency","alt","async","autocomplete","autofocus","autoplay","autosave","background","bgcolor","border","charset","cellpadding","cellspacing","checked","cite","class","color","cols","colspan","content","contenteditable","contextmenu","controls","coords","data","data-.*","datetime","default","defer","dir","dirname","disabled","download","draggable","dropzone","enctype","for","form","formaction","frameborder","headers","height","hidden","high","href","hreflang","http-equiv","icon","id","ismap","itemprop","keytype","kind","label","lang","language","list","loop","low","max","maxlength","media","method","min","mozallowfullscreen","multiple","name","novalidate","open","optimum","pattern","ping","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","reversed","rows","rowspan","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","span","src","srcdoc","srclang","srcset","start","step","summary","spellcheck","style","tabindex","target","title","type","translate","usemap","value","valign","webkitallowfullscreen","width","wrap"],htmlAllowComments:!0,fullPage:!1}),e.FE.HTML5Map={B:"STRONG",I:"EM",STRIKE:"S"},e.FE.MODULES.clean=function(t){function i(e){if(e.nodeType==Node.ELEMENT_NODE&&e.getAttribute("class")&&e.getAttribute("class").indexOf("fr-marker")>=0)return!1;var n,s=t.node.contents(e),o=[];for(n=0;n<s.length;n++)s[n].nodeType!=Node.ELEMENT_NODE||t.node.isVoid(s[n])?s[n].nodeType==Node.TEXT_NODE&&(s[n].textContent=s[n].textContent.replace(/\u200b/g,"").replace(/&/g,"&amp;")):s[n].textContent.replace(/\u200b/g,"").length!=s[n].textContent.length&&i(s[n]);if(e.nodeType==Node.ELEMENT_NODE&&!t.node.isVoid(e)&&(e.normalize(),s=t.node.contents(e),o=e.querySelectorAll(".fr-marker"),s.length-o.length==0)){for(n=0;n<s.length;n++)if((s[n].getAttribute("class")||"").indexOf("fr-marker")<0)return!1;for(n=0;n<o.length;n++)e.parentNode.insertBefore(o[n].cloneNode(!0),e);return e.parentNode.removeChild(e),!1}}function n(e){if(e.nodeType==Node.COMMENT_NODE)return"\x3c!--"+e.nodeValue+"--\x3e";if(e.nodeType==Node.TEXT_NODE)return e.textContent.replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\u00A0/g,"&nbsp;");if(e.nodeType!=Node.ELEMENT_NODE)return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&["STYLE","SCRIPT"].indexOf(e.tagName)>=0)return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&"svg"==e.tagName){var i=document.createElement("div"),s=e.cloneNode(!0);return i.appendChild(s),i.innerHTML}if("IFRAME"==e.tagName)return e.outerHTML;var o=e.childNodes;if(0===o.length)return e.outerHTML;for(var r="",a=0;a<o.length;a++)r+=n(o[a]);return t.node.openTagString(e)+r+t.node.closeTagString(e)}function s(e){return F=[],e=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,function(e){return F.push(e),"[FROALA.EDITOR.SCRIPT "+(F.length-1)+"]"}),e=e.replace(/<img((?:[\w\W]*?)) src="/g,'<img$1 data-fr-src="')}function o(e){return e=e.replace(/\[FROALA\.EDITOR\.SCRIPT ([\d]*)\]/gi,function(e,i){return t.opts.htmlRemoveTags.indexOf("script")>=0?"":F[parseInt(i,10)]}),e=e.replace(/<img((?:[\w\W]*?)) data-fr-src="/g,'<img$1 src="')}function r(e){var t;for(t in e)e.hasOwnProperty(t)&&(t.match(O)||delete e[t]);for(var i="",n=Object.keys(e).sort(),s=0;s<n.length;s++)t=n[s],i+=e[t].indexOf('"')<0?" "+t+'="'+e[t]+'"':" "+t+"='"+e[t]+"'";return i}function a(e,i,n){if(t.opts.fullPage){var s=t.html.extractDoctype(n),o=r(t.html.extractNodeAttrs(n,"html"));i=null==i?t.html.extractNode(n,"head")||"<title></title>":i;return s+"<html"+o+"><head"+r(t.html.extractNodeAttrs(n,"head"))+">"+i+"</head><body"+r(t.html.extractNodeAttrs(n,"body"))+">"+e+"</body></html>"}return e}function l(i,s){var o=e("<div>"+i+"</div>"),r="";if(o){for(var a=t.node.contents(o.get(0)),l=0;l<a.length;l++)s(a[l]);a=t.node.contents(o.get(0));for(var l=0;l<a.length;l++)r+=n(a[l])}return r}function c(e,i,n){e=s(e);var r=e,c=null;if(t.opts.fullPage){var r=t.html.extractNode(e,"body")||(e.indexOf("<body")>=0?"":e);n&&(c=t.html.extractNode(e,"head")||"")}return r=l(r,i),c&&(c=l(c,i)),o(a(r,c,e))}function d(e){return e.replace(/\u200b/g,"").length==e.length?e:t.clean.exec(e,i)}function u(){var i=t.el.querySelectorAll(Object.keys(e.FE.HTML5Map).join(","));if(i.length){var n=!1;t.el.querySelector(".fr-marker")||(t.selection.save(),n=!0);for(var s=0;s<i.length;s++)""===t.node.attributes(i[s])&&e(i[s]).replaceWith("<"+e.FE.HTML5Map[i[s].tagName]+">"+i[s].innerHTML+"</"+e.FE.HTML5Map[i[s].tagName]+">");n&&t.selection.restore()}}function h(i){if("SPAN"==i.tagName&&(i.getAttribute("class")||"").indexOf("fr-marker")>=0)return!1;if("PRE"==i.tagName&&f(i),i.nodeType==Node.ELEMENT_NODE&&(i.getAttribute("data-fr-src")&&i.setAttribute("data-fr-src",t.helpers.sanitizeURL(i.getAttribute("data-fr-src"))),i.getAttribute("href")&&i.setAttribute("href",t.helpers.sanitizeURL(i.getAttribute("href"))),["TABLE","TBODY","TFOOT","TR"].indexOf(i.tagName)>=0&&(i.innerHTML=i.innerHTML.trim())),!t.opts.pasteAllowLocalImages&&i.nodeType==Node.ELEMENT_NODE&&"IMG"==i.tagName&&i.getAttribute("data-fr-src")&&0==i.getAttribute("data-fr-src").indexOf("file://"))return i.parentNode.removeChild(i),!1;if(i.nodeType==Node.ELEMENT_NODE&&e.FE.HTML5Map[i.tagName]&&""===t.node.attributes(i)){var n=e.FE.HTML5Map[i.tagName],s="<"+n+">"+i.innerHTML+"</"+n+">";i.insertAdjacentHTML("beforebegin",s),i=i.previousSibling,i.parentNode.removeChild(i.nextSibling)}if(t.opts.htmlAllowComments||i.nodeType!=Node.COMMENT_NODE)if(i.tagName&&i.tagName.match(A))i.parentNode.removeChild(i);else if(i.tagName&&!i.tagName.match(M))i.outerHTML=i.innerHTML;else{var o=i.attributes;if(o)for(var r=o.length-1;r>=0;r--){var a=o[r];a.nodeName.match(O)||i.removeAttribute(a.nodeName)}}else 0!==i.data.indexOf("[FROALA.EDITOR")&&i.parentNode.removeChild(i)}function p(e){for(var i=t.node.contents(e),n=0;n<i.length;n++)i[n].nodeType!=Node.TEXT_NODE&&p(i[n]);h(e)}function f(e){var t=e.innerHTML;t.indexOf("\n")>=0&&(e.innerHTML=t.replace(/\n/g,"<br>"))}function m(i,n,s,o){void 0===n&&(n=[]),void 0===s&&(s=[]),void 0===o&&(o=!1),i=i.replace(/\u0009/g,"");var r,a=e.merge([],t.opts.htmlAllowedTags);for(r=0;r<n.length;r++)a.indexOf(n[r])>=0&&a.splice(a.indexOf(n[r]),1);var l=e.merge([],t.opts.htmlAllowedAttrs);for(r=0;r<s.length;r++)l.indexOf(s[r])>=0&&l.splice(l.indexOf(s[r]),1);return l.push("data-fr-.*"),l.push("fr-.*"),M=new RegExp("^"+a.join("$|^")+"$","gi"),O=new RegExp("^"+l.join("$|^")+"$","gi"),A=new RegExp("^"+t.opts.htmlRemoveTags.join("$|^")+"$","gi"),i=c(i,p,!0)}function g(){for(var i=t.el.querySelectorAll("blockquote + blockquote"),n=0;n<i.length;n++){var s=i[n];t.node.attributes(s)==t.node.attributes(s.previousSibling)&&(e(s).prev().append(e(s).html()),e(s).remove())}}function v(){for(var e=t.el.querySelectorAll("tr"),i=0;i<e.length;i++){for(var n=e[i].children,s=!0,o=0;o<n.length;o++)if("TH"!=n[o].tagName){s=!1;break}if(0!=s&&0!=n.length){for(var r=e[i];r&&"TABLE"!=r.tagName&&"THEAD"!=r.tagName;)r=r.parentNode;var a=r;"THEAD"!=a.tagName&&(a=t.doc.createElement("THEAD"),r.insertBefore(a,r.firstChild)),a.appendChild(e[i])}}}function b(){var i=t.html.defaultTag();if(i)for(var n=t.el.querySelectorAll("td > "+i+", th > "+i),s=0;s<n.length;s++)""===t.node.attributes(n[s])&&e(n[s]).replaceWith(n[s].innerHTML+"<br>")}function y(){v(),b()}function w(){var e=[];do{if(e.length){var i=e[0],n=t.doc.createElement("ul");i.parentNode.insertBefore(n,i);do{var s=i;i=i.nextSibling,n.appendChild(s)}while(i&&"LI"==i.tagName)}e=[];for(var o=t.el.querySelectorAll("li"),r=0;r<o.length;r++)(function(e){return!t.node.isList(e.parentNode)})(o[r])&&e.push(o[r])}while(e.length>0)}function x(){for(var e=t.el.querySelectorAll("ol + ol, ul + ul"),i=0;i<e.length;i++){var n=e[i];if(t.node.isList(n.previousSibling)&&t.node.openTagString(n)==t.node.openTagString(n.previousSibling)){for(var s=t.node.contents(n),o=0;o<s.length;o++)n.previousSibling.appendChild(s[o]);n.parentNode.removeChild(n)}}}function C(){var e;do{e=!1;for(var i=t.el.querySelectorAll("li:empty"),n=0;n<i.length;n++)i[n].parentNode.removeChild(i[n]);for(var s=t.el.querySelectorAll("ul, ol"),n=0;n<s.length;n++)!function(t){t.querySelector("LI")||(e=!0,t.parentNode.removeChild(t))}(s[n])}while(!0===e)}function E(){for(var i=t.el.querySelectorAll("ul > ul, ol > ol, ul > ol, ol > ul"),n=0;n<i.length;n++){var s=i[n],o=s.previousSibling;o&&("LI"==o.tagName?o.appendChild(s):e(s).wrap("<li></li>"))}}function k(){for(var i=t.el.querySelectorAll("li > ul, li > ol"),n=0;n<i.length;n++){var s=i[n];if(s.nextSibling){var o=s.nextSibling,r=e("<li>");e(s.parentNode).after(r);do{var a=o;o=o.nextSibling,r.append(a)}while(o)}}}function T(){for(var i=t.el.querySelectorAll("li > ul, li > ol"),n=0;n<i.length;n++){var s=i[n];if(t.node.isFirstSibling(s))e(s).before("<br/>");else if(s.previousSibling&&"BR"==s.previousSibling.tagName){for(var o=s.previousSibling.previousSibling;o&&t.node.hasClass(o,"fr-marker");)o=o.previousSibling;o&&"BR"!=o.tagName&&e(s.previousSibling).remove()}}}function _(){for(var i=t.el.querySelectorAll("li:empty"),n=0;n<i.length;n++)e(i[n]).remove()}function S(){for(var i=t.el.querySelectorAll("ul, ol"),n=0;n<i.length;n++)for(var s=t.node.contents(i[n]),o=null,r=s.length-1;r>=0;r--)"LI"!=s[r].tagName?(o||(o=e("<li>"),o.insertBefore(s[r])),o.prepend(s[r])):o=null}function D(){w(),x(),C(),E(),k(),T(),S(),_()}function $(){t.opts.fullPage&&e.merge(t.opts.htmlAllowedTags,["head","title","style","link","base","body","html","meta"])}var M,A,O,F=[],F=[];return{_init:$,html:m,toHTML5:u,tables:y,lists:D,quotes:g,invisibleSpaces:d,exec:c}},e.FE.MODULES.spaces=function(t){function i(i,n){var s=i.previousSibling,o=i.nextSibling,r=i.textContent,a=i.parentNode;n&&(r=r.replace(/[\f\n\r\t\v ]{2,}/g," "),(!o||t.node.isVoid(o)||t.node.isBlock(o))&&t.node.isBlock(a)&&(r=r.replace(/[\f\n\r\t\v ]{1,}$/g,"")),(!s||t.node.isVoid(s)||t.node.isBlock(s))&&t.node.isBlock(a)&&(r=r.replace(/^[\f\n\r\t\v ]{1,}/g,""))),r=r.replace(new RegExp(e.FE.UNICODE_NBSP,"g")," ");for(var l="",c=0;c<r.length;c++)l+=32!=r.charCodeAt(c)||0!==c&&32!=l.charCodeAt(c-1)?r[c]:e.FE.UNICODE_NBSP;(!o||t.node.isBlock(o)||o.nodeType==Node.ELEMENT_NODE&&t.win.getComputedStyle(o)&&"block"==t.win.getComputedStyle(o).display)&&(l=l.replace(/ $/,e.FE.UNICODE_NBSP)),!s||t.node.isVoid(s)||t.node.isBlock(s)||(l=l.replace(/^\u00A0([^ $])/," $1"),1!==l.length||160!==l.charCodeAt(0)||!o||t.node.isVoid(o)||t.node.isBlock(o)||(l=" ")),l=l.replace(/([^ \u00A0])\u00A0([^ \u00A0])/g,"$1 $2"),i.textContent!=l&&(i.textContent=l)}function n(e,n){if(void 0!==e&&e||(e=t.el),void 0===n&&(n=!1),!e.getAttribute||"false"!=e.getAttribute("contenteditable"))if(e.nodeType==Node.TEXT_NODE)i(e,n);else if(e.nodeType==Node.ELEMENT_NODE)for(var s=t.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,t.node.filter(function(e){return null!=e.textContent.match(/([ \u00A0\f\n\r\t\v]{2,})|(^[ \u00A0\f\n\r\t\v]{1,})|([ \u00A0\f\n\r\t\v]{1,}$)/g)&&!t.node.hasClass(e.parentNode,"fr-marker")}),!1);s.nextNode();)i(s.currentNode,n)}function s(){for(var e=[],i=t.el.querySelectorAll(".fr-marker"),s=0;s<i.length;s++){var o=null,r=t.node.blockParent(i[s]);o=r||i[s];for(var a=o.nextSibling,l=o.previousSibling;a&&"BR"==a.tagName;)a=a.nextSibling;for(;l&&"BR"==l.tagName;)l=l.previousSibling;o&&e.indexOf(o)<0&&e.push(o),l&&e.indexOf(l)<0&&e.push(l),a&&e.indexOf(a)<0&&e.push(a)}for(var c=0;c<e.length;c++)n(e[c])}return{normalize:n,normalizeAroundCursor:s}},e.FE.UNICODE_NBSP=String.fromCharCode(160),e.FE.VOID_ELEMENTS=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],e.FE.BLOCK_TAGS=["address","article","aside","audio","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video"],e.extend(e.FE.DEFAULTS,{htmlAllowedEmptyTags:["textarea","a","iframe","object","video","style","script",".fa",".fr-emoticon"],htmlDoNotWrapTags:["script","style"],htmlSimpleAmpersand:!1,htmlIgnoreCSSProperties:[]}),e.FE.MODULES.html=function(t){function i(){return t.opts.enter==e.FE.ENTER_P?"p":t.opts.enter==e.FE.ENTER_DIV?"div":t.opts.enter==e.FE.ENTER_BR?null:void 0}function n(i){var n=[],s=[];if(i)for(var r=t.el.querySelectorAll(".fr-marker"),a=0;a<r.length;a++){var l=t.node.blockParent(r[a])||r[a];if(l){var c=l.nextSibling,d=l.previousSibling;l&&s.indexOf(l)<0&&t.node.isBlock(l)&&s.push(l),d&&t.node.isBlock(d)&&s.indexOf(d)<0&&s.push(d),c&&t.node.isBlock(c)&&s.indexOf(c)<0&&s.push(c)}}else s=t.el.querySelectorAll(o());var u=o();u+=","+e.FE.VOID_ELEMENTS.join(","),u+=","+t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)";for(var a=s.length-1;a>=0;a--)if(!(s[a].textContent&&s[a].textContent.replace(/\u200B|\n/g,"").length>0||s[a].querySelectorAll(u).length>0)){for(var h=t.node.contents(s[a]),p=!1,f=0;f<h.length;f++)if(h[f].nodeType!=Node.COMMENT_NODE&&h[f].textContent&&h[f].textContent.replace(/\u200B|\n/g,"").length>0){p=!0;break}p||n.push(s[a])}return n}function s(){return e.FE.BLOCK_TAGS.join(":empty, ")+":empty"}function o(){return e.FE.BLOCK_TAGS.join(", ")}function r(i){var n=e.merge([],e.FE.VOID_ELEMENTS);n=e.merge(n,t.opts.htmlAllowedEmptyTags),void 0===i&&(n=e.merge(n,e.FE.BLOCK_TAGS));var s,o;s=t.el.querySelectorAll("*:empty:not("+n.join("):not(")+"):not(.fr-marker)");do{o=!1;for(var r=0;r<s.length;r++)0!==s[r].attributes.length&&void 0===s[r].getAttribute("href")||(s[r].parentNode.removeChild(s[r]),o=!0);s=t.el.querySelectorAll("*:empty:not("+n.join("):not(")+"):not(.fr-marker)")}while(s.length&&o)}function a(e,n){var s=i();if(n&&(s="div"),s){for(var o=t.doc.createDocumentFragment(),r=null,a=!1,l=e.firstChild;l;){var c=l.nextSibling;if(l.nodeType==Node.ELEMENT_NODE&&(t.node.isBlock(l)||t.opts.htmlDoNotWrapTags.indexOf(l.tagName.toLowerCase())>=0&&!t.node.hasClass(l,"fr-marker")))r=null,o.appendChild(l);else if(l.nodeType!=Node.ELEMENT_NODE&&l.nodeType!=Node.TEXT_NODE)r=null,o.appendChild(l);else if("BR"==l.tagName)c&&"BR"==c.tagName&&(c=c.nextSibling),null==r?(r=t.doc.createElement(s),n&&r.setAttribute("data-empty",!0),r.appendChild(l),o.appendChild(r)):!1===a&&(r.appendChild(t.doc.createElement("br")),r.setAttribute("data-empty",!0)),r=null;else{var d=l.textContent;l.nodeType==Node.TEXT_NODE&&0==d.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length||(null==r&&(r=t.doc.createElement(s),n&&r.setAttribute("class","fr-temp-div"),o.appendChild(r),a=!1),r.appendChild(l),a||t.node.hasClass(l,"fr-marker")||l.nodeType==Node.TEXT_NODE&&0===d.replace(/ /g,"").length||(a=!0))}l=c}e.innerHTML="",e.appendChild(o)}}function l(e,t){for(var i=0;i<e.length;i++)a(e[i],t)}function c(e,i,n,s){return!!t.$wp&&(void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===s&&(s=!1),a(t.el,e),s&&l(t.el.querySelectorAll(".fr-inner"),e),i&&l(t.el.querySelectorAll("td, th"),e),void(n&&l(t.el.querySelectorAll("blockquote"),e)))}function d(){t.$el.find("div.fr-temp-div").each(function(){e(this).data("empty")||"LI"==this.parentNode.tagName||t.node.isBlock(this.previousSibling)?e(this).replaceWith(e(this).html()):e(this).replaceWith(e(this).html()+"<br>")}),t.$el.find(".fr-temp-div").removeClass("fr-temp-div").filter(function(){return""==e(this).attr("class")}).removeAttr("class")}function u(i){for(var s=n(i),o=0;o<s.length;o++){var r=s[o];"false"==r.getAttribute("contenteditable")||r.querySelector(t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||t.node.isVoid(r)||"TABLE"!=r.tagName&&"TBODY"!=r.tagName&&"TR"!=r.tagName&&r.appendChild(t.doc.createElement("br"))}if(t.browser.msie&&t.opts.enter==e.FE.ENTER_BR){var a=t.node.contents(t.el);a.length&&a[a.length-1].nodeType==Node.TEXT_NODE&&t.$el.append("<br>")}}function h(){return t.$el.get(0).querySelectorAll(o())}function p(e){if(void 0===e&&(e=t.el),e&&["SCRIPT","STYLE","PRE"].indexOf(e.tagName)>=0)return!1;for(var i=t.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,t.node.filter(function(e){return null!=e.textContent.match(/([ \n]{2,})|(^[ \n]{1,})|([ \n]{1,}$)/g)}),!1);i.nextNode();){var n=i.currentNode,s=t.node.isBlock(n.parentNode)||t.node.isElement(n.parentNode),o=n.textContent.replace(/(?!^)( ){2,}(?!$)/g," ").replace(/\n/g," ").replace(/^[ ]{2,}/g," ").replace(/[ ]{2,}$/g," ");if(s){var r=n.previousSibling,a=n.nextSibling;r&&a&&" "==o?o=t.node.isBlock(r)&&t.node.isBlock(a)?"":"\n":(r||(o=o.replace(/^ */,"")),a||(o=o.replace(/ *$/,"")))}n.textContent=o}}function f(e,t,i){var n=new RegExp(t,"gi"),s=n.exec(e);return s?s[i]:null}function m(e,t){var i=e.match(/<!DOCTYPE ?([^ ]*) ?([^ ]*) ?"?([^"]*)"? ?"?([^"]*)"?>/i);return i?t.implementation.createDocumentType(i[1],i[3],i[4]):t.implementation.createDocumentType("html")}function g(e){var t=e.doctype,i="<!DOCTYPE html>";return t&&(i="<!DOCTYPE "+t.name+(t.publicId?' PUBLIC "'+t.publicId+'"':"")+(!t.publicId&&t.systemId?" SYSTEM":"")+(t.systemId?' "'+t.systemId+'"':"")+">"),i}function v(i,n){var s=i.parentNode;if(s&&(t.node.isBlock(s)||t.node.isElement(s))&&["TD","TH"].indexOf(s.tagName)<0){var o=i.previousSibling,r=i.nextSibling;o&&s&&"BR"!=o.tagName&&!t.node.isBlock(o)&&!r&&s.textContent.replace(/\u200B/g,"").length>0&&o.textContent.length>0&&!t.node.hasClass(o,"fr-marker")&&(t.el==s&&!r&&t.opts.enter==e.FE.ENTER_BR&&t.browser.msie||(n&&t.selection.save(),i.parentNode.removeChild(i),n&&t.selection.restore()))}}function b(){var e,i=t.selection.element();e=t.node.isBlock(i)?i:t.node.blockParent(i);var n=[];if(e){var s=e.nextSibling,o=e.previousSibling;e&&n.indexOf(e)<0&&n.push(e),o&&t.node.isBlock(o)&&n.indexOf(o)<0&&n.push(o),s&&t.node.isBlock(s)&&n.indexOf(s)<0&&n.push(s)}for(var r=[],a=0;a<n.length;a++)for(var l=n[a].querySelectorAll("br"),c=0;c<l.length;c++)r.indexOf(l[c])<0&&r.push(l[c]);if(i.parentNode==t.el)for(var d=t.el.children,a=0;a<d.length;a++)"BR"==d[a].tagName&&r.indexOf(d[a])<0&&r.push(d[a]);return r}function y(e,i){var n;if(e){n=b();for(var s=0;s<n.length;s++)v(n[s],i)}else{n=t.el.getElementsByTagName("br");for(var s=0;s<n.length;s++)v(n[s],i)}}function w(){r(),c(),p(),t.spaces.normalize(null,!0),t.html.fillEmptyBlocks(),t.clean.quotes(),t.clean.lists(),t.clean.tables(),t.clean.toHTML5(),t.html.cleanBRs(),t.selection.restore(),x(),t.placeholder.refresh()}function x(){t.core.isEmpty()&&(null!=i()?t.el.querySelector(o())||t.el.querySelector(t.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)")||(t.core.hasFocus()?(t.$el.html("<"+i()+">"+e.FE.MARKERS+"<br/></"+i()+">"),t.selection.restore()):t.$el.html("<"+i()+"><br/></"+i()+">")):t.el.querySelector("*:not(.fr-marker):not(br)")||(t.core.hasFocus()?(t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore()):t.$el.html("<br/>")))}function C(e,t){return f(e,"<"+t+"[^>]*?>([\\w\\W]*)</"+t+">",1)}function E(i,n){var s=e("<div "+(f(i,"<"+n+"([^>]*?)>",1)||"")+">");return t.node.rawAttributes(s.get(0))}function k(e){return f(e,"<!DOCTYPE([^>]*?)>",0)||"<!DOCTYPE html>"}function T(i){var n=t.clean.html(i||"",[],[],t.opts.fullPage);if(t.opts.fullPage){var s=C(n,"body")||(n.indexOf("<body")>=0?"":n),o=E(n,"body"),r=C(n,"head")||"<title></title>",a=E(n,"head"),l=e("<div>").append(r).contents().each(function(){(this.nodeType==Node.COMMENT_NODE||["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName)>=0)&&this.parentNode.removeChild(this)}).end().html().trim();r=e("<div>").append(r).contents().map(function(){return this.nodeType==Node.COMMENT_NODE?"\x3c!--"+this.nodeValue+"--\x3e":["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName)>=0?this.outerHTML:""}).toArray().join("");var c=k(n),d=E(n,"html");t.$el.html(l+"\n"+s),t.node.clearAttributes(t.el),t.$el.attr(o),t.$el.addClass("fr-view"),t.$el.attr("spellcheck",t.opts.spellcheck),t.$el.attr("dir",t.opts.direction),t.$head.html(r),t.node.clearAttributes(t.$head.get(0)),t.$head.attr(a),t.node.clearAttributes(t.$html.get(0)),t.$html.attr(d),t.iframe_document.doctype.parentNode.replaceChild(m(c,t.iframe_document),t.iframe_document.doctype)}else t.$el.html(n);var u=t.edit.isDisabled();t.edit.on(),t.core.injectStyle(t.opts.iframeStyle),w(),t.opts.useClasses||(t.$el.find("[fr-original-class]").each(function(){this.setAttribute("class",this.getAttribute("fr-original-class")),this.removeAttribute("fr-original-class")}),t.$el.find("[fr-original-style]").each(function(){this.setAttribute("style",this.getAttribute("fr-original-style")),this.removeAttribute("fr-original-style")})),u&&t.edit.off(),t.events.trigger("html.set")}function _(e,i){if(!t.$wp)return t.$oel.clone().removeClass("fr-view").removeAttr("contenteditable").get(0).outerHTML;var n="";t.events.trigger("html.beforeGet");var s,o=[],r={};if(!t.opts.useClasses&&!i){var a=new RegExp("^"+t.opts.htmlIgnoreCSSProperties.join("$|^")+"$","gi");for(s=0;s<t.doc.styleSheets.length;s++){var l,c=0;try{l=t.doc.styleSheets[s].cssRules,t.doc.styleSheets[s].ownerNode&&"STYLE"==t.doc.styleSheets[s].ownerNode.nodeType&&(c=1)}catch(e){}if(l)for(var d=0,u=l.length;d<u;d++)if(l[d].selectorText&&l[d].style.cssText.length>0){var h,p=l[d].selectorText.replace(/body |\.fr-view /g,"").replace(/::/g,":");try{h=t.el.querySelectorAll(p)}catch(e){h=[]}for(var f=0;f<h.length;f++){!h[f].getAttribute("fr-original-style")&&h[f].getAttribute("style")?(h[f].setAttribute("fr-original-style",h[f].getAttribute("style")),o.push(h[f])):h[f].getAttribute("fr-original-style")||o.push(h[f]),r[h[f]]||(r[h[f]]={});for(var m=1e3*c+function(e){var t=/(#[^\s\+>~\.\[:]+)/g,i=/(\[[^\]]+\])/g,n=/(\.[^\s\+>~\.\[:]+)/g,s=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,o=/(:[\w-]+\([^\)]*\))/gi,r=/(:[^\s\+>~\.\[:]+)/g,a=/([^\s\+>~\.\[:]+)/g;!function(){var t=/:not\(([^\)]*)\)/g;t.test(e)&&(e=e.replace(t,"     $1 "))}();var l=100*(e.match(t)||[]).length+10*(e.match(i)||[]).length+10*(e.match(n)||[]).length+10*(e.match(o)||[]).length+10*(e.match(r)||[]).length+(e.match(s)||[]).length;return e=e.replace(/[\*\s\+>~]/g," "),e=e.replace(/[#\.]/g," "),l+=(e.match(a)||[]).length}(l[d].selectorText),v=l[d].style.cssText.split(";"),b=0;b<v.length;b++){
var y=v[b].trim().split(":")[0];y.match(a)||(r[h[f]][y]||(r[h[f]][y]=0,(h[f].getAttribute("fr-original-style")||"").indexOf(y+":")>=0&&(r[h[f]][y]=1e4)),m>=r[h[f]][y]&&(r[h[f]][y]=m,v[b].trim().length&&(h[f].style[y.trim()]=v[b].trim().split(":")[1].trim())))}}}}for(s=0;s<o.length;s++)if(o[s].getAttribute("class")&&(o[s].setAttribute("fr-original-class",o[s].getAttribute("class")),o[s].removeAttribute("class")),(o[s].getAttribute("fr-original-style")||"").trim().length>0)for(var w=o[s].getAttribute("fr-original-style").split(";"),f=0;f<w.length;f++)w[f].indexOf(":")>0&&(o[s].style[w[f].split(":")[0].trim()]=w[f].split(":")[1].trim())}if(t.core.isEmpty()?t.opts.fullPage&&(n=g(t.iframe_document),n+="<html"+t.node.attributes(t.$html.get(0))+">"+t.$html.find("head").get(0).outerHTML+"<body></body></html>"):(void 0===e&&(e=!1),t.opts.fullPage?(n=g(t.iframe_document),t.$el.removeClass("fr-view"),n+="<html"+t.node.attributes(t.$html.get(0))+">"+t.$html.html()+"</html>",t.$el.addClass("fr-view")):n=t.$el.html()),!t.opts.useClasses&&!i)for(s=0;s<o.length;s++)o[s].getAttribute("fr-original-class")&&(o[s].setAttribute("class",o[s].getAttribute("fr-original-class")),o[s].removeAttribute("fr-original-class")),o[s].getAttribute("fr-original-style")?(o[s].setAttribute("style",o[s].getAttribute("fr-original-style")),o[s].removeAttribute("fr-original-style")):o[s].removeAttribute("style");t.opts.fullPage&&(n=n.replace(/<style data-fr-style="true">(?:[\w\W]*?)<\/style>/g,""),n=n.replace(/<link([^>]*)data-fr-style="true"([^>]*)>/g,""),n=n.replace(/<style(?:[\w\W]*?)class="firebugResetStyles"(?:[\w\W]*?)>(?:[\w\W]*?)<\/style>/g,""),n=n.replace(/<body((?:[\w\W]*?)) spellcheck="true"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>"),n=n.replace(/<body((?:[\w\W]*?)) contenteditable="(true|false)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>"),n=n.replace(/<body((?:[\w\W]*?)) dir="([\w]*)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>"),n=n.replace(/<body((?:[\w\W]*?))class="([\w\W]*?)(fr-rtl|fr-ltr)([\w\W]*?)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,'<body$1class="$2$4"$5>$6</body>'),n=n.replace(/<body((?:[\w\W]*?)) class=""((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>")),t.opts.htmlSimpleAmpersand&&(n=n.replace(/\&amp;/gi,"&")),t.events.trigger("html.afterGet"),e||(n=n.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,"")),n=t.clean.invisibleSpaces(n);var x=t.events.chainTrigger("html.get",n);return"string"==typeof x&&(n=x),n=n.replace(/<pre(?:[\w\W]*?)>(?:[\w\W]*?)<\/pre>/g,function(e){return e.replace(/<br>/g,"\n")})}function S(){var i="";if(void 0!==t.win.getSelection){t.browser.mozilla&&(t.selection.save(),t.$el.find('.fr-marker[data-type="false"]').length>1&&(t.$el.find('.fr-marker[data-type="false"][data-id="0"]').remove(),t.$el.find('.fr-marker[data-type="false"]:last').attr("data-id","0"),t.$el.find(".fr-marker").not('[data-id="0"]').remove()),t.selection.restore());for(var n=t.selection.ranges(),s=0;s<n.length;s++){var o=document.createElement("div");o.appendChild(n[s].cloneContents()),function(i,n){for(;n&&(n.nodeType==Node.TEXT_NODE||!t.node.isBlock(n))&&!t.node.isElement(n);)n&&n.nodeType!=Node.TEXT_NODE&&e(i).wrapInner(t.node.openTagString(n)+t.node.closeTagString(n)),n=n.parentNode;n&&i.innerHTML==n.innerHTML&&(i.innerHTML=n.outerHTML)}(o,function(){var i,n=null;return t.win.getSelection?(i=t.win.getSelection())&&i.rangeCount&&(n=i.getRangeAt(0).commonAncestorContainer,n.nodeType!=Node.ELEMENT_NODE&&(n=n.parentNode)):(i=t.doc.selection)&&"Control"!=i.type&&(n=i.createRange().parentElement()),null!=n&&(e.inArray(t.el,e(n).parents())>=0||n==t.el)?n:null}()),e(o).find(".fr-element").length>0&&(o=t.el),i+=o.innerHTML}}else void 0!==t.doc.selection&&"Text"==t.doc.selection.type&&(i=t.doc.selection.createRange().htmlText);return i}function D(e){var i=t.doc.createElement("div");return i.innerHTML=e,null!==i.querySelector(o())}function $(e){var i=t.doc.createElement("div");return i.innerHTML=e,t.selection.setAtEnd(i),i.innerHTML}function M(e){return e.replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/"/gi,"&quot;").replace(/'/gi,"&#39;")}function A(e,i,n){t.selection.isCollapsed()||t.selection.remove();var s;if(s=i?e:t.clean.html(e),s=s.replace(/\r|\n/g," "),e.indexOf('class="fr-marker"')<0&&(s=$(s)),t.core.isEmpty()&&!t.opts.keepFormatOnDelete)t.el.innerHTML=s;else{var o=t.markers.insert();if(o){var r=t.node.blockParent(o);if((D(s)||n)&&(t.node.deepestParent(o)||r&&"LI"==r.tagName)){var o=t.markers.split();if(!o)return!1;o.outerHTML=s}else o.outerHTML=s}else t.el.innerHTML=t.el.innerHTML+s}w(),t.events.trigger("html.inserted")}function O(i){var n=null;if(void 0===i&&(n=t.selection.element()),t.opts.keepFormatOnDelete)return!1;var s=n?(n.textContent.match(/\u200B/g)||[]).length-n.querySelectorAll(".fr-marker").length:0;if((t.el.textContent.match(/\u200B/g)||[]).length-t.el.querySelectorAll(".fr-marker").length==s)return!1;var o,r;do{r=!1,o=t.el.querySelectorAll("*:not(.fr-marker)");for(var a=0;a<o.length;a++){var l=o[a];if(n!=l){var c=l.textContent;0===l.children.length&&1===c.length&&8203==c.charCodeAt(0)&&(e(l).remove(),r=!0)}}}while(r)}function F(){var e=function(){O(),t.placeholder&&t.placeholder.refresh()};t.events.on("mouseup",e),t.events.on("keydown",e),t.events.on("contentChanged",x)}return{defaultTag:i,emptyBlocks:n,emptyBlockTagsQuery:s,blockTagsQuery:o,fillEmptyBlocks:u,cleanEmptyTags:r,cleanWhiteTags:O,cleanBlankSpaces:p,blocks:h,getDoctype:g,set:T,get:_,getSelected:S,insert:A,wrap:c,unwrap:d,escapeEntities:M,checkIfEmpty:x,extractNode:C,extractNodeAttrs:E,extractDoctype:k,cleanBRs:y,_init:F}},e.extend(e.FE.DEFAULTS,{height:null,heightMax:null,heightMin:null,width:null}),e.FE.MODULES.size=function(e){function t(){i(),e.opts.height&&e.$el.css("minHeight",e.opts.height-e.helpers.getPX(e.$el.css("padding-top"))-e.helpers.getPX(e.$el.css("padding-bottom"))),e.$iframe.height(e.$el.outerHeight(!0))}function i(){e.opts.heightMin?e.$el.css("minHeight",e.opts.heightMin):e.$el.css("minHeight",""),e.opts.heightMax?(e.$wp.css("maxHeight",e.opts.heightMax),e.$wp.css("overflow","auto")):(e.$wp.css("maxHeight",""),e.$wp.css("overflow","")),e.opts.height?(e.$wp.height(e.opts.height),e.$el.css("minHeight",e.opts.height-e.helpers.getPX(e.$el.css("padding-top"))-e.helpers.getPX(e.$el.css("padding-bottom"))),e.$wp.css("overflow","auto")):(e.$wp.css("height",""),e.opts.heightMin||e.$el.css("minHeight",""),e.opts.heightMax||e.$wp.css("overflow","")),e.opts.width&&e.$box.width(e.opts.width)}function n(){return!!e.$wp&&(i(),void(e.$iframe&&(e.events.on("keyup",t),e.events.on("commands.after",t),e.events.on("html.set",t),e.events.on("init",t),e.events.on("initialized",t))))}return{_init:n,syncIframe:t,refresh:i}},e.extend(e.FE.DEFAULTS,{language:null}),e.FE.LANGUAGE={},e.FE.MODULES.language=function(t){function i(e){return s&&s.translation[e]?s.translation[e]:e}function n(){e.FE.LANGUAGE&&(s=e.FE.LANGUAGE[t.opts.language]),s&&s.direction&&(t.opts.direction=s.direction)}var s;return{_init:n,translate:i}},e.extend(e.FE.DEFAULTS,{placeholderText:"Type something"}),e.FE.MODULES.placeholder=function(t){function i(){t.$placeholder||r();var i=0,n=0,s=0,o=0,a=0,l=0,c=t.node.contents(t.el),d=e(t.selection.element()).css("text-align");if(c.length&&c[0].nodeType==Node.ELEMENT_NODE){var u=e(c[0]);!t.opts.toolbarInline&&t.ready&&(i=t.helpers.getPX(u.css("margin-top")),o=t.helpers.getPX(u.css("padding-top")),n=t.helpers.getPX(u.css("margin-left")),s=t.helpers.getPX(u.css("margin-right")),a=t.helpers.getPX(u.css("padding-left")),l=t.helpers.getPX(u.css("padding-right"))),t.$placeholder.css("font-size",u.css("font-size")),t.$placeholder.css("line-height",u.css("line-height"))}else t.$placeholder.css("font-size",t.$el.css("font-size")),t.$placeholder.css("line-height",t.$el.css("line-height"));t.$wp.addClass("show-placeholder"),t.$placeholder.css({marginTop:Math.max(t.helpers.getPX(t.$el.css("margin-top")),i),paddingTop:Math.max(t.helpers.getPX(t.$el.css("padding-top")),o),paddingLeft:Math.max(t.helpers.getPX(t.$el.css("padding-left")),a),marginLeft:Math.max(t.helpers.getPX(t.$el.css("margin-left")),n),paddingRight:Math.max(t.helpers.getPX(t.$el.css("padding-right")),l),marginRight:Math.max(t.helpers.getPX(t.$el.css("margin-right")),s),textAlign:d}).text(t.language.translate(t.opts.placeholderText||t.$oel.attr("placeholder")||"")),t.$placeholder.html(t.$placeholder.text().replace(/\n/g,"<br>"))}function n(){t.$wp.removeClass("show-placeholder")}function s(){return!t.$wp||t.node.hasClass(t.$wp.get(0),"show-placeholder")}function o(){return!!t.$wp&&void(t.core.isEmpty()?i():n())}function r(){t.$placeholder=e('<span class="fr-placeholder"></span>'),t.$wp.append(t.$placeholder)}function a(){return!!t.$wp&&void t.events.on("init input keydown keyup contentChanged initialized",o)}return{_init:a,show:i,hide:n,refresh:o,isVisible:s}},e.FE.MODULES.edit=function(e){function t(){if(e.browser.mozilla)try{e.doc.execCommand("enableObjectResizing",!1,"false"),e.doc.execCommand("enableInlineTableEditing",!1,"false")}catch(e){}if(e.browser.msie)try{e.doc.body.addEventListener("mscontrolselect",function(e){return e.preventDefault(),!1})}catch(e){}}function i(){e.$wp?(e.$el.attr("contenteditable",!0),e.$el.removeClass("fr-disabled").attr("aria-disabled",!1),e.$tb&&e.$tb.removeClass("fr-disabled").attr("aria-disabled",!1),t()):e.$el.is("a")&&e.$el.attr("contenteditable",!0),o=!1}function n(){e.$wp?(e.$el.attr("contenteditable",!1),e.$el.addClass("fr-disabled").attr("aria-disabled",!0),e.$tb&&e.$tb.addClass("fr-disabled").attr("aria-disabled",!0)):e.$el.is("a")&&e.$el.attr("contenteditable",!1),o=!0}function s(){return o}var o=!1;return{on:i,off:n,disableDesign:t,isDisabled:s}},e.extend(e.FE.DEFAULTS,{editorClass:null,typingTimer:500,iframe:!1,requestWithCORS:!0,requestWithCredentials:!1,requestHeaders:{},useClasses:!0,spellcheck:!0,iframeStyle:'html{margin:0px;height:auto;}body{height:auto;padding:10px;background:transparent;color:#000000;position:relative;z-index: 2;-webkit-user-select:auto;margin:0px;overflow:hidden;min-height:20px;}body:after{content:"";display:block;clear:both;}',iframeStyleFiles:[],direction:"auto",zIndex:1,disableRightClick:!1,scrollableContainer:"body",keepFormatOnDelete:!1,theme:null}),e.FE.MODULES.core=function(t){function i(i){if(t.opts.iframe){t.$head.find("style[data-fr-style], link[data-fr-style]").remove(),t.$head.append('<style data-fr-style="true">'+i+"</style>");for(var n=0;n<t.opts.iframeStyleFiles.length;n++){var s=e('<link data-fr-style="true" rel="stylesheet" href="'+t.opts.iframeStyleFiles[n]+'">');s.get(0).addEventListener("load",t.size.syncIframe),t.$head.append(s)}}}function n(){t.opts.iframe||t.$el.addClass("fr-element fr-view")}function s(){if(t.$box.addClass("fr-box"+(t.opts.editorClass?" "+t.opts.editorClass:"")),t.$wp.addClass("fr-wrapper"),n(),t.opts.iframe){t.$iframe.addClass("fr-iframe"),t.$el.addClass("fr-view");for(var e=0;e<t.o_doc.styleSheets.length;e++){var i;try{i=t.o_doc.styleSheets[e].cssRules}catch(e){}if(i)for(var s=0,o=i.length;s<o;s++)!i[s].selectorText||0!==i[s].selectorText.indexOf(".fr-view")&&0!==i[s].selectorText.indexOf(".fr-element")||i[s].style.cssText.length>0&&(0===i[s].selectorText.indexOf(".fr-view")?t.opts.iframeStyle+=i[s].selectorText.replace(/\.fr-view/g,"body")+"{"+i[s].style.cssText+"}":t.opts.iframeStyle+=i[s].selectorText.replace(/\.fr-element/g,"body")+"{"+i[s].style.cssText+"}")}}"auto"!=t.opts.direction&&t.$box.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),t.$el.attr("dir",t.opts.direction),t.$wp.attr("dir",t.opts.direction),t.opts.zIndex>1&&t.$box.css("z-index",t.opts.zIndex),t.opts.theme&&t.$box.addClass(t.opts.theme+"-theme")}function o(){return t.node.isEmpty(t.el)}function r(){t.drag_support={filereader:"undefined"!=typeof FileReader,formdata:!!t.win.FormData,progress:"upload"in new XMLHttpRequest}}function a(e,i){var n=new XMLHttpRequest;n.open(i,e,!0),t.opts.requestWithCredentials&&(n.withCredentials=!0);for(var s in t.opts.requestHeaders)t.opts.requestHeaders.hasOwnProperty(s)&&n.setRequestHeader(s,t.opts.requestHeaders[s]);return n}function l(e){"TEXTAREA"==t.$oel.get(0).tagName&&t.$oel.val(e),t.$wp&&("TEXTAREA"==t.$oel.get(0).tagName?(t.$el.html(""),t.$wp.html(""),t.$box.replaceWith(t.$oel),t.$oel.show()):(t.$wp.replaceWith(e),t.$el.html(""),t.$box.removeClass("fr-view fr-ltr fr-box "+(t.opts.editorClass||"")),t.opts.theme&&t.$box.addClass(t.opts.theme+"-theme"))),this.$wp=null,this.$el=null,this.el=null,this.$box=null}function c(){return t.browser.mozilla&&t.helpers.isMobile()?t.selection.inEditor():t.node.hasFocus(t.el)||t.$el.find("*:focus").length>0}function d(e){if(!e)return!1;var i=e.data("instance");return!!i&&i.id==t.id}function u(){if(e.FE.INSTANCES.push(t),r(),t.$wp){s(),t.html.set(t._original_html),t.$el.attr("spellcheck",t.opts.spellcheck),t.helpers.isMobile()&&(t.$el.attr("autocomplete",t.opts.spellcheck?"on":"off"),t.$el.attr("autocorrect",t.opts.spellcheck?"on":"off"),t.$el.attr("autocapitalize",t.opts.spellcheck?"on":"off")),t.opts.disableRightClick&&t.events.$on(t.$el,"contextmenu",function(e){if(2==e.button)return!1});try{t.doc.execCommand("styleWithCSS",!1,!1)}catch(e){}}t.events.on("drop",function(e){e.preventDefault(),e.stopPropagation()}),"TEXTAREA"==t.$oel.get(0).tagName&&(t.events.on("contentChanged",function(){t.$oel.val(t.html.get())}),t.events.on("form.submit",function(){t.$oel.val(t.html.get())}),t.events.on("form.reset",function(){t.html.set(t._original_html)}),t.$oel.val(t.html.get())),t.helpers.isIOS()&&t.events.$on(t.$doc,"selectionchange",function(){t.$doc.get(0).hasFocus()||t.$win.get(0).focus()}),t.events.trigger("init")}return{_init:u,destroy:l,isEmpty:o,getXHR:a,injectStyle:i,hasFocus:c,sameInstance:d}},e.FE.MODULES.cursorLists=function(t){function i(e){for(var t=e;"LI"!=t.tagName;)t=t.parentNode;return t}function n(e){for(var i=e;!t.node.isList(i);)i=i.parentNode;return i}function s(s){var o,r=i(s),a=r.nextSibling,l=r.previousSibling,c=t.html.defaultTag();if(t.node.isEmpty(r,!0)&&a){for(var d="",u="",h=s.parentNode;!t.node.isList(h)&&h.parentNode&&"LI"!==h.parentNode.tagName;)d=t.node.openTagString(h)+d,u+=t.node.closeTagString(h),h=h.parentNode;d=t.node.openTagString(h)+d,u+=t.node.closeTagString(h);var p="";for(p=h.parentNode&&"LI"==h.parentNode.tagName?u+"<li>"+e.FE.MARKERS+"<br>"+d:c?u+"<"+c+">"+e.FE.MARKERS+"<br></"+c+">"+d:u+e.FE.MARKERS+"<br>"+d,e(r).html('<span id="fr-break"></span>');["UL","OL"].indexOf(h.tagName)<0||h.parentNode&&"LI"===h.parentNode.tagName;)h=h.parentNode;var f=t.node.openTagString(h)+e(h).html()+t.node.closeTagString(h);f=f.replace(/<span id="fr-break"><\/span>/g,p),e(h).replaceWith(f),t.$el.find("li:empty").remove()}else l&&a||!t.node.isEmpty(r,!0)?(e(r).before("<li><br></li>"),e(s).remove()):l?(o=n(r),o.parentNode&&"LI"==o.parentNode.tagName?e(o.parentNode).after("<li>"+e.FE.MARKERS+"<br></li>"):c?e(o).after("<"+c+">"+e.FE.MARKERS+"<br></"+c+">"):e(o).after(e.FE.MARKERS+"<br>"),e(r).remove()):(o=n(r),o.parentNode&&"LI"==o.parentNode.tagName?a?e(o.parentNode).before("<li>"+e.FE.MARKERS+"<br></li>"):e(o.parentNode).after("<li>"+e.FE.MARKERS+"<br></li>"):c?e(o).before("<"+c+">"+e.FE.MARKERS+"<br></"+c+">"):e(o).before(e.FE.MARKERS+"<br>"),e(r).remove())}function o(n){for(var s=i(n),o="",r=n,a="",l="";r!=s;){r=r.parentNode;var c="A"==r.tagName&&t.cursor.isAtEnd(n,r)?"fr-to-remove":"";a=t.node.openTagString(e(r).clone().addClass(c).get(0))+a,l=t.node.closeTagString(r)+l}o=l+o+a+e.FE.MARKERS,e(n).replaceWith('<span id="fr-break"></span>');var d=t.node.openTagString(s)+e(s).html()+t.node.closeTagString(s);d=d.replace(/<span id="fr-break"><\/span>/g,o),e(s).replaceWith(d)}function r(n){for(var s=i(n),o=e.FE.MARKERS,r="",a=n,l=!1;a!=s;){a=a.parentNode;var c="A"==a.tagName&&t.cursor.isAtEnd(n,a)?"fr-to-remove":"";l||a==s||t.node.isBlock(a)||(l=!0,r+=e.FE.INVISIBLE_SPACE),r=t.node.openTagString(e(a).clone().addClass(c).get(0))+r,o+=t.node.closeTagString(a)}var d=r+o;e(n).remove(),e(s).after(d)}function a(s){var o=i(s),r=o.previousSibling;if(r){r=e(r).find(t.html.blockTagsQuery()).get(-1)||r,e(s).replaceWith(e.FE.MARKERS);var a=t.node.contents(r);a.length&&"BR"==a[a.length-1].tagName&&e(a[a.length-1]).remove(),e(o).find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==o&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))});for(var l,c=t.node.contents(o)[0];c&&!t.node.isList(c);)l=c.nextSibling,e(r).append(c),c=l;for(r=o.previousSibling;c;)l=c.nextSibling,e(r).append(c),c=l;e(o).remove()}else{var d=n(o);if(e(s).replaceWith(e.FE.MARKERS),d.parentNode&&"LI"==d.parentNode.tagName){var u=d.previousSibling;t.node.isBlock(u)?(e(o).find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==o&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))}),e(u).append(e(o).html())):e(d).before(e(o).html())}else{var h=t.html.defaultTag();h&&0===e(o).find(t.html.blockTagsQuery()).length?e(d).before("<"+h+">"+e(o).html()+"</"+h+">"):e(d).before(e(o).html())}e(o).remove(),0===e(d).find("li").length&&e(d).remove()}}function l(n){var s,o=i(n),r=o.nextSibling;if(r){s=t.node.contents(r),s.length&&"BR"==s[0].tagName&&e(s[0]).remove(),e(r).find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==r&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))});for(var a,l=n,c=t.node.contents(r)[0];c&&!t.node.isList(c);)a=c.nextSibling,e(l).after(c),l=c,c=a;for(;c;)a=c.nextSibling,e(o).append(c),c=a;e(n).replaceWith(e.FE.MARKERS),e(r).remove()}else{for(var d=o;!d.nextSibling&&d!=t.el;)d=d.parentNode;if(d==t.el)return!1;if(d=d.nextSibling,t.node.isBlock(d))e.FE.NO_DELETE_TAGS.indexOf(d.tagName)<0&&(e(n).replaceWith(e.FE.MARKERS),s=t.node.contents(o),s.length&&"BR"==s[s.length-1].tagName&&e(s[s.length-1]).remove(),e(o).append(e(d).html()),e(d).remove());else for(s=t.node.contents(o),s.length&&"BR"==s[s.length-1].tagName&&e(s[s.length-1]).remove(),e(n).replaceWith(e.FE.MARKERS);d&&!t.node.isBlock(d)&&"BR"!=d.tagName;)e(o).append(e(d)),d=d.nextSibling}}return{_startEnter:s,_middleEnter:o,_endEnter:r,_backspace:a,_del:l}},e.FE.NO_DELETE_TAGS=["TH","TD","TR","TABLE","FORM"],e.FE.SIMPLE_ENTER_TAGS=["TH","TD","LI","DL","DT","FORM"],e.FE.MODULES.cursor=function(t){function i(e){return!!e&&(!!t.node.isBlock(e)||(e.nextSibling&&e.nextSibling.nodeType==Node.TEXT_NODE&&0==e.nextSibling.textContent.replace(/\u200b/g,"").length?i(e.nextSibling):!e.nextSibling&&i(e.parentNode)))}function n(e){return!!e&&(!!t.node.isBlock(e)||(e.previousSibling&&e.previousSibling.nodeType==Node.TEXT_NODE&&0==e.previousSibling.textContent.replace(/\u200b/g,"").length?n(e.previousSibling):!e.previousSibling&&n(e.parentNode)))}function s(e,i){return!!e&&e!=t.$wp.get(0)&&(e.previousSibling&&e.previousSibling.nodeType==Node.TEXT_NODE&&0==e.previousSibling.textContent.replace(/\u200b/g,"").length?s(e.previousSibling,i):!e.previousSibling&&(e.parentNode==i||s(e.parentNode,i)))}function o(e,i){return!!e&&e!=t.$wp.get(0)&&(e.nextSibling&&e.nextSibling.nodeType==Node.TEXT_NODE&&0==e.nextSibling.textContent.replace(/\u200b/g,"").length?o(e.nextSibling,i):!e.nextSibling&&(e.parentNode==i||o(e.parentNode,i)))}function r(i){return e(i).parentsUntil(t.$el,"LI").length>0&&0===e(i).parentsUntil("LI","TABLE").length}function a(i){var n=e(i).parentsUntil(t.$el,"BLOCKQUOTE").length>0,s=t.node.deepestParent(i,[],!n);if(s&&"BLOCKQUOTE"==s.tagName){var o=t.node.deepestParent(i,[e(i).parentsUntil(t.$el,"BLOCKQUOTE").get(0)]);o&&o.previousSibling&&(s=o)}if(null!==s){var r,a=s.previousSibling;if(t.node.isBlock(s)&&t.node.isEditable(s)&&a&&e.FE.NO_DELETE_TAGS.indexOf(a.tagName)<0)if(t.node.isDeletable(a))e(a).remove(),e(i).replaceWith(e.FE.MARKERS);else if(t.node.isEditable(a))if(t.node.isBlock(a))if(t.node.isEmpty(a)&&!t.node.isList(a))e(a).remove();else{if(t.node.isList(a)&&(a=e(a).find("li:last").get(0)),r=t.node.contents(a),r.length&&"BR"==r[r.length-1].tagName&&e(r[r.length-1]).remove(),"BLOCKQUOTE"==a.tagName&&"BLOCKQUOTE"!=s.tagName)for(r=t.node.contents(a);r.length&&t.node.isBlock(r[r.length-1]);)a=r[r.length-1],r=t.node.contents(a);else if("BLOCKQUOTE"!=a.tagName&&"BLOCKQUOTE"==s.tagName)for(r=t.node.contents(s);r.length&&t.node.isBlock(r[0]);)s=r[0],r=t.node.contents(s);e(i).replaceWith(e.FE.MARKERS),e(a).append(t.node.isEmpty(s)?e.FE.MARKERS:s.innerHTML),e(s).remove()}else e(i).replaceWith(e.FE.MARKERS),"BLOCKQUOTE"==s.tagName&&a.nodeType==Node.ELEMENT_NODE?e(a).remove():(e(a).after(t.node.isEmpty(s)?"":e(s).html()),e(s).remove(),"BR"==a.tagName&&e(a).remove())}}function l(i){for(var n=i;!n.previousSibling;)if(n=n.parentNode,t.node.isElement(n))return!1;n=n.previousSibling;var s;if(!t.node.isBlock(n)&&t.node.isEditable(n)){for(s=t.node.contents(n);n.nodeType!=Node.TEXT_NODE&&!t.node.isDeletable(n)&&s.length&&t.node.isEditable(n);)n=s[s.length-1],s=t.node.contents(n);if(n.nodeType==Node.TEXT_NODE){if(t.helpers.isIOS())return!0;var o=n.textContent,r=o.length-1;if(t.opts.tabSpaces&&o.length>=t.opts.tabSpaces){0==o.substr(o.length-t.opts.tabSpaces,o.length-1).replace(/ /g,"").replace(new RegExp(e.FE.UNICODE_NBSP,"g"),"").length&&(r=o.length-t.opts.tabSpaces)}n.textContent=o.substring(0,r),n.textContent.length&&55357==n.textContent.charCodeAt(n.textContent.length-1)&&(n.textContent=n.textContent.substr(0,n.textContent.length-1));var a=o.length!=n.textContent.length;0==n.textContent.length?a&&t.opts.keepFormatOnDelete?e(n).after(e.FE.INVISIBLE_SPACE+e.FE.MARKERS):2!=n.parentNode.childNodes.length||n.parentNode!=i.parentNode||t.node.isBlock(n.parentNode)||t.node.isElement(n.parentNode)?(e(n).after(e.FE.MARKERS),t.node.isElement(n.parentNode)&&!i.nextSibling&&n.previousSibling&&"BR"==n.previousSibling.tagName&&e(i).after("<br>"),n.parentNode.removeChild(n)):(e(n.parentNode).after(e.FE.MARKERS),e(n.parentNode).remove()):e(n).after(e.FE.MARKERS)}else t.node.isDeletable(n)?(e(n).after(e.FE.MARKERS),e(n).remove()):!1!==t.events.trigger("node.remove",[e(n)])&&(e(n).after(e.FE.MARKERS),e(n).remove())}else if(e.FE.NO_DELETE_TAGS.indexOf(n.tagName)<0&&(t.node.isEditable(n)||t.node.isDeletable(n)))if(t.node.isDeletable(n))e(i).replaceWith(e.FE.MARKERS),e(n).remove();else if(t.node.isEmpty(n)&&!t.node.isList(n))e(n).remove(),e(i).replaceWith(e.FE.MARKERS);else{for(t.node.isList(n)&&(n=e(n).find("li:last").get(0)),s=t.node.contents(n),s&&"BR"==s[s.length-1].tagName&&e(s[s.length-1]).remove(),s=t.node.contents(n);s&&t.node.isBlock(s[s.length-1]);)n=s[s.length-1],s=t.node.contents(n);e(n).append(e.FE.MARKERS);for(var l=i;!l.previousSibling;)l=l.parentNode;for(;l&&"BR"!==l.tagName&&!t.node.isBlock(l);){var c=l;l=l.nextSibling,e(n).append(c)}l&&"BR"==l.tagName&&e(l).remove(),e(i).remove()}else i.nextSibling&&"BR"==i.nextSibling.tagName&&e(i.nextSibling).remove()}function c(){var o=!1,c=t.markers.insert();if(!c)return!0;t.el.normalize();var d=c.previousSibling;if(d){var u=d.textContent;u&&u.length&&8203==u.charCodeAt(u.length-1)&&(1==u.length?e(d).remove():(d.textContent=d.textContent.substr(0,u.length-1),d.textContent.length&&55357==d.textContent.charCodeAt(d.textContent.length-1)&&(d.textContent=d.textContent.substr(0,d.textContent.length-1))))}return i(c)?o=l(c):n(c)?r(c)&&s(c,e(c).parents("li:first").get(0))?t.cursorLists._backspace(c):a(c):o=l(c),e(c).remove(),p(),t.html.fillEmptyBlocks(!0),t.html.cleanEmptyTags(),t.clean.quotes(),t.clean.lists(),t.spaces.normalizeAroundCursor(),t.selection.restore(),o}function d(i){var n=e(i).parentsUntil(t.$el,"BLOCKQUOTE").length>0,s=t.node.deepestParent(i,[],!n);if(s&&"BLOCKQUOTE"==s.tagName){var o=t.node.deepestParent(i,[e(i).parentsUntil(t.$el,"BLOCKQUOTE").get(0)]);o&&o.nextSibling&&(s=o)}if(null!==s){var r,a=s.nextSibling;if(t.node.isBlock(s)&&(t.node.isEditable(s)||t.node.isDeletable(s))&&a&&e.FE.NO_DELETE_TAGS.indexOf(a.tagName)<0)if(t.node.isDeletable(a))e(a).remove(),e(i).replaceWith(e.FE.MARKERS);else if(t.node.isBlock(a)&&t.node.isEditable(a))if(t.node.isList(a))if(t.node.isEmpty(s,!0))e(s).remove(),e(a).find("li:first").prepend(e.FE.MARKERS);else{var l=e(a).find("li:first");"BLOCKQUOTE"==s.tagName&&(r=t.node.contents(s),r.length&&t.node.isBlock(r[r.length-1])&&(s=r[r.length-1])),0===l.find("ul, ol").length&&(e(i).replaceWith(e.FE.MARKERS),l.find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==l.get(0)&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))}),e(s).append(t.node.contents(l.get(0))),l.remove(),0===e(a).find("li").length&&e(a).remove())}else{if(r=t.node.contents(a),r.length&&"BR"==r[0].tagName&&e(r[0]).remove(),"BLOCKQUOTE"!=a.tagName&&"BLOCKQUOTE"==s.tagName)for(r=t.node.contents(s);r.length&&t.node.isBlock(r[r.length-1]);)s=r[r.length-1],r=t.node.contents(s);else if("BLOCKQUOTE"==a.tagName&&"BLOCKQUOTE"!=s.tagName)for(r=t.node.contents(a);r.length&&t.node.isBlock(r[0]);)a=r[0],r=t.node.contents(a);e(i).replaceWith(e.FE.MARKERS),e(s).append(a.innerHTML),e(a).remove()}else{for(e(i).replaceWith(e.FE.MARKERS);a&&"BR"!==a.tagName&&!t.node.isBlock(a)&&t.node.isEditable(a);){var c=a;a=a.nextSibling,e(s).append(c)}a&&"BR"==a.tagName&&t.node.isEditable(a)&&e(a).remove()}}}function u(n){for(var s=n;!s.nextSibling;)if(s=s.parentNode,t.node.isElement(s))return!1;if(s=s.nextSibling,"BR"==s.tagName&&t.node.isEditable(s))if(s.nextSibling){if(t.node.isBlock(s.nextSibling)&&t.node.isEditable(s.nextSibling)){if(!(e.FE.NO_DELETE_TAGS.indexOf(s.nextSibling.tagName)<0))return void e(s).remove();s=s.nextSibling,e(s.previousSibling).remove()}}else if(i(s)){if(r(n))t.cursorLists._del(n);else{var o=t.node.deepestParent(s);o&&(e(s).remove(),d(n))}return}var a;if(!t.node.isBlock(s)&&t.node.isEditable(s)){for(a=t.node.contents(s);s.nodeType!=Node.TEXT_NODE&&a.length&&!t.node.isDeletable(s)&&t.node.isEditable(s);)s=a[0],a=t.node.contents(s);s.nodeType==Node.TEXT_NODE?(e(s).before(e.FE.MARKERS),s.textContent.length&&55357==s.textContent.charCodeAt(0)?s.textContent=s.textContent.substring(2,s.textContent.length):s.textContent=s.textContent.substring(1,s.textContent.length)):t.node.isDeletable(s)?(e(s).before(e.FE.MARKERS),e(s).remove()):!1!==t.events.trigger("node.remove",[e(s)])&&(e(s).before(e.FE.MARKERS),e(s).remove()),e(n).remove()}else if(e.FE.NO_DELETE_TAGS.indexOf(s.tagName)<0&&(t.node.isEditable(s)||t.node.isDeletable(s)))if(t.node.isDeletable(s))e(n).replaceWith(e.FE.MARKERS),e(s).remove();else if(t.node.isList(s))n.previousSibling?(e(s).find("li:first").prepend(n),t.cursorLists._backspace(n)):(e(s).find("li:first").prepend(e.FE.MARKERS),e(n).remove());else if(a=t.node.contents(s),a&&"BR"==a[0].tagName&&e(a[0]).remove(),a&&"BLOCKQUOTE"==s.tagName){var l=a[0];for(e(n).before(e.FE.MARKERS);l&&"BR"!=l.tagName;){var c=l;l=l.nextSibling,e(n).before(c)}l&&"BR"==l.tagName&&e(l).remove()}else e(n).after(e(s).html()).after(e.FE.MARKERS),e(s).remove()}function h(){var s=t.markers.insert();if(!s)return!1;if(t.el.normalize(),i(s))if(r(s))if(0===e(s).parents("li:first").find("ul, ol").length)t.cursorLists._del(s);else{var o=e(s).parents("li:first").find("ul:first, ol:first").find("li:first");o=o.find(t.html.blockTagsQuery()).get(-1)||o,o.prepend(s),t.cursorLists._backspace(s)}else d(s);else u((n(s),s));e(s).remove(),p(),t.html.fillEmptyBlocks(!0),t.html.cleanEmptyTags(),t.clean.quotes(),t.clean.lists(),t.spaces.normalizeAroundCursor(),t.selection.restore()}function p(){for(var e=t.el.querySelectorAll("blockquote:empty"),i=0;i<e.length;i++)e[i].parentNode.removeChild(e[i])}function f(){t.$el.find(".fr-to-remove").each(function(){for(var i=t.node.contents(this),n=0;n<i.length;n++)i[n].nodeType==Node.TEXT_NODE&&(i[n].textContent=i[n].textContent.replace(/\u200B/g,""));e(this).replaceWith(this.innerHTML)})}function m(i,n,s){var r,a=t.node.deepestParent(i,[],!s);if(a&&"BLOCKQUOTE"==a.tagName)return o(i,a)?(r=t.html.defaultTag(),r?e(a).after("<"+r+">"+e.FE.MARKERS+"<br></"+r+">"):e(a).after(e.FE.MARKERS+"<br>"),e(i).remove(),!1):(v(i,n,s),!1);if(null==a)r=t.html.defaultTag(),r&&t.node.isElement(i.parentNode)?e(i).replaceWith("<"+r+">"+e.FE.MARKERS+"<br></"+r+">"):e(i).replaceWith((t.node.isEmpty(i.parentNode,!0)?"":"<br/>")+e.FE.MARKERS+"<br/>");else{var l=i,c="";t.node.isBlock(a)&&!n||(c="<br/>");var d="",u="";r=t.html.defaultTag();var h="",p="";r&&t.node.isBlock(a)&&(h="<"+r+">",p="</"+r+">",a.tagName==r.toUpperCase()&&(h=t.node.openTagString(e(a).clone().removeAttr("id").get(0))));do{if(l=l.parentNode,!n||l!=a||n&&!t.node.isBlock(a))if(d+=t.node.closeTagString(l),l==a&&t.node.isBlock(a))u=h+u;else{var f="A"==l.tagName&&o(i,l)?"fr-to-remove":"";u=t.node.openTagString(e(l).clone().addClass(f).get(0))+u}}while(l!=a);c=d+c+u+(i.parentNode==a&&t.node.isBlock(a)?"":e.FE.INVISIBLE_SPACE)+e.FE.MARKERS,t.node.isBlock(a)&&!e(a).find("*:last").is("br")&&e(a).append("<br/>"),e(i).after('<span id="fr-break"></span>'),e(i).remove(),a.nextSibling&&!t.node.isBlock(a.nextSibling)||t.node.isBlock(a)||e(a).after("<br>");var m;m=!n&&t.node.isBlock(a)?t.node.openTagString(a)+e(a).html()+p:t.node.openTagString(a)+e(a).html()+t.node.closeTagString(a),m=m.replace(/<span id="fr-break"><\/span>/g,c),e(a).replaceWith(m)}}function g(i,n,r){var a,l=t.node.deepestParent(i,[],!r);if(l&&"TABLE"==l.tagName)return e(l).find("td:first, th:first").prepend(i),g(i,n,r);if(l&&"BLOCKQUOTE"==l.tagName){if(s(i,l))return a=t.html.defaultTag(),a?e(l).before("<"+a+">"+e.FE.MARKERS+"<br></"+a+">"):e(l).before(e.FE.MARKERS+"<br>"),e(i).remove(),!1;o(i,l)?m(i,n,!0):v(i,n,!0)}if(null==l)a=t.html.defaultTag(),a&&t.node.isElement(i.parentNode)?e(i).replaceWith("<"+a+">"+e.FE.MARKERS+"<br></"+a+">"):e(i).replaceWith("<br>"+e.FE.MARKERS);else{if(t.node.isBlock(l))if(n)e(i).remove(),e(l).prepend("<br>"+e.FE.MARKERS);else{if(t.node.isEmpty(l,!0))return m(i,n,r);e(l).before(t.node.openTagString(e(l).clone().removeAttr("id").get(0))+"<br>"+t.node.closeTagString(l))}else e(l).before("<br>");e(i).remove()}}function v(i,n,r){var a=t.node.deepestParent(i,[],!r);if(null==a)t.html.defaultTag()&&i.parentNode===t.el?e(i).replaceWith("<"+t.html.defaultTag()+">"+e.FE.MARKERS+"<br></"+t.html.defaultTag()+">"):(i.nextSibling&&!t.node.isBlock(i.nextSibling)||e(i).after("<br>"),e(i).replaceWith("<br>"+e.FE.MARKERS));else{var l=i,c="";"PRE"==a.tagName&&(n=!0),t.node.isBlock(a)&&!n||(c="<br>");var d="",u="";do{var h=l;if(l=l.parentNode,"BLOCKQUOTE"==a.tagName&&t.node.isEmpty(h)&&!t.node.hasClass(h,"fr-marker")&&e(h).find(i).length>0&&e(h).after(i),("BLOCKQUOTE"!=a.tagName||!o(i,l)&&!s(i,l))&&(!n||l!=a||n&&!t.node.isBlock(a))){d+=t.node.closeTagString(l);var p="A"==l.tagName&&o(i,l)?"fr-to-remove":"";u=t.node.openTagString(e(l).clone().addClass(p).removeAttr("id").get(0))+u}}while(l!=a);var f=a==i.parentNode&&t.node.isBlock(a)||i.nextSibling;if("BLOCKQUOTE"==a.tagName){i.previousSibling&&t.node.isBlock(i.previousSibling)&&i.nextSibling&&"BR"==i.nextSibling.tagName&&(e(i.nextSibling).after(i),i.nextSibling&&"BR"==i.nextSibling.tagName&&e(i.nextSibling).remove());var m=t.html.defaultTag();c=d+c+(m?"<"+m+">":"")+e.FE.MARKERS+"<br>"+(m?"</"+m+">":"")+u}else c=d+c+u+(f?"":e.FE.INVISIBLE_SPACE)+e.FE.MARKERS;e(i).replaceWith('<span id="fr-break"></span>');var g=t.node.openTagString(a)+e(a).html()+t.node.closeTagString(a);g=g.replace(/<span id="fr-break"><\/span>/g,c),e(a).replaceWith(g)}}function b(s){var o=t.markers.insert();if(!o)return!0;t.el.normalize();var a=!1;e(o).parentsUntil(t.$el,"BLOCKQUOTE").length>0&&(s=!1,a=!0),e(o).parentsUntil(t.$el,"TD, TH").length&&(a=!1),i(o)?!r(o)||s||a?m(o,s,a):t.cursorLists._endEnter(o):n(o)?!r(o)||s||a?g(o,s,a):t.cursorLists._startEnter(o):!r(o)||s||a?v(o,s,a):t.cursorLists._middleEnter(o),f(),t.html.fillEmptyBlocks(!0),t.html.cleanEmptyTags(),t.clean.lists(),t.spaces.normalizeAroundCursor(),t.selection.restore()}return{enter:b,backspace:c,del:h,isAtEnd:o,isAtStart:s}},e.FE.ENTER_P=0,e.FE.ENTER_DIV=1,e.FE.ENTER_BR=2,e.FE.KEYCODE={
BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,FF_HYPHEN:173,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,HYPHEN:189,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221},e.extend(e.FE.DEFAULTS,{enter:e.FE.ENTER_P,multiLine:!0,tabSpaces:0}),e.FE.MODULES.keys=function(t){function i(e){t.opts.multiLine?t.helpers.isIOS()||(e.preventDefault(),e.stopPropagation(),t.selection.isCollapsed()||t.selection.remove(),t.cursor.enter()):(e.preventDefault(),e.stopPropagation())}function n(e){e.preventDefault(),e.stopPropagation(),t.opts.multiLine&&(t.selection.isCollapsed()||t.selection.remove(),t.cursor.enter(!0))}function s(e){t.selection.isCollapsed()?t.cursor.backspace()||(e.preventDefault(),e.stopPropagation(),T=!1):(e.preventDefault(),e.stopPropagation(),t.selection.remove(),t.html.fillEmptyBlocks(),T=!1),t.placeholder.refresh()}function o(e){e.preventDefault(),e.stopPropagation(),""===t.selection.text()?t.cursor.del():t.selection.remove(),t.placeholder.refresh()}function r(i){var n=t.selection.element();if(!t.helpers.isMobile()&&(t.browser.mozilla||n&&"A"==n.tagName)){i.preventDefault(),i.stopPropagation(),t.selection.isCollapsed()||t.selection.remove();var s=t.markers.insert();if(s){var o=s.previousSibling;!s.nextSibling&&s.parentNode&&"A"==s.parentNode.tagName?(s.parentNode.insertAdjacentHTML("afterend","&nbsp;"+e.FE.MARKERS),s.parentNode.removeChild(s)):(o&&o.nodeType==Node.TEXT_NODE&&1==o.textContent.length&&160==o.textContent.charCodeAt(0)?o.textContent=o.textContent+" ":s.insertAdjacentHTML("beforebegin","&nbsp;"),s.outerHTML=e.FE.MARKERS),t.selection.restore()}}}function a(){if(t.browser.mozilla&&t.selection.isCollapsed()&&!D){var e=t.selection.ranges(0),i=e.startContainer,n=e.startOffset;i&&i.nodeType==Node.TEXT_NODE&&n<=i.textContent.length&&n>0&&32==i.textContent.charCodeAt(n-1)&&(t.selection.save(),t.spaces.normalize(),t.selection.restore())}}function l(){t.selection.isFull()&&setTimeout(function(){var i=t.html.defaultTag();i?t.$el.html("<"+i+">"+e.FE.MARKERS+"<br/></"+i+">"):t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore(),t.placeholder.refresh(),t.button.bulkRefresh(),t.undo.saveStep()},0)}function c(e){if(t.opts.tabSpaces>0)if(t.selection.isCollapsed()){t.undo.saveStep(),e.preventDefault(),e.stopPropagation();for(var i="",n=0;n<t.opts.tabSpaces;n++)i+="&nbsp;";t.html.insert(i),t.placeholder.refresh(),t.undo.saveStep()}else e.preventDefault(),e.stopPropagation(),e.shiftKey?t.commands.outdent():t.commands.indent()}function d(e){D=!1}function u(){return D}function h(a){t.events.disableBlur(),T=!0;var l=a.which;if(16===l)return!0;if(229===l)return D=!0,!0;D=!1;var d=y(l)&&!v(a),u=l==e.FE.KEYCODE.BACKSPACE||l==e.FE.KEYCODE.DELETE;if((t.selection.isFull()&&!t.opts.keepFormatOnDelete&&!t.placeholder.isVisible()||u&&t.placeholder.isVisible()&&t.opts.keepFormatOnDelete)&&(d||u)){var h=t.html.defaultTag();if(h?t.$el.html("<"+h+">"+e.FE.MARKERS+"<br/></"+h+">"):t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore(),!y(l))return a.preventDefault(),!0}l==e.FE.KEYCODE.ENTER?a.shiftKey?n(a):i(a):l!=e.FE.KEYCODE.BACKSPACE||v(a)||a.altKey?l!=e.FE.KEYCODE.DELETE||v(a)||a.altKey?l==e.FE.KEYCODE.SPACE?r(a):l==e.FE.KEYCODE.TAB?c(a):v(a)||!y(a.which)||t.selection.isCollapsed()||a.ctrlKey||t.selection.remove():t.placeholder.isVisible()?(a.preventDefault(),a.stopPropagation()):o(a):t.placeholder.isVisible()?(a.preventDefault(),a.stopPropagation()):s(a),t.events.enableBlur()}function p(e){for(var i=t.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,t.node.filter(function(e){return/\u200B/gi.test(e.textContent)}),!1);i.nextNode();){var n=i.currentNode;n.textContent=n.textContent.replace(/\u200B/gi,"")}}function f(){if(!t.$wp)return!0;var i;t.opts.height||t.opts.heightMax?(i=t.position.getBoundingRect().top,t.helpers.isIOS()&&(i-=e(t.o_win).scrollTop()),t.opts.iframe&&(i+=t.$iframe.offset().top),i>t.$wp.offset().top-e(t.o_win).scrollTop()+t.$wp.height()-20&&t.$wp.scrollTop(i+t.$wp.scrollTop()-(t.$wp.height()+t.$wp.offset().top)+e(t.o_win).scrollTop()+20)):(i=t.position.getBoundingRect().top,t.opts.toolbarBottom&&(i+=t.opts.toolbarStickyOffset),t.helpers.isIOS()&&(i-=e(t.o_win).scrollTop()),t.opts.iframe&&(i+=t.$iframe.offset().top),i+=t.opts.toolbarStickyOffset,i>t.o_win.innerHeight-20&&e(t.o_win).scrollTop(i+e(t.o_win).scrollTop()-t.o_win.innerHeight+20),i=t.position.getBoundingRect().top,t.opts.toolbarBottom||(i-=t.opts.toolbarStickyOffset),t.helpers.isIOS()&&(i-=e(t.o_win).scrollTop()),t.opts.iframe&&(i+=t.$iframe.offset().top),i<t.$tb.height()+20&&e(t.o_win).scrollTop(i+e(t.o_win).scrollTop()-t.$tb.height()-20))}function m(){var i=t.selection.element(),n=t.node.blockParent(i);if(n&&"DIV"==n.tagName&&t.selection.info(n).atStart){var s=t.html.defaultTag();n.previousSibling&&"DIV"!=n.previousSibling.tagName&&s&&"div"!=s&&(t.selection.save(),e(n).replaceWith("<"+s+">"+n.innerHTML+"</"+s+">"),t.selection.restore())}}function g(i){if(D)return D=!1,!1;if(!t.selection.isCollapsed())return!0;if(i&&(i.which===e.FE.KEYCODE.META||i.which==e.FE.KEYCODE.CTRL))return!0;if(i&&b(i.which))return!0;i&&i.which==e.FE.KEYCODE.ENTER&&t.helpers.isIOS()&&m(),i&&(i.which==e.FE.KEYCODE.ENTER||i.which==e.FE.KEYCODE.BACKSPACE||i.which>=37&&i.which<=40&&!t.browser.msie)&&(i.which==e.FE.KEYCODE.BACKSPACE&&T||f()),t.html.cleanBRs(!0,!0);var n=t.selection.element();(function(e){if(!e)return!1;var t=e.innerHTML;return!!((t=t.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,""))&&/\u200B/.test(t)&&t.replace(/\u200B/gi,"").length>0)})(n)&&!t.node.hasClass(n,"fr-marker")&&"IFRAME"!=n.tagName&&function(e){var i=/[\u3041-\u3096\u30A0-\u30FF\u4E00-\u9FFF\u3130-\u318F\uAC00-\uD7AF]/gi;return!t.helpers.isIOS()||0===((e.textContent||"").match(i)||[]).length}(n)&&(t.selection.save(),p(n),t.selection.restore())}function v(e){if(-1!=navigator.userAgent.indexOf("Mac OS X")){if(e.metaKey&&!e.altKey)return!0}else if(e.ctrlKey&&!e.altKey)return!0;return!1}function b(t){if(t>=e.FE.KEYCODE.ARROW_LEFT&&t<=e.FE.KEYCODE.ARROW_DOWN)return!0}function y(i){if(i>=e.FE.KEYCODE.ZERO&&i<=e.FE.KEYCODE.NINE)return!0;if(i>=e.FE.KEYCODE.NUM_ZERO&&i<=e.FE.KEYCODE.NUM_MULTIPLY)return!0;if(i>=e.FE.KEYCODE.A&&i<=e.FE.KEYCODE.Z)return!0;if(t.browser.webkit&&0===i)return!0;switch(i){case e.FE.KEYCODE.SPACE:case e.FE.KEYCODE.QUESTION_MARK:case e.FE.KEYCODE.NUM_PLUS:case e.FE.KEYCODE.NUM_MINUS:case e.FE.KEYCODE.NUM_PERIOD:case e.FE.KEYCODE.NUM_DIVISION:case e.FE.KEYCODE.SEMICOLON:case e.FE.KEYCODE.FF_SEMICOLON:case e.FE.KEYCODE.DASH:case e.FE.KEYCODE.EQUALS:case e.FE.KEYCODE.FF_EQUALS:case e.FE.KEYCODE.COMMA:case e.FE.KEYCODE.PERIOD:case e.FE.KEYCODE.SLASH:case e.FE.KEYCODE.APOSTROPHE:case e.FE.KEYCODE.SINGLE_QUOTE:case e.FE.KEYCODE.OPEN_SQUARE_BRACKET:case e.FE.KEYCODE.BACKSLASH:case e.FE.KEYCODE.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}function w(i){var n=i.which;return!!(v(i)||n>=37&&n<=40||!y(n)&&n!=e.FE.KEYCODE.DELETE&&n!=e.FE.KEYCODE.BACKSPACE&&n!=e.FE.KEYCODE.ENTER)||(_||(S=t.snapshot.get()),clearTimeout(_),void(_=setTimeout(function(){_=null,t.undo.saveStep()},Math.max(250,t.opts.typingTimer))))}function x(e){var i=e.which;return!!(v(e)||i>=37&&i<=40)||void(S&&_&&(t.undo.saveStep(S),S=null))}function C(){_&&(clearTimeout(_),t.undo.saveStep(),S=null)}function E(t){var i=t.which;return v(t)||i==e.FE.KEYCODE.F5}function k(){if(t.events.on("keydown",w),t.events.on("input",a),t.events.on("keyup input",x),t.events.on("keypress",d),t.events.on("keydown",h),t.events.on("keyup",g),t.events.on("html.inserted",g),t.events.on("cut",l),t.el.msGetInputContext)try{t.el.msGetInputContext().addEventListener("MSCandidateWindowShow",function(){D=!0}),t.el.msGetInputContext().addEventListener("MSCandidateWindowHide",function(){D=!1,g()})}catch(e){}}var T,_,S,D=!1;return{_init:k,ctrlKey:v,isCharacter:y,isArrow:b,forceUndo:C,isIME:u,isBrowserAction:E}},e.FE.MODULES.accessibility=function(t){function i(e){e&&e.length&&(e.data("blur-event-set")||e.parents(".fr-popup").length||(t.events.$on(e,"blur",function(i){var n=e.parents(".fr-toolbar, .fr-popup").data("instance")||t;n.events.blurActive()&&n.events.trigger("blur"),n.events.enableBlur()},!0),e.data("blur-event-set",!0)),t.events.disableBlur(),e.focus(),t.shared.$f_el=e)}function n(e,t){var n=t?"last":"first",s=e.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible")[n]();if(s.length)return i(s),!0}function s(e){return e.is("input, textarea")&&r(),t.events.disableBlur(),e.focus(),!0}function o(e,i){var n=e.find("input, textarea, button, select").filter(":visible").not(":disabled").filter(i?":last":":first");if(n.length)return s(n);if(t.shared.with_kb){var o=e.find(".fr-active-item:visible:first");if(o.length)return s(o);var r=e.find("[tabIndex]:visible:first");if(r.length)return s(r)}}function r(){0===t.$el.find(".fr-marker").length&&t.core.hasFocus()&&t.selection.save()}function a(e){e.$el.find(".fr-marker").length&&(e.events.disableBlur(),e.selection.restore(),e.events.enableBlur())}function l(e){var i=e.children().not(".fr-buttons");i.data("mouseenter-event-set")||(t.events.$on(i,"mouseenter","[tabIndex]",function(n){var s=e.data("instance")||t;if(!M)return n.stopPropagation(),void n.preventDefault();var o=i.find(":focus:first");o.length&&!o.is("input, button")&&(s.events.disableBlur(),o.blur(),s.events.disableBlur(),s.events.focus())}),i.data("mouseenter-event-set",!0)),!o(i)&&t.shared.with_kb&&n(e.find(".fr-buttons"))}function c(){var e=t.popups.areVisible();if(e){var i=e.find(".fr-buttons");return i.find("button:focus, .fr-group span:focus").length?!n(e.data("instance").$tb):!n(i)}return!n(t.$tb)}function d(){var e=null;return t.shared.$f_el.is(".fr-dropdown.fr-active")?e=t.shared.$f_el:t.shared.$f_el.closest(".fr-dropdown-menu").prev().is(".fr-dropdown.fr-active")&&(e=t.shared.$f_el.closest(".fr-dropdown-menu").prev()),e}function u(s,r,a){if(t.shared.$f_el){var l=d();l&&(t.button.click(l),t.shared.$f_el=l);var c=s.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible"),u=c.index(t.shared.$f_el);if(0==u&&!a||u==c.length-1&&a){var h;if(r){if(s.parent().is(".fr-popup")){h=!o(s.parent().children().not(".fr-buttons"),!a)}!1===h&&(t.shared.$f_el=null)}r&&!1===h||n(s,!a)}else i(e(c.get(u+(a?1:-1))));return!1}}function h(e,t){return u(e,t,!0)}function p(e,t){return u(e,t)}function f(e){if(t.shared.$f_el){if(t.shared.$f_el.is(".fr-dropdown.fr-active")){var n;return n=e?t.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").first():t.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").last(),i(n),!1}if(t.shared.$f_el.is("a.fr-command")){var n;return n=e?t.shared.$f_el.closest("li").nextAll(":visible:first").find(".fr-command:not(.fr-disabled)").first():t.shared.$f_el.closest("li").prevAll(":visible:first").find(".fr-command:not(.fr-disabled)").first(),n.length||(n=e?t.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").first():t.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").last()),i(n),!1}}}function m(){return t.shared.$f_el&&t.shared.$f_el.is(".fr-dropdown:not(.fr-active)")?v():f(!0)}function g(){return f()}function v(){if(t.shared.$f_el){if(t.shared.$f_el.hasClass("fr-dropdown"))t.button.click(t.shared.$f_el);else if(t.shared.$f_el.is("button.fr-back")){t.opts.toolbarInline&&(t.events.disableBlur(),t.events.focus());var e=t.popups.areVisible(t);e&&(t.shared.with_kb=!1),t.button.click(t.shared.$f_el),k(e)}else{if(t.events.disableBlur(),t.button.click(t.shared.$f_el),t.shared.$f_el.attr("data-popup")){var i=t.popups.areVisible(t);i&&i.data("popup-button",t.shared.$f_el)}else if(t.shared.$f_el.attr("data-modal")){var n=t.modals.areVisible(t);n&&n.data("modal-button",t.shared.$f_el)}t.shared.$f_el=null}return!1}}function b(){t.shared.$f_el&&(t.events.disableBlur(),t.shared.$f_el.blur(),t.shared.$f_el=null),t.events.disableBlur(),t.events.focus()}function y(e){if(t.shared.$f_el){var n=d();return n?(t.button.click(n),i(n)):e.parent().find(".fr-back:visible").length?(t.shared.with_kb=!1,t.opts.toolbarInline&&(t.events.disableBlur(),t.events.focus()),t.button.exec(e.parent().find(".fr-back:visible:first")),k(e.parent())):t.shared.$f_el.is("button, .fr-group span")&&(e.parent().is(".fr-popup")?(a(t),t.shared.$f_el=null,!1!==t.events.trigger("toolbar.esc")&&(t.popups.hide(e.parent()),t.opts.toolbarInline&&t.toolbar.showInline(null,!0),k(e.parent()))):b()),!1}}function w(i,n){var s=-1!=navigator.userAgent.indexOf("Mac OS X")?i.metaKey:i.ctrlKey,o=i.which,r=!1;return o!=e.FE.KEYCODE.TAB||s||i.shiftKey||i.altKey?o!=e.FE.KEYCODE.ARROW_RIGHT||s||i.shiftKey||i.altKey?o!=e.FE.KEYCODE.TAB||s||!i.shiftKey||i.altKey?o!=e.FE.KEYCODE.ARROW_LEFT||s||i.shiftKey||i.altKey?o!=e.FE.KEYCODE.ARROW_UP||s||i.shiftKey||i.altKey?o!=e.FE.KEYCODE.ARROW_DOWN||s||i.shiftKey||i.altKey?o!=e.FE.KEYCODE.ENTER||s||i.shiftKey||i.altKey?o!=e.FE.KEYCODE.ESC||s||i.shiftKey||i.altKey?o!=e.FE.KEYCODE.F10||s||i.shiftKey||!i.altKey||(r=c()):r=y(n):r=v():r=m():r=g():r=p(n):r=p(n,!0):r=h(n):r=h(n,!0),t.shared.$f_el||void 0!==r||(r=!0),!r&&t.keys.isBrowserAction(i)&&(r=!0),!!r||(i.preventDefault(),i.stopPropagation(),!1)}function x(i){i&&i.length&&(t.events.$on(i,"keydown",function(n){if(!e(n.target).is("a.fr-command, button.fr-command, .fr-group span.fr-command"))return!0;var s=i.parents(".fr-popup").data("instance")||i.data("instance")||t;t.shared.with_kb=!0;var o=s.accessibility.exec(n,i);return t.shared.with_kb=!1,o},!0),t.events.$on(i,"mouseenter","[tabIndex]",function(n){var s=i.parents(".fr-popup").data("instance")||i.data("instance")||t;if(!M)return n.stopPropagation(),void n.preventDefault();var o=e(n.currentTarget);s.shared.$f_el&&s.shared.$f_el.not(o)&&s.accessibility.focusEditor()},!0))}function C(e){var i=t.popups.get(e),n=E(e);x(i.find(".fr-buttons")),t.events.$on(i,"mouseenter","tabIndex",n._tiMouseenter,!0),t.events.$on(i.children().not(".fr-buttons"),"keydown","[tabIndex]",n._tiKeydown,!0),t.popups.onHide(e,function(){a(i.data("instance")||t)}),t.popups.onShow(e,function(){M=!1,setTimeout(function(){M=!0},0)})}function E(i){var s=t.popups.get(i);return{_tiKeydown:function(r){var l=s.data("instance")||t;if(!1===l.events.trigger("popup.tab",[r]))return!1;var c=r.which,d=s.find(":focus:first");if(e.FE.KEYCODE.TAB==c){r.preventDefault();var u=s.children().not(".fr-buttons"),h=u.find("input, textarea, button, select").filter(":visible").not(".fr-no-touch input, .fr-no-touch textarea, .fr-no-touch button, .fr-no-touch select, :disabled").toArray(),p=h.indexOf(this)+(r.shiftKey?-1:1);if(0<=p&&p<h.length)return l.events.disableBlur(),e(h[p]).focus(),r.stopPropagation(),!1;var f=s.find(".fr-buttons");if(f.length&&n(f,!!r.shiftKey))return r.stopPropagation(),!1;if(o(u))return r.stopPropagation(),!1}else{if(e.FE.KEYCODE.ENTER!=c)return e.FE.KEYCODE.ESC==c?(r.preventDefault(),r.stopPropagation(),a(l),l.popups.isVisible(i)&&s.find(".fr-back:visible").length?(l.opts.toolbarInline&&(l.events.disableBlur(),l.events.focus()),l.button.exec(s.find(".fr-back:visible:first")),k(s)):l.popups.isVisible(i)&&s.find(".fr-dismiss:visible").length?l.button.exec(s.find(".fr-dismiss:visible:first")):(l.popups.hide(i),l.opts.toolbarInline&&l.toolbar.showInline(null,!0),k(s)),!1):e.FE.KEYCODE.SPACE==c&&(d.is(".fr-submit")||d.is(".fr-dismiss"))?(r.preventDefault(),r.stopPropagation(),l.events.disableBlur(),l.button.exec(d),!0):l.keys.isBrowserAction(r)?void r.stopPropagation():d.is("input[type=text], textarea")?void r.stopPropagation():e.FE.KEYCODE.SPACE==c&&(d.is(".fr-link-attr")||d.is("input[type=file]"))?void r.stopPropagation():(r.stopPropagation(),r.preventDefault(),!1);var m=null;s.find(".fr-submit:visible").length>0?m=s.find(".fr-submit:visible:first"):s.find(".fr-dismiss:visible").length&&(m=s.find(".fr-dismiss:visible:first")),m&&(r.preventDefault(),r.stopPropagation(),l.events.disableBlur(),l.button.exec(m))}},_tiMouseenter:function(e){S(s.data("instance")||t)}}}function k(e){var t=e.data("popup-button");t&&setTimeout(function(){i(t),e.data("popup-button",null)},0)}function T(e){var t=e.data("modal-button");t&&setTimeout(function(){i(t),e.data("modal-button",null)},0)}function _(){return null!=t.shared.$f_el}function S(e){var i=t.popups.areVisible(e);i&&i.data("popup-button",null)}function D(i){var n=-1!=navigator.userAgent.indexOf("Mac OS X")?i.metaKey:i.ctrlKey;if(i.which==e.FE.KEYCODE.F10&&!n&&!i.shiftKey&&i.altKey){t.shared.with_kb=!0;var s=t.popups.areVisible(t),r=!1;return s&&(r=o(s.children().not(".fr-buttons"))),r||c(),t.shared.with_kb=!1,i.preventDefault(),i.stopPropagation(),!1}return!0}function $(){t.$wp?t.events.on("keydown",D,!0):t.events.$on(t.$win,"keydown",D,!0),t.events.on("mousedown",function(e){S(t),t.shared.$f_el&&(a(t),e.stopPropagation(),t.events.disableBlur(),t.shared.$f_el=null)},!0),t.events.on("blur",function(e){t.shared.$f_el=null,S(t)},!0)}var M=!0;return{_init:$,registerPopup:C,registerToolbar:x,focusToolbarElement:i,focusToolbar:n,focusContent:o,focusPopup:l,focusEditor:b,focusPopupButton:k,focusModalButton:T,hasFocus:_,exec:w,saveSelection:r,restoreSelection:a}},e.FE.MODULES.format=function(t){function i(e,t){var i="<"+e;for(var n in t)t.hasOwnProperty(n)&&(i+=" "+n+'="'+t[n]+'"');return i+=">"}function n(e){return"</"+e+">"}function s(e,t){var i=e;for(var n in t)t.hasOwnProperty(n)&&(e+="id"==n?"#"+t[n]:"class"==n?"."+t[n]:"["+n+'="'+t[n]+'"]');return i}function o(e,t){return!(!e||e.nodeType!=Node.ELEMENT_NODE)&&(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}function r(n,s,o){if(n){if(t.node.isBlock(n))return r(n.firstChild,s,o),!1;for(var a=e(i(s,o)).insertBefore(n),l=n;l&&!e(l).is(".fr-marker")&&0==e(l).find(".fr-marker").length;){var c=l;l=l.nextSibling,a.append(c)}if(l)e(l).find(".fr-marker").length&&r(l.firstChild,s,o);else{for(var d=a.get(0).parentNode;d&&!d.nextSibling&&!t.node.isElement(d);)d=d.parentNode;if(d){var u=d.nextSibling;u&&(t.node.isBlock(u)?r(u.firstChild,s,o):r(u,s,o))}}a.is(":empty")&&a.remove()}}function a(a,l){if(void 0===l&&(l={}),l.style&&delete l.style,t.selection.isCollapsed()){t.markers.insert();t.$el.find(".fr-marker").replaceWith(i(a,l)+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+n(a)),t.selection.restore()}else{t.selection.save();r(t.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling,a,l);var c;do{c=t.$el.find(s(a,l)+" > "+s(a,l)),c.each(function(){e(this).replaceWith(this.innerHTML)})}while(c.length);t.el.normalize();for(var d=t.el.querySelectorAll(".fr-marker"),u=0;u<d.length;u++){var h=e(d[u]);1==h.data("type")?o(h.get(0).nextSibling,s(a,l))&&h.next().prepend(h):o(h.get(0).previousSibling,s(a,l))&&h.prev().append(h)}t.selection.restore()}}function l(e,i,n,r){if(!r){var a=!1;if(!0===e.data("type"))for(;t.node.isFirstSibling(e.get(0))&&!e.parent().is(t.$el);)e.parent().before(e),a=!0;else if(!1===e.data("type"))for(;t.node.isLastSibling(e.get(0))&&!e.parent().is(t.$el);)e.parent().after(e),a=!0;if(a)return!0}if(e.parents(i).length||void 0===i){var l="",c="",d=e.parent();if(d.is(t.$el)||t.node.isBlock(d.get(0)))return!1;for(;void 0===i&&!t.node.isBlock(d.parent().get(0))||void 0!==i&&!o(d.get(0),s(i,n));)l+=t.node.closeTagString(d.get(0)),c=t.node.openTagString(d.get(0))+c,d=d.parent();var u=e.get(0).outerHTML;e.replaceWith('<span id="mark"></span>');var h=d.html().replace(/<span id="mark"><\/span>/,l+t.node.closeTagString(d.get(0))+c+u+l+t.node.openTagString(d.get(0))+c);return d.replaceWith(t.node.openTagString(d.get(0))+h+t.node.closeTagString(d.get(0))),!0}return!1}function c(i,n,r,a){for(var l=t.node.contents(i.get(0)),d=0;d<l.length;d++){var u=l[d];t.node.hasClass(u,"fr-marker")?n=(n+1)%2:n?e(u).find(".fr-marker").length>0?n=c(e(u),n,r,a):(e(e(u).find(r||"*").get().reverse()).each(function(){t.node.isBlock(this)||t.node.isVoid(this)||e(this).replaceWith(this.innerHTML)}),void 0===r&&u.nodeType==Node.ELEMENT_NODE&&!t.node.isVoid(u)&&!t.node.isBlock(u)||o(u,s(r,a))?e(u).replaceWith(u.innerHTML):void 0===r&&u.nodeType==Node.ELEMENT_NODE&&t.node.isBlock(u)&&e(u).removeAttr("style")):e(u).find(".fr-marker").length>0&&(n=c(e(u),n,r,a))}return n}function d(i,n){void 0===n&&(n={}),n.style&&delete n.style;var s=t.selection.isCollapsed();t.selection.save();for(var o=!0;o;){o=!1;for(var r=t.$el.find(".fr-marker"),a=0;a<r.length;a++)if(l(e(r[a]),i,n,s)){o=!0;break}}c(t.$el,0,i,n),s&&t.$el.find(".fr-marker").before(e.FE.INVISIBLE_SPACE).after(e.FE.INVISIBLE_SPACE),t.html.cleanEmptyTags(),t.el.normalize(),t.selection.restore()}function u(e,t){g(e,t)?d(e,t):a(e,t)}function h(t,i){var n=e(t);n.css(i,""),""===n.attr("style")&&n.replaceWith(n.html())}function p(t,i){return 0===e(t).attr("style").indexOf(i+":")||e(t).attr("style").indexOf(";"+i+":")>=0||e(t).attr("style").indexOf("; "+i+":")>=0}function f(i,n){if(t.selection.isCollapsed()){t.markers.insert();var s=t.$el.find(".fr-marker"),o=s.parent();if(t.node.openTagString(o.get(0))=='<span style="'+i+": "+o.css(i)+';">')if(t.node.isEmpty(o.get(0)))o.replaceWith('<span style="'+i+": "+n+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>");else{var a={};a[i]=n,l(s,"span",a,!0),s=t.$el.find(".fr-marker"),s.replaceWith('<span style="'+i+": "+n+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>")}else t.node.isEmpty(o.get(0))&&o.is("span")?(s.replaceWith(e.FE.MARKERS),o.css(i,n)):s.replaceWith('<span style="'+i+": "+n+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>");t.selection.restore()}else{t.selection.save();for(var c=t.$el.find(".fr-marker"),d=0;d<c.length;d++){var s=e(c[d]);if(!0===s.data("type"))for(;t.node.isFirstSibling(s.get(0))&&!s.parent().is(t.$el);)s.parent().before(s);else for(;t.node.isLastSibling(s.get(0))&&!s.parent().is(t.$el);)s.parent().after(s)}var u=t.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling,f={class:"fr-unprocessed"};for(n&&(f.style=i+": "+n+";"),r(u,"span",f),t.$el.find(".fr-marker + .fr-unprocessed").each(function(){e(this).prepend(e(this).prev())}),t.$el.find(".fr-unprocessed + .fr-marker").each(function(){e(this).prev().append(this)});t.$el.find("span.fr-unprocessed").length>0;){var m=t.$el.find("span.fr-unprocessed:first").removeClass("fr-unprocessed");if(m.parent().get(0).normalize(),m.parent().is("span")&&1==m.parent().get(0).childNodes.length){m.parent().css(i,n);var g=m;m=m.parent(),g.replaceWith(g.html())}for(var v=m.find("span"),d=v.length-1;d>=0;d--)h(v[d],i);var b=m.parentsUntil(t.$el,"span[style]").filter(function(){return p(this,i)});if(b.length){var y="",w="",x="",C="",E=m.get(0);do{E=E.parentNode,e(E).addClass("fr-split"),y+=t.node.closeTagString(E),w=t.node.openTagString(e(E).clone().addClass("fr-split").get(0))+w,b.get(0)!=E&&(x+=t.node.closeTagString(E),C=t.node.openTagString(e(E).clone().addClass("fr-split").get(0))+C)}while(b.get(0)!=E);var k=y+t.node.openTagString(e(b.get(0)).clone().css(i,n||"").get(0))+C+m.css(i,"").get(0).outerHTML+x+"</span>"+w;m.replaceWith('<span id="fr-break"></span>');var T=b.get(0).outerHTML;e(b.get(0)).replaceWith(T.replace(/<span id="fr-break"><\/span>/g,k))}}for(;t.$el.find(".fr-split:empty").length>0;)t.$el.find(".fr-split:empty").remove();t.$el.find(".fr-split").removeClass("fr-split"),t.$el.find('span[style=""]').removeAttr("style"),t.$el.find('span[class=""]').removeAttr("class"),t.html.cleanEmptyTags(),e(t.$el.find("span").get().reverse()).each(function(){this.attributes&&0!=this.attributes.length||e(this).replaceWith(this.innerHTML)}),t.el.normalize();var _=t.$el.find("span[style] + span[style]");for(d=0;d<_.length;d++){var S=e(_[d]),D=e(_[d]).prev();S.get(0).previousSibling==D.get(0)&&t.node.openTagString(S.get(0))==t.node.openTagString(D.get(0))&&(S.prepend(D.html()),D.remove())}t.el.normalize(),t.selection.restore()}}function m(e){f(e,null)}function g(e,i){void 0===i&&(i={}),i.style&&delete i.style;var n=t.selection.ranges(0),r=n.startContainer;r.nodeType==Node.ELEMENT_NODE&&r.childNodes.length>0&&r.childNodes[n.startOffset]&&(r=r.childNodes[n.startOffset]);for(var a=r;a&&a.nodeType==Node.ELEMENT_NODE&&!o(a,s(e,i));)a=a.firstChild;if(a&&a.nodeType==Node.ELEMENT_NODE&&o(a,s(e,i)))return!0;var l=r;for(l&&l.nodeType!=Node.ELEMENT_NODE&&(l=l.parentNode);l&&l.nodeType==Node.ELEMENT_NODE&&l!=t.el&&!o(l,s(e,i));)l=l.parentNode;return!(!l||l.nodeType!=Node.ELEMENT_NODE||l==t.el||!o(l,s(e,i)))}return{is:g,toggle:u,apply:a,remove:d,applyStyle:f,removeStyle:m}},e.FE.COMMANDS={bold:{title:"Bold",toggle:!0,refresh:function(e){var t=this.format.is("strong");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},italic:{title:"Italic",toggle:!0,refresh:function(e){var t=this.format.is("em");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},underline:{title:"Underline",toggle:!0,refresh:function(e){var t=this.format.is("u");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},strikeThrough:{title:"Strikethrough",toggle:!0,refresh:function(e){var t=this.format.is("s");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},subscript:{title:"Subscript",toggle:!0,refresh:function(e){var t=this.format.is("sub");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},superscript:{title:"Superscript",toggle:!0,refresh:function(e){var t=this.format.is("sup");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},outdent:{title:"Decrease Indent"},indent:{title:"Increase Indent"},undo:{title:"Undo",undo:!1,forcedRefresh:!0,disabled:!0},redo:{title:"Redo",undo:!1,forcedRefresh:!0,disabled:!0},insertHR:{title:"Insert Horizontal Line"},clearFormatting:{title:"Clear Formatting"},selectAll:{title:"Select All",undo:!1}},e.FE.RegisterCommand=function(t,i){e.FE.COMMANDS[t]=i},e.FE.MODULES.commands=function(t){function i(i,n){if(!1!==t.events.trigger("commands.before",e.merge([i],n||[]))){var s=e.FE.COMMANDS[i]&&e.FE.COMMANDS[i].callback||r[i],o=!0,a=!1;e.FE.COMMANDS[i]&&(void 0!==e.FE.COMMANDS[i].focus&&(o=e.FE.COMMANDS[i].focus),void 0!==e.FE.COMMANDS[i].accessibilityFocus&&(a=e.FE.COMMANDS[i].accessibilityFocus)),(!t.core.hasFocus()&&o&&!t.popups.areVisible()||!t.core.hasFocus()&&a&&t.accessibility.hasFocus())&&t.events.focus(!0),e.FE.COMMANDS[i]&&!1!==e.FE.COMMANDS[i].undo&&(t.$el.find(".fr-marker").length&&(t.events.disableBlur(),t.selection.restore()),t.undo.saveStep()),s&&s.apply(t,e.merge([i],n||[])),t.events.trigger("commands.after",e.merge([i],n||[])),e.FE.COMMANDS[i]&&!1!==e.FE.COMMANDS[i].undo&&t.undo.saveStep()}}function n(e,i){t.format.toggle(i)}function s(i){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();for(var n=t.selection.blocks(),s=0;s<n.length;s++)if("LI"!=n[s].tagName&&"LI"!=n[s].parentNode.tagName){var o=e(n[s]),r="rtl"==t.opts.direction||"rtl"==o.css("direction")?"margin-right":"margin-left",a=t.helpers.getPX(o.css(r));o.css(r,Math.max(a+20*i,0)||""),o.removeClass("fr-temp-div")}t.selection.save(),t.html.unwrap(),t.selection.restore()}function o(){t.events.on("keydown",function(e){var i=t.selection.element();if(i&&"HR"==i.tagName&&!t.keys.isArrow(e.which))return e.preventDefault(),!1}),t.events.on("keyup",function(i){var n=t.selection.element();if(n&&"HR"==n.tagName)if(i.which==e.FE.KEYCODE.ARROW_LEFT||i.which==e.FE.KEYCODE.ARROW_UP){if(n.previousSibling)return t.node.isBlock(n.previousSibling)?t.selection.setAtEnd(n.previousSibling):e(n).before(e.FE.MARKERS),t.selection.restore(),!1}else if((i.which==e.FE.KEYCODE.ARROW_RIGHT||i.which==e.FE.KEYCODE.ARROW_DOWN)&&n.nextSibling)return t.node.isBlock(n.nextSibling)?t.selection.setAtStart(n.nextSibling):e(n).after(e.FE.MARKERS),t.selection.restore(),!1}),t.events.on("mousedown",function(e){if(e.target&&"HR"==e.target.tagName)return e.preventDefault(),e.stopPropagation(),!1}),t.events.on("mouseup",function(i){var n=t.selection.element();n==t.selection.endElement()&&n&&"HR"==n.tagName&&(n.nextSibling&&(t.node.isBlock(n.nextSibling)?t.selection.setAtStart(n.nextSibling):e(n).after(e.FE.MARKERS)),t.selection.restore())})}var r={bold:function(){n("bold","strong")},subscript:function(){n("subscript","sub")},superscript:function(){n("superscript","sup")},italic:function(){n("italic","em")},strikeThrough:function(){n("strikeThrough","s")},underline:function(){n("underline","u")},undo:function(){t.undo.run()},redo:function(){t.undo.redo()},indent:function(){s(1)},outdent:function(){s(-1)},show:function(){t.opts.toolbarInline&&t.toolbar.showInline(null,!0)},insertHR:function(){t.selection.remove();var e="";t.core.isEmpty()&&(e="<br>",t.html.defaultTag()&&(e="<"+t.html.defaultTag()+">"+e+"</"+t.html.defaultTag()+">")),t.html.insert('<hr id="fr-just">'+e);var i=t.$el.find("hr#fr-just");i.removeAttr("id"),t.selection.setAfter(i.get(0),!1)||t.selection.setBefore(i.get(0),!1),t.selection.restore()},clearFormatting:function(){t.format.remove()},selectAll:function(){t.doc.execCommand("selectAll",!1,!1)}},a={};for(var l in r)r.hasOwnProperty(l)&&(a[l]=function(e){return function(){i(e)}}(l));return e.extend(a,{exec:i,_init:o})},e.FE.MODULES.data=function(e){function t(e){return e}function i(e){if(!e)return e;for(var i="",o=t("charCodeAt"),r=t("fromCharCode"),a=u.indexOf(e[0]),l=1;l<e.length-2;l++){for(var c=n(++a),d=e[o](l),h="";/[0-9-]/.test(e[l+1]);)h+=e[++l];h=parseInt(h,10)||0,d=s(d,c,h),d^=a-1&31,i+=String[r](d)}return i}function n(e){for(var t=e.toString(),i=0,n=0;n<t.length;n++)i+=parseInt(t.charAt(n),10);return i>10?i%9+1:i}function s(e,t,i){for(var n=Math.abs(i);n-- >0;)e-=t;return i<0&&(e+=123),e}function o(e){return!(!e||"none"!=e.css("display")||(e.remove(),0))}function r(){return o(c)||o(d)}function a(){return!!e.$box&&(e.$box.append(p(t(p("")))),c=e.$box.find("> div:last"),d=c.find("> a"),void("rtl"==e.opts.direction&&c.css("left","auto").css("right",0)))}function l(){var i=e.opts.key||[""];"string"==typeof i&&(i=[i]),e.ul=!0;for(var n=0;n<i.length;n++){var s=p(i[n])||"";if(!(s!==p(t(p("mcVRDoB1BGILD7YFe1BTXBA7B6==")))&&s.indexOf(h,s.length-h.length)<0&&[p("9qqG-7amjlwq=="),p("KA3B3C2A6D1D5H5H1A3=="),p("QzbzvxyB2yA-9m=="),p("naamngiA3dA-16xtE-11C-9B1H-8sc==")].indexOf(h)<0)){e.ul=!1;break}}!0===e.ul&&a(),e.events.on("contentChanged",function(){!0===e.ul&&r()&&a()}),e.events.on("destroy",function(){c&&c.length&&c.remove()},!0)}var c,d,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",h=function(){for(var e=0,t=document.domain,i=t.split("."),n="_gd"+(new Date).getTime();e<i.length-1&&-1==document.cookie.indexOf(n+"="+n);)t=i.slice(-1-++e).join("."),document.cookie=n+"="+n+";domain="+t+";";return document.cookie=n+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";",(t||"").replace(/(^\.*)|(\.*$)/g,"")}(),p=t(i);return{_init:l}},e.extend(e.FE.DEFAULTS,{pastePlain:!1,pasteDeniedTags:["colgroup","col"],pasteDeniedAttrs:["class","id","style"],pasteAllowLocalImages:!1}),e.FE.MODULES.paste=function(t){function i(i){e.FE.copied_html=t.html.getSelected(),e.FE.copied_text=e("<div>").html(e.FE.copied_html).text(),"cut"==i.type&&(t.undo.saveStep(),setTimeout(function(){t.selection.save(),t.html.wrap(),t.selection.restore(),t.events.focus(),t.undo.saveStep()},0))}function n(e){if(f)return!1;if(e.originalEvent&&(e=e.originalEvent),!1===t.events.trigger("paste.before",[e]))return e.preventDefault(),!1;if(u=t.$win.scrollTop(),e&&e.clipboardData&&e.clipboardData.getData){var i="",n=e.clipboardData.types;if(t.helpers.isArray(n))for(var o=0;o<n.length;o++)i+=n[o]+";";else i=n;if(h="",
/text\/html/.test(i)?h=e.clipboardData.getData("text/html"):/text\/rtf/.test(i)&&t.browser.safari?h=e.clipboardData.getData("text/rtf"):/text\/plain/.test(i)&&!this.browser.mozilla&&(h=t.html.escapeEntities(e.clipboardData.getData("text/plain")).replace(/\n/g,"<br>")),""!==h)return a(),e.preventDefault&&(e.stopPropagation(),e.preventDefault()),!1;h=null}s()}function s(){t.selection.save(),t.events.disableBlur(),h=null,p?p.html(""):(p=e('<div contenteditable="true" style="position: fixed; top: 0; left: -9999px; height: 100%; width: 0; word-break: break-all; overflow:hidden; z-index: 9999; line-height: 140%;" tabIndex="-1"></div>'),t.$box.after(p),t.events.on("destroy",function(){p.remove()})),p.focus(),t.win.setTimeout(a,1)}function o(e){e=e.replace(/<p(.*?)class="?'?MsoListParagraph"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li>$3</li></ul>"),e=e.replace(/<p(.*?)class="?'?NumberedText"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li>$3</li></ol>"),e=e.replace(/<p(.*?)class="?'?MsoListParagraphCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?NumberedTextCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?MsoListParagraphCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?NumberedTextCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?MsoListBullet"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?MsoListParagraphCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ul>"),e=e.replace(/<p(.*?)class="?'?NumberedTextCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ol>"),e=e.replace(/<span([^<]*?)style="?'?mso-list:Ignore"?'?([\s\S]*?)>([\s\S]*?)<span/gi,"<span><span"),e=e.replace(/<!--\[if \!supportLists\]-->([\s\S]*?)<!--\[endif\]-->/gi,""),e=e.replace(/<!\[if \!supportLists\]>([\s\S]*?)<!\[endif\]>/gi,""),e=e.replace(/(\n|\r| class=(")?Mso[a-zA-Z0-9]+(")?)/gi," "),e=e.replace(/<!--[\s\S]*?-->/gi,""),e=e.replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");for(var i=["style","script","applet","embed","noframes","noscript"],n=0;n<i.length;n++){var s=new RegExp("<"+i[n]+".*?"+i[n]+"(.*?)>","gi");e=e.replace(s,"")}e=e.replace(/&nbsp;/gi," "),e=e.replace(/<td([^>]*)><\/td>/g,"<td$1><br></td>"),e=e.replace(/<th([^>]*)><\/th>/g,"<th$1><br></th>");var o;do{o=e,e=e.replace(/<[^\/>][^>]*><\/[^>]+>/gi,"")}while(e!=o);e=e.replace(/<lilevel([^1])([^>]*)>/gi,'<li data-indent="true"$2>'),e=e.replace(/<lilevel1([^>]*)>/gi,"<li$1>"),e=t.clean.html(e,t.opts.pasteDeniedTags,t.opts.pasteDeniedAttrs),e=e.replace(/<a>(.[^<]+)<\/a>/gi,"$1"),e=e.replace(/<br> */g,"<br>");var r=t.doc.createElement("div");r.innerHTML=e;for(var a=r.querySelectorAll("li[data-indent]"),n=0;n<a.length;n++){var l=a[n],c=l.previousElementSibling;if(c&&"LI"==c.tagName){var d=c.querySelector(":scope > ul, :scope > ol");d||(d=document.createElement("ul"),c.appendChild(d)),d.appendChild(l)}else l.removeAttribute("data-indent")}return t.html.cleanBlankSpaces(r),e=r.innerHTML}function r(e){var i=t.doc.createElement("div");i.innerHTML=e;for(var n=i.querySelectorAll("p, div, h1, h2, h3, h4, h5, h6, pre, blockquote"),s=0;s<n.length;s++){var o=n[s];o.outerHTML="<"+(t.html.defaultTag()||"DIV")+">"+o.innerHTML+"</"+(t.html.defaultTag()||"DIV")+">"}n=i.querySelectorAll("*:not("+"p, div, h1, h2, h3, h4, h5, h6, pre, blockquote, ul, ol, li, table, tbody, thead, tr, td, br, img".split(",").join("):not(")+")");for(var s=n.length-1;s>=0;s--){var o=n[s];o.outerHTML=o.innerHTML}var r=function(e){for(var i=t.node.contents(e),n=0;n<i.length;n++)i[n].nodeType!=Node.TEXT_NODE&&i[n].nodeType!=Node.ELEMENT_NODE?i[n].parentNode.removeChild(i[n]):r(i[n])};return r(i),i.innerHTML}function a(){t.keys.forceUndo();var i=t.snapshot.get();null===h&&(h=p.get(0).innerHTML,t.selection.restore(),t.events.enableBlur());var n=t.events.chainTrigger("paste.beforeCleanup",h);"string"==typeof n&&(h=n);var s=!1;h.match(/(class=\"?Mso|class=\'?Mso|style=\"[^\"]*\bmso\-|style=\'[^\']*\bmso\-|w:WordDocument)/gi)&&(s=!0),h.indexOf("<body")>=0&&(h=h.replace(/[.\s\S\w\W<>]*<body[^>]*>([.\s\S\w\W<>]*)<\/body>[.\s\S\w\W<>]*/g,"$1"));var a=!1;if(h.indexOf('id="docs-internal-guid')>=0&&(h=h.replace(/^.* id="docs-internal-guid[^>]*>(.*)<\/b>.*$/,"$1"),a=!0),s)h=h.replace(/^\n*/g,"").replace(/^ /g,""),0===h.indexOf("<colgroup>")&&(h="<table>"+h+"</table>"),h=o(h),h=c(h);else{t.opts.htmlAllowComments=!1,h=t.clean.html(h,t.opts.pasteDeniedTags,t.opts.pasteDeniedAttrs),t.opts.htmlAllowComments=!0,h=c(h),h=h.replace(/\r|\n|\t/g,"");var d=t.doc.createElement("div");d.innerHTML=h,e.FE.copied_text&&d.textContent.replace(/(\u00A0)/gi," ").replace(/\r|\n/gi,"")==e.FE.copied_text.replace(/(\u00A0)/gi," ").replace(/\r|\n/gi,"")&&(h=e.FE.copied_html),h=h.replace(/^ */g,"").replace(/ *$/g,"")}if(t.opts.pastePlain&&(h=r(h)),n=t.events.chainTrigger("paste.afterCleanup",h),"string"==typeof n&&(h=n),""!==h){var u=t.o_doc.createElement("div");u.innerHTML=h,t.spaces.normalize(u);for(var f=u.getElementsByTagName("span"),m=0;m<f.length;m++){var g=f[m];0===g.attributes.length&&(g.outerHTML=g.innerHTML)}var v=u.children;if(1==v.length&&["OL","UL"].indexOf(v[0].tagName)&&(v[0].outerHTML=v[0].innerHTML),!a)for(var b=u.getElementsByTagName("br"),m=0;m<b.length;m++){var y=b[m];t.node.isBlock(y.previousSibling)&&y.parentNode.removeChild(y)}if(t.opts.enter==e.FE.ENTER_BR)for(var w=u.querySelectorAll("p, div"),m=0;m<w.length;m++){var x=w[m];x.outerHTML=x.innerHTML+(x.nextSibling&&!t.node.isEmpty(x)?"<br>":"")}else if(t.opts.enter==e.FE.ENTER_DIV)for(var w=u.getElementsByTagName("p"),m=0;m<w.length;m++){var x=w[m];x.outerHTML="<div>"+x.innerHTML+"</div>"}h=u.innerHTML,t.html.insert(h,!0)}l(),t.undo.saveStep(i),t.undo.saveStep()}function l(){t.events.trigger("paste.after")}function c(e){var i=t.doc.createElement("div");i.innerHTML=e;for(var n=i.querySelectorAll("*:empty:not(br):not(img):not(td):not(th)");n.length;){for(var s=0;s<n.length;s++)n[s].parentNode.removeChild(n[s]);n=i.querySelectorAll("*:empty:not(br):not(img):not(td):not(th)")}for(var o=i.querySelectorAll(":scope > div:not([style]), td > div, th > div, li > div");o.length;){var r=o[o.length-1];if(t.html.defaultTag()&&"div"!=t.html.defaultTag())r.outerHTML="<"+t.html.defaultTag()+">"+r.innerHTML+"</"+t.html.defaultTag()+">";else{var a=r.querySelector("*:last");a&&"BR"==a.tagName?r.outerHTML=r.innerHTML:r.outerHTML=r.innerHTML+"<br>"}o=i.querySelectorAll(":scope > div:not([style]), td > div, th > div, li > div")}for(o=i.querySelectorAll("div:not([style])");o.length;){for(s=0;s<o.length;s++){var l=o[s],c=l.innerHTML.replace(/\u0009/gi,"").trim();l.outerHTML=c}o=i.querySelectorAll("div:not([style])")}return i.innerHTML}function d(){t.events.on("copy",i),t.events.on("cut",i),t.events.on("paste",n),t.browser.msie&&t.browser.version<11&&(t.events.on("mouseup",function(e){2==e.button&&(setTimeout(function(){f=!1},50),f=!0)},!0),t.events.on("beforepaste",n))}var u,h,p,f=!1;return{_init:d}},e.extend(e.FE.DEFAULTS,{shortcutsEnabled:["show","bold","italic","underline","strikeThrough","indent","outdent","undo","redo"],shortcutsHint:!0}),e.FE.SHORTCUTS_MAP={},e.FE.RegisterShortcut=function(t,i,n,s,o,r){e.FE.SHORTCUTS_MAP[(o?"^":"")+(r?"@":"")+t]={cmd:i,val:n,letter:s,shift:o,option:r},e.FE.DEFAULTS.shortcutsEnabled.push(i)},e.FE.RegisterShortcut(e.FE.KEYCODE.E,"show",null,"E",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.B,"bold",null,"B",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.I,"italic",null,"I",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.U,"underline",null,"U",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.S,"strikeThrough",null,"S",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.CLOSE_SQUARE_BRACKET,"indent",null,"]",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.OPEN_SQUARE_BRACKET,"outdent",null,"[",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.Z,"undo",null,"Z",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.Z,"redo",null,"Z",!0,!1),e.FE.MODULES.shortcuts=function(t){function i(i){if(!t.opts.shortcutsHint)return null;if(!o){o={};for(var n in e.FE.SHORTCUTS_MAP)e.FE.SHORTCUTS_MAP.hasOwnProperty(n)&&t.opts.shortcutsEnabled.indexOf(e.FE.SHORTCUTS_MAP[n].cmd)>=0&&(o[e.FE.SHORTCUTS_MAP[n].cmd+"."+(e.FE.SHORTCUTS_MAP[n].val||"")]={shift:e.FE.SHORTCUTS_MAP[n].shift,option:e.FE.SHORTCUTS_MAP[n].option,letter:e.FE.SHORTCUTS_MAP[n].letter})}var s=o[i];return s?(t.helpers.isMac()?String.fromCharCode(8984):"Ctrl+")+(s.shift?t.helpers.isMac()?String.fromCharCode(8679):"Shift+":"")+(s.option?t.helpers.isMac()?String.fromCharCode(8997):"Alt+":"")+s.letter:null}function n(i){if(!t.core.hasFocus())return!0;var n=i.which,s=-1!=navigator.userAgent.indexOf("Mac OS X")?i.metaKey:i.ctrlKey;if("keyup"==i.type&&r&&n!=e.FE.KEYCODE.META)return r=!1,!1;"keydown"==i.type&&(r=!1);var o=(i.shiftKey?"^":"")+(i.altKey?"@":"")+n;if(s&&e.FE.SHORTCUTS_MAP[o]){var a=e.FE.SHORTCUTS_MAP[o].cmd;if(a&&t.opts.shortcutsEnabled.indexOf(a)>=0){var l,c=e.FE.SHORTCUTS_MAP[o].val;if(a&&!c?l=t.$tb.find('.fr-command[data-cmd="'+a+'"]'):a&&c&&(l=t.$tb.find('.fr-command[data-cmd="'+a+'"][data-param1="'+c+'"]')),l.length)return i.preventDefault(),i.stopPropagation(),l.parents(".fr-toolbar").data("instance",t),"keydown"==i.type&&(t.button.exec(l),r=!0),!1;if(a&&t.commands[a])return i.preventDefault(),i.stopPropagation(),"keydown"==i.type&&(t.commands[a](),r=!0),!1}}}function s(){t.events.on("keydown",n,!0),t.events.on("keyup",n,!0)}var o=null,r=!1;return{_init:s,get:i}},e.FE.MODULES.snapshot=function(e){function t(e){for(var t=e.parentNode.childNodes,i=0,n=null,s=0;s<t.length;s++){if(n){var o=t[s].nodeType===Node.TEXT_NODE&&""===t[s].textContent,r=n.nodeType===Node.TEXT_NODE&&t[s].nodeType===Node.TEXT_NODE;o||r||i++}if(t[s]==e)return i;n=t[s]}}function i(i){var n=[];if(!i.parentNode)return[];for(;!e.node.isElement(i);)n.push(t(i)),i=i.parentNode;return n.reverse()}function n(e,t){for(;e&&e.nodeType===Node.TEXT_NODE;){var i=e.previousSibling;i&&i.nodeType==Node.TEXT_NODE&&(t+=i.textContent.length),e=i}return t}function s(e){return{scLoc:i(e.startContainer),scOffset:n(e.startContainer,e.startOffset),ecLoc:i(e.endContainer),ecOffset:n(e.endContainer,e.endOffset)}}function o(){var t={};if(e.events.trigger("snapshot.before"),t.html=(e.$wp?e.$el.html():e.$oel.get(0).outerHTML).replace(/ style=""/g,""),t.ranges=[],e.$wp&&e.selection.inEditor()&&e.core.hasFocus())for(var i=e.selection.ranges(),n=0;n<i.length;n++)t.ranges.push(s(i[n]));return e.events.trigger("snapshot.after"),t}function r(t){for(var i=e.el,n=0;n<t.length;n++)i=i.childNodes[t[n]];return i}function a(t,i){try{var n=r(i.scLoc),s=i.scOffset,o=r(i.ecLoc),a=i.ecOffset,l=e.doc.createRange();l.setStart(n,s),l.setEnd(o,a),t.addRange(l)}catch(e){}}function l(t){e.$el.html()!=t.html&&e.$el.html(t.html);var i=e.selection.get();e.selection.clear(),e.events.focus(!0);for(var n=0;n<t.ranges.length;n++)a(i,t.ranges[n])}function c(t,i){return t.html==i.html&&(!e.core.hasFocus()||JSON.stringify(t.ranges)==JSON.stringify(i.ranges))}return{get:o,restore:l,equal:c}},e.FE.MODULES.undo=function(e){function t(t){var i=t.which;e.keys.ctrlKey(t)&&(90==i&&t.shiftKey&&t.preventDefault(),90==i&&t.preventDefault())}function i(){return!(0===e.undo_stack.length||e.undo_index<=1)}function n(){return e.undo_index!=e.undo_stack.length}function s(t){return!(!e.undo_stack||e.undoing||e.el.querySelector(".fr-marker"))&&void(void 0===t?(t=e.snapshot.get(),e.undo_stack[e.undo_index-1]&&e.snapshot.equal(e.undo_stack[e.undo_index-1],t)||(o(),e.undo_stack.push(t),e.undo_index++,t.html!=u&&(e.events.trigger("contentChanged"),u=t.html))):(o(),e.undo_index>0?e.undo_stack[e.undo_index-1]=t:(e.undo_stack.push(t),e.undo_index++)))}function o(){if(!e.undo_stack||e.undoing)return!1;for(;e.undo_stack.length>e.undo_index;)e.undo_stack.pop()}function r(){if(e.undo_index>1){e.undoing=!0;var t=e.undo_stack[--e.undo_index-1];clearTimeout(e._content_changed_timer),e.snapshot.restore(t),u=t.html,e.popups.hideAll(),e.toolbar.enable(),e.events.trigger("contentChanged"),e.events.trigger("commands.undo"),e.undoing=!1}}function a(){if(e.undo_index<e.undo_stack.length){e.undoing=!0;var t=e.undo_stack[e.undo_index++];clearTimeout(e._content_changed_timer),e.snapshot.restore(t),u=t.html,e.popups.hideAll(),e.toolbar.enable(),e.events.trigger("contentChanged"),e.events.trigger("commands.redo"),e.undoing=!1}}function l(){e.undo_index=0,e.undo_stack=[]}function c(){e.undo_stack=[]}function d(){l(),e.events.on("initialized",function(){u=(e.$wp?e.$el.html():e.$oel.get(0).outerHTML).replace(/ style=""/g,"")}),e.events.on("blur",function(){e.el.querySelector(".fr-dragging")||e.undo.saveStep()}),e.events.on("keydown",t),e.events.on("destroy",c)}var u=null;return{_init:d,run:r,redo:a,canDo:i,canRedo:n,dropRedo:o,reset:l,saveStep:s}},e.FE.ICON_DEFAULT_TEMPLATE="font_awesome",e.FE.ICON_TEMPLATES={font_awesome:'<i class="fa fa-[NAME]" aria-hidden="true"></i>',text:'<span style="text-align: center;">[NAME]</span>',image:"<img src=[SRC] alt=[ALT] />",svg:'<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">[PATH]</svg>'},e.FE.ICONS={bold:{NAME:"bold"},italic:{NAME:"italic"},underline:{NAME:"underline"},strikeThrough:{NAME:"strikethrough"},subscript:{NAME:"subscript"},superscript:{NAME:"superscript"},color:{NAME:"tint"},outdent:{NAME:"outdent"},indent:{NAME:"indent"},undo:{NAME:"rotate-left"},redo:{NAME:"rotate-right"},insertHR:{NAME:"minus"},clearFormatting:{NAME:"eraser"},selectAll:{NAME:"mouse-pointer"}},e.FE.DefineIconTemplate=function(t,i){e.FE.ICON_TEMPLATES[t]=i},e.FE.DefineIcon=function(t,i){e.FE.ICONS[t]=i},e.FE.MODULES.icon=function(t){function i(t){var i=null,n=e.FE.ICONS[t];if(void 0!==n){var s=n.template||e.FE.ICON_DEFAULT_TEMPLATE;s&&(s=e.FE.ICON_TEMPLATES[s])&&(i=s.replace(/\[([a-zA-Z]*)\]/g,function(e,i){return"NAME"==i?n[i]||t:n[i]}))}return i||t}function n(t){var i=e.FE.ICONS[t],n=e.FE.ICON_DEFAULT_TEMPLATE;if(void 0!==i){var n=i.template||e.FE.ICON_DEFAULT_TEMPLATE;return n}return n}return{create:i,getTemplate:n}},e.extend(e.FE.DEFAULTS,{tooltips:!0}),e.FE.MODULES.tooltip=function(t){function i(){t.$tooltip&&t.$tooltip.removeClass("fr-visible").css("left","-3000px").css("position","fixed")}function n(i,n){if(i.data("title")||i.data("title",i.attr("title")),!i.data("title"))return!1;t.$tooltip||o(),i.removeAttr("title"),t.$tooltip.text(i.data("title")),t.$tooltip.addClass("fr-visible");var s=i.offset().left+(i.outerWidth()-t.$tooltip.outerWidth())/2;s<0&&(s=0),s+t.$tooltip.outerWidth()>e(t.o_win).width()&&(s=e(t.o_win).width()-t.$tooltip.outerWidth()),void 0===n&&(n=t.opts.toolbarBottom);var r=n?i.offset().top-t.$tooltip.height():i.offset().top+i.outerHeight();t.$tooltip.css("position",""),t.$tooltip.css("left",s),t.$tooltip.css("top",Math.ceil(r)),"static"!=e(t.o_doc).find("body").css("position")?(t.$tooltip.css("margin-left",-e(t.o_doc).find("body").offset().left),t.$tooltip.css("margin-top",-e(t.o_doc).find("body").offset().top)):(t.$tooltip.css("margin-left",""),t.$tooltip.css("margin-top",""))}function s(s,o,r){t.opts.tooltips&&!t.helpers.isMobile()&&(t.events.$on(s,"mouseenter",o,function(i){t.node.hasClass(i.currentTarget,"fr-disabled")||t.edit.isDisabled()||n(e(i.currentTarget),r)},!0),t.events.$on(s,"mouseleave "+t._mousedown+" "+t._mouseup,o,function(e){i()},!0))}function o(){t.opts.tooltips&&!t.helpers.isMobile()&&(t.shared.$tooltip?t.$tooltip=t.shared.$tooltip:(t.shared.$tooltip=e('<div class="fr-tooltip"></div>'),t.$tooltip=t.shared.$tooltip,t.opts.theme&&t.$tooltip.addClass(t.opts.theme+"-theme"),e(t.o_doc).find("body").append(t.$tooltip)),t.events.on("shared.destroy",function(){t.$tooltip.html("").removeData().remove(),t.$tooltip=null},!0))}return{hide:i,to:n,bind:s}},e.FE.MODULES.button=function(t){function i(i){var n=i.next(),s=t.node.hasClass(i.get(0),"fr-active"),o=(t.helpers.isMobile(),e(".fr-dropdown.fr-active").not(i)),r=i.parents(".fr-toolbar, .fr-popup").data("instance")||t;if(r.helpers.isIOS()&&!r.el.querySelector(".fr-marker")&&(r.selection.save(),r.selection.clear(),r.selection.restore()),!s){var a=i.data("cmd");n.find(".fr-command").removeClass("fr-active").attr("aria-selected",!1),e.FE.COMMANDS[a]&&e.FE.COMMANDS[a].refreshOnShow&&e.FE.COMMANDS[a].refreshOnShow.apply(r,[i,n]),n.css("left",i.offset().left-i.parent().offset().left-("rtl"==t.opts.direction?n.width()-i.outerWidth():0)),t.opts.toolbarBottom?n.css("bottom",t.$tb.height()-i.position().top):n.css("top",i.position().top+i.outerHeight())}i.addClass("fr-blink").toggleClass("fr-active"),i.hasClass("fr-active")?(n.attr("aria-hidden",!1),i.attr("aria-expanded",!0)):(n.attr("aria-hidden",!0),i.attr("aria-expanded",!1)),setTimeout(function(){i.removeClass("fr-blink")},300),n.offset().left+n.outerWidth()>e(t.opts.scrollableContainer).offset().left+e(t.opts.scrollableContainer).outerWidth()&&n.css("margin-left",-(n.offset().left+n.outerWidth()-e(t.opts.scrollableContainer).offset().left-e(t.opts.scrollableContainer).outerWidth())),o.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),o.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""),0!=i.parents(".fr-popup").length||t.opts.toolbarInline||(t.node.hasClass(i.get(0),"fr-active")?t.$tb.css("zIndex",(t.opts.zIndex||1)+4):t.$tb.css("zIndex",""));var l=n.find("a.fr-command.fr-active");l.length?t.accessibility.focusToolbarElement(l):t.accessibility.focusToolbarElement(i)}function n(t){t.addClass("fr-blink"),setTimeout(function(){t.removeClass("fr-blink")},500);for(var i=t.data("cmd"),n=[];void 0!==t.data("param"+(n.length+1));)n.push(t.data("param"+(n.length+1)));var s=e(".fr-dropdown.fr-active");s.length&&(s.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),s.parent(".fr-toolbar:not(.fr-inline)").css("zIndex","")),t.parents(".fr-popup, .fr-toolbar").data("instance").commands.exec(i,n)}function s(e){n(e)}function o(n){var o=n.parents(".fr-popup, .fr-toolbar").data("instance");if(0!=n.parents(".fr-popup").length||n.data("popup")||o.popups.hideAll(),o.popups.areVisible()&&!o.popups.areVisible(o)){for(var r=0;r<e.FE.INSTANCES.length;r++)e.FE.INSTANCES[r]!=o&&e.FE.INSTANCES[r].popups&&e.FE.INSTANCES[r].popups.areVisible()&&e.FE.INSTANCES[r].$el.find(".fr-marker").remove();o.popups.hideAll()}t.node.hasClass(n.get(0),"fr-dropdown")?i(n):(s(n),e.FE.COMMANDS[n.data("cmd")]&&0!=e.FE.COMMANDS[n.data("cmd")].refreshAfterCallback&&o.button.bulkRefresh())}function r(t){o(e(t.currentTarget))}function a(e){var t=e.find(".fr-dropdown.fr-active");t.length&&(t.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),t.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""))}function l(e){e.preventDefault(),e.stopPropagation()}function c(e){if(e.stopPropagation(),!t.helpers.isMobile())return!1}function d(i,n){t.events.bindClick(i,".fr-command:not(.fr-disabled)",r),t.events.$on(i,t._mousedown+" "+t._mouseup+" "+t._move,".fr-dropdown-menu",l,!0),t.events.$on(i,t._mousedown+" "+t._mouseup+" "+t._move,".fr-dropdown-menu .fr-dropdown-wrapper",c,!0);var s=i.get(0).ownerDocument,o="defaultView"in s?s.defaultView:s.parentWindow,d=function(n){(!n||n.type==t._mouseup&&n.target!=e("html").get(0)||"keydown"==n.type&&(t.keys.isCharacter(n.which)&&!t.keys.ctrlKey(n)||n.which==e.FE.KEYCODE.ESC))&&a(i)};t.events.$on(e(o),t._mouseup+" resize keydown",d,!0),t.opts.iframe&&t.events.$on(t.$win,t._mouseup,d,!0),t.node.hasClass(i.get(0),"fr-popup")?e.merge(w,i.find(".fr-btn").toArray()):e.merge(y,i.find(".fr-btn").toArray()),t.tooltip.bind(i,".fr-btn, .fr-title",n)}function u(e,i){var n="";if(i.html)n+="function"==typeof i.html?i.html.call(t):i.html;else{var s=i.options;"function"==typeof s&&(s=s()),n+='<ul class="fr-dropdown-list" role="presentation">';for(var o in s)if(s.hasOwnProperty(o)){var r=t.shortcuts.get(e+"."+o);r=r?'<span class="fr-shortcut">'+r+"</span>":"",n+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="'+e+'" data-param1="'+o+'" title="'+s[o]+'">'+t.language.translate(s[o])+"</a></li>"}n+="</ul>"}return n}function h(e,i,n){if(t.helpers.isMobile()&&!1===i.showOnMobile)return"";var s=i.displaySelection;"function"==typeof s&&(s=s(t));var o;if(s){var r="function"==typeof i.defaultSelection?i.defaultSelection(t):i.defaultSelection;o='<span style="width:'+(i.displaySelectionWidth||100)+'px">'+(r||t.language.translate(i.title))+"</span>"}else o=t.icon.create(i.icon||e),o+='<span class="fr-sr-only">'+(t.language.translate(i.title)||"")+"</span>";var a=i.popup?' data-popup="true"':"",l=i.modal?' data-modal="true"':"",c=t.shortcuts.get(e+".");c=c?" ("+c+")":"";var d=e+"-"+t.id,h='<button id="'+d+'"type="button" tabIndex="-1" role="button"'+(i.toggle?' aria-pressed="false"':"")+("dropdown"==i.type?' aria-controls="drop" aria-expanded="false" aria-haspopup="true"':"")+(i.disabled?' aria-disabled="true"':"")+' title="'+(t.language.translate(i.title)||"")+c+'" class="fr-command fr-btn'+("dropdown"==i.type?" fr-dropdown":"")+" fr-btn-"+t.icon.getTemplate(i.icon)+(i.displaySelection?" fr-selection":"")+(i.back?" fr-back":"")+(i.disabled?" fr-disabled":"")+(n?"":" fr-hidden")+'" data-cmd="'+e+'"'+a+l+">"+o+"</button>";if("dropdown"==i.type){var p='<div class="fr-dropdown-menu" role="listbox" aria-labelledby="'+d+'" aria-hidden="true"><div class="fr-dropdown-wrapper" role="presentation"><div class="fr-dropdown-content" role="presentation">';p+=u(e,i),p+="</div></div></div>",h+=p}return h}function p(i,n){for(var s="",o=0;o<i.length;o++){var r=i[o],a=e.FE.COMMANDS[r];if(!(a&&void 0!==a.plugin&&t.opts.pluginsEnabled.indexOf(a.plugin)<0))if(a){var l=void 0===n||n.indexOf(r)>=0;s+=h(r,a,l)}else"|"==r?s+='<div class="fr-separator fr-vs" role="separator" aria-orientation="vertical"></div>':"-"==r&&(s+='<div class="fr-separator fr-hs" role="separator" aria-orientation="horizontal"></div>')}return s}function f(i){var n,s=i.parents(".fr-popup, .fr-toolbar").data("instance")||t,o=i.data("cmd");t.node.hasClass(i.get(0),"fr-dropdown")?n=i.next():(i.removeClass("fr-active"),i.attr("aria-pressed")&&i.attr("aria-pressed",!1)),e.FE.COMMANDS[o]&&e.FE.COMMANDS[o].refresh?e.FE.COMMANDS[o].refresh.apply(s,[i,n]):t.refresh[o]&&s.refresh[o](i,n)}function m(i){var n=t.$tb?t.$tb.data("instance")||t:t;return 0==t.events.trigger("buttons.refresh")||void setTimeout(function(){for(var s=n.selection.inEditor()&&n.core.hasFocus(),o=0;o<i.length;o++){var r=e(i[o]),a=r.data("cmd");0==r.parents(".fr-popup").length?s||e.FE.COMMANDS[a]&&e.FE.COMMANDS[a].forcedRefresh?n.button.refresh(r):t.node.hasClass(r.get(0),"fr-dropdown")||(r.removeClass("fr-active"),r.attr("aria-pressed")&&r.attr("aria-pressed",!1)):r.parents(".fr-popup").is(":visible")&&n.button.refresh(r)}},0)}function g(){m(y),m(w)}function v(){y=[],w=[]}function b(){t.opts.toolbarInline?t.events.on("toolbar.show",g):(t.events.on("mouseup",g),t.events.on("keyup",g),t.events.on("blur",g),t.events.on("focus",g),t.events.on("contentChanged",g)),t.events.on("shared.destroy",v)}var y=[];(t.opts.toolbarInline||t.opts.toolbarContainer)&&(t.shared.buttons||(t.shared.buttons=[]),y=t.shared.buttons);var w=[];return t.shared.popup_buttons||(t.shared.popup_buttons=[]),w=t.shared.popup_buttons,{_init:b,buildList:p,bindCommands:d,refresh:f,bulkRefresh:g,exec:n,click:o}},e.FE.MODULES.modals=function(t){function i(e){return p[e]}function n(i,n){var s='<div tabIndex="-1" class="fr-modal'+(t.opts.theme?" "+t.opts.theme+"-theme":"")+'"><div class="fr-modal-wrapper">';return s+='<div class="fr-modal-head">'+i+'<i title="'+t.language.translate("Cancel")+'" class="fa fa-times fr-modal-close"></i></div>',s+='<div tabIndex="-1" class="fr-modal-body">'+n+"</div>",s+="</div></div>",e(s)}function s(i,s,o){if(t.shared.$overlay||(t.shared.$overlay=e('<div class="fr-overlay">').appendTo("body")),h=t.shared.$overlay,t.opts.theme&&h.addClass(t.opts.theme+"-theme"),!p[i]){var r=n(s,o);p[i]={$modal:r,$head:r.find(".fr-modal-head"),$body:r.find(".fr-modal-body")},t.helpers.isMobile()||r.addClass("fr-desktop"),r.appendTo("body"),t.events.bindClick(r,"i.fr-modal-close",function(){a(i)}),p[i].$body.css("margin-top",p[i].$head.outerHeight()),t.events.$on(r,"keydown",function(n){var s=n.which;return s==e.FE.KEYCODE.ESC?(a(i),t.accessibility.focusModalButton(r),!1):!(!e(n.currentTarget).is("input[type=text], textarea")&&s!=e.FE.KEYCODE.ARROW_UP&&s!=e.FE.KEYCODE.ARROW_DOWN&&(n.preventDefault(),n.stopPropagation(),1))},!0),a(i)}return p[i]}function o(){for(var e in p){var t=p[e];t&&t.$modal&&t.$modal.removeData().remove()}h&&h.removeData().remove(),p={}}function r(e){if(p[e]){var i=p[e].$modal;i.data("instance",t),i.show(),h.show(),t.$doc.find("body").addClass("prevent-scroll"),t.helpers.isMobile()&&t.$doc.find("body").addClass("fr-mobile"),i.addClass("fr-active"),t.core.hasFocus()||(t.events.disableBlur(),t.events.focus()),t.accessibility.saveSelection(),t.events.disableBlur(),t.$el.blur(),t.selection.clear(),t.events.disableBlur(),i.find("[tabIndex]:first").focus()}}function a(e){if(p[e]){var i=p[e].$modal,n=i.data("instance")||t;n.events.enableBlur(),i.hide(),h.hide(),n.$doc.find("body").removeClass("prevent-scroll fr-mobile"),i.removeClass("fr-active"),t.accessibility.restoreSelection(n)}}function l(e){if(p[e]){var i=p[e],n=i.$modal,s=i.$body,o=t.$win.height(),r=n.find(".fr-modal-wrapper"),a=r.outerHeight(!0),l=r.height()-(s.outerHeight(!0)-s.height()),c=o-a+l,d=s.get(0).scrollHeight,u="auto";d>c&&(u=c),s.height(u)}}function c(e){var i;if("string"==typeof e){if(!p[e])return;i=p[e].$modal}else i=e;return i&&t.node.hasClass(i,"fr-active")&&t.core.sameInstance(i)||!1}function d(e){for(var t in p)if(p.hasOwnProperty(t)&&c(t)&&(void 0===e||p[t].$modal.data("instance")==e))return p[t].$modal;return!1}function u(){t.events.on("shared.destroy",o,!0)}t.shared.modals||(t.shared.modals={});var h,p=t.shared.modals;return{_init:u,get:i,create:s,show:r,hide:a,resize:l,isVisible:c,areVisible:d}},e.FE.POPUP_TEMPLATES={"text.edit":"[_EDIT_]"},e.FE.RegisterTemplate=function(t,i){e.FE.POPUP_TEMPLATES[t]=i},e.FE.MODULES.popups=function(t){function i(i,n){n.is(":visible")||(n=e(t.opts.scrollableContainer)),n.is(E[i].data("container"))||(E[i].data("container",n),n.append(E[i]))}function n(n,s,a,l){if(r()&&t.$el.find(".fr-marker").length>0?(t.events.disableBlur(),t.selection.restore()):(t.events.disableBlur(),t.events.focus()),h([n]),!E[n])return!1;var c=e(".fr-dropdown.fr-active");c.removeClass("fr-active").attr("aria-expanded",!1).parent(".fr-toolbar").css("zIndex",""),c.next().attr("aria-hidden",!0),E[n].data("instance",t),t.$tb&&t.$tb.data("instance",t);var d=E[n].outerWidth(),u=(E[n].outerHeight(),o(n));E[n].addClass("fr-active").removeClass("fr-hidden").find("input, textarea").removeAttr("disabled");var p=E[n].data("container");t.opts.toolbarInline&&p&&t.$tb&&p.get(0)==t.$tb.get(0)&&(i(n,e(t.opts.scrollableContainer)),a=t.$tb.offset().top-t.helpers.getPX(t.$tb.css("margin-top")),s=t.$tb.offset().left+t.$tb.outerWidth()/2+(parseFloat(t.$tb.find(".fr-arrow").css("margin-left"))||0)+t.$tb.find(".fr-arrow").outerWidth()/2,t.node.hasClass(t.$tb.get(0),"fr-above")&&a&&(a+=t.$tb.outerHeight()),l=0),p=E[n].data("container"),!t.opts.iframe||l||u||(s&&(s-=t.$iframe.offset().left),a&&(a-=t.$iframe.offset().top)),p.is(t.$tb)?t.$tb.css("zIndex",(t.opts.zIndex||1)+4):E[n].css("zIndex",(t.opts.zIndex||1)+4),s&&(s-=d/2),t.opts.toolbarBottom&&p&&t.$tb&&p.get(0)==t.$tb.get(0)&&(E[n].addClass("fr-above"),a&&(a-=E[n].outerHeight())),E[n].removeClass("fr-active"),t.position.at(s,a,E[n],l||0),E[n].addClass("fr-active"),u||t.accessibility.focusPopup(E[n]),t.opts.toolbarInline&&t.toolbar.hide(),t.events.trigger("popups.show."+n),b(n)._repositionPopup(),f()}function s(e,i){t.events.on("popups.show."+e,i)}function o(e){return E[e]&&t.node.hasClass(E[e],"fr-active")&&t.core.sameInstance(E[e])||!1}function r(e){for(var t in E)if(E.hasOwnProperty(t)&&o(t)&&(void 0===e||E[t].data("instance")==e))return E[t];return!1}function a(e){var i=null;(i="string"!=typeof e?e:E[e])&&t.node.hasClass(i,"fr-active")&&(i.removeClass("fr-active fr-above"),t.events.trigger("popups.hide."+e),t.$tb&&(t.opts.zIndex>1?t.$tb.css("zIndex",t.opts.zIndex+1):t.$tb.css("zIndex","")),t.events.disableBlur(),i.find("input, textarea, button").filter(":focus").blur(),i.find("input, textarea").attr("disabled","disabled"))}function l(e,i){t.events.on("popups.hide."+e,i)}function c(e){var i=E[e];if(i&&!i.data("inst"+t.id)){y(b(e),e)}return i}function d(e,i){t.events.on("popups.refresh."+e,i)}function u(i){t.events.trigger("popups.refresh."+i);for(var n=E[i].find(".fr-command"),s=0;s<n.length;s++){var o=e(n[s]);0==o.parents(".fr-dropdown-menu").length&&t.button.refresh(o)}}function h(e){void 0===e&&(e=[]);for(var t in E)E.hasOwnProperty(t)&&e.indexOf(t)<0&&a(t)}function p(){t.shared.exit_flag=!0}function f(){t.shared.exit_flag=!1}function m(){return t.shared.exit_flag}function g(i,n){var s=e.FE.POPUP_TEMPLATES[i];"function"==typeof s&&(s=s.apply(t));for(var o in n)n.hasOwnProperty(o)&&(s=s.replace("[_"+o.toUpperCase()+"_]",n[o]));return s}function v(i,n){var s=g(i,n),o=e('<div class="fr-popup'+(t.helpers.isMobile()?" fr-mobile":" fr-desktop")+(t.opts.toolbarInline?" fr-inline":"")+'"><span class="fr-arrow"></span>'+s+"</div>");t.opts.theme&&o.addClass(t.opts.theme+"-theme"),t.opts.zIndex>1&&t.$tb.css("z-index",t.opts.zIndex+2),"auto"!=t.opts.direction&&o.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),o.find("input, textarea").attr("dir",t.opts.direction).attr("disabled","disabled");var r=e("body");return r.append(o),o.data("container",r),E[i]=o,t.button.bindCommands(o,!1),o}function b(i){var n=E[i];return{_windowResize:function(){var e=n.data("instance")||t;!e.helpers.isMobile()&&n.is(":visible")&&(e.events.disableBlur(),e.popups.hide(i),e.events.enableBlur())},_inputFocus:function(i){var s=n.data("instance")||t,o=e(i.currentTarget);if(o.is("input:file")&&o.closest(".fr-layer").addClass("fr-input-focus"),i.preventDefault(),i.stopPropagation(),setTimeout(function(){s.events.enableBlur()},0),s.helpers.isMobile()){var r=e(s.o_win).scrollTop();setTimeout(function(){e(s.o_win).scrollTop(r)},0)}},_inputBlur:function(i){var s=n.data("instance")||t,o=e(i.currentTarget);o.is("input:file")&&o.closest(".fr-layer").removeClass("fr-input-focus"),document.activeElement!=this&&e(this).is(":visible")&&(s.events.blurActive()&&s.events.trigger("blur"),s.events.enableBlur())},_editorKeydown:function(s){var r=n.data("instance")||t;r.keys.ctrlKey(s)||s.which==e.FE.KEYCODE.ALT||s.which==e.FE.KEYCODE.ESC||(o(i)&&n.find(".fr-back:visible").length?r.button.exec(n.find(".fr-back:visible:first")):s.which!=e.FE.KEYCODE.ALT&&r.popups.hide(i))},_preventFocus:function(i){(n.data("instance")||t).events.disableBlur();var s=i.originalEvent?i.originalEvent.target||i.originalEvent.originalTarget:null,o="input, textarea, button, select, label, .fr-command";return s&&!e(s).is(o)&&0===e(s).parents(o).length?(i.stopPropagation(),!1):(s&&e(s).is(o)&&i.stopPropagation(),void f())},_editorMouseup:function(e){n.is(":visible")&&m()&&n.find("input:focus, textarea:focus, button:focus, select:focus").filter(":visible").length>0&&t.events.disableBlur()},_windowMouseup:function(e){if(!t.core.sameInstance(n))return!0;var s=n.data("instance")||t;n.is(":visible")&&m()&&(e.stopPropagation(),s.markers.remove(),s.popups.hide(i),f())},_windowKeydown:function(s){if(!t.core.sameInstance(n))return!0;var o=n.data("instance")||t,r=s.which;if(e.FE.KEYCODE.ESC==r){if(o.popups.isVisible(i)&&o.opts.toolbarInline)return s.stopPropagation(),o.popups.isVisible(i)&&(n.find(".fr-back:visible").length?(o.button.exec(n.find(".fr-back:visible:first")),o.accessibility.focusPopupButton(n)):n.find(".fr-dismiss:visible").length?o.button.exec(n.find(".fr-dismiss:visible:first")):(o.popups.hide(i),o.toolbar.showInline(null,!0),
o.accessibility.FocusPopupButton(n))),!1;if(o.popups.isVisible(i))return n.find(".fr-back:visible").length?(o.button.exec(n.find(".fr-back:visible:first")),o.accessibility.focusPopupButton(n)):n.find(".fr-dismiss:visible").length?o.button.exec(n.find(".fr-dismiss:visible:first")):(o.popups.hide(i),o.accessibility.focusPopupButton(n)),!1}},_doPlaceholder:function(t){0==e(this).next().length&&e(this).attr("placeholder")&&e(this).after('<label for="'+e(this).attr("id")+'">'+e(this).attr("placeholder")+"</label>"),e(this).toggleClass("fr-not-empty",""!=e(this).val())},_repositionPopup:function(s){if(!t.opts.height&&!t.opts.heightMax||t.opts.toolbarInline)return!0;if(t.$wp&&o(i)&&n.parent().get(0)==e(t.opts.scrollableContainer).get(0)){var r=n.offset().top-t.$wp.offset().top,a=t.$wp.outerHeight();t.node.hasClass(n.get(0),"fr-above")&&(r+=n.outerHeight()),r>a||r<0?n.addClass("fr-hidden"):n.removeClass("fr-hidden")}}}}function y(e,i){t.events.on("mouseup",e._editorMouseup,!0),t.$wp&&t.events.on("keydown",e._editorKeydown),t.events.on("blur",function(e){r()&&t.markers.remove(),h()}),t.$wp&&!t.helpers.isMobile()&&t.events.$on(t.$wp,"scroll.popup"+i,e._repositionPopup),t.events.on("window.mouseup",e._windowMouseup,!0),t.events.on("window.keydown",e._windowKeydown,!0),E[i].data("inst"+t.id,!0),t.events.on("destroy",function(){t.core.sameInstance(E[i])&&E[i].removeClass("fr-active").appendTo("body")},!0)}function w(i,n){var s=v(i,n),o=b(i);return y(o,i),t.events.$on(s,"mousedown mouseup touchstart touchend touch","*",o._preventFocus,!0),t.events.$on(s,"focus","input, textarea, button, select",o._inputFocus,!0),t.events.$on(s,"blur","input, textarea, button, select",o._inputBlur,!0),t.accessibility.registerPopup(i),t.events.$on(s,"keydown keyup change input","input, textarea",o._doPlaceholder,!0),t.helpers.isIOS()&&t.events.$on(s,"touchend","label",function(){e("#"+e(this).attr("for")).prop("checked",function(e,t){return!t})},!0),t.events.$on(e(t.o_win),"resize",o._windowResize,!0),s}function x(){for(var e in E)if(E.hasOwnProperty(e)){var t=E[e];t.html("").removeData().remove(),E[e]=null}E=[]}function C(){t.events.on("shared.destroy",x,!0),t.events.on("window.mousedown",p),t.events.on("window.touchmove",f),t.events.on("mousedown",function(e){r()&&(e.stopPropagation(),t.$el.find(".fr-marker").remove(),p(),t.events.disableBlur())})}t.shared.popups||(t.shared.popups={});var E=t.shared.popups;return t.shared.exit_flag=!1,{_init:C,create:w,get:c,show:n,hide:a,onHide:l,hideAll:h,setContainer:i,refresh:u,onRefresh:d,onShow:s,isVisible:o,areVisible:r}},e.FE.MODULES.position=function(t){function i(){var i,n=t.selection.ranges(0);if(n&&n.collapsed&&t.selection.inEditor()){var s=!1;0==t.$el.find(".fr-marker").length&&(t.selection.save(),s=!0);var o=t.$el.find(".fr-marker:first");o.css("display","inline"),o.css("line-height","");var r=o.offset(),a=o.outerHeight();o.css("display","none"),o.css("line-height",0),i={},i.left=r.left,i.width=0,i.height=a,i.top=r.top-(t.helpers.isIOS()?0:e(t.o_win).scrollTop()),i.right=1,i.bottom=1,i.ok=!0,s&&t.selection.restore()}else n&&(i=n.getBoundingClientRect());return i}function n(i,n,s){var o=i.outerHeight();if(!t.helpers.isMobile()&&t.$tb&&i.parent().get(0)!=t.$tb.get(0)){var r=(i.parent().height(),t.opts.toolbarBottom&&t.$tb.outerHeight(),i.parent().offset().top),a=n-o-(s||0);i.parent().get(0)==e(t.opts.scrollableContainer).get(0)&&(r-=i.parent().position().top);var l=e(t.opts.scrollableContainer).get(0).scrollHeight;r+n+o>e(t.opts.scrollableContainer).offset().top+l&&i.parent().offset().top+a>0?(n=a,i.addClass("fr-above")):i.removeClass("fr-above")}return n}function s(i,n){var s=i.outerWidth();return n+s>e(t.opts.scrollableContainer).width()-10&&(n=e(t.opts.scrollableContainer).width()-s-10),n<0&&(n=10),n}function o(n){var s=i();n.css("top",0).css("left",0);var o=s.top+s.height,a=s.left+s.width/2-n.outerWidth()/2+e(t.o_win).scrollLeft();t.opts.iframe||(o+=e(t.o_win).scrollTop()),r(a,o,n,s.height)}function r(e,i,o,r){var a=o.data("container");!a||a.is("body")&&"static"==a.css("position")||(e&&(e-=a.offset().left),i&&(i-=a.offset().top),"BODY"!=a.get(0).tagName?(e&&(e+=a.scrollLeft()),i&&(i+=a.scrollTop())):"absolute"==a.css("position")&&(e&&(e+=a.position().left),i&&(i+=a.position().top))),t.opts.iframe&&a&&t.$tb&&a.get(0)!=t.$tb.get(0)&&(e&&(e+=t.$iframe.offset().left),i&&(i+=t.$iframe.offset().top));var l=s(o,e);if(e){o.css("left",l);var c=o.find(".fr-arrow");c.data("margin-left")||c.data("margin-left",t.helpers.getPX(c.css("margin-left"))),c.css("margin-left",e-l+c.data("margin-left"))}i&&o.css("top",n(o,i,r))}function a(i){var n=e(i),s=n.is(".fr-sticky-on"),o=n.data("sticky-top"),r=n.data("sticky-scheduled");if(void 0===o){n.data("sticky-top",0);var a=e('<div class="fr-sticky-dummy" style="height: '+n.outerHeight()+'px;"></div>');t.$box.prepend(a)}else t.$box.find(".fr-sticky-dummy").css("height",n.outerHeight());if(t.core.hasFocus()||t.$tb.find("input:visible:focus").length>0){var l=e(window).scrollTop(),c=Math.min(Math.max(l-t.$tb.parent().offset().top,0),t.$tb.parent().outerHeight()-n.outerHeight());c!=o&&c!=r&&(clearTimeout(n.data("sticky-timeout")),n.data("sticky-scheduled",c),n.outerHeight()<l-t.$tb.parent().offset().top&&n.addClass("fr-opacity-0"),n.data("sticky-timeout",setTimeout(function(){var i=e(window).scrollTop(),s=Math.min(Math.max(i-t.$tb.parent().offset().top,0),t.$tb.parent().outerHeight()-n.outerHeight());s>0&&"BODY"==t.$tb.parent().get(0).tagName&&(s+=t.$tb.parent().position().top),s!=o&&(n.css("top",Math.max(s,0)),n.data("sticky-top",s),n.data("sticky-scheduled",s)),n.removeClass("fr-opacity-0")},100))),s||(n.css("top","0"),n.width(t.$tb.parent().width()),n.addClass("fr-sticky-on"),t.$box.addClass("fr-sticky-box"))}else clearTimeout(e(i).css("sticky-timeout")),n.css("top","0"),n.css("position",""),n.width(""),n.data("sticky-top",0),n.removeClass("fr-sticky-on"),t.$box.removeClass("fr-sticky-box")}function l(i){if(i.offsetWidth){var n,s,o=e(i),r=o.outerHeight(),a=o.data("sticky-position"),l=e("body"==t.opts.scrollableContainer?t.o_win:t.opts.scrollableContainer).outerHeight(),c=0,d=0;"body"!==t.opts.scrollableContainer&&(c=e(t.opts.scrollableContainer).offset().top,d=e(t.o_win).outerHeight()-c-l);var u="body"==t.opts.scrollableContainer?e(t.o_win).scrollTop():c,h=o.is(".fr-sticky-on");o.data("sticky-parent")||o.data("sticky-parent",o.parent());var p=o.data("sticky-parent"),f=p.offset().top,m=p.outerHeight();if(o.data("sticky-offset")||(o.data("sticky-offset",!0),o.after('<div class="fr-sticky-dummy" style="height: '+r+'px;"></div>')),!a){var g="auto"!==o.css("top")||"auto"!==o.css("bottom");g||o.css("position","fixed"),a={top:t.node.hasClass(o.get(0),"fr-top"),bottom:t.node.hasClass(o.get(0),"fr-bottom")},g||o.css("position",""),o.data("sticky-position",a),o.data("top",t.node.hasClass(o.get(0),"fr-top")?o.css("top"):"auto"),o.data("bottom",t.node.hasClass(o.get(0),"fr-bottom")?o.css("bottom"):"auto")}n=t.helpers.getPX(o.data("top")),s=t.helpers.getPX(o.data("bottom"));var v=a.top&&function(){return f<u+n&&f+m-r>=u+n}(),b=a.bottom&&function(){return f+r<u+l-s&&f+m>u+l-s}();v||b?(o.css("width",p.width()+"px"),h||(o.addClass("fr-sticky-on"),o.removeClass("fr-sticky-off"),o.css("top")&&("auto"!=o.data("top")?o.css("top",t.helpers.getPX(o.data("top"))+c):o.data("top","auto")),o.css("bottom")&&("auto"!=o.data("bottom")?o.css("bottom",t.helpers.getPX(o.data("bottom"))+d):o.css("bottom","auto")))):t.node.hasClass(o.get(0),"fr-sticky-off")||(o.width(""),o.removeClass("fr-sticky-on"),o.addClass("fr-sticky-off"),o.css("top")&&"auto"!=o.data("top")&&a.top&&o.css("top",0),o.css("bottom")&&"auto"!=o.data("bottom")&&a.bottom&&o.css("bottom",0))}}function c(){var e=document.createElement("test"),i=e.style;return i.cssText="position:"+["-webkit-","-moz-","-ms-","-o-",""].join("sticky; position:")+" sticky;",-1!==i.position.indexOf("sticky")&&!t.helpers.isIOS()&&!t.helpers.isAndroid()}function d(){if(!c())if(t._stickyElements=[],t.helpers.isIOS()){var i=function(){t.helpers.requestAnimationFrame()(i);for(var e=0;e<t._stickyElements.length;e++)a(t._stickyElements[e])};i(),t.events.$on(e(t.o_win),"scroll",function(){if(t.core.hasFocus())for(var i=0;i<t._stickyElements.length;i++){var n=e(t._stickyElements[i]),s=n.parent(),o=e(window).scrollTop();n.outerHeight()<o-s.offset().top&&(n.addClass("fr-opacity-0"),n.data("sticky-top",-1),n.data("sticky-scheduled",-1))}},!0)}else t.events.$on(e("body"==t.opts.scrollableContainer?t.o_win:t.opts.scrollableContainer),"scroll",u,!0),t.events.$on(e(t.o_win),"resize",u,!0),t.events.on("initialized",u),t.events.on("focus",u),t.events.$on(e(t.o_win),"resize","textarea",u,!0);t.events.on("destroy",function(e){t._stickyElements=[]})}function u(){for(var e=0;e<t._stickyElements.length;e++)l(t._stickyElements[e])}function h(e){e.addClass("fr-sticky"),t.helpers.isIOS()&&e.addClass("fr-sticky-ios"),c()||t._stickyElements.push(e.get(0))}function p(){d()}return{_init:p,forSelection:o,addSticky:h,refresh:u,at:r,getBoundingRect:i}},e.FE.MODULES.refresh=function(t){function i(e){r(e,!t.undo.canDo())}function n(e){r(e,!t.undo.canRedo())}function s(e){if(t.node.hasClass(e.get(0),"fr-no-refresh"))return!1;for(var i=t.selection.blocks(),n=0;n<i.length;n++){for(var s=i[n].previousSibling;s&&s.nodeType==Node.TEXT_NODE&&0===s.textContent.length;)s=s.previousSibling;if("LI"!=i[n].tagName||s)return r(e,!1),!0;r(e,!0)}}function o(i){if(t.node.hasClass(i.get(0),"fr-no-refresh"))return!1;for(var n=t.selection.blocks(),s=0;s<n.length;s++){var o="rtl"==t.opts.direction||"rtl"==e(n[s]).css("direction")?"margin-right":"margin-left";if("LI"==n[s].tagName||"LI"==n[s].parentNode.tagName)return r(i,!1),!0;if(t.helpers.getPX(e(n[s]).css(o))>0)return r(i,!1),!0}r(i,!0)}function r(e,t){e.toggleClass("fr-disabled",t).attr("aria-disabled",t)}return{undo:i,redo:n,outdent:o,indent:s}},e.extend(e.FE.DEFAULTS,{editInPopup:!1}),e.FE.MODULES.textEdit=function(t){function i(){var e='<div id="fr-text-edit-'+t.id+'" class="fr-layer fr-text-edit-layer"><div class="fr-input-line"><input type="text" placeholder="'+t.language.translate("Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="updateText" tabIndex="2">'+t.language.translate("Update")+"</button></div></div>",i={edit:e};t.popups.create("text.edit",i)}function n(){var i,n=t.popups.get("text.edit");i="INPUT"===t.$el.prop("tagName")?t.$el.attr("placeholder"):t.$el.text(),n.find("input").val(i).trigger("change"),t.popups.setContainer("text.edit",e("body")),t.popups.show("text.edit",t.$el.offset().left+t.$el.outerWidth()/2,t.$el.offset().top+t.$el.outerHeight(),t.$el.outerHeight())}function s(){t.events.$on(t.$el,t._mouseup,function(e){setTimeout(function(){n()},10)})}function o(){var e=t.popups.get("text.edit"),i=e.find("input").val();0==i.length&&(i=t.opts.placeholderText),"INPUT"===t.$el.prop("tagName")?t.$el.attr("placeholder",i):t.$el.text(i),t.events.trigger("contentChanged"),t.popups.hide("text.edit")}function r(){t.opts.editInPopup&&(i(),s())}return{_init:r,update:o}},e.FE.RegisterCommand("updateText",{focus:!1,undo:!1,callback:function(){this.textEdit.update()}}),e.extend(e.FE.DEFAULTS,{toolbarBottom:!1,toolbarButtons:["fullscreen","bold","italic","underline","strikeThrough","subscript","superscript","fontFamily","fontSize","|","color","emoticons","inlineStyle","paragraphStyle","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","insertHR","-","insertLink","insertImage","insertVideo","insertFile","insertTable","undo","redo","clearFormatting","selectAll","html","applyFormat","removeFormat","help"],toolbarButtonsXS:["bold","italic","fontFamily","fontSize","|","undo","redo","help"],toolbarButtonsSM:["bold","italic","underline","|","fontFamily","fontSize","insertLink","insertImage","table","|","undo","redo","help"],toolbarButtonsMD:["fullscreen","bold","italic","underline","fontFamily","fontSize","color","paragraphStyle","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","insertHR","-","insertLink","insertImage","insertVideo","insertFile","insertTable","undo","redo","clearFormatting","help"],toolbarContainer:null,toolbarInline:!1,toolbarSticky:!0,toolbarStickyOffset:0,toolbarVisibleWithoutSelection:!1}),e.FE.MODULES.toolbar=function(t){function i(e,t){for(var i=0;i<t.length;i++)"-"!=t[i]&&"|"!=t[i]&&e.indexOf(t[i])<0&&e.push(t[i])}function n(){var n=e.merge([],s());i(n,t.opts.toolbarButtonsXS||[]),i(n,t.opts.toolbarButtonsSM||[]),i(n,t.opts.toolbarButtonsMD||[]),i(n,t.opts.toolbarButtons);for(var o=n.length-1;o>=0;o--)"-"!=n[o]&&"|"!=n[o]&&n.indexOf(n[o])<o&&n.splice(o,1);var r=t.button.buildList(n,s());t.$tb.append(r),t.button.bindCommands(t.$tb)}function s(){var e=t.helpers.screenSize();return w[e]}function o(){var e=s();t.$tb.find(".fr-separator").remove(),t.$tb.find("> .fr-command").addClass("fr-hidden");for(var i=0;i<e.length;i++)if("|"==e[i]||"-"==e[i])t.$tb.append(t.button.buildList([e[i]]));else{var n=t.$tb.find('> .fr-command[data-cmd="'+e[i]+'"]'),o=null;t.node.hasClass(n.next().get(0),"fr-dropdown-menu")&&(o=n.next()),n.removeClass("fr-hidden").appendTo(t.$tb),o&&o.appendTo(t.$tb)}}function r(){t.events.$on(e(t.o_win),"resize",o),t.events.$on(e(t.o_win),"orientationchange",o)}function a(i,n){setTimeout(function(){if(i&&i.which==e.FE.KEYCODE.ESC);else if(t.selection.inEditor()&&t.core.hasFocus()&&!t.popups.areVisible()&&(t.opts.toolbarVisibleWithoutSelection&&i&&"keyup"!=i.type||!t.selection.isCollapsed()&&!t.keys.isIME()||n)){if(t.$tb.data("instance",t),0==t.events.trigger("toolbar.show",[i]))return!1;t.opts.toolbarContainer||t.position.forSelection(t.$tb),t.opts.zIndex>1?t.$tb.css("z-index",t.opts.zIndex+1):t.$tb.css("z-index",null),t.$tb.show()}},0)}function l(i){return!!e(".fr-dropdown.fr-active").next().find(t.o_doc.activeElement).length||void(!1!==t.events.trigger("toolbar.hide")&&t.$tb.hide())}function c(){return 0!=t.events.trigger("toolbar.show")&&void t.$tb.show()}function d(){t.events.on("window.mousedown",l),t.events.on("keydown",l),t.events.on("blur",l),t.events.on("window.mouseup",a),t.helpers.isMobile()?t.helpers.isIOS()||(t.events.on("window.touchend",a),t.browser.mozilla&&setInterval(a,200)):t.events.on("window.keyup",a),t.events.on("keydown",function(t){t&&t.which==e.FE.KEYCODE.ESC&&l()}),t.events.on("keydown",function(t){if(t.which==e.FE.KEYCODE.ALT)return t.stopPropagation(),!1},!0),t.events.$on(t.$wp,"scroll.toolbar",a),t.events.on("commands.after",a),t.helpers.isMobile()&&(t.events.$on(t.$doc,"selectionchange",a),t.events.$on(t.$doc,"orientationchange",a))}function u(){t.opts.toolbarInline?(e(t.opts.scrollableContainer).append(t.$tb),t.$tb.data("container",e(t.opts.scrollableContainer)),t.$tb.addClass("fr-inline"),t.$tb.prepend('<span class="fr-arrow"></span>'),d(),t.opts.toolbarBottom=!1):(t.opts.toolbarBottom&&!t.helpers.isIOS()?(t.$box.append(t.$tb),t.$tb.addClass("fr-bottom"),t.$box.addClass("fr-bottom")):(t.opts.toolbarBottom=!1,t.$box.prepend(t.$tb),t.$tb.addClass("fr-top"),t.$box.addClass("fr-top")),t.$tb.addClass("fr-basic"),t.opts.toolbarSticky&&(t.opts.toolbarStickyOffset&&(t.opts.toolbarBottom?t.$tb.css("bottom",t.opts.toolbarStickyOffset):t.$tb.css("top",t.opts.toolbarStickyOffset)),t.position.addSticky(t.$tb)))}function h(){t.$tb.html("").removeData().remove(),t.$tb=null}function p(){t.$box.removeClass("fr-top fr-bottom fr-inline fr-basic"),t.$box.find(".fr-sticky-dummy").remove()}function f(){t.opts.theme&&t.$tb.addClass(t.opts.theme+"-theme"),t.opts.zIndex>1&&t.$tb.css("z-index",t.opts.zIndex+1),"auto"!=t.opts.direction&&t.$tb.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),t.helpers.isMobile()?t.$tb.addClass("fr-mobile"):t.$tb.addClass("fr-desktop"),t.opts.toolbarContainer?(t.opts.toolbarInline&&(d(),l()),t.opts.toolbarBottom?t.$tb.addClass("fr-bottom"):t.$tb.addClass("fr-top")):u(),b=t.$tb.get(0).ownerDocument,y="defaultView"in b?b.defaultView:b.parentWindow,n(),r(),t.accessibility.registerToolbar(t.$tb),t.events.$on(t.$tb,t._mousedown+" "+t._mouseup,function(e){var i=e.originalEvent?e.originalEvent.target||e.originalEvent.originalTarget:null;if(i&&"INPUT"!=i.tagName&&!t.edit.isDisabled())return e.stopPropagation(),e.preventDefault(),!1},!0)}function m(){return!!t.$wp&&(t.opts.toolbarContainer?(t.shared.$tb?(t.$tb=t.shared.$tb,t.opts.toolbarInline&&d()):(t.shared.$tb=e('<div class="fr-toolbar"></div>'),t.$tb=t.shared.$tb,e(t.opts.toolbarContainer).append(t.$tb),f(),t.$tb.data("instance",t)),t.opts.toolbarInline?t.$box.addClass("fr-inline"):t.$box.addClass("fr-basic"),t.events.on("focus",function(){t.$tb.data("instance",t)},!0),t.opts.toolbarInline=!1):t.opts.toolbarInline?(t.$box.addClass("fr-inline"),t.shared.$tb?(t.$tb=t.shared.$tb,d()):(t.shared.$tb=e('<div class="fr-toolbar"></div>'),t.$tb=t.shared.$tb,f())):(t.$box.addClass("fr-basic"),t.$tb=e('<div class="fr-toolbar"></div>'),f(),t.$tb.data("instance",t)),t.events.on("destroy",p,!0),void t.events.on(t.opts.toolbarInline||t.opts.toolbarContainer?"shared.destroy":"destroy",h,!0))}function g(){!x&&t.$tb&&(t.$tb.find("> .fr-command").addClass("fr-disabled fr-no-refresh").attr("aria-disabled",!0),x=!0)}function v(){x&&t.$tb&&(t.$tb.find("> .fr-command").removeClass("fr-disabled fr-no-refresh").attr("aria-disabled",!1),x=!1),t.button.bulkRefresh()}var b,y,w=[];w[e.FE.XS]=t.opts.toolbarButtonsXS||t.opts.toolbarButtons,w[e.FE.SM]=t.opts.toolbarButtonsSM||t.opts.toolbarButtons,w[e.FE.MD]=t.opts.toolbarButtonsMD||t.opts.toolbarButtons,w[e.FE.LG]=t.opts.toolbarButtons;var x=!1;return{_init:m,hide:l,show:c,showInline:a,disable:g,enable:v}}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.FE.PLUGINS.align=function(t){function i(i){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();for(var n=t.selection.blocks(),s=0;s<n.length;s++)t.helpers.getAlignment(e(n[s].parentNode))==i?e(n[s]).css("text-align","").removeClass("fr-temp-div"):e(n[s]).css("text-align",i).removeClass("fr-temp-div"),""===e(n[s]).attr("class")&&e(n[s]).removeAttr("class"),""===e(n[s]).attr("style")&&e(n[s]).removeAttr("style");t.selection.save(),t.html.unwrap(),t.selection.restore()}function n(i){var n=t.selection.blocks();if(n.length){var s=t.helpers.getAlignment(e(n[0]));i.find("> *:first").replaceWith(t.icon.create("align-"+s))}}function s(i,n){var s=t.selection.blocks();if(s.length){var o=t.helpers.getAlignment(e(s[0]));n.find('a.fr-command[data-param1="'+o+'"]').addClass("fr-active").attr("aria-selected",!0)}}return{apply:i,refresh:n,refreshOnShow:s}},e.FE.DefineIcon("align",{NAME:"align-left"}),e.FE.DefineIcon("align-left",{NAME:"align-left"}),e.FE.DefineIcon("align-right",{NAME:"align-right"}),e.FE.DefineIcon("align-center",{NAME:"align-center"}),e.FE.DefineIcon("align-justify",{NAME:"align-justify"}),e.FE.RegisterCommand("align",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',i=e.FE.COMMANDS.align.options;for(var n in i)i.hasOwnProperty(n)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="align" data-param1="'+n+'" title="'+this.language.translate(i[n])+'">'+this.icon.create("align-"+n)+'<span class="fr-sr-only">'+this.language.translate(i[n])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.align.apply(t)},refresh:function(e){this.align.refresh(e)},refreshOnShow:function(e,t){this.align.refreshOnShow(e,t)},plugin:"align"})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.FE.PLUGINS.codeBeautifier=function(){function e(e,i){function n(e){return e.replace(/^\s+/g,"")}function s(e){return e.replace(/\s+$/g,"")}function r(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=l,this.Utils={whitespace:"\n\r\t ".split(""),single_token:"br,input,link,meta,source,!doctype,basefont,base,area,hr,wbr,param,img,isindex,embed".split(","),extra_liners:w,in_array:function(e,t){for(var i=0;i<t.length;i++)if(e==t[i])return!0;return!1}},this.is_whitespace=function(e){for(;0<e.length;e++)if(!this.Utils.in_array(e.charAt(0),this.Utils.whitespace))return!1;return!0},this.traverse_whitespace=function(){var e="";if(e=this.input.charAt(this.pos),this.Utils.in_array(e,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(e,this.Utils.whitespace);)f&&"\n"==e&&this.newlines<=m&&(this.newlines+=1),this.pos++,e=this.input.charAt(this.pos);return!0}return!1},this.space_or_wrap=function(e){this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,e),this.print_indentation(e)):(this.line_char_count++,e.push(" "))},this.get_content=function(){for(var e="",t=[];"<"!=this.input.charAt(this.pos);){if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];if(this.traverse_whitespace())this.space_or_wrap(t);else{if(g){var i=this.input.substr(this.pos,3);if("{{#"==i||"{{/"==i)break;if("{{!"==i)return[this.get_tag(),"TK_TAG_HANDLEBARS_COMMENT"];if("{{"==this.input.substr(this.pos,2)&&"{{else}}"==this.get_tag(!0))break}e=this.input.charAt(this.pos),this.pos++,this.line_char_count++,t.push(e)}}return t.length?t.join(""):""},this.get_contents_to=function(e){if(this.pos==this.input.length)return["","TK_EOF"];var t="",i=new RegExp("</"+e+"\\s*>","igm");i.lastIndex=this.pos;var n=i.exec(this.input),s=n?n.index:this.input.length;return this.pos<s&&(t=this.input.substring(this.pos,s),this.pos=s),t},this.record_tag=function(e){this.tags[e+"count"]?(this.tags[e+"count"]++,this.tags[e+this.tags[e+"count"]]=this.indent_level):(this.tags[e+"count"]=1,this.tags[e+this.tags[e+"count"]]=this.indent_level),this.tags[e+this.tags[e+"count"]+"parent"]=this.tags.parent,this.tags.parent=e+this.tags[e+"count"]},this.retrieve_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!=t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]],this.tags.parent=this.tags[t+"parent"]),delete this.tags[e+this.tags[e+"count"]+"parent"],delete this.tags[e+this.tags[e+"count"]],1==this.tags[e+"count"]?delete this.tags[e+"count"]:this.tags[e+"count"]--}},this.indent_to_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!=t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]])}},this.get_tag=function(e){var t,i,n="",s=[],o="",r=!1,a=!0,l=this.pos,c=this.line_char_count;e=void 0!==e&&e;do{if(this.pos>=this.input.length)return e&&(this.pos=l,this.line_char_count=c),s.length?s.join(""):["","TK_EOF"];if(n=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(n,this.Utils.whitespace))r=!0;else{if("'"!=n&&'"'!=n||(n+=this.get_unformatted(n),r=!0),"="==n&&(r=!1),s.length&&"="!=s[s.length-1]&&">"!=n&&r){if(this.space_or_wrap(s),r=!1,!a&&"force"==v&&"/"!=n){this.print_newline(!0,s),this.print_indentation(s);for(var u=0;u<b;u++)s.push(d)}for(var h=0;h<s.length;h++)if(" "==s[h]){a=!1;break}}if(g&&"<"==i&&n+this.input.charAt(this.pos)=="{{"&&(n+=this.get_unformatted("}}"),s.length&&" "!=s[s.length-1]&&"<"!=s[s.length-1]&&(n=" "+n),r=!0),"<"!=n||i||(t=this.pos-1,i="<"),g&&!i&&s.length>=2&&"{"==s[s.length-1]&&"{"==s[s.length-2]&&(t="#"==n||"/"==n||"!"==n?this.pos-3:this.pos-2,i="{"),this.line_char_count++,s.push(n),s[1]&&("!"==s[1]||"?"==s[1]||"%"==s[1])){s=[this.get_comment(t)];break}if(g&&s[1]&&"{"==s[1]&&s[2]&&"!"==s[2]){s=[this.get_comment(t)];break}if(g&&"{"==i&&s.length>2&&"}"==s[s.length-2]&&"}"==s[s.length-1])break}}while(">"!=n);var f,m,y=s.join("");f=-1!=y.indexOf(" ")?y.indexOf(" "):"{"==y[0]?y.indexOf("}"):y.indexOf(">"),m="<"!=y[0]&&g?"#"==y[2]?3:2:1;var w=y.substring(m,f).toLowerCase();return"/"==y.charAt(y.length-2)||this.Utils.in_array(w,this.Utils.single_token)?e||(this.tag_type="SINGLE"):g&&"{"==y[0]&&"else"==w?e||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):this.is_unformatted(w,p)?(o=this.get_unformatted("</"+w+">",y),s.push(o),this.pos-1,this.tag_type="SINGLE"):"script"==w&&(-1==y.search("type")||y.search("type")>-1&&y.search(/\b(text|application)\/(x-)?(javascript|ecmascript|jscript|livescript)/)>-1)?e||(this.record_tag(w),this.tag_type="SCRIPT"):"style"==w&&(-1==y.search("type")||y.search("type")>-1&&y.search("text/css")>-1)?e||(this.record_tag(w),this.tag_type="STYLE"):"!"==w.charAt(0)?e||(this.tag_type="SINGLE",this.traverse_whitespace()):e||("/"==w.charAt(0)?(this.retrieve_tag(w.substring(1)),this.tag_type="END"):(this.record_tag(w),"html"!=w.toLowerCase()&&(this.indent_content=!0),this.tag_type="START"),this.traverse_whitespace()&&this.space_or_wrap(s),this.Utils.in_array(w,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!=this.output[this.output.length-2]&&this.print_newline(!0,this.output))),e&&(this.pos=l,this.line_char_count=c),s.join("")},this.get_comment=function(e){var t="",i=">",n=!1;this.pos=e;var s=this.input.charAt(this.pos);for(this.pos++;this.pos<=this.input.length&&(t+=s,t[t.length-1]!=i[i.length-1]||-1==t.indexOf(i));)!n&&t.length<10&&(0===t.indexOf("<![if")?(i="<![endif]>",n=!0):0===t.indexOf("<![cdata[")?(i="]]>",n=!0):0===t.indexOf("<![")?(i="]>",n=!0):0===t.indexOf("\x3c!--")?(i="--\x3e",n=!0):0===t.indexOf("{{!")?(i="}}",n=!0):0===t.indexOf("<?")?(i="?>",n=!0):0===t.indexOf("<%")&&(i="%>",n=!0)),s=this.input.charAt(this.pos),this.pos++;return t},this.get_unformatted=function(e,t){if(t&&-1!=t.toLowerCase().indexOf(e))return"";var i="",n="",s=0,o=!0;do{if(this.pos>=this.input.length)return n;if(i=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(i,this.Utils.whitespace)){if(!o){this.line_char_count--;continue}if("\n"==i||"\r"==i){n+="\n",this.line_char_count=0;continue}}n+=i,this.line_char_count++,o=!0,g&&"{"==i&&n.length&&"{"==n[n.length-2]&&(n+=this.get_unformatted("}}"),s=n.length)}while(-1==n.toLowerCase().indexOf(e,s));return n},this.get_token=function(){var e;if("TK_TAG_SCRIPT"==this.last_token||"TK_TAG_STYLE"==this.last_token){var t=this.last_token.substr(7);return e=this.get_contents_to(t),"string"!=typeof e?e:[e,"TK_"+t]}if("CONTENT"==this.current_mode)return e=this.get_content(),"string"!=typeof e?e:[e,"TK_CONTENT"];if("TAG"==this.current_mode){if("string"!=typeof(e=this.get_tag()))return e;return[e,"TK_TAG_"+this.tag_type]}},this.get_full_indent=function(e){return e=this.indent_level+e||0,e<1?"":new Array(e+1).join(this.indent_string)},this.is_unformatted=function(e,t){if(!this.Utils.in_array(e,t))return!1;if("a"!=e.toLowerCase()||!this.Utils.in_array("a",t))return!0;var i=this.get_tag(!0),n=(i||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!(n&&!this.Utils.in_array(n,t))},this.printer=function(e,t,i,o,r){this.input=e||"",this.output=[],this.indent_character=t,this.indent_string="",this.indent_size=i,this.brace_style=r,this.indent_level=0,this.wrap_line_length=o,this.line_char_count=0;for(var a=0;a<this.indent_size;a++)this.indent_string+=this.indent_character;this.print_newline=function(e,t){this.line_char_count=0,t&&t.length&&(e||"\n"!=t[t.length-1])&&("\n"!=t[t.length-1]&&(t[t.length-1]=s(t[t.length-1])),t.push("\n"))},this.print_indentation=function(e){for(var t=0;t<this.indent_level;t++)e.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(e){this.is_whitespace(e)&&!this.output.length||((e||""!==e)&&this.output.length&&"\n"==this.output[this.output.length-1]&&(this.print_indentation(this.output),e=n(e)),this.print_token_raw(e))},this.print_token_raw=function(e){this.newlines>0&&(e=s(e)),e&&""!==e&&(e.length>1&&"\n"==e[e.length-1]?(this.output.push(e.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(e));for(var t=0;t<this.newlines;t++)this.print_newline(t>0,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}var a,l,c,d,u,h,p,f,m,g,v,b,y,w;for(i=i||{},void 0!==i.wrap_line_length&&0!==parseInt(i.wrap_line_length,10)||void 0===i.max_char||0===parseInt(i.max_char,10)||(i.wrap_line_length=i.max_char),l=void 0!==i.indent_inner_html&&i.indent_inner_html,c=void 0===i.indent_size?4:parseInt(i.indent_size,10),d=void 0===i.indent_char?" ":i.indent_char,h=void 0===i.brace_style?"collapse":i.brace_style,u=0===parseInt(i.wrap_line_length,10)?32786:parseInt(i.wrap_line_length||250,10),p=i.unformatted||["a","span","img","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","address","pre"],f=void 0===i.preserve_newlines||i.preserve_newlines,m=f?isNaN(parseInt(i.max_preserve_newlines,10))?32786:parseInt(i.max_preserve_newlines,10):0,g=void 0!==i.indent_handlebars&&i.indent_handlebars,v=void 0===i.wrap_attributes?"auto":i.wrap_attributes,b=void 0===i.wrap_attributes_indent_size?c:parseInt(i.wrap_attributes_indent_size,10)||c,y=void 0!==i.end_with_newline&&i.end_with_newline,w=Array.isArray(i.extra_liners)?i.extra_liners.concat():"string"==typeof i.extra_liners?i.extra_liners.split(","):"head,body,/html".split(","),i.indent_with_tabs&&(d="\t",c=1),a=new r,a.printer(e,d,c,u,h);;){var x=a.get_token();if(a.token_text=x[0],a.token_type=x[1],"TK_EOF"==a.token_type)break;switch(a.token_type){case"TK_TAG_START":a.print_newline(!1,a.output),a.print_token(a.token_text),a.indent_content&&(a.indent(),a.indent_content=!1),a.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":a.print_newline(!1,a.output),a.print_token(a.token_text),a.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"==a.last_token&&""===a.last_text){var C=a.token_text.match(/\w+/)[0],E=null;a.output.length&&(E=a.output[a.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),(null==E||E[1]!=C&&!a.Utils.in_array(E[1],p))&&a.print_newline(!1,a.output)}a.print_token(a.token_text),a.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var k=a.token_text.match(/^\s*<([a-z-]+)/i);k&&a.Utils.in_array(k[1],p)||a.print_newline(!1,a.output),a.print_token(a.token_text),a.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":a.print_token(a.token_text),a.indent_content&&(a.indent(),a.indent_content=!1),a.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_COMMENT":case"TK_CONTENT":a.print_token(a.token_text),a.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==a.token_text){a.print_newline(!1,a.output);var T,_=a.token_text,S=1;"TK_SCRIPT"==a.token_type?T="function"==typeof o&&o:"TK_STYLE"==a.token_type&&(T="function"==typeof t&&t),"keep"==i.indent_scripts?S=0:"separate"==i.indent_scripts&&(S=-a.indent_level);var D=a.get_full_indent(S);if(T)_=T(_.replace(/^\s*/,D),i);else{var $=_.match(/^\s*/)[0],M=$.match(/[^\n\r]*$/)[0].split(a.indent_string).length-1,A=a.get_full_indent(S-M);_=_.replace(/^\s*/,D).replace(/\r\n|\r|\n/g,"\n"+A).replace(/\s+$/,"")}_&&(a.print_token_raw(_),a.print_newline(!0,a.output))}a.current_mode="TAG";break;default:""!==a.token_text&&a.print_token(a.token_text)}a.last_token=a.token_type,a.last_text=a.token_text}var O=a.output.join("").replace(/[\r\n\t ]+$/,"");return y&&(O+="\n"),O}function t(e,t){function i(){return(g=e.charAt(++b))||""}function n(t){var n="",s=b;return t&&o(),n=e.charAt(b+1)||"",b=s-1,i(),n}function s(t){for(var n=b;i();)if("\\"===g)i();else{if(-1!==t.indexOf(g))break;if("\n"===g)break}
return e.substring(n,b+1)}function o(){for(var e="";v.test(n());)i(),e+=g;return e}function r(t){var s=b;for(t="/"===n(),i();i();){if(!t&&"*"===g&&"/"===n()){i();break}if(t&&"\n"===g)return e.substring(s,b)}return e.substring(s,b)+g}function a(t){return e.substring(b-t.length,b).toLowerCase()===t}var l={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},c={"@media":!0,"@supports":!0,"@document":!0};t=t||{},e=e||"",e=e.replace(/\r\n|[\r\u2028\u2029]/g,"\n");var d=t.indent_size||4,u=t.indent_char||" ",h=void 0===t.selector_separator_newline||t.selector_separator_newline,p=void 0!==t.end_with_newline&&t.end_with_newline,f=void 0===t.newline_between_rules||t.newline_between_rules,m=t.eol?t.eol:"\n";"string"==typeof d&&(d=parseInt(d,10)),t.indent_with_tabs&&(u="\t",d=1),m=m.replace(/\\r/,"\r").replace(/\\n/,"\n");var g,v=/^\s+$/,b=-1,y=0,w=e.match(/^[\t ]*/)[0],x=new Array(d+1).join(u),C=0,E=0,k={};k["{"]=function(e){k.singleSpace(),T.push(e),k.newLine()},k["}"]=function(e){k.newLine(),T.push(e),k.newLine()},k._lastCharWhitespace=function(){return v.test(T[T.length-1])},k.newLine=function(e){T.length&&(e||"\n"===T[T.length-1]||k.trim(),T.push("\n"),w&&T.push(w))},k.singleSpace=function(){T.length&&!k._lastCharWhitespace()&&T.push(" ")},k.preserveSingleSpace=function(){O&&k.singleSpace()},k.trim=function(){for(;k._lastCharWhitespace();)T.pop()};for(var T=[],_=!1,S=!1,D=!1,$="",M="";;){var A=function(){var e="";for(g&&v.test(g)&&(e=g);v.test(i());)e+=g;return e}(),O=""!==A,F=-1!==A.indexOf("\n");if(M=$,$=g,!g)break;if("/"===g&&"*"===n()){var N=0===C;(F||N)&&k.newLine(),T.push(r()),k.newLine(),N&&k.newLine(!0)}else if("/"===g&&"/"===n())F||"{"===M||k.trim(),k.singleSpace(),T.push(r()),k.newLine();else if("@"===g){k.preserveSingleSpace(),T.push(g);var L=function(e){var t=b,n=s(e);return b=t-1,i(),n}(": ,;{}()[]/='\"");L.match(/[ :]$/)&&(i(),L=s(": ").replace(/\s$/,""),T.push(L),k.singleSpace()),(L=L.replace(/\s$/,""))in l&&(E+=1,L in c&&(D=!0))}else"#"===g&&"{"===n()?(k.preserveSingleSpace(),T.push(s("}"))):"{"===g?"}"===n(!0)?(o(),i(),k.singleSpace(),T.push("{}"),k.newLine(),f&&0===C&&k.newLine(!0)):(function(){C++,w+=x}(),k["{"](g),D?(D=!1,_=C>E):_=C>=E):"}"===g?(function(){C--,w=w.slice(0,-d)}(),k["}"](g),_=!1,S=!1,E&&E--,f&&0===C&&k.newLine(!0)):":"===g?(o(),!_&&!D||a("&")||function(){for(var t=0,i=b+1;i<e.length;i++){var n=e.charAt(i);if("{"===n)return!0;if("("===n)t+=1;else if(")"===n){if(0==t)return!1;t-=1}else if(";"===n||"}"===n)return!1}return!1}()?":"===n()?(i(),T.push("::")):T.push(":"):(S=!0,T.push(":"),k.singleSpace())):'"'===g||"'"===g?(k.preserveSingleSpace(),T.push(s(g))):";"===g?(S=!1,T.push(g),k.newLine()):"("===g?a("url")?(T.push(g),o(),i()&&(")"!==g&&'"'!==g&&"'"!==g?T.push(s(")")):b--)):(y++,k.preserveSingleSpace(),T.push(g),o()):")"===g?(T.push(g),y--):","===g?(T.push(g),o(),h&&!S&&y<1?k.newLine():k.singleSpace()):"]"===g?T.push(g):"["===g?(k.preserveSingleSpace(),T.push(g)):"="===g?(o(),g="=",T.push(g)):(k.preserveSingleSpace(),T.push(g))}var R="";return w&&(R+=w),R+=T.join("").replace(/[\r\n\t ]+$/,""),p&&(R+="\n"),"\n"!=m&&(R=R.replace(/[\n]/g,m)),R}function i(e,t){for(var i=0;i<t.length;i+=1)if(t[i]===e)return!0;return!1}function n(e){return e.replace(/^\s+|\s+$/g,"")}function s(e){return e.replace(/^\s+/g,"")}function o(e,t){return new r(e,t).beautify()}function r(e,t){function o(e,t){var i=0;return e&&(i=e.indentation_level,!j.just_added_newline()&&e.line_indent_level>i&&(i=e.line_indent_level)),{mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:i,line_indent_level:e?e.line_indent_level:i,start_line_index:j.get_line_number(),ternary_depth:0}}function r(e){var t=e.newlines;if(te.keep_array_indentation&&y(X.mode))for(i=0;i<t;i+=1)p(i>0);else if(te.max_preserve_newlines&&t>te.max_preserve_newlines&&(t=te.max_preserve_newlines),te.preserve_newlines&&e.newlines>1){p();for(var i=1;i<t;i+=1)p(!0)}V=e,ee[V.type]()}function a(e){e=e.replace(/\x0d/g,"");for(var t=[],i=e.indexOf("\n");-1!==i;)t.push(e.substring(0,i)),e=e.substring(i+1),i=e.indexOf("\n");return e.length&&t.push(e),t}function h(e){if(e=void 0!==e&&e,!j.just_added_newline())if(te.preserve_newlines&&V.wanted_newline||e)p(!1,!0);else if(te.wrap_line_length){var t=j.current_line.get_character_count()+V.text.length+(j.space_before_token?1:0);t>=te.wrap_line_length&&p(!1,!0)}}function p(e,t){if(!t&&";"!==X.last_text&&","!==X.last_text&&"="!==X.last_text&&"TK_OPERATOR"!==Y)for(;X.mode===u.Statement&&!X.if_block&&!X.do_block;)x();j.add_new_line(e)&&(X.multiline_frame=!0)}function f(){j.just_added_newline()&&(te.keep_array_indentation&&y(X.mode)&&V.wanted_newline?(j.current_line.push(V.whitespace_before),j.space_before_token=!1):j.set_indent(X.indentation_level)&&(X.line_indent_level=X.indentation_level))}function m(e){return j.raw?void j.add_raw_token(V):(te.comma_first&&"TK_COMMA"===Y&&j.just_added_newline()&&","===j.previous_line.last()&&(j.previous_line.pop(),f(),j.add_token(","),j.space_before_token=!0),e=e||V.text,f(),void j.add_token(e))}function g(){X.indentation_level+=1}function v(){X.indentation_level>0&&(!X.parent||X.indentation_level>X.parent.indentation_level)&&(X.indentation_level-=1)}function b(e){X?(Z.push(X),Q=X):Q=o(null,e),X=o(Q,e)}function y(e){return e===u.ArrayLiteral}function w(e){return i(e,[u.Expression,u.ForInitializer,u.Conditional])}function x(){Z.length>0&&(Q=X,X=Z.pop(),Q.mode===u.Statement&&j.remove_redundant_indentation(Q))}function C(){return X.parent.mode===u.ObjectLiteral&&X.mode===u.Statement&&(":"===X.last_text&&0===X.ternary_depth||"TK_RESERVED"===Y&&i(X.last_text,["get","set"]))}function E(){return!!("TK_RESERVED"===Y&&i(X.last_text,["var","let","const"])&&"TK_WORD"===V.type||"TK_RESERVED"===Y&&"do"===X.last_text||"TK_RESERVED"===Y&&"return"===X.last_text&&!V.wanted_newline||"TK_RESERVED"===Y&&"else"===X.last_text&&("TK_RESERVED"!==V.type||"if"!==V.text)||"TK_END_EXPR"===Y&&(Q.mode===u.ForInitializer||Q.mode===u.Conditional)||"TK_WORD"===Y&&X.mode===u.BlockStatement&&!X.in_case&&"--"!==V.text&&"++"!==V.text&&"function"!==q&&"TK_WORD"!==V.type&&"TK_RESERVED"!==V.type||X.mode===u.ObjectLiteral&&(":"===X.last_text&&0===X.ternary_depth||"TK_RESERVED"===Y&&i(X.last_text,["get","set"])))&&(b(u.Statement),g(),"TK_RESERVED"===Y&&i(X.last_text,["var","let","const"])&&"TK_WORD"===V.type&&(X.declaration_statement=!0),C()||h("TK_RESERVED"===V.type&&i(V.text,["do","for","if","while"])),!0)}function k(e,t){for(var i=0;i<e.length;i++){if(n(e[i]).charAt(0)!==t)return!1}return!0}function T(e,t){for(var i,n=0,s=e.length;n<s;n++)if((i=e[n])&&0!==i.indexOf(t))return!1;return!0}function _(e){return i(e,["case","return","do","if","throw","else"])}function S(e){var t=K+(e||0);return t<0||t>=ie.length?null:ie[t]}function D(){E();var e=u.Expression;if("["===V.text){if("TK_WORD"===Y||")"===X.last_text)return"TK_RESERVED"===Y&&i(X.last_text,W.line_starters)&&(j.space_before_token=!0),b(e),m(),g(),void(te.space_in_paren&&(j.space_before_token=!0));e=u.ArrayLiteral,y(X.mode)&&("["!==X.last_text&&(","!==X.last_text||"]"!==q&&"}"!==q)||te.keep_array_indentation||p())}else"TK_RESERVED"===Y&&"for"===X.last_text?e=u.ForInitializer:"TK_RESERVED"===Y&&i(X.last_text,["if","while"])&&(e=u.Conditional);";"===X.last_text||"TK_START_BLOCK"===Y?p():"TK_END_EXPR"===Y||"TK_START_EXPR"===Y||"TK_END_BLOCK"===Y||"."===X.last_text?h(V.wanted_newline):"TK_RESERVED"===Y&&"("===V.text||"TK_WORD"===Y||"TK_OPERATOR"===Y?"TK_RESERVED"===Y&&("function"===X.last_word||"typeof"===X.last_word)||"*"===X.last_text&&"function"===q?te.space_after_anon_function&&(j.space_before_token=!0):"TK_RESERVED"!==Y||!i(X.last_text,W.line_starters)&&"catch"!==X.last_text||te.space_before_conditional&&(j.space_before_token=!0):j.space_before_token=!0,"("===V.text&&"TK_RESERVED"===Y&&"await"===X.last_word&&(j.space_before_token=!0),"("===V.text&&("TK_EQUALS"!==Y&&"TK_OPERATOR"!==Y||C()||h()),b(e),m(),te.space_in_paren&&(j.space_before_token=!0),g()}function $(){for(;X.mode===u.Statement;)x();X.multiline_frame&&h("]"===V.text&&y(X.mode)&&!te.keep_array_indentation),te.space_in_paren&&("TK_START_EXPR"!==Y||te.space_in_empty_paren?j.space_before_token=!0:(j.trim(),j.space_before_token=!1)),"]"===V.text&&te.keep_array_indentation?(m(),x()):(x(),m()),j.remove_redundant_indentation(Q),X.do_while&&Q.mode===u.Conditional&&(Q.mode=u.Expression,X.do_block=!1,X.do_while=!1)}function M(){var e=S(1),t=S(2);b(t&&(":"===t.text&&i(e.type,["TK_STRING","TK_WORD","TK_RESERVED"])||i(e.text,["get","set"])&&i(t.type,["TK_WORD","TK_RESERVED"]))?i(q,["class","interface"])?u.BlockStatement:u.ObjectLiteral:u.BlockStatement);var n=!e.comments_before.length&&"}"===e.text,s=n&&"function"===X.last_word&&"TK_END_EXPR"===Y;"expand"===te.brace_style||"none"===te.brace_style&&V.wanted_newline?"TK_OPERATOR"!==Y&&(s||"TK_EQUALS"===Y||"TK_RESERVED"===Y&&_(X.last_text)&&"else"!==X.last_text)?j.space_before_token=!0:p(!1,!0):"TK_OPERATOR"!==Y&&"TK_START_EXPR"!==Y?"TK_START_BLOCK"===Y?p():j.space_before_token=!0:y(Q.mode)&&","===X.last_text&&("}"===q?j.space_before_token=!0:p()),m(),g()}function A(){for(;X.mode===u.Statement;)x();var e="TK_START_BLOCK"===Y;"expand"===te.brace_style?e||p():e||(y(X.mode)&&te.keep_array_indentation?(te.keep_array_indentation=!1,p(),te.keep_array_indentation=!0):p()),x(),m()}function O(){if("TK_RESERVED"===V.type&&X.mode!==u.ObjectLiteral&&i(V.text,["set","get"])&&(V.type="TK_WORD"),"TK_RESERVED"===V.type&&X.mode===u.ObjectLiteral){":"==S(1).text&&(V.type="TK_WORD")}if(E()||!V.wanted_newline||w(X.mode)||"TK_OPERATOR"===Y&&"--"!==X.last_text&&"++"!==X.last_text||"TK_EQUALS"===Y||!te.preserve_newlines&&"TK_RESERVED"===Y&&i(X.last_text,["var","let","const","set","get"])||p(),X.do_block&&!X.do_while){if("TK_RESERVED"===V.type&&"while"===V.text)return j.space_before_token=!0,m(),j.space_before_token=!0,void(X.do_while=!0);p(),X.do_block=!1}if(X.if_block)if(X.else_block||"TK_RESERVED"!==V.type||"else"!==V.text){for(;X.mode===u.Statement;)x();X.if_block=!1,X.else_block=!1}else X.else_block=!0;if("TK_RESERVED"===V.type&&("case"===V.text||"default"===V.text&&X.in_case_statement))return p(),(X.case_body||te.jslint_happy)&&(v(),X.case_body=!1),m(),X.in_case=!0,void(X.in_case_statement=!0);if("TK_RESERVED"===V.type&&"function"===V.text&&((i(X.last_text,["}",";"])||j.just_added_newline()&&!i(X.last_text,["[","{",":","=",","]))&&(j.just_added_blankline()||V.comments_before.length||(p(),p(!0))),"TK_RESERVED"===Y||"TK_WORD"===Y?"TK_RESERVED"===Y&&i(X.last_text,["get","set","new","return","export","async"])?j.space_before_token=!0:"TK_RESERVED"===Y&&"default"===X.last_text&&"export"===q?j.space_before_token=!0:p():"TK_OPERATOR"===Y||"="===X.last_text?j.space_before_token=!0:(X.multiline_frame||!w(X.mode)&&!y(X.mode))&&p()),"TK_COMMA"!==Y&&"TK_START_EXPR"!==Y&&"TK_EQUALS"!==Y&&"TK_OPERATOR"!==Y||C()||h(),"TK_RESERVED"===V.type&&i(V.text,["function","get","set"]))return m(),void(X.last_word=V.text);if(J="NONE","TK_END_BLOCK"===Y?"TK_RESERVED"===V.type&&i(V.text,["else","catch","finally"])?"expand"===te.brace_style||"end-expand"===te.brace_style||"none"===te.brace_style&&V.wanted_newline?J="NEWLINE":(J="SPACE",j.space_before_token=!0):J="NEWLINE":"TK_SEMICOLON"===Y&&X.mode===u.BlockStatement?J="NEWLINE":"TK_SEMICOLON"===Y&&w(X.mode)?J="SPACE":"TK_STRING"===Y?J="NEWLINE":"TK_RESERVED"===Y||"TK_WORD"===Y||"*"===X.last_text&&"function"===q?J="SPACE":"TK_START_BLOCK"===Y?J="NEWLINE":"TK_END_EXPR"===Y&&(j.space_before_token=!0,J="NEWLINE"),"TK_RESERVED"===V.type&&i(V.text,W.line_starters)&&")"!==X.last_text&&(J="else"===X.last_text||"export"===X.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===V.type&&i(V.text,["else","catch","finally"]))if("TK_END_BLOCK"!==Y||"expand"===te.brace_style||"end-expand"===te.brace_style||"none"===te.brace_style&&V.wanted_newline)p();else{j.trim(!0);var e=j.current_line;"}"!==e.last()&&p(),j.space_before_token=!0}else"NEWLINE"===J?"TK_RESERVED"===Y&&_(X.last_text)?j.space_before_token=!0:"TK_END_EXPR"!==Y?"TK_START_EXPR"===Y&&"TK_RESERVED"===V.type&&i(V.text,["var","let","const"])||":"===X.last_text||("TK_RESERVED"===V.type&&"if"===V.text&&"else"===X.last_text?j.space_before_token=!0:p()):"TK_RESERVED"===V.type&&i(V.text,W.line_starters)&&")"!==X.last_text&&p():X.multiline_frame&&y(X.mode)&&","===X.last_text&&"}"===q?p():"SPACE"===J&&(j.space_before_token=!0);m(),X.last_word=V.text,"TK_RESERVED"===V.type&&"do"===V.text&&(X.do_block=!0),"TK_RESERVED"===V.type&&"if"===V.text&&(X.if_block=!0)}function F(){for(E()&&(j.space_before_token=!1);X.mode===u.Statement&&!X.if_block&&!X.do_block;)x();m()}function N(){E()?j.space_before_token=!0:"TK_RESERVED"===Y||"TK_WORD"===Y?j.space_before_token=!0:"TK_COMMA"===Y||"TK_START_EXPR"===Y||"TK_EQUALS"===Y||"TK_OPERATOR"===Y?C()||h():p(),m()}function L(){E(),X.declaration_statement&&(X.declaration_assignment=!0),j.space_before_token=!0,m(),j.space_before_token=!0}function R(){return X.declaration_statement?(w(X.parent.mode)&&(X.declaration_assignment=!1),m(),void(X.declaration_assignment?(X.declaration_assignment=!1,p(!1,!0)):(j.space_before_token=!0,te.comma_first&&h()))):(m(),void(X.mode===u.ObjectLiteral||X.mode===u.Statement&&X.parent.mode===u.ObjectLiteral?(X.mode===u.Statement&&x(),p()):(j.space_before_token=!0,te.comma_first&&h())))}function I(){if(E(),"TK_RESERVED"===Y&&_(X.last_text))return j.space_before_token=!0,void m();if("*"===V.text&&"TK_DOT"===Y)return void m();if(":"===V.text&&X.in_case)return X.case_body=!0,g(),m(),p(),void(X.in_case=!1);if("::"===V.text)return void m();"TK_OPERATOR"===Y&&h();var e=!0,t=!0;i(V.text,["--","++","!","~"])||i(V.text,["-","+"])&&(i(Y,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||i(X.last_text,W.line_starters)||","===X.last_text)?(e=!1,t=!1,!V.wanted_newline||"--"!==V.text&&"++"!==V.text||p(!1,!0),";"===X.last_text&&w(X.mode)&&(e=!0),"TK_RESERVED"===Y?e=!0:"TK_END_EXPR"===Y?e=!("]"===X.last_text&&("--"===V.text||"++"===V.text)):"TK_OPERATOR"===Y&&(e=i(V.text,["--","-","++","+"])&&i(X.last_text,["--","-","++","+"]),i(V.text,["+","-"])&&i(X.last_text,["--","++"])&&(t=!0)),X.mode!==u.BlockStatement&&X.mode!==u.Statement||"{"!==X.last_text&&";"!==X.last_text||p()):":"===V.text?0===X.ternary_depth?e=!1:X.ternary_depth-=1:"?"===V.text?X.ternary_depth+=1:"*"===V.text&&"TK_RESERVED"===Y&&"function"===X.last_text&&(e=!1,t=!1),j.space_before_token=j.space_before_token||e,m(),j.space_before_token=t}function P(){if(j.raw)return j.add_raw_token(V),void(V.directives&&"end"===V.directives.preserve&&(te.test_output_raw||(j.raw=!1)));if(V.directives)return p(!1,!0),m(),"start"===V.directives.preserve&&(j.raw=!0),void p(!1,!0);if(!d.newline.test(V.text)&&!V.wanted_newline)return j.space_before_token=!0,m(),void(j.space_before_token=!0);var e,t=a(V.text),i=!1,n=!1,o=V.whitespace_before,r=o.length;for(p(!1,!0),t.length>1&&(k(t.slice(1),"*")?i=!0:T(t.slice(1),o)&&(n=!0)),m(t[0]),e=1;e<t.length;e++)p(!1,!0),i?m(" "+s(t[e])):n&&t[e].length>r?m(t[e].substring(r)):j.add_token(t[e]);p(!1,!0)}function B(){V.wanted_newline?p(!1,!0):j.trim(!0),j.space_before_token=!0,m(),p(!1,!0)}function H(){E(),"TK_RESERVED"===Y&&_(X.last_text)?j.space_before_token=!0:h(")"===X.last_text&&te.break_chained_methods),m()}function U(){m(),"\n"===V.text[V.text.length-1]&&p()}function z(){for(;X.mode===u.Statement;)x()}var j,K,W,V,Y,q,G,X,Q,Z,J,ee,te,ie=[],ne="";for(ee={TK_START_EXPR:D,TK_END_EXPR:$,TK_START_BLOCK:M,TK_END_BLOCK:A,TK_WORD:O,TK_RESERVED:O,TK_SEMICOLON:F,TK_STRING:N,TK_EQUALS:L,TK_OPERATOR:I,TK_COMMA:R,TK_BLOCK_COMMENT:P,TK_COMMENT:B,TK_DOT:H,TK_UNKNOWN:U,TK_EOF:z},t=t||{},te={},void 0!==t.braces_on_own_line&&(te.brace_style=t.braces_on_own_line?"expand":"collapse"),te.brace_style=t.brace_style?t.brace_style:te.brace_style?te.brace_style:"collapse","expand-strict"===te.brace_style&&(te.brace_style="expand"),te.indent_size=t.indent_size?parseInt(t.indent_size,10):4,te.indent_char=t.indent_char?t.indent_char:" ",te.eol=t.eol?t.eol:"\n",te.preserve_newlines=void 0===t.preserve_newlines||t.preserve_newlines,te.break_chained_methods=void 0!==t.break_chained_methods&&t.break_chained_methods,te.max_preserve_newlines=void 0===t.max_preserve_newlines?0:parseInt(t.max_preserve_newlines,10),te.space_in_paren=void 0!==t.space_in_paren&&t.space_in_paren,te.space_in_empty_paren=void 0!==t.space_in_empty_paren&&t.space_in_empty_paren,te.jslint_happy=void 0!==t.jslint_happy&&t.jslint_happy,te.space_after_anon_function=void 0!==t.space_after_anon_function&&t.space_after_anon_function,te.keep_array_indentation=void 0!==t.keep_array_indentation&&t.keep_array_indentation,te.space_before_conditional=void 0===t.space_before_conditional||t.space_before_conditional,te.unescape_strings=void 0!==t.unescape_strings&&t.unescape_strings,te.wrap_line_length=void 0===t.wrap_line_length?0:parseInt(t.wrap_line_length,10),te.e4x=void 0!==t.e4x&&t.e4x,te.end_with_newline=void 0!==t.end_with_newline&&t.end_with_newline,te.comma_first=void 0!==t.comma_first&&t.comma_first,te.test_output_raw=void 0!==t.test_output_raw&&t.test_output_raw,te.jslint_happy&&(te.space_after_anon_function=!0),t.indent_with_tabs&&(te.indent_char="\t",te.indent_size=1),te.eol=te.eol.replace(/\\r/,"\r").replace(/\\n/,"\n"),G="";te.indent_size>0;)G+=te.indent_char,te.indent_size-=1;var se=0;if(e&&e.length){for(;" "===e.charAt(se)||"\t"===e.charAt(se);)ne+=e.charAt(se),se+=1;e=e.substring(se)}Y="TK_START_BLOCK",q="",j=new l(G,ne),j.raw=te.test_output_raw,Z=[],b(u.BlockStatement),this.beautify=function(){var t,i;for(W=new c(e,te,G),ie=W.tokenize(),K=0;t=S();){for(var n=0;n<t.comments_before.length;n++)r(t.comments_before[n]);r(t),q=X.last_text,Y=t.type,X.last_text=t.text,K+=1}return i=j.get_code(),te.end_with_newline&&(i+="\n"),"\n"!=te.eol&&(i=i.replace(/[\n]/g,te.eol)),i}}function a(e){var t=0,i=-1,n=[],s=!0;this.set_indent=function(n){t=e.baseIndentLength+n*e.indent_length,i=n},this.get_character_count=function(){return t},this.is_empty=function(){return s},this.last=function(){return this._empty?null:n[n.length-1]},this.push=function(e){n.push(e),t+=e.length,s=!1},this.pop=function(){var e=null;return s||(e=n.pop(),t-=e.length,s=0===n.length),e},this.remove_indent=function(){i>0&&(i-=1,t-=e.indent_length)},this.trim=function(){for(;" "===this.last();)n.pop(),t-=1;s=0===n.length},this.toString=function(){var t="";return this._empty||(i>=0&&(t=e.indent_cache[i]),t+=n.join("")),t}}function l(e,t){t=t||"",this.indent_cache=[t],this.baseIndentLength=t.length,this.indent_length=e.length,this.raw=!1;var i=[];this.baseIndentString=t,this.indent_string=e,this.previous_line=null,this.current_line=null,this.space_before_token=!1,this.add_outputline=function(){this.previous_line=this.current_line,this.current_line=new a(this),i.push(this.current_line)},this.add_outputline(),this.get_line_number=function(){return i.length},this.add_new_line=function(e){return!(1===this.get_line_number()&&this.just_added_newline()||!e&&this.just_added_newline()||(this.raw||this.add_outputline(),0))},this.get_code=function(){return i.join("\n").replace(/[\r\n\t ]+$/,"")},this.set_indent=function(e){if(i.length>1){for(;e>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);return this.current_line.set_indent(e),!0}return this.current_line.set_indent(0),!1},this.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.add_outputline();this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1},this.add_token=function(e){this.add_space_before_token(),this.current_line.push(e)},this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},this.remove_redundant_indentation=function(e){if(!e.multiline_frame&&e.mode!==u.ForInitializer&&e.mode!==u.Conditional)for(var t=e.start_line_index,n=i.length;t<n;)i[t].remove_indent(),t++},this.trim=function(n){for(n=void 0!==n&&n,this.current_line.trim(e,t);n&&i.length>1&&this.current_line.is_empty();)i.pop(),this.current_line=i[i.length-1],this.current_line.trim();this.previous_line=i.length>1?i[i.length-2]:null},this.just_added_newline=function(){return this.current_line.is_empty()},this.just_added_blankline=function(){if(this.just_added_newline()){if(1===i.length)return!0;return i[i.length-2].is_empty()}return!1}}function c(e,t,s){function o(e){if(!e.match(k))return null;var t={};T.lastIndex=0;for(var i=T.exec(e);i;)t[i[1]]=i[2],i=T.exec(e);return t}function r(){var s,r=[];if(m=0,g="",y>=w)return["","TK_EOF"];var k;k=b.length?b[b.length-1]:new h("TK_START_BLOCK","{");var T=e.charAt(y);for(y+=1;i(T,l);){if(d.newline.test(T)?"\n"===T&&"\r"===e.charAt(y-2)||(m+=1,r=[]):r.push(T),y>=w)return["","TK_EOF"];T=e.charAt(y),y+=1}if(r.length&&(g=r.join("")),c.test(T)){var D=!0,$=!0,M=c;for("0"===T&&y<w&&/[Xxo]/.test(e.charAt(y))?(D=!1,$=!1,T+=e.charAt(y),y+=1,M=/[o]/.test(e.charAt(y))?u:p):(T="",y-=1);y<w&&M.test(e.charAt(y));)T+=e.charAt(y),y+=1,D&&y<w&&"."===e.charAt(y)&&(T+=e.charAt(y),y+=1,D=!1),$&&y<w&&/[Ee]/.test(e.charAt(y))&&(T+=e.charAt(y),y+=1,y<w&&/[+-]/.test(e.charAt(y))&&(T+=e.charAt(y),y+=1),$=!1,D=!1);return[T,"TK_WORD"]}if(d.isIdentifierStart(e.charCodeAt(y-1))){if(y<w)for(;d.isIdentifierChar(e.charCodeAt(y))&&(T+=e.charAt(y),(y+=1)!==w););return"TK_DOT"===k.type||"TK_RESERVED"===k.type&&i(k.text,["set","get"])||!i(T,x)?[T,"TK_WORD"]:"in"===T?[T,"TK_OPERATOR"]:[T,"TK_RESERVED"]}if("("===T||"["===T)return[T,"TK_START_EXPR"];if(")"===T||"]"===T)return[T,"TK_END_EXPR"];if("{"===T)return[T,"TK_START_BLOCK"];if("}"===T)return[T,"TK_END_BLOCK"];if(";"===T)return[T,"TK_SEMICOLON"];if("/"===T){var A="";if("*"===e.charAt(y)){y+=1,C.lastIndex=y;var O=C.exec(e);A="/*"+O[0],y+=O[0].length;var F=o(A);return F&&"start"===F.ignore&&(_.lastIndex=y,O=_.exec(e),A+=O[0],y+=O[0].length),A=A.replace(d.lineBreak,"\n"),[A,"TK_BLOCK_COMMENT",F]}if("/"===e.charAt(y)){y+=1,E.lastIndex=y;var O=E.exec(e);return A="//"+O[0],y+=O[0].length,[A,"TK_COMMENT"]}}if("`"===T||"'"===T||'"'===T||("/"===T||t.e4x&&"<"===T&&e.slice(y-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/))&&("TK_RESERVED"===k.type&&i(k.text,["return","case","throw","else","do","typeof","yield"])||"TK_END_EXPR"===k.type&&")"===k.text&&k.parent&&"TK_RESERVED"===k.parent.type&&i(k.parent.text,["if","while","for"])||i(k.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var N=T,L=!1,R=!1;if(s=T,"/"===N)for(var I=!1;y<w&&(L||I||e.charAt(y)!==N)&&!d.newline.test(e.charAt(y));)s+=e.charAt(y),L?L=!1:(L="\\"===e.charAt(y),"["===e.charAt(y)?I=!0:"]"===e.charAt(y)&&(I=!1)),y+=1;else if(t.e4x&&"<"===N){var P=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/g,B=e.slice(y-1),H=P.exec(B);if(H&&0===H.index){for(var U=H[2],z=0;H;){var j=!!H[1],K=H[2],W=!!H[H.length-1]||"![CDATA["===K.slice(0,8);if(K!==U||W||(j?--z:++z),z<=0)break;H=P.exec(B)}var V=H?H.index+H[0].length:B.length;return B=B.slice(0,V),y+=V-1,B=B.replace(d.lineBreak,"\n"),[B,"TK_STRING"]}}else for(;y<w&&(L||e.charAt(y)!==N&&("`"===N||!d.newline.test(e.charAt(y))));)(L||"`"===N)&&d.newline.test(e.charAt(y))?("\r"===e.charAt(y)&&"\n"===e.charAt(y+1)&&(y+=1),s+="\n"):s+=e.charAt(y),L?("x"!==e.charAt(y)&&"u"!==e.charAt(y)||(R=!0),L=!1):L="\\"===e.charAt(y),y+=1;if(R&&t.unescape_strings&&(s=a(s)),y<w&&e.charAt(y)===N&&(s+=N,y+=1,"/"===N))for(;y<w&&d.isIdentifierStart(e.charCodeAt(y));)s+=e.charAt(y),y+=1;return[s,"TK_STRING"]}if("#"===T){if(0===b.length&&"!"===e.charAt(y)){for(s=T;y<w&&"\n"!==T;)T=e.charAt(y),s+=T,y+=1;return[n(s)+"\n","TK_UNKNOWN"]}var Y="#";if(y<w&&c.test(e.charAt(y))){do{T=e.charAt(y),Y+=T,y+=1}while(y<w&&"#"!==T&&"="!==T);return"#"===T||("["===e.charAt(y)&&"]"===e.charAt(y+1)?(Y+="[]",y+=2):"{"===e.charAt(y)&&"}"===e.charAt(y+1)&&(Y+="{}",y+=2)),[Y,"TK_WORD"]}}if("<"===T&&("?"===e.charAt(y)||"%"===e.charAt(y))){S.lastIndex=y-1;var q=S.exec(e);if(q)return T=q[0],y+=T.length-1,T=T.replace(d.lineBreak,"\n"),[T,"TK_STRING"]}if("<"===T&&"\x3c!--"===e.substring(y-1,y+3)){for(y+=3,T="\x3c!--";!d.newline.test(e.charAt(y))&&y<w;)T+=e.charAt(y),y++;return v=!0,[T,"TK_COMMENT"]}if("-"===T&&v&&"--\x3e"===e.substring(y-1,y+2))return v=!1,y+=2,["--\x3e","TK_COMMENT"];if("."===T)return[T,"TK_DOT"];if(i(T,f)){for(;y<w&&i(T+e.charAt(y),f)&&(T+=e.charAt(y),!((y+=1)>=w)););return","===T?[T,"TK_COMMA"]:"="===T?[T,"TK_EQUALS"]:[T,"TK_OPERATOR"]}return[T,"TK_UNKNOWN"]}function a(e){for(var t,i=!1,n="",s=0,o="",r=0;i||s<e.length;)if(t=e.charAt(s),s++,i){if(i=!1,"x"===t)o=e.substr(s,2),s+=2;else{if("u"!==t){n+="\\"+t;continue}o=e.substr(s,4),s+=4}if(!o.match(/^[0123456789abcdefABCDEF]+$/))return e;if((r=parseInt(o,16))>=0&&r<32){n+="x"===t?"\\x"+o:"\\u"+o;continue}if(34===r||39===r||92===r)n+="\\"+String.fromCharCode(r);else{if("x"===t&&r>126&&r<=255)return e;n+=String.fromCharCode(r)}}else"\\"===t?i=!0:n+=t;return n}var l="\n\r\t ".split(""),c=/[0-9]/,u=/[01234567]/,p=/[0123456789abcdefABCDEF]/,f="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: =>".split(" ");this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var m,g,v,b,y,w,x=this.line_starters.concat(["do","in","else","get","set","new","catch","finally","typeof","yield","async","await"]),C=/([\s\S]*?)((?:\*\/)|$)/g,E=/([^\n\r\u2028\u2029]*)/g,k=/\/\* beautify( \w+[:]\w+)+ \*\//g,T=/ (\w+)[:](\w+)/g,_=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g,S=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g;this.tokenize=function(){w=e.length,y=0,v=!1,b=[];for(var t,i,n,s=null,o=[],a=[];!i||"TK_EOF"!==i.type;){for(n=r(),t=new h(n[1],n[0],m,g);"TK_COMMENT"===t.type||"TK_BLOCK_COMMENT"===t.type||"TK_UNKNOWN"===t.type;)"TK_BLOCK_COMMENT"===t.type&&(t.directives=n[2]),a.push(t),n=r(),t=new h(n[1],n[0],m,g);a.length&&(t.comments_before=a,a=[]),"TK_START_BLOCK"===t.type||"TK_START_EXPR"===t.type?(t.parent=i,o.push(s),s=t):("TK_END_BLOCK"===t.type||"TK_END_EXPR"===t.type)&&s&&("]"===t.text&&"["===s.text||")"===t.text&&"("===s.text||"}"===t.text&&"{"===s.text)&&(t.parent=s.parent,s=o.pop()),b.push(t),i=t}return b}}var d={};!function(e){var t="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",i=new RegExp("["+t+"]"),n=new RegExp("["+t+"̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]");e.newline=/[\n\r\u2028\u2029]/,e.lineBreak=new RegExp("\r\n|"+e.newline.source),e.allLineBreaks=new RegExp(e.lineBreak.source,"g"),e.isIdentifierStart=function(e){return e<65?36===e||64===e:e<91||(e<97?95===e:e<123||e>=170&&i.test(String.fromCharCode(e)))},e.isIdentifierChar=function(e){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||e>=170&&n.test(String.fromCharCode(e))))}}(d);var u={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},h=function(e,t,i,n,s,o){this.type=e,this.text=t,this.comments_before=[],this.newlines=i||0,this.wanted_newline=i>0,this.whitespace_before=n||"",this.parent=null,this.directives=null};return{run:e}}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{codeMirror:!0,codeMirrorOptions:{lineNumbers:!0,tabMode:"indent",indentWithTabs:!0,lineWrapping:!0,mode:"text/html",tabSize:2},codeBeautifierOptions:{end_with_newline:!0,indent_inner_html:!0,extra_liners:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","ol","table","dl"],brace_style:"expand",indent_char:"\t",indent_size:1,wrap_line_length:0},codeViewKeepActiveButtons:["fullscreen"]}),e.FE.PLUGINS.codeView=function(t){function i(){return t.$box.hasClass("fr-code-view")}function n(){return u?u.getValue():d.val()}function s(e){var i=n();t.html.set(i),t.$el.blur(),t.$tb.find(" > .fr-command").not(e).removeClass("fr-disabled").attr("aria-disabled",!1),e.removeClass("fr-active").attr("aria-pressed",!1),t.events.focus(!0),t.placeholder.refresh(),t.undo.saveStep()}function o(i){d||(l(),!u&&t.opts.codeMirror&&"undefined"!=typeof CodeMirror?u=CodeMirror.fromTextArea(d.get(0),t.opts.codeMirrorOptions):t.events.$on(d,"keydown keyup change input",function(){if(t.opts.height)this.rows=null;else if(this.rows||(this.rows=1),0===this.value.length)this.rows=1;else{for(this.style.height="auto";this.rows>1&&this.scrollHeight<=this.offsetHeight;)this.rows-=1;for(;this.scrollHeight>this.offsetHeight&&(!t.opts.heightMax||this.offsetHeight<t.opts.heightMax);)this.rows+=1}})),t.undo.saveStep(),t.html.cleanEmptyTags(),t.html.cleanWhiteTags(!0),t.core.hasFocus()&&(t.core.isEmpty()||(t.selection.save(),t.$el.find('.fr-marker[data-type="true"]:first').replaceWith('<span class="fr-tmp fr-sm">F</span>'),t.$el.find('.fr-marker[data-type="false"]:last').replaceWith('<span class="fr-tmp fr-em">F</span>')));var n=t.html.get(!1,!0);t.$el.find("span.fr-tmp").remove(),t.$box.toggleClass("fr-code-view",!0),t.core.hasFocus()&&t.$el.blur(),n=n.replace(/<span class="fr-tmp fr-sm">F<\/span>/,"FROALA-SM"),n=n.replace(/<span class="fr-tmp fr-em">F<\/span>/,"FROALA-EM"),t.codeBeautifier&&(n=t.codeBeautifier.run(n,t.opts.codeBeautifierOptions));var s,o;if(u){s=n.indexOf("FROALA-SM"),o=n.indexOf("FROALA-EM"),s>o?s=o:o-=9,n=n.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"");var r=n.substring(0,s).length-n.substring(0,s).replace(/\n/g,"").length,a=n.substring(0,o).length-n.substring(0,o).replace(/\n/g,"").length;s=n.substring(0,s).length-n.substring(0,n.substring(0,s).lastIndexOf("\n")+1).length,o=n.substring(0,o).length-n.substring(0,n.substring(0,o).lastIndexOf("\n")+1).length,u.setSize(null,t.opts.height?t.opts.height:"auto"),t.opts.heightMin&&t.$box.find(".CodeMirror-scroll").css("min-height",t.opts.heightMin),u.setValue(n),u.focus(),u.setSelection({line:r,ch:s},{line:a,ch:o}),u.refresh(),u.clearHistory()}else{s=n.indexOf("FROALA-SM"),o=n.indexOf("FROALA-EM")-9,t.opts.heightMin&&d.css("min-height",t.opts.heightMin),t.opts.height&&d.css("height",t.opts.height),t.opts.heightMax&&d.css("max-height",t.opts.height||t.opts.heightMax),
d.val(n.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"")).trigger("change");var c=e(t.o_doc).scrollTop();d.focus(),d.get(0).setSelectionRange(s,o),e(t.o_doc).scrollTop(c)}t.$tb.find(" > .fr-command").not(i).filter(function(){return t.opts.codeViewKeepActiveButtons.indexOf(e(this).data("cmd"))<0}).addClass("fr-disabled").attr("aria-disabled",!0),i.addClass("fr-active").attr("aria-pressed",!0),!t.helpers.isMobile()&&t.opts.toolbarInline&&t.toolbar.hide()}function r(e){void 0===e&&(e=!i());var n=t.$tb.find('.fr-command[data-cmd="html"]');e?(t.popups.hideAll(),o(n)):(t.$box.toggleClass("fr-code-view",!1),s(n))}function a(){i()&&r(t.$tb.find('button[data-cmd="html"]')),u&&u.toTextArea(),d.val("").removeData().remove(),d=null,h&&(h.remove(),h=null)}function l(){d=e('<textarea class="fr-code" tabIndex="-1">'),t.$wp.append(d),d.attr("dir",t.opts.direction),t.$box.hasClass("fr-basic")||(h=e('<a data-cmd="html" title="Code View" class="fr-command fr-btn html-switch'+(t.helpers.isMobile()?"":" fr-desktop")+'" role="button" tabIndex="-1"><i class="fa fa-code"></i></button>'),t.$box.append(h),t.events.bindClick(t.$box,"a.html-switch",function(){r(!1)}));var s=function(){return!i()};t.events.on("buttons.refresh",s),t.events.on("copy",s,!0),t.events.on("cut",s,!0),t.events.on("paste",s,!0),t.events.on("destroy",a,!0),t.events.on("html.set",function(){i()&&r(!0)}),t.events.on("form.submit",function(){i()&&(t.html.set(n()),t.events.trigger("contentChanged",[],!0))},!0)}function c(){if(!t.$wp)return!1}var d,u,h;return{_init:c,toggle:r,isActive:i,get:n}},e.FE.RegisterCommand("html",{title:"Code View",undo:!1,focus:!1,forcedRefresh:!0,toggle:!0,callback:function(){this.codeView.toggle()},plugin:"codeView"}),e.FE.DefineIcon("html",{NAME:"code"})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{"colors.picker":"[_BUTTONS_][_TEXT_COLORS_][_BACKGROUND_COLORS_]"}),e.extend(e.FE.DEFAULTS,{colorsText:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsBackground:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsStep:7,colorsDefaultTab:"text",colorsButtons:["colorsBack","|","-"]}),e.FE.PLUGINS.colors=function(t){function i(){var e=t.$tb.find('.fr-command[data-cmd="color"]'),i=t.popups.get("colors.picker");if(i||(i=s()),!i.hasClass("fr-active"))if(t.popups.setContainer("colors.picker",t.$tb),l(i.find(".fr-selected-tab").attr("data-param1")),e.is(":visible")){var n=e.offset().left+e.outerWidth()/2,o=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("colors.picker",n,o,e.outerHeight())}else t.position.forSelection(i),t.popups.show("colors.picker")}function n(){t.popups.hide("colors.picker")}function s(){var e='<div class="fr-buttons fr-colors-buttons">';t.opts.toolbarInline&&t.opts.colorsButtons.length>0&&(e+=t.button.buildList(t.opts.colorsButtons)),e+=o()+"</div>";var i={buttons:e,text_colors:r("text"),background_colors:r("background")},n=t.popups.create("colors.picker",i);return a(n),n}function o(){var e='<div class="fr-colors-tabs fr-group">';return e+='<span class="fr-colors-tab '+("background"==t.opts.colorsDefaultTab?"":"fr-selected-tab ")+'fr-command" tabIndex="-1" role="button" aria-pressed="'+("background"!=t.opts.colorsDefaultTab)+'" data-param1="text" data-cmd="colorChangeSet" title="'+t.language.translate("Text")+'">'+t.language.translate("Text")+"</span>",(e+='<span class="fr-colors-tab '+("background"==t.opts.colorsDefaultTab?"fr-selected-tab ":"")+'fr-command" tabIndex="-1" role="button" aria-pressed="'+("background"==t.opts.colorsDefaultTab)+'" data-param1="background" data-cmd="colorChangeSet" title="'+t.language.translate("Background")+'">'+t.language.translate("Background")+"</span>")+"</div>"}function r(e){for(var i="text"==e?t.opts.colorsText:t.opts.colorsBackground,n='<div class="fr-color-set fr-'+e+"-color"+(t.opts.colorsDefaultTab==e||"text"!=t.opts.colorsDefaultTab&&"background"!=t.opts.colorsDefaultTab&&"text"==e?" fr-selected-set":"")+'">',s=0;s<i.length;s++)0!==s&&s%t.opts.colorsStep==0&&(n+="<br>"),n+="REMOVE"!=i[s]?'<span class="fr-command fr-select-color" style="background: '+i[s]+';" tabIndex="-1" aria-selected="false" role="button" data-cmd="'+e+'Color" data-param1="'+i[s]+'"><span class="fr-sr-only">'+t.language.translate("Color")+" "+i[s]+"&nbsp;&nbsp;&nbsp;</span></span>":'<span class="fr-command fr-select-color" data-cmd="'+e+'Color" tabIndex="-1" role="button" data-param1="REMOVE" title="'+t.language.translate("Clear Formatting")+'">'+t.icon.create("remove")+'<span class="fr-sr-only">'+t.language.translate("Clear Formatting")+"</span></span>";return n+"</div>"}function a(i){t.events.on("popup.tab",function(n){var s=e(n.currentTarget);if(!t.popups.isVisible("colors.picker")||!s.is("span"))return!0;var o=n.which,r=!0;if(e.FE.KEYCODE.TAB==o){var a=i.find(".fr-buttons");r=!t.accessibility.focusToolbar(a,!!n.shiftKey)}else if(e.FE.KEYCODE.ARROW_UP==o||e.FE.KEYCODE.ARROW_DOWN==o||e.FE.KEYCODE.ARROW_LEFT==o||e.FE.KEYCODE.ARROW_RIGHT==o){if(s.is("span.fr-select-color")){var l=s.parent().find("span.fr-select-color"),c=l.index(s),d=t.opts.colorsStep,u=Math.floor(l.length/d),h=c%d,p=Math.floor(c/d),f=p*d+h,m=u*d;e.FE.KEYCODE.ARROW_UP==o?f=((f-d)%m+m)%m:e.FE.KEYCODE.ARROW_DOWN==o?f=(f+d)%m:e.FE.KEYCODE.ARROW_LEFT==o?f=((f-1)%m+m)%m:e.FE.KEYCODE.ARROW_RIGHT==o&&(f=(f+1)%m);var g=e(l.get(f));t.events.disableBlur(),g.focus(),r=!1}}else e.FE.KEYCODE.ENTER==o&&(t.button.exec(s),r=!1);return!1===r&&(n.preventDefault(),n.stopPropagation()),r},!0)}function l(i){var n,s=t.popups.get("colors.picker"),o=e(t.selection.element());n="background"==i?"background-color":"color";var r=s.find(".fr-"+i+"-color .fr-select-color");for(r.find(".fr-selected-color").remove(),r.removeClass("fr-active-item"),r.not('[data-param1="REMOVE"]').attr("aria-selected",!1);o.get(0)!=t.el;){if("transparent"!=o.css(n)&&"rgba(0, 0, 0, 0)"!=o.css(n)){var a=s.find(".fr-"+i+'-color .fr-select-color[data-param1="'+t.helpers.RGBToHex(o.css(n))+'"]');a.append('<span class="fr-selected-color" aria-hidden="true"></span>'),a.addClass("fr-active-item").attr("aria-selected",!0);break}o=o.parent()}}function c(e,i){e.hasClass("fr-selected-tab")||(e.siblings().removeClass("fr-selected-tab").attr("aria-pressed",!1),e.addClass("fr-selected-tab").attr("aria-pressed",!0),e.parents(".fr-popup").find(".fr-color-set").removeClass("fr-selected-set"),e.parents(".fr-popup").find(".fr-color-set.fr-"+i+"-color").addClass("fr-selected-set"),l(i)),t.accessibility.focusPopup(e.parents(".fr-popup"))}function d(e){"REMOVE"!=e?t.format.applyStyle("background-color",t.helpers.HEXtoRGB(e)):t.format.removeStyle("background-color"),n()}function u(e){"REMOVE"!=e?t.format.applyStyle("color",t.helpers.HEXtoRGB(e)):t.format.removeStyle("color"),n()}function h(){t.popups.hide("colors.picker"),t.toolbar.showInline()}return{showColorsPopup:i,hideColorsPopup:n,changeSet:c,background:d,text:u,back:h}},e.FE.DefineIcon("colors",{NAME:"tint"}),e.FE.RegisterCommand("color",{title:"Colors",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("colors.picker")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("colors.picker")):this.colors.showColorsPopup()},plugin:"colors"}),e.FE.RegisterCommand("textColor",{undo:!0,callback:function(e,t){this.colors.text(t)}}),e.FE.RegisterCommand("backgroundColor",{undo:!0,callback:function(e,t){this.colors.background(t)}}),e.FE.RegisterCommand("colorChangeSet",{undo:!1,focus:!1,callback:function(e,t){var i=this.popups.get("colors.picker").find('.fr-command[data-cmd="'+e+'"][data-param1="'+t+'"]');this.colors.changeSet(i,t)}}),e.FE.DefineIcon("colorsBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("colorsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.colors.back()}}),e.FE.DefineIcon("remove",{NAME:"eraser"})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{"file.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_PROGRESS_BAR_]"}),e.extend(e.FE.DEFAULTS,{fileUploadURL:"https://i.froala.com/upload",fileUploadParam:"file",fileUploadParams:{},fileUploadToS3:!1,fileUploadMethod:"POST",fileMaxSize:10485760,fileAllowedTypes:["*"],fileInsertButtons:["fileBack","|"],fileUseSelectedText:!1}),e.FE.PLUGINS.file=function(t){function i(){var e=t.$tb.find('.fr-command[data-cmd="insertFile"]'),i=t.popups.get("file.insert");if(i||(i=b()),s(),!i.hasClass("fr-active")){t.popups.refresh("file.insert"),t.popups.setContainer("file.insert",t.$tb);var n=e.offset().left+e.outerWidth()/2,o=e.offset().top+(t.opts.toolbarBottom?0:e.outerHeight());t.popups.show("file.insert",n,o,e.outerHeight())}}function n(){var e=t.popups.get("file.insert");e||(e=b()),e.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),e.find(".fr-file-progress-bar-layer").addClass("fr-active"),e.find(".fr-buttons").hide(),o("Uploading",0)}function s(e){var i=t.popups.get("file.insert");i&&(i.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),i.find(".fr-file-progress-bar-layer").removeClass("fr-active"),i.find(".fr-buttons").show(),e&&(t.events.focus(),t.popups.hide("file.insert")))}function o(e,i){var n=t.popups.get("file.insert");if(n){var s=n.find(".fr-file-progress-bar-layer");s.find("h3").text(e+(i?" "+i+"%":"")),s.removeClass("fr-error"),i?(s.find("div").removeClass("fr-indeterminate"),s.find("div > span").css("width",i+"%")):s.find("div").addClass("fr-indeterminate")}}function r(e){n();var i=t.popups.get("file.insert"),s=i.find(".fr-file-progress-bar-layer");s.addClass("fr-error");var o=s.find("h3");o.text(e),t.events.disableBlur(),o.focus()}function a(e,i,n){t.edit.on(),t.events.focus(!0),t.selection.restore(),t.opts.fileUseSelectedText&&t.selection.text().length&&(i=t.selection.text()),t.html.insert('<a href="'+e+'" id="fr-inserted-file" class="fr-file">'+i+"</a>");var s=t.$el.find("#fr-inserted-file");s.removeAttr("id"),t.popups.hide("file.insert"),t.undo.saveStep(),E(),t.events.trigger("file.inserted",[s,n])}function l(i){try{if(!1===t.events.trigger("file.uploaded",[i],!0))return t.edit.on(),!1;var n=e.parseJSON(i);return n.link?n:(p(T,i),!1)}catch(e){return p(S,i),!1}}function c(i){try{var n=e(i).find("Location").text(),s=e(i).find("Key").text();return!1===t.events.trigger("file.uploadedToS3",[n,s,i],!0)?(t.edit.on(),!1):n}catch(e){return p(S,i),!1}}function d(e){var i=this.status,n=this.response,s=this.responseXML,o=this.responseText;try{if(t.opts.fileUploadToS3)if(201==i){var r=c(s);r&&a(r,e,n||s)}else p(S,n||s);else if(i>=200&&i<300){var d=l(o);d&&a(d.link,e,n||o)}else p(_,n||o)}catch(e){p(S,n||o)}}function u(){p(S,this.response||this.responseText||this.responseXML)}function h(e){if(e.lengthComputable){o("Uploading",e.loaded/e.total*100|0)}}function p(e,i){t.edit.on(),r(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("file.error",[{code:e,message:M[e]},i])}function f(){t.edit.on(),s(!0)}function m(e){if(void 0!==e&&e.length>0){if(!1===t.events.trigger("file.beforeUpload",[e]))return!1;var i=e[0];if(i.size>t.opts.fileMaxSize)return p(D),!1;if(t.opts.fileAllowedTypes.indexOf("*")<0&&t.opts.fileAllowedTypes.indexOf(i.type.replace(/file\//g,""))<0)return p($),!1;var s;if(t.drag_support.formdata&&(s=t.drag_support.formdata?new FormData:null),s){var o;if(!1!==t.opts.fileUploadToS3){s.append("key",t.opts.fileUploadToS3.keyStart+(new Date).getTime()+"-"+(i.name||"untitled")),s.append("success_action_status","201"),s.append("X-Requested-With","xhr"),s.append("Content-Type",i.type);for(o in t.opts.fileUploadToS3.params)t.opts.fileUploadToS3.params.hasOwnProperty(o)&&s.append(o,t.opts.fileUploadToS3.params[o])}for(o in t.opts.fileUploadParams)t.opts.fileUploadParams.hasOwnProperty(o)&&s.append(o,t.opts.fileUploadParams[o]);s.append(t.opts.fileUploadParam,i);var r=t.opts.fileUploadURL;t.opts.fileUploadToS3&&(r=t.opts.fileUploadToS3.uploadURL?t.opts.fileUploadToS3.uploadURL:"https://"+t.opts.fileUploadToS3.region+".amazonaws.com/"+t.opts.fileUploadToS3.bucket);var a=t.core.getXHR(r,t.opts.fileUploadMethod);a.onload=function(){d.call(a,i.name)},a.onerror=u,a.upload.onprogress=h,a.onabort=f,n(),t.edit.off();var l=t.popups.get("file.insert");l&&l.off("abortUpload").on("abortUpload",function(){4!=a.readyState&&a.abort()}),a.send(s)}}}function g(i){t.events.$on(i,"dragover dragenter",".fr-file-upload-layer",function(){return e(this).addClass("fr-drop"),!1},!0),t.events.$on(i,"dragleave dragend",".fr-file-upload-layer",function(){return e(this).removeClass("fr-drop"),!1},!0),t.events.$on(i,"drop",".fr-file-upload-layer",function(n){n.preventDefault(),n.stopPropagation(),e(this).removeClass("fr-drop");var s=n.originalEvent.dataTransfer;if(s&&s.files){(i.data("instance")||t).file.upload(s.files)}},!0),t.events.$on(i,"change",'.fr-file-upload-layer input[type="file"]',function(){if(this.files){(i.data("instance")||t).file.upload(this.files)}e(this).val("")},!0)}function v(){s()}function b(e){if(e)return t.popups.onHide("file.insert",v),!0;var i="";i='<div class="fr-buttons">'+t.button.buildList(t.opts.fileInsertButtons)+"</div>";var n="";n='<div class="fr-file-upload-layer fr-layer fr-active" id="fr-file-upload-layer-'+t.id+'"><strong>'+t.language.translate("Drop file")+"</strong><br>("+t.language.translate("or click")+')<div class="fr-form"><input type="file" name="'+t.opts.fileUploadParam+'" accept="/*" tabIndex="-1" aria-labelledby="fr-file-upload-layer-'+t.id+'" role="button"></div></div>';var s={buttons:i,upload_layer:n,progress_bar:'<div class="fr-file-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="fileDismissError" tabIndex="2" role="button">OK</button></div></div>'},o=t.popups.create("file.insert",s);return g(o),o}function y(e){if(t.node.hasClass(e,"fr-file"))return t.events.trigger("file.unlink",[e])}function w(i){var s=i.originalEvent.dataTransfer;if(s&&s.files&&s.files.length){var o=s.files[0];if(o&&void 0!==o.type&&o.type.indexOf("image")<0&&(t.opts.fileAllowedTypes.indexOf(o.type)>=0||t.opts.fileAllowedTypes.indexOf("*")>=0)){t.markers.remove(),t.markers.insertAtPoint(i.originalEvent),t.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),t.popups.hideAll();var r=t.popups.get("file.insert");return r||(r=b()),t.popups.setContainer("file.insert",e(t.opts.scrollableContainer)),t.popups.show("file.insert",i.originalEvent.pageX,i.originalEvent.pageY),n(),m(s.files),i.preventDefault(),i.stopPropagation(),!1}}}function x(){t.events.on("drop",w),t.events.$on(t.$win,"keydown",function(i){var n=i.which,s=t.popups.get("file.insert");s&&n==e.FE.KEYCODE.ESC&&s.trigger("abortUpload")}),t.events.on("destroy",function(){var e=t.popups.get("file.insert");e&&e.trigger("abortUpload")})}function C(){t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("file.insert"),t.toolbar.showInline()}function E(){var e,i=Array.prototype.slice.call(t.el.querySelectorAll("a.fr-file")),n=[];for(e=0;e<i.length;e++)n.push(i[e].getAttribute("href"));if(A)for(e=0;e<A.length;e++)n.indexOf(A[e].getAttribute("href"))<0&&t.events.trigger("file.unlink",[A[e]]);A=i}function k(){x(),t.events.on("link.beforeRemove",y),t.$wp&&(E(),t.events.on("contentChanged",E)),b(!0)}var T=2,_=3,S=4,D=5,$=6,M={};M[1]="File cannot be loaded from the passed link.",M[T]="No link in upload response.",M[_]="Error during file upload.",M[S]="Parsing response failed.",M[D]="File is too large.",M[$]="File file type is invalid.",M[7]="Files can be uploaded only to same domain in IE 8 and IE 9.";var A;return{_init:k,showInsertPopup:i,upload:m,insert:a,back:C,hideProgressBar:s}},e.FE.DefineIcon("insertFile",{NAME:"file-o"}),e.FE.RegisterCommand("insertFile",{title:"Upload File",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("file.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("file.insert")):this.file.showInsertPopup()},plugin:"file"}),e.FE.DefineIcon("fileBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("fileBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.file.back()},refresh:function(e){this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("fileDismissError",{title:"OK",callback:function(){this.file.hideProgressBar(!0)}})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{emoticons:"[_BUTTONS_][_EMOTICONS_]"}),e.extend(e.FE.DEFAULTS,{emoticonsStep:8,emoticonsSet:[{code:"1f600",desc:"Grinning face"},{code:"1f601",desc:"Grinning face with smiling eyes"},{code:"1f602",desc:"Face with tears of joy"},{code:"1f603",desc:"Smiling face with open mouth"},{code:"1f604",desc:"Smiling face with open mouth and smiling eyes"},{code:"1f605",desc:"Smiling face with open mouth and cold sweat"},{code:"1f606",desc:"Smiling face with open mouth and tightly-closed eyes"},{code:"1f607",desc:"Smiling face with halo"},{code:"1f608",desc:"Smiling face with horns"},{code:"1f609",desc:"Winking face"},{code:"1f60a",desc:"Smiling face with smiling eyes"},{code:"1f60b",desc:"Face savoring delicious food"},{code:"1f60c",desc:"Relieved face"},{code:"1f60d",desc:"Smiling face with heart-shaped eyes"},{code:"1f60e",desc:"Smiling face with sunglasses"},{code:"1f60f",desc:"Smirking face"},{code:"1f610",desc:"Neutral face"},{code:"1f611",desc:"Expressionless face"},{code:"1f612",desc:"Unamused face"},{code:"1f613",desc:"Face with cold sweat"},{code:"1f614",desc:"Pensive face"},{code:"1f615",desc:"Confused face"},{code:"1f616",desc:"Confounded face"},{code:"1f617",desc:"Kissing face"},{code:"1f618",desc:"Face throwing a kiss"},{code:"1f619",desc:"Kissing face with smiling eyes"},{code:"1f61a",desc:"Kissing face with closed eyes"},{code:"1f61b",desc:"Face with stuck out tongue"},{code:"1f61c",desc:"Face with stuck out tongue and winking eye"},{code:"1f61d",desc:"Face with stuck out tongue and tightly-closed eyes"},{code:"1f61e",desc:"Disappointed face"},{code:"1f61f",desc:"Worried face"},{code:"1f620",desc:"Angry face"},{code:"1f621",desc:"Pouting face"},{code:"1f622",desc:"Crying face"},{code:"1f623",desc:"Persevering face"},{code:"1f624",desc:"Face with look of triumph"},{code:"1f625",desc:"Disappointed but relieved face"},{code:"1f626",desc:"Frowning face with open mouth"},{code:"1f627",desc:"Anguished face"},{code:"1f628",desc:"Fearful face"},{code:"1f629",desc:"Weary face"},{code:"1f62a",desc:"Sleepy face"},{code:"1f62b",desc:"Tired face"},{code:"1f62c",desc:"Grimacing face"},{code:"1f62d",desc:"Loudly crying face"},{code:"1f62e",desc:"Face with open mouth"},{code:"1f62f",desc:"Hushed face"},{code:"1f630",desc:"Face with open mouth and cold sweat"},{code:"1f631",desc:"Face screaming in fear"},{code:"1f632",desc:"Astonished face"},{code:"1f633",desc:"Flushed face"},{code:"1f634",desc:"Sleeping face"},{code:"1f635",desc:"Dizzy face"},{code:"1f636",desc:"Face without mouth"},{code:"1f637",desc:"Face with medical mask"}],emoticonsButtons:["emoticonsBack","|"],emoticonsUseImage:!0}),e.FE.PLUGINS.emoticons=function(t){function i(){var e=t.$tb.find('.fr-command[data-cmd="emoticons"]'),i=t.popups.get("emoticons");if(i||(i=s()),!i.hasClass("fr-active")){t.popups.refresh("emoticons"),t.popups.setContainer("emoticons",t.$tb);var n=e.offset().left+e.outerWidth()/2,o=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("emoticons",n,o,e.outerHeight())}}function n(){t.popups.hide("emoticons")}function s(){var e="";t.opts.toolbarInline&&t.opts.emoticonsButtons.length>0&&(e='<div class="fr-buttons fr-emoticons-buttons">'+t.button.buildList(t.opts.emoticonsButtons)+"</div>");var i={buttons:e,emoticons:o()},n=t.popups.create("emoticons",i);return t.tooltip.bind(n,".fr-emoticon"),r(n),n}function o(){for(var e='<div style="text-align: center">',i=0;i<t.opts.emoticonsSet.length;i++)0!==i&&i%t.opts.emoticonsStep==0&&(e+="<br>"),e+='<span class="fr-command fr-emoticon" tabIndex="-1" data-cmd="insertEmoticon" title="'+t.language.translate(t.opts.emoticonsSet[i].desc)+'" role="button" data-param1="'+t.opts.emoticonsSet[i].code+'">'+(t.opts.emoticonsUseImage?'<img src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/'+t.opts.emoticonsSet[i].code+'.svg"/>':"&#x"+t.opts.emoticonsSet[i].code+";")+'<span class="fr-sr-only">'+t.language.translate(t.opts.emoticonsSet[i].desc)+"&nbsp;&nbsp;&nbsp;</span></span>";return t.opts.emoticonsUseImage&&(e+='<p style="font-size: 12px; text-align: center; padding: 0 5px;">Emoji free by <a class="fr-link" tabIndex="-1" href="http://emojione.com/" target="_blank" rel="nofollow" role="link" aria-label="Open Emoji One website.">Emoji One</a></p>'),e+="</div>"}function r(i){t.events.on("popup.tab",function(n){var s=e(n.currentTarget);if(!t.popups.isVisible("emoticons")||!s.is("span, a"))return!0;var o,r,a,l=n.which;if(e.FE.KEYCODE.TAB==l){if(s.is("span.fr-emoticon")&&n.shiftKey||s.is("a")&&!n.shiftKey){var c=i.find(".fr-buttons");o=!t.accessibility.focusToolbar(c,!!n.shiftKey)}if(!1!==o){var d=i.find("span.fr-emoticon:focus:first, span.fr-emoticon:visible:first, a");s.is("span.fr-emoticon")&&(d=d.not("span.fr-emoticon:not(:focus)")),r=d.index(s),r=n.shiftKey?((r-1)%d.length+d.length)%d.length:(r+1)%d.length,a=d.get(r),t.events.disableBlur(),a.focus(),o=!1}}else if(e.FE.KEYCODE.ARROW_UP==l||e.FE.KEYCODE.ARROW_DOWN==l||e.FE.KEYCODE.ARROW_LEFT==l||e.FE.KEYCODE.ARROW_RIGHT==l){if(s.is("span.fr-emoticon")){var u=s.parent().find("span.fr-emoticon");r=u.index(s);var h=t.opts.emoticonsStep,p=Math.floor(u.length/h),f=r%h,m=Math.floor(r/h),g=m*h+f,v=p*h;e.FE.KEYCODE.ARROW_UP==l?g=((g-h)%v+v)%v:e.FE.KEYCODE.ARROW_DOWN==l?g=(g+h)%v:e.FE.KEYCODE.ARROW_LEFT==l?g=((g-1)%v+v)%v:e.FE.KEYCODE.ARROW_RIGHT==l&&(g=(g+1)%v),a=e(u.get(g)),t.events.disableBlur(),a.focus(),o=!1}}else e.FE.KEYCODE.ENTER==l&&(s.is("a")?s[0].click():t.button.exec(s),o=!1);return!1===o&&(n.preventDefault(),n.stopPropagation()),o},!0)}function a(i,n){t.html.insert('<span class="fr-emoticon fr-deletable'+(n?" fr-emoticon-img":"")+'"'+(n?' style="background: url('+n+');"':"")+">"+(n?"&nbsp;":i)+"</span>&nbsp;"+e.FE.MARKERS,!0)}function l(){t.popups.hide("emoticons"),t.toolbar.showInline()}function c(){var i=function(){for(var e=t.el.querySelectorAll(".fr-emoticon:not(.fr-deletable)"),i=0;i<e.length;i++)e[i].className+=" fr-deletable"};i(),t.events.on("html.set",i),t.events.on("html.get",function(i){for(var n=0;n<t.opts.emoticonsSet.length;n++){var s=t.opts.emoticonsSet[n],o=e("<div>").html(s.code).text();i=i.split(o).join(s.code)}return i});var n=function(){if(!t.selection.isCollapsed())return!1;var e=t.selection.element(),i=t.selection.endElement();if(e&&t.node.hasClass(e,"fr-emoticon"))return e;if(i&&t.node.hasClass(i,"fr-emoticon"))return i;var n=t.selection.ranges(0),s=n.startContainer;if(s.nodeType==Node.ELEMENT_NODE&&s.childNodes.length>0&&n.startOffset>0){var o=s.childNodes[n.startOffset-1];if(t.node.hasClass(o,"fr-emoticon"))return o}return!1};t.events.on("keydown",function(i){if(t.keys.isCharacter(i.which)&&t.selection.inEditor()){var s=t.selection.ranges(0),o=n();o&&(0===s.startOffset&&t.selection.element()===o?e(o).before(e.FE.MARKERS+e.FE.INVISIBLE_SPACE):e(o).after(e.FE.INVISIBLE_SPACE+e.FE.MARKERS),t.selection.restore())}}),t.events.on("keyup",function(i){for(var s=t.el.querySelectorAll(".fr-emoticon"),o=0;o<s.length;o++)void 0!==s[o].textContent&&0===s[o].textContent.replace(/\u200B/gi,"").length&&e(s[o]).remove();if(!(i.which>=e.FE.KEYCODE.ARROW_LEFT&&i.which<=e.FE.KEYCODE.ARROW_DOWN)){var r=n();t.node.hasClass(r,"fr-emoticon-img")&&(e(r).append(e.FE.MARKERS),t.selection.restore())}})}return{_init:c,insert:a,showEmoticonsPopup:i,hideEmoticonsPopup:n,back:l}},e.FE.DefineIcon("emoticons",{NAME:"smile-o"}),e.FE.RegisterCommand("emoticons",{title:"Emoticons",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("emoticons")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("emoticons")):this.emoticons.showEmoticonsPopup()},plugin:"emoticons"}),e.FE.RegisterCommand("insertEmoticon",{callback:function(e,t){this.emoticons.insert("&#x"+t+";",this.opts.emoticonsUseImage?"https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/"+t+".svg":null),this.emoticons.hideEmoticonsPopup()}}),e.FE.DefineIcon("emoticonsBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("emoticonsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.emoticons.back()}})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{dragInline:!0}),e.FE.PLUGINS.draggable=function(t){function i(i){return i.target&&"A"==i.target.tagName&&1==i.target.childNodes.length&&"IMG"==i.target.childNodes[0].tagName&&(i.target=i.target.childNodes[0]),e(i.target).hasClass("fr-draggable")?(t.undo.canDo()||t.undo.saveStep(),t.opts.dragInline?t.$el.attr("contenteditable",!0):t.$el.attr("contenteditable",!1),t.opts.toolbarInline&&t.toolbar.hide(),e(i.target).addClass("fr-dragging"),t.browser.msie||t.browser.edge||t.selection.clear(),void i.originalEvent.dataTransfer.setData("text","Froala")):(i.preventDefault(),!1)}function n(e){return!(e&&("HTML"==e.tagName||"BODY"==e.tagName||t.node.isElement(e)))}function s(e,i,n){t.opts.iframe&&(e+=t.$iframe.offset().top,i+=t.$iframe.offset().left),h.offset().top!=e&&h.css("top",e),h.offset().left!=i&&h.css("left",i),h.width()!=n&&h.css("width",n)}function o(i){var o=t.doc.elementFromPoint(i.originalEvent.pageX-t.win.pageXOffset,i.originalEvent.pageY-t.win.pageYOffset);if(!n(o)){for(var r=0,a=o;!n(a)&&a==o&&i.originalEvent.pageY-t.win.pageYOffset-r>0;)r++,a=t.doc.elementFromPoint(i.originalEvent.pageX-t.win.pageXOffset,i.originalEvent.pageY-t.win.pageYOffset-r);(!n(a)||h&&0===t.$el.find(a).length&&a!=h.get(0))&&(a=null);for(var l=0,c=o;!n(c)&&c==o&&i.originalEvent.pageY-t.win.pageYOffset+l<e(t.doc).height();)l++,c=t.doc.elementFromPoint(i.originalEvent.pageX-t.win.pageXOffset,i.originalEvent.pageY-t.win.pageYOffset+l);(!n(c)||h&&0===t.$el.find(c).length&&c!=h.get(0))&&(c=null),o=null==c&&a?a:c&&null==a?c:c&&a?r<l?a:c:null}if(e(o).hasClass("fr-drag-helper"))return!1;if(o&&!t.node.isBlock(o)&&(o=t.node.blockParent(o)),o&&["TD","TH","TR","THEAD","TBODY"].indexOf(o.tagName)>=0&&(o=e(o).parents("table").get(0)),o&&["LI"].indexOf(o.tagName)>=0&&(o=e(o).parents("UL, OL").get(0)),o&&!e(o).hasClass("fr-drag-helper")){h||(e.FE.$draggable_helper||(e.FE.$draggable_helper=e('<div class="fr-drag-helper"></div>')),h=e.FE.$draggable_helper,t.events.on("shared.destroy",function(){h.html("").removeData().remove(),h=null},!0));var d;d=i.originalEvent.pageY<e(o).offset().top+e(o).outerHeight()/2;var u=e(o),p=0;d||0!==u.next().length?(d||(u=u.next()),"before"==h.data("fr-position")&&u.is(h.data("fr-tag"))||(u.prev().length>0&&(p=parseFloat(u.prev().css("margin-bottom"))||0),p=Math.max(p,parseFloat(u.css("margin-top"))||0),s(u.offset().top-p/2-t.$box.offset().top,u.offset().left-t.win.pageXOffset-t.$box.offset().left,u.width()),h.data("fr-position","before"))):"after"==h.data("fr-position")&&u.is(h.data("fr-tag"))||(p=parseFloat(u.css("margin-bottom"))||0,s(u.offset().top+e(o).height()+p/2-t.$box.offset().top,u.offset().left-t.win.pageXOffset-t.$box.offset().left,u.width()),h.data("fr-position","after")),h.data("fr-tag",u),h.addClass("fr-visible"),h.appendTo(t.$box)}else h&&t.$box.find(h).length>0&&h.removeClass("fr-visible")}function r(e){e.originalEvent.dataTransfer.dropEffect="move",t.opts.dragInline?c()||!t.browser.msie&&!t.browser.edge||e.preventDefault():(e.preventDefault(),o(e))}function a(e){e.originalEvent.dataTransfer.dropEffect="move",t.opts.dragInline||e.preventDefault()}function l(e){t.$el.attr("contenteditable",!0);var i=t.$el.find(".fr-dragging");h&&h.hasClass("fr-visible")&&t.$box.find(h).length?d(e):i.length&&(e.preventDefault(),e.stopPropagation()),h&&t.$box.find(h).length&&h.removeClass("fr-visible"),i.removeClass("fr-dragging")}function c(){for(var t=null,i=0;i<e.FE.INSTANCES.length;i++)if(t=e.FE.INSTANCES[i].$el.find(".fr-dragging"),t.length)return t.get(0)}function d(i){for(var n,s,o=0;o<e.FE.INSTANCES.length;o++)if(n=e.FE.INSTANCES[o].$el.find(".fr-dragging"),n.length){s=e.FE.INSTANCES[o];break}if(n.length){if(i.preventDefault(),i.stopPropagation(),h&&h.hasClass("fr-visible")&&t.$box.find(h).length)h.data("fr-tag")[h.data("fr-position")]('<span class="fr-marker"></span>'),h.removeClass("fr-visible");else{if(!1===t.markers.insertAtPoint(i.originalEvent))return!1}n.removeClass("fr-dragging");var r=n;if(n.parent().is("A")&&(r=n.parent()),t.core.isEmpty())t.events.focus();else{t.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),t.selection.restore()}if(s==t||t.undo.canDo()||t.undo.saveStep(),t.core.isEmpty())t.$el.html(r);else{var a=t.markers.insert();e(a).replaceWith(r),n.after(e.FE.MARKERS),t.selection.restore()}return t.popups.hideAll(),t.selection.save(),t.$el.find(t.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),t.html.wrap(),t.html.fillEmptyBlocks(),t.selection.restore(),t.undo.saveStep(),t.opts.iframe&&t.size.syncIframe(),s!=t&&(s.popups.hideAll(),s.$el.find(s.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),s.html.wrap(),s.html.fillEmptyBlocks(),s.undo.saveStep(),s.events.trigger("element.dropped"),s.opts.iframe&&s.size.syncIframe()),t.events.trigger("element.dropped",[r]),!1}}function u(){t.opts.enter==e.FE.ENTER_BR&&(t.opts.dragInline=!0),t.events.on("dragstart",i,!0),t.events.on("dragover",r,!0),t.events.on("dragenter",a,!0),t.events.on("document.dragend",l,!0),t.events.on("document.drop",l,!0),t.events.on("drop",d,!0),t.events.on("html.get",function(e){return e=e.replace(/<(div)((?:[\w\W]*?))class="([\w\W]*?)fr-drag-helper([\w\W]*?)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/(div)>/g,"")})}var h;return{_init:u}}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{fontSize:["8","9","10","11","12","14","18","24","30","36","48","60","72","96"],fontSizeSelection:!1,fontSizeDefaultSelection:"12"}),e.FE.PLUGINS.fontSize=function(t){function i(e){t.format.applyStyle("font-size",e)}
function n(i,n){var s=e(t.selection.element()).css("font-size");n.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected",!1),n.find('.fr-command[data-param1="'+s+'"]').addClass("fr-active").attr("aria-selected",!0);var o=n.find(".fr-dropdown-list"),r=n.find(".fr-active").parent();r.length?o.parent().scrollTop(r.offset().top-o.offset().top-(o.parent().outerHeight()/2-r.outerHeight()/2)):o.parent().scrollTop(0)}function s(i){if(t.opts.fontSizeSelection){var n=t.helpers.getPX(e(t.selection.element()).css("font-size"));i.find("> span").text(n)}}return{apply:i,refreshOnShow:n,refresh:s}},e.FE.RegisterCommand("fontSize",{type:"dropdown",title:"Font Size",displaySelection:function(e){return e.opts.fontSizeSelection},displaySelectionWidth:30,defaultSelection:function(e){return e.opts.fontSizeDefaultSelection},html:function(){for(var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.fontSize,i=0;i<t.length;i++){var n=t[i];e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontSize" data-param1="'+n+'px" title="'+n+'">'+n+"</a></li>"}return e+="</ul>"},callback:function(e,t){this.fontSize.apply(t)},refresh:function(e){this.fontSize.refresh(e)},refreshOnShow:function(e,t){this.fontSize.refreshOnShow(e,t)},plugin:"fontSize"}),e.FE.DefineIcon("fontSize",{NAME:"text-height"})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{fontFamily:{"Arial,Helvetica,sans-serif":"Arial","Georgia,serif":"Georgia","Impact,Charcoal,sans-serif":"Impact","Tahoma,Geneva,sans-serif":"Tahoma","Times New Roman,Times,serif":"Times New Roman","Verdana,Geneva,sans-serif":"Verdana"},fontFamilySelection:!1,fontFamilyDefaultSelection:"Font Family"}),e.FE.PLUGINS.fontFamily=function(t){function i(e){t.format.applyStyle("font-family",e)}function n(e,t){t.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected",!1),t.find('.fr-command[data-param1="'+r()+'"]').addClass("fr-active").attr("aria-selected",!0);var i=t.find(".fr-dropdown-list"),n=t.find(".fr-active").parent();n.length?i.parent().scrollTop(n.offset().top-i.offset().top-(i.parent().outerHeight()/2-n.outerHeight()/2)):i.parent().scrollTop(0)}function s(t){var i=t.replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'| /g,"").split(",");return e.grep(i,function(e){return e.length>0})}function o(e,t){for(var i=0;i<e.length;i++)for(var n=0;n<t.length;n++)if(e[i]==t[n])return[i,n];return null}function r(){var i=e(t.selection.element()).css("font-family"),n=s(i),r=[];for(var a in t.opts.fontFamily)if(t.opts.fontFamily.hasOwnProperty(a)){var l=s(a),c=o(n,l);c&&r.push([a,c])}return 0===r.length?null:(r.sort(function(e,t){var i=e[1][0]-t[1][0];return 0===i?e[1][1]-t[1][1]:i}),r[0][0])}function a(i){if(t.opts.fontFamilySelection){var n=e(t.selection.element()).css("font-family").replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'|/g,"").split(",");i.find("> span").text(t.opts.fontFamily[r()]||n[0]||t.opts.fontFamilyDefaultSelection)}}return{apply:i,refreshOnShow:n,refresh:a}},e.FE.RegisterCommand("fontFamily",{type:"dropdown",displaySelection:function(e){return e.opts.fontFamilySelection},defaultSelection:function(e){return e.opts.fontFamilyDefaultSelection},displaySelectionWidth:120,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.fontFamily;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontFamily" data-param1="'+i+'" style="font-family: '+i+'" title="'+t[i]+'">'+t[i]+"</a></li>");return e+="</ul>"},title:"Font Family",callback:function(e,t){this.fontFamily.apply(t)},refresh:function(e){this.fontFamily.refresh(e)},refreshOnShow:function(e,t){this.fontFamily.refreshOnShow(e,t)},plugin:"fontFamily"}),e.FE.DefineIcon("fontFamily",{NAME:"font"})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{"image.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_PROGRESS_BAR_]","image.edit":"[_BUTTONS_]","image.alt":"[_BUTTONS_][_ALT_LAYER_]","image.size":"[_BUTTONS_][_SIZE_LAYER_]"}),e.extend(e.FE.DEFAULTS,{imageInsertButtons:["imageBack","|","imageUpload","imageByURL"],imageEditButtons:["imageReplace","imageAlign","imageRemove","|","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize"],imageAltButtons:["imageBack","|"],imageSizeButtons:["imageBack","|"],imageUploadURL:"https://i.froala.com/upload",imageUploadParam:"file",imageUploadParams:{},imageUploadToS3:!1,imageUploadMethod:"POST",imageMaxSize:10485760,imageAllowedTypes:["jpeg","jpg","png","gif","svg+xml"],imageResize:!0,imageResizeWithPercent:!1,imageRoundPercent:!1,imageDefaultWidth:300,imageDefaultAlign:"center",imageDefaultDisplay:"block",imageSplitHTML:!1,imageStyles:{"fr-rounded":"Rounded","fr-bordered":"Bordered"},imageMove:!0,imageMultipleStyles:!0,imageTextNear:!0,imagePaste:!0,imagePasteProcess:!1,imageMinWidth:16,imageOutputSize:!1}),e.FE.PLUGINS.image=function(t){function i(){var e=t.popups.get("image.insert"),i=e.find(".fr-image-by-url-layer input");i.val(""),be&&i.val(be.attr("src")),i.trigger("change")}function n(){var e=t.$tb.find('.fr-command[data-cmd="insertImage"]'),i=t.popups.get("image.insert");if(i||(i=I()),v(),!i.hasClass("fr-active"))if(t.popups.refresh("image.insert"),t.popups.setContainer("image.insert",t.$tb),e.is(":visible")){var n=e.offset().left+e.outerWidth()/2,s=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("image.insert",n,s,e.outerHeight())}else t.position.forSelection(i),t.popups.show("image.insert")}function s(){var i=t.popups.get("image.edit");if(i||(i=m()),i){t.popups.setContainer("image.edit",e(t.opts.scrollableContainer)),t.popups.refresh("image.edit");var n=be.offset().left+be.outerWidth()/2,s=be.offset().top+be.outerHeight();t.popups.show("image.edit",n,s,be.outerHeight())}}function o(){v()}function r(e){if(!e.hasClass("fr-dii")&&!e.hasClass("fr-dib")){var i=e.css("float");e.css("float","none"),"block"==e.css("display")?(e.css("float",i),t.opts.imageEditButtons.indexOf("imageAlign")>=0&&(0===parseInt(e.css("margin-left"),10)&&(e.attr("style")||"").indexOf("margin-right: auto")>=0?e.addClass("fr-fil"):0===parseInt(e.css("margin-right"),10)&&(e.attr("style")||"").indexOf("margin-left: auto")>=0&&e.addClass("fr-fir")),e.addClass("fr-dib")):(e.css("float",i),t.opts.imageEditButtons.indexOf("imageAlign")>=0&&("left"==e.css("float")?e.addClass("fr-fil"):"right"==e.css("float")&&e.addClass("fr-fir")),e.addClass("fr-dii")),e.css("margin",""),e.css("float",""),e.css("display",""),e.css("z-index",""),e.css("position",""),e.css("overflow",""),e.css("vertical-align","")}}function a(){for(var i="IMG"==t.el.tagName?[t.el]:t.el.querySelectorAll("img"),n=0;n<i.length;n++){var s=e(i[n]);(t.opts.imageEditButtons.indexOf("imageAlign")>=0||t.opts.imageEditButtons.indexOf("imageDisplay")>=0)&&r(s),t.opts.imageTextNear||s.removeClass("fr-dii").addClass("fr-dib"),t.opts.iframe&&s.on("load",t.size.syncIframe)}}function l(){var i,n=Array.prototype.slice.call(t.el.querySelectorAll("img")),s=[];for(i=0;i<n.length;i++)s.push(n[i].getAttribute("src")),e(n[i]).toggleClass("fr-draggable",t.opts.imageMove),""===n[i].getAttribute("class")&&n[i].removeAttribute("class"),""===n[i].getAttribute("style")&&n[i].removeAttribute("style");if(Me)for(i=0;i<Me.length;i++)s.indexOf(Me[i].getAttribute("src"))<0&&t.events.trigger("image.removed",[e(Me[i])]);Me=n}function c(){ye||X();var i=t.$wp||e(t.opts.scrollableContainer);i.append(ye),ye.data("instance",t);var n=i.scrollTop()-("static"!=i.css("position")?i.offset().top:0),s=i.scrollLeft()-("static"!=i.css("position")?i.offset().left:0);s-=t.helpers.getPX(i.css("border-left-width")),n-=t.helpers.getPX(i.css("border-top-width")),t.$el.is("img")&&(n=0,s=0),ye.css("top",(t.opts.iframe?be.offset().top:be.offset().top+n)-1).css("left",(t.opts.iframe?be.offset().left:be.offset().left+s)-1).css("width",be.get(0).getBoundingClientRect().width).css("height",be.get(0).getBoundingClientRect().height).addClass("fr-active")}function d(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function u(i){if(!t.core.sameInstance(ye))return!0;if(i.preventDefault(),i.stopPropagation(),t.$el.find("img.fr-error").left)return!1;t.undo.canDo()||t.undo.saveStep(),we=e(this),we.data("start-x",i.pageX||i.originalEvent.touches[0].pageX),we.data("start-width",be.width()),we.data("start-height",be.height());var n=be.width();if(t.opts.imageResizeWithPercent){var s=be.parentsUntil(t.$el,t.html.blockTagsQuery()).get(0)||t.el;be.css("width",(n/e(s).outerWidth()*100).toFixed(2)+"%")}else be.css("width",n);xe.show(),t.popups.hideAll(),re()}function h(i){if(!t.core.sameInstance(ye))return!0;if(we&&be){if(i.preventDefault(),t.$el.find("img.fr-error").left)return!1;var n=i.pageX||(i.originalEvent.touches?i.originalEvent.touches[0].pageX:null);if(!n)return!1;var s=we.data("start-x"),o=n-s,r=we.data("start-width");if((we.hasClass("fr-hnw")||we.hasClass("fr-hsw"))&&(o=0-o),t.opts.imageResizeWithPercent){var a=be.parentsUntil(t.$el,t.html.blockTagsQuery()).get(0)||t.el;r=((r+o)/e(a).outerWidth()*100).toFixed(2),t.opts.imageRoundPercent&&(r=Math.round(r)),be.css("width",r+"%"),be.css("height","").removeAttr("height")}else r+o>=t.opts.imageMinWidth&&be.css("width",r+o),be.css("height",we.data("start-height")*be.width()/we.data("start-width"));c(),t.events.trigger("image.resize",[ge()])}}function p(e){if(!t.core.sameInstance(ye))return!0;if(we&&be){if(e&&e.stopPropagation(),t.$el.find("img.fr-error").left)return!1;we=null,xe.hide(),c(),s(),t.undo.saveStep(),t.events.trigger("image.resizeEnd",[ge()])}}function f(e,i){t.edit.on(),be&&be.addClass("fr-error"),y(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("image.error",[{code:e,message:$e[e]},i])}function m(e){if(e)return t.$wp&&t.events.$on(t.$wp,"scroll",function(){be&&t.popups.isVisible("image.edit")&&s()}),!0;var i="";if(t.opts.imageEditButtons.length>0){i+='<div class="fr-buttons">',i+=t.button.buildList(t.opts.imageEditButtons),i+="</div>";var n={buttons:i};return t.popups.create("image.edit",n)}return!1}function g(i){var n=t.popups.get("image.insert");if(n||(n=I()),n.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),n.find(".fr-image-progress-bar-layer").addClass("fr-active"),n.find(".fr-buttons").hide(),be){t.popups.setContainer("image.insert",e(t.opts.scrollableContainer));var s=be.offset().left+be.width()/2,o=be.offset().top+be.height();t.popups.show("image.insert",s,o,be.outerHeight())}void 0===i&&b("Uploading",0)}function v(e){var i=t.popups.get("image.insert");if(i&&(i.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),i.find(".fr-image-progress-bar-layer").removeClass("fr-active"),i.find(".fr-buttons").show(),e||t.$el.find("img.fr-error").length)){if(t.events.focus(),t.$el.find("img.fr-error").length&&(t.$el.find("img.fr-error").remove(),t.undo.saveStep(),t.undo.run(),t.undo.dropRedo()),!t.$wp&&be){var n=be;se(!0),t.selection.setAfter(n.get(0)),t.selection.restore()}t.popups.hide("image.insert")}}function b(e,i){var n=t.popups.get("image.insert");if(n){var s=n.find(".fr-image-progress-bar-layer");s.find("h3").text(e+(i?" "+i+"%":"")),s.removeClass("fr-error"),i?(s.find("div").removeClass("fr-indeterminate"),s.find("div > span").css("width",i+"%")):s.find("div").addClass("fr-indeterminate")}}function y(e){g();var i=t.popups.get("image.insert"),n=i.find(".fr-image-progress-bar-layer");n.addClass("fr-error");var s=n.find("h3");s.text(e),t.events.disableBlur(),s.focus()}function w(){var e=t.popups.get("image.insert"),i=e.find(".fr-image-by-url-layer input");i.val().length>0&&(g(),b("Loading image"),E(i.val(),!0,[],be),i.val(""),i.blur())}function x(e){ne.call(e.get(0))}function C(){var i=e(this);t.popups.hide("image.insert"),i.removeClass("fr-uploading"),i.next().is("br")&&i.next().remove(),x(i),t.events.trigger("image.loaded",[i])}function E(e,i,n,s,o){t.edit.off(),b("Loading image"),i&&(e=t.helpers.sanitizeURL(e));var r=new Image;r.onload=function(){var i,r;if(s){t.undo.canDo()||s.hasClass("fr-uploading")||t.undo.saveStep();var a=s.data("fr-old-src");t.$wp?(i=s.clone().removeData("fr-old-src").removeClass("fr-uploading"),i.off("load"),a&&s.attr("src",a),s.replaceWith(i)):i=s;for(var c=i.get(0).attributes,d=0;d<c.length;d++){var u=c[d];0===u.nodeName.indexOf("data-")&&i.removeAttr(u.nodeName)}if(void 0!==n)for(r in n)n.hasOwnProperty(r)&&"link"!=r&&i.attr("data-"+r,n[r]);i.on("load",C),i.attr("src",e),t.edit.on(),l(),t.undo.saveStep(),t.$el.blur(),t.events.trigger(a?"image.replaced":"image.inserted",[i,o])}else i=$(e,n,C),l(),t.undo.saveStep(),t.events.trigger("image.inserted",[i,o])},r.onerror=function(){f(Ee)},g("Loading image"),r.src=e}function k(i){try{if(!1===t.events.trigger("image.uploaded",[i],!0))return t.edit.on(),!1;var n=e.parseJSON(i);return n.link?n:(f(ke,i),!1)}catch(e){return f(_e,i),!1}}function T(i){try{var n=e(i).find("Location").text(),s=e(i).find("Key").text();return!1===t.events.trigger("image.uploadedToS3",[n,s,i],!0)?(t.edit.on(),!1):n}catch(e){return f(_e,i),!1}}function _(e){b("Loading image");var i=this.status,n=this.response,s=this.responseXML,o=this.responseText;try{if(t.opts.imageUploadToS3)if(201==i){var r=T(s);r&&E(r,!1,[],e,n||s)}else f(_e,n||s);else if(i>=200&&i<300){var a=k(o);a&&E(a.link,!1,a,e,n||o)}else f(Te,n||o)}catch(e){f(_e,n||o)}}function S(){f(_e,this.response||this.responseText||this.responseXML)}function D(e){if(e.lengthComputable){b("Uploading",e.loaded/e.total*100|0)}}function $(i,n,s){var o,r="";if(n&&void 0!==n)for(o in n)n.hasOwnProperty(o)&&"link"!=o&&(r+=" data-"+o+'="'+n[o]+'"');var a=t.opts.imageDefaultWidth;a&&"auto"!=a&&(a+=t.opts.imageResizeWithPercent?"%":"px");var l=e('<img class="'+(t.opts.imageDefaultDisplay?"fr-di"+t.opts.imageDefaultDisplay[0]:"")+(t.opts.imageDefaultAlign&&"center"!=t.opts.imageDefaultAlign?" fr-fi"+t.opts.imageDefaultAlign[0]:"")+'" src="'+i+'"'+r+(a?' style="width: '+a+';"':"")+">");return l.on("load",s),t.edit.on(),t.events.focus(!0),t.selection.restore(),t.undo.saveStep(),t.opts.imageSplitHTML?t.markers.split():t.markers.insert(),t.$el.find(".fr-marker").replaceWith(l),t.html.wrap(),t.selection.clear(),l}function M(){t.edit.on(),v(!0)}function A(i,n,s){function o(){var s=e(this);s.off("load"),s.addClass("fr-uploading"),s.next().is("br")&&s.next().remove(),t.placeholder.refresh(),s.is(be)||x(s),c(),g(),t.edit.off(),i.onload=function(){_.call(i,s)},i.onerror=S,i.upload.onprogress=D,i.onabort=M,s.off("abortUpload").on("abortUpload",function(){4!=i.readyState&&i.abort()}),i.send(n)}var r,a=new FileReader;a.addEventListener("load",function(){var e=a.result;if(a.result.indexOf("svg+xml")<0){for(var i=atob(a.result.split(",")[1]),n=[],s=0;s<i.length;s++)n.push(i.charCodeAt(s));e=window.URL.createObjectURL(new Blob([new Uint8Array(n)],{type:"image/jpeg"}))}be?(be.on("load",o),t.edit.on(),t.undo.saveStep(),be.data("fr-old-src",be.attr("src")),be.attr("src",e)):r=$(e,null,o)},!1),a.readAsDataURL(s)}function O(e){if(void 0!==e&&e.length>0){if(!1===t.events.trigger("image.beforeUpload",[e]))return!1;var i=e[0];if(i.size>t.opts.imageMaxSize)return f(Se),!1;if(t.opts.imageAllowedTypes.indexOf(i.type.replace(/image\//g,""))<0)return f(De),!1;var n;if(t.drag_support.formdata&&(n=t.drag_support.formdata?new FormData:null),n){var s;if(!1!==t.opts.imageUploadToS3){n.append("key",t.opts.imageUploadToS3.keyStart+(new Date).getTime()+"-"+(i.name||"untitled")),n.append("success_action_status","201"),n.append("X-Requested-With","xhr"),n.append("Content-Type",i.type);for(s in t.opts.imageUploadToS3.params)t.opts.imageUploadToS3.params.hasOwnProperty(s)&&n.append(s,t.opts.imageUploadToS3.params[s])}for(s in t.opts.imageUploadParams)t.opts.imageUploadParams.hasOwnProperty(s)&&n.append(s,t.opts.imageUploadParams[s]);n.append(t.opts.imageUploadParam,i);var o=t.opts.imageUploadURL;t.opts.imageUploadToS3&&(o=t.opts.imageUploadToS3.uploadURL?t.opts.imageUploadToS3.uploadURL:"https://"+t.opts.imageUploadToS3.region+".amazonaws.com/"+t.opts.imageUploadToS3.bucket);A(t.core.getXHR(o,t.opts.imageUploadMethod),n,i)}}}function F(i){t.events.$on(i,"dragover dragenter",".fr-image-upload-layer",function(){return e(this).addClass("fr-drop"),!1}),t.events.$on(i,"dragleave dragend",".fr-image-upload-layer",function(){return e(this).removeClass("fr-drop"),!1}),t.events.$on(i,"drop",".fr-image-upload-layer",function(n){n.preventDefault(),n.stopPropagation(),e(this).removeClass("fr-drop");var s=n.originalEvent.dataTransfer;if(s&&s.files){var o=i.data("instance")||t;o.events.disableBlur(),o.image.upload(s.files),o.events.enableBlur()}}),t.events.$on(i,"change",'.fr-image-upload-layer input[type="file"]',function(){if(this.files){var n=i.data("instance")||t;n.events.disableBlur(),i.find("input:focus").blur(),n.events.enableBlur(),n.image.upload(this.files)}e(this).val("")})}function N(i){var n=i.originalEvent.dataTransfer;if(n&&n.files&&n.files.length){var s=n.files[0];if(s&&s.type&&t.opts.imageAllowedTypes.indexOf(s.type.replace(/image\//g,""))>=0){t.markers.remove(),t.markers.insertAtPoint(i.originalEvent),t.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),t.popups.hideAll();var o=t.popups.get("image.insert");return o||(o=I()),t.popups.setContainer("image.insert",e(t.opts.scrollableContainer)),t.popups.show("image.insert",i.originalEvent.pageX,i.originalEvent.pageY),g(),O(n.files),i.preventDefault(),i.stopPropagation(),!1}}}function L(){var i,n,s=t.selection.ranges(0);s.collapsed&&s.startContainer.nodeType==Node.ELEMENT_NODE&&(s.startContainer.childNodes.length==s.startOffset?(i=s.startContainer.childNodes[s.startOffset-1])&&"IMG"==i.tagName&&"block"==e(i).css("display")&&(n=t.node.blockParent(i),n&&t.html.defaultTag()?n.nextSibling||(["TD","TH"].indexOf(n.tagName)<0?e(n).after("<"+t.html.defaultTag()+"><br>"+e.FE.MARKERS+"</"+t.html.defaultTag()+">"):e(i).after("<br>"+e.FE.MARKERS),t.selection.restore()):n||(e(i).after("<br>"+e.FE.MARKERS),t.selection.restore())):0===s.startOffset&&s.startContainer.childNodes.length>s.startOffset&&(i=s.startContainer.childNodes[s.startOffset])&&"IMG"==i.tagName&&"block"==e(i).css("display")&&(n=t.node.blockParent(i),n&&t.html.defaultTag()?n.previousSibling||(["TD","TH"].indexOf(n.tagName)<0?e(n).before("<"+t.html.defaultTag()+"><br>"+e.FE.MARKERS+"</"+t.html.defaultTag()+">"):e(i).before("<br>"+e.FE.MARKERS),t.selection.restore()):n||(e(i).before(e.FE.MARKERS+"<br>"),t.selection.restore())))}function R(){t.events.$on(t.$el,t._mousedown,"IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',function(i){return"false"==e(this).parents("[contenteditable]:not(.fr-element):not(body):first").attr("contenteditable")||(t.helpers.isMobile()||t.selection.clear(),Ce=!0,t.popups.areVisible()&&t.events.disableBlur(),t.browser.msie&&(t.events.disableBlur(),t.$el.attr("contenteditable",!1)),t.draggable||i.preventDefault(),void i.stopPropagation())}),t.events.$on(t.$el,t._mouseup,"IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',function(i){return"false"==e(this).parents("[contenteditable]:not(.fr-element):not(body):first").attr("contenteditable")||void(Ce&&(Ce=!1,i.stopPropagation(),t.browser.msie&&(t.$el.attr("contenteditable",!0),t.events.enableBlur())))}),t.events.on("keyup",function(i){if(i.shiftKey&&""===t.selection.text().replace(/\n/g,"")){var n=t.selection.element(),s=t.selection.endElement();n&&"IMG"==n.tagName?x(e(n)):s&&"IMG"==s.tagName&&x(e(s))}},!0),t.events.on("drop",N),t.events.on("mousedown window.mousedown",oe),t.events.on("window.touchmove",re),t.events.on("mouseup window.mouseup",function(){if(be)return se(),!1}),t.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&se()}),t.events.on("mouseup",L),t.events.on("blur image.hideResizer commands.undo commands.redo element.dropped",function(){Ce=!1,se(!0)})}function I(e){if(e)return t.popups.onRefresh("image.insert",i),t.popups.onHide("image.insert",o),!0;var n,s="";t.opts.imageInsertButtons.length>1&&(s='<div class="fr-buttons">'+t.button.buildList(t.opts.imageInsertButtons)+"</div>");var r=t.opts.imageInsertButtons.indexOf("imageUpload"),a=t.opts.imageInsertButtons.indexOf("imageByURL"),l="";r>=0&&(n=" fr-active",a>=0&&r>a&&(n=""),l='<div class="fr-image-upload-layer'+n+' fr-layer" id="fr-image-upload-layer-'+t.id+'"><strong>'+t.language.translate("Drop image")+"</strong><br>("+t.language.translate("or click")+')<div class="fr-form"><input type="file" accept="image/'+t.opts.imageAllowedTypes.join(", image/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-image-upload-layer-'+t.id+'" role="button"></div></div>');var c="";a>=0&&(n=" fr-active",r>=0&&a>r&&(n=""),c='<div class="fr-image-by-url-layer'+n+' fr-layer" id="fr-image-by-url-layer-'+t.id+'"><div class="fr-input-line"><input id="fr-image-by-url-layer-text-'+t.id+'" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageInsertByURL" tabIndex="2" role="button">'+t.language.translate("Insert")+"</button></div></div>");var d={buttons:s,upload_layer:l,by_url_layer:c,progress_bar:'<div class="fr-image-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="imageDismissError" tabIndex="2" role="button">OK</button></div></div>'},u=t.popups.create("image.insert",d);return t.$wp&&t.events.$on(t.$wp,"scroll",function(){be&&t.popups.isVisible("image.insert")&&pe()}),F(u),u}function P(){if(be){t.popups.get("image.alt").find("input").val(be.attr("alt")||"").trigger("change")}}function B(){var i=t.popups.get("image.alt");i||(i=H()),v(),t.popups.refresh("image.alt"),t.popups.setContainer("image.alt",e(t.opts.scrollableContainer));var n=be.offset().left+be.width()/2,s=be.offset().top+be.height();t.popups.show("image.alt",n,s,be.outerHeight())}function H(e){if(e)return t.popups.onRefresh("image.alt",P),!0;var i="";i='<div class="fr-buttons">'+t.button.buildList(t.opts.imageAltButtons)+"</div>";var n="";n='<div class="fr-image-alt-layer fr-layer fr-active" id="fr-image-alt-layer-'+t.id+'"><div class="fr-input-line"><input id="fr-image-alt-layer-text-'+t.id+'" type="text" placeholder="'+t.language.translate("Alternate Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetAlt" tabIndex="2" role="button">'+t.language.translate("Update")+"</button></div></div>";var s={buttons:i,alt_layer:n},o=t.popups.create("image.alt",s);return t.$wp&&t.events.$on(t.$wp,"scroll.image-alt",function(){be&&t.popups.isVisible("image.alt")&&B()}),o}function U(e){if(be){var i=t.popups.get("image.alt");be.attr("alt",e||i.find("input").val()||""),i.find("input:focus").blur(),x(be)}}function z(){if(be){var e=t.popups.get("image.size");e.find('input[name="width"]').val(be.get(0).style.width).trigger("change"),e.find('input[name="height"]').val(be.get(0).style.height).trigger("change")}}function j(){var i=t.popups.get("image.size");i||(i=K()),v(),t.popups.refresh("image.size"),t.popups.setContainer("image.size",e(t.opts.scrollableContainer));var n=be.offset().left+be.width()/2,s=be.offset().top+be.height();t.popups.show("image.size",n,s,be.outerHeight())}function K(e){if(e)return t.popups.onRefresh("image.size",z),!0;var i="";i='<div class="fr-buttons">'+t.button.buildList(t.opts.imageSizeButtons)+"</div>";var n="";n='<div class="fr-image-size-layer fr-layer fr-active" id="fr-image-size-layer-'+t.id+'"><div class="fr-image-group"><div class="fr-input-line"><input id="fr-image-size-layer-width-'+t.id+'" type="text" name="width" placeholder="'+t.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-image-size-layer-height'+t.id+'" type="text" name="height" placeholder="'+t.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetSize" tabIndex="2" role="button">'+t.language.translate("Update")+"</button></div></div>";var s={buttons:i,size_layer:n},o=t.popups.create("image.size",s);return t.$wp&&t.events.$on(t.$wp,"scroll.image-size",function(){be&&t.popups.isVisible("image.size")&&j()}),o}function W(e,i){if(be){var n=t.popups.get("image.size");be.css("width",e||n.find('input[name="width"]').val()),be.css("height",i||n.find('input[name="height"]').val()),n.find("input:focus").blur(),x(be)}}function V(e){var i,n,s=t.popups.get("image.insert");if(be||t.opts.toolbarInline)be&&(n=be.offset().top+be.outerHeight());else{var o=t.$tb.find('.fr-command[data-cmd="insertImage"]');i=o.offset().left+o.outerWidth()/2,n=o.offset().top+(t.opts.toolbarBottom?10:o.outerHeight()-10)}!be&&t.opts.toolbarInline&&(n=s.offset().top-t.helpers.getPX(s.css("margin-top")),s.hasClass("fr-above")&&(n+=s.outerHeight())),s.find(".fr-layer").removeClass("fr-active"),s.find(".fr-"+e+"-layer").addClass("fr-active"),t.popups.show("image.insert",i,n,be?be.outerHeight():0),t.accessibility.focusPopup(s)}function Y(e){t.popups.get("image.insert").find(".fr-image-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function q(e){t.popups.get("image.insert").find(".fr-image-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function G(e,t,i,n){return e.pageX=t,u.call(this,e),e.pageX=e.pageX+i*Math.floor(Math.pow(1.1,n)),h.call(this,e),p.call(this,e),n++}function X(){var i;if(t.shared.$image_resizer?(ye=t.shared.$image_resizer,xe=t.shared.$img_overlay,t.events.on("destroy",function(){ye.removeClass("fr-active").appendTo(e("body"))},!0)):(t.shared.$image_resizer=e('<div class="fr-image-resizer"></div>'),ye=t.shared.$image_resizer,t.events.$on(ye,"mousedown",function(e){e.stopPropagation()},!0),t.opts.imageResize&&(ye.append(d("nw")+d("ne")+d("sw")+d("se")),t.shared.$img_overlay=e('<div class="fr-image-overlay"></div>'),xe=t.shared.$img_overlay,i=ye.get(0).ownerDocument,e(i).find("body").append(xe))),t.events.on("shared.destroy",function(){ye.html("").removeData().remove(),ye=null,t.opts.imageResize&&(xe.remove(),xe=null)},!0),t.helpers.isMobile()||t.events.$on(e(t.o_win),"resize",function(){be&&!be.hasClass("fr-uploading")?se(!0):be&&(c(),pe(),g(!1))}),t.opts.imageResize){i=ye.get(0).ownerDocument,t.events.$on(ye,t._mousedown,".fr-handler",u),t.events.$on(e(i),t._mousemove,h),t.events.$on(e(i.defaultView||i.parentWindow),t._mouseup,p),t.events.$on(xe,"mouseleave",p);var n=1,s=null,o=0;t.events.on("keydown",function(i){if(be){var r=-1!=navigator.userAgent.indexOf("Mac OS X")?i.metaKey:i.ctrlKey,a=i.which;(a!==s||i.timeStamp-o>200)&&(n=1),(a==e.FE.KEYCODE.EQUALS||t.browser.mozilla&&a==e.FE.KEYCODE.FF_EQUALS)&&r&&!i.altKey?n=G.call(this,i,1,1,n):(a==e.FE.KEYCODE.HYPHEN||t.browser.mozilla&&a==e.FE.KEYCODE.FF_HYPHEN)&&r&&!i.altKey&&(n=G.call(this,i,2,-1,n)),s=a,o=i.timeStamp}},!0),t.events.on("keyup",function(){n=1})}}function Q(i){(i=i||be)&&!1!==t.events.trigger("image.beforeRemove",[i])&&(t.popups.hideAll(),fe(),se(!0),t.undo.canDo()||t.undo.saveStep(),i.get(0)==t.el?i.removeAttr("src"):("A"==i.get(0).parentNode.tagName?(t.selection.setBefore(i.get(0).parentNode)||t.selection.setAfter(i.get(0).parentNode)||i.parent().after(e.FE.MARKERS),e(i.get(0).parentNode).remove()):(t.selection.setBefore(i.get(0))||t.selection.setAfter(i.get(0))||i.after(e.FE.MARKERS),i.remove()),t.html.fillEmptyBlocks(),t.selection.restore()),t.undo.saveStep())}function Z(i){var n=i.which;if(be&&(n==e.FE.KEYCODE.BACKSPACE||n==e.FE.KEYCODE.DELETE))return i.preventDefault(),i.stopPropagation(),Q(),!1;if(be&&n==e.FE.KEYCODE.ESC){var s=be;return se(!0),t.selection.setAfter(s.get(0)),t.selection.restore(),i.preventDefault(),!1}if(be&&(n==e.FE.KEYCODE.ARROW_LEFT||n==e.FE.KEYCODE.ARROW_RIGHT)){var o=be.get(0);return se(!0),n==e.FE.KEYCODE.ARROW_LEFT?t.selection.setBefore(o):t.selection.setAfter(o),t.selection.restore(),i.preventDefault(),!1}return be&&n!=e.FE.KEYCODE.F10&&!t.keys.isBrowserAction(i)?(i.preventDefault(),!1):void 0}function J(){if(R(),"IMG"==t.el.tagName&&t.$el.addClass("fr-view"),t.events.$on(t.$el,t.helpers.isMobile()&&!t.helpers.isWindowsPhone()?"touchend":"click","IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',ne),t.helpers.isMobile()&&(t.events.$on(t.$el,"touchstart","IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',function(){Ae=!1}),t.events.$on(t.$el,"touchmove",function(){Ae=!0})),t.$wp?t.events.on("window.keydown keydown",Z,!0):t.events.$on(t.$win,"keydown",Z),t.events.on("toolbar.esc",function(){if(be){if(t.$wp)t.events.disableBlur(),t.events.focus();else{var e=be;se(!0),t.selection.setAfter(e.get(0)),t.selection.restore()}return!1}},!0),t.events.on("window.cut window.copy",function(i){be&&(fe(),e.FE.copied_text="\n",e.FE.copied_html=be.get(0).outerHTML,"copy"==i.type?setTimeout(function(){x(be)}):(se(!0),t.undo.saveStep(),setTimeout(function(){t.undo.saveStep()},0)))},!0),t.events.$on(e(t.o_win),"keydown",function(t){var i=t.which;if(be&&i==e.FE.KEYCODE.BACKSPACE)return t.preventDefault(),!1}),t.events.$on(t.$win,"keydown",function(t){var i=t.which;be&&be.hasClass("fr-uploading")&&i==e.FE.KEYCODE.ESC&&be.trigger("abortUpload")}),t.events.on("destroy",function(){be&&be.hasClass("fr-uploading")&&be.trigger("abortUpload")}),t.events.on("paste.before",te),t.events.on("paste.beforeCleanup",ie),t.events.on("paste.after",ee),t.events.on("html.set",a),t.events.on("html.inserted",a),a(),t.events.on("destroy",function(){Me=[]}),t.events.on("html.get",function(e){return e=e.replace(/<(img)((?:[\w\W]*?))class="([\w\W]*?)(fr-uploading|fr-error)([\w\W]*?)"((?:[\w\W]*?))>/g,"")}),t.opts.imageOutputSize){var i;t.events.on("html.beforeGet",function(){i=t.el.querySelectorAll("img");for(var n=0;n<i.length;n++){var s=i[n].style.width||e(i[n]).width(),o=i[n].style.height||e(i[n]).height();s&&i[n].setAttribute("width",(""+s).replace(/px/,"")),o&&i[n].setAttribute("height",(""+o).replace(/px/,""))}}),t.events.on("html.afterGet",function(){for(var e=0;e<i.length;e++)i[e].removeAttribute("width"),i[e].removeAttribute("height")})}t.opts.iframe&&t.events.on("image.loaded",t.size.syncIframe),t.$wp&&(l(),t.events.on("contentChanged",l)),t.events.$on(e(t.o_win),"orientationchange.image",function(){setTimeout(function(){var e=ge();e&&x(e)},0)}),m(!0),I(!0),K(!0),H(!0),t.events.on("node.remove",function(e){if("IMG"==e.get(0).tagName)return Q(e),!1})}function ee(){t.opts.imagePaste?t.$el.find("img[data-fr-image-pasted]").each(function(i,n){if(t.opts.imagePasteProcess){var o=t.opts.imageDefaultWidth;o&&"auto"!=o&&(o+=t.opts.imageResizeWithPercent?"%":"px"),e(n).css("width",o),e(n).removeClass("fr-dii fr-dib fr-fir fr-fil").addClass((t.opts.imageDefaultDisplay?"fr-di"+t.opts.imageDefaultDisplay[0]:"")+(t.opts.imageDefaultAlign&&"center"!=t.opts.imageDefaultAlign?" fr-fi"+t.opts.imageDefaultAlign[0]:""))}if(0===n.src.indexOf("data:")){if(!1===t.events.trigger("image.beforePasteUpload",[n]))return!1;be=e(n),c(),s(),pe(),g(),t.edit.off();for(var r=atob(e(n).attr("src").split(",")[1]),a=[],l=0;l<r.length;l++)a.push(r.charCodeAt(l));O([new Blob([new Uint8Array(a)],{type:"image/jpeg"})]),e(n).removeAttr("data-fr-image-pasted")}else 0!==n.src.indexOf("http")?(t.selection.save(),e(n).remove(),
t.selection.restore()):e(n).removeAttr("data-fr-image-pasted")}):t.$el.find("img[data-fr-image-pasted]").remove()}function te(e){if(e&&e.clipboardData&&e.clipboardData.items&&e.clipboardData.items[0]){var i=e.clipboardData.items[0].getAsFile();if(i){var n=new FileReader;return n.onload=function(e){var i=e.target.result,n=t.opts.imageDefaultWidth;n&&"auto"!=n&&(n+=t.opts.imageResizeWithPercent?"%":"px"),t.html.insert('<img data-fr-image-pasted="true" class="'+(t.opts.imageDefaultDisplay?"fr-di"+t.opts.imageDefaultDisplay[0]:"")+(t.opts.imageDefaultAlign&&"center"!=t.opts.imageDefaultAlign?" fr-fi"+t.opts.imageDefaultAlign[0]:"")+'" src="'+i+'"'+(n?' style="width: '+n+';"':"")+">"),t.events.trigger("paste.after")},n.readAsDataURL(i),!1}}}function ie(e){return e=e.replace(/<img /gi,'<img data-fr-image-pasted="true" ')}function ne(i){if("false"==e(this).parents("[contenteditable]:not(.fr-element):not(body):first").attr("contenteditable"))return!0;if(i&&"touchend"==i.type&&Ae)return!0;if(i&&t.edit.isDisabled())return i.stopPropagation(),i.preventDefault(),!1;for(var n=0;n<e.FE.INSTANCES.length;n++)e.FE.INSTANCES[n]!=t&&e.FE.INSTANCES[n].events.trigger("image.hideResizer");t.toolbar.disable(),i&&(i.stopPropagation(),i.preventDefault()),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur()),t.opts.iframe&&t.size.syncIframe(),be=e(this),fe(),c(),s(),t.selection.clear(),t.button.bulkRefresh(),t.events.trigger("video.hideResizer")}function se(e){be&&(ae()||!0===e)&&(t.toolbar.enable(),ye.removeClass("fr-active"),t.popups.hide("image.edit"),be=null,re())}function oe(){Oe=!0}function re(){Oe=!1}function ae(){return Oe}function le(e){be.removeClass("fr-fir fr-fil"),"left"==e?be.addClass("fr-fil"):"right"==e&&be.addClass("fr-fir"),c(),s()}function ce(e){be&&(be.hasClass("fr-fil")?e.find("> *:first").replaceWith(t.icon.create("align-left")):be.hasClass("fr-fir")?e.find("> *:first").replaceWith(t.icon.create("align-right")):e.find("> *:first").replaceWith(t.icon.create("align-justify")))}function de(e,t){if(be){var i="justify";be.hasClass("fr-fil")?i="left":be.hasClass("fr-fir")&&(i="right"),t.find('.fr-command[data-param1="'+i+'"]').addClass("fr-active").attr("aria-selected",!0)}}function ue(e){be.removeClass("fr-dii fr-dib"),"inline"==e?be.addClass("fr-dii"):"block"==e&&be.addClass("fr-dib"),c(),s()}function he(e,t){var i="block";be.hasClass("fr-dii")&&(i="inline"),t.find('.fr-command[data-param1="'+i+'"]').addClass("fr-active").attr("aria-selected",!0)}function pe(){var i=t.popups.get("image.insert");i||(i=I()),t.popups.isVisible("image.insert")||(v(),t.popups.refresh("image.insert"),t.popups.setContainer("image.insert",e(t.opts.scrollableContainer)));var n=be.offset().left+be.width()/2,s=be.offset().top+be.height();t.popups.show("image.insert",n,s,be.outerHeight())}function fe(){if(be){t.selection.clear();var e=t.doc.createRange();e.selectNode(be.get(0));t.selection.get().addRange(e)}}function me(){be?(t.events.disableBlur(),e(".fr-popup input:focus").blur(),x(be)):(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("image.insert"),t.toolbar.showInline())}function ge(){return be}function ve(e,i,n){if(void 0===i&&(i=t.opts.imageStyles),void 0===n&&(n=t.opts.imageMultipleStyles),!be)return!1;if(!n){var s=Object.keys(i);s.splice(s.indexOf(e),1),be.removeClass(s.join(" "))}be.toggleClass(e),x(be)}var be,ye,we,xe,Ce=!1,Ee=1,ke=2,Te=3,_e=4,Se=5,De=6,$e={};$e[Ee]="Image cannot be loaded from the passed link.",$e[ke]="No link in upload response.",$e[Te]="Error during file upload.",$e[_e]="Parsing response failed.",$e[Se]="File is too large.",$e[De]="Image file type is invalid.",$e[7]="Files can be uploaded only to same domain in IE 8 and IE 9.";var Me,Ae,Oe=!1;return{_init:J,showInsertPopup:n,showLayer:V,refreshUploadButton:Y,refreshByURLButton:q,upload:O,insertByURL:w,align:le,refreshAlign:ce,refreshAlignOnShow:de,display:ue,refreshDisplayOnShow:he,replace:pe,back:me,get:ge,insert:E,showProgressBar:g,remove:Q,hideProgressBar:v,applyStyle:ve,showAltPopup:B,showSizePopup:j,setAlt:U,setSize:W,exitEdit:se,edit:x}},e.FE.DefineIcon("insertImage",{NAME:"image"}),e.FE.RegisterShortcut(e.FE.KEYCODE.P,"insertImage",null,"P"),e.FE.RegisterCommand("insertImage",{title:"Insert Image",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("image.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("image.insert")):this.image.showInsertPopup()},plugin:"image"}),e.FE.DefineIcon("imageUpload",{NAME:"upload"}),e.FE.RegisterCommand("imageUpload",{title:"Upload Image",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-upload")},refresh:function(e){this.image.refreshUploadButton(e)}}),e.FE.DefineIcon("imageByURL",{NAME:"link"}),e.FE.RegisterCommand("imageByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-by-url")},refresh:function(e){this.image.refreshByURLButton(e)}}),e.FE.RegisterCommand("imageInsertByURL",{title:"Insert Image",undo:!0,refreshAfterCallback:!1,callback:function(){this.image.insertByURL()},refresh:function(e){this.image.get()?e.text(this.language.translate("Replace")):e.text(this.language.translate("Insert"))}}),e.FE.DefineIcon("imageDisplay",{NAME:"star"}),e.FE.RegisterCommand("imageDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.image.display(t)},refresh:function(e){this.opts.imageTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.image.refreshDisplayOnShow(e,t)}}),e.FE.ICONS.align||(e.FE.DefineIcon("align",{NAME:"align-left"}),e.FE.DefineIcon("align-left",{NAME:"align-left"}),e.FE.DefineIcon("align-right",{NAME:"align-right"}),e.FE.DefineIcon("align-center",{NAME:"align-center"}),e.FE.DefineIcon("align-justify",{NAME:"align-justify"})),e.FE.DefineIcon("imageAlign",{NAME:"align-center"}),e.FE.RegisterCommand("imageAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",justify:"None",right:"Align Right"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',i=e.FE.COMMANDS.imageAlign.options;for(var n in i)i.hasOwnProperty(n)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="imageAlign" data-param1="'+n+'" title="'+this.language.translate(i[n])+'">'+this.icon.create("align-"+n)+'<span class="fr-sr-only">'+this.language.translate(i[n])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.image.align(t)},refresh:function(e){this.image.refreshAlign(e)},refreshOnShow:function(e,t){this.image.refreshAlignOnShow(e,t)}}),e.FE.DefineIcon("imageReplace",{NAME:"exchange"}),e.FE.RegisterCommand("imageReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.image.replace()}}),e.FE.DefineIcon("imageRemove",{NAME:"trash"}),e.FE.RegisterCommand("imageRemove",{title:"Remove",callback:function(){this.image.remove()}}),e.FE.DefineIcon("imageBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("imageBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.image.back()},refresh:function(e){this.image.get()||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("imageDismissError",{title:"OK",undo:!1,callback:function(){this.image.hideProgressBar(!0)}}),e.FE.DefineIcon("imageStyle",{NAME:"magic"}),e.FE.RegisterCommand("imageStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.imageStyles;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="imageStyle" data-param1="'+i+'">'+this.language.translate(t[i])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.image.applyStyle(t)},refreshOnShow:function(t,i){var n=this.image.get();n&&i.find(".fr-command").each(function(){var t=e(this).data("param1"),i=n.hasClass(t);e(this).toggleClass("fr-active",i).attr("aria-selected",i)})}}),e.FE.DefineIcon("imageAlt",{NAME:"info"}),e.FE.RegisterCommand("imageAlt",{undo:!1,focus:!1,popup:!0,title:"Alternate Text",callback:function(){this.image.showAltPopup()}}),e.FE.RegisterCommand("imageSetAlt",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setAlt()}}),e.FE.DefineIcon("imageSize",{NAME:"arrows-alt"}),e.FE.RegisterCommand("imageSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.image.showSizePopup()}}),e.FE.RegisterCommand("imageSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setSize()}})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){if(e.extend(e.FE.DEFAULTS,{imageManagerLoadURL:"https://i.froala.com/load-files",imageManagerLoadMethod:"get",imageManagerLoadParams:{},imageManagerPreloader:"",imageManagerDeleteURL:"",imageManagerDeleteMethod:"post",imageManagerDeleteParams:{},imageManagerPageSize:12,imageManagerScrollOffset:20,imageManagerToggleTags:!0}),e.FE.PLUGINS.imageManager=function(t){function i(){if(!k){var e='<div class="fr-modal-head-line"><i class="fa fa-bars fr-modal-more fr-not-available" id="fr-modal-more-'+t.sid+'" title="'+t.language.translate("Tags")+'"></i><h4 data-text="true">'+t.language.translate("Manage Images")+"</h4></div>";e+='<div class="fr-modal-tags" id="fr-modal-tags"></div>';var i='<img class="fr-preloader" id="fr-preloader" alt="'+t.language.translate("Loading")+'.." src="'+t.opts.imageManagerPreloader+'" style="display: none;">';i+='<div class="fr-image-list" id="fr-image-list"></div>';var n=t.modals.create(L,e,i);k=n.$modal,T=n.$head,_=n.$body}k.data("current-image",t.image.get()),t.modals.show(L),S||C(),r()}function n(){t.modals.hide(L)}function s(){var t=e(window).outerWidth();return t<768?2:t<1200?3:4}function o(){D.empty();for(var e=0;e<N;e++)D.append('<div class="fr-list-column"></div>')}function r(){S.show(),D.find(".fr-list-column").empty(),t.opts.imageManagerLoadURL?e.ajax({url:t.opts.imageManagerLoadURL,method:t.opts.imageManagerLoadMethod,data:t.opts.imageManagerLoadParams,dataType:"json",crossDomain:t.opts.requestWithCORS,xhrFields:{withCredentials:t.opts.requestWithCredentials},headers:t.opts.requestHeaders}).done(function(e,i,n){t.events.trigger("imageManager.imagesLoaded",[e]),a(e,n.response),S.hide()}).fail(function(){var e=this.xhr();v(I,e.response||e.responseText)}):v(P)}function a(e,t){try{D.find(".fr-list-column").empty(),A=0,O=0,F=0,M=e,l()}catch(e){v(B,t)}}function l(){if(O<M.length&&(D.outerHeight()<=_.outerHeight()+t.opts.imageManagerScrollOffset||_.scrollTop()+t.opts.imageManagerScrollOffset>D.outerHeight()-_.outerHeight())){A++;for(var e=t.opts.imageManagerPageSize*(A-1);e<Math.min(M.length,t.opts.imageManagerPageSize*A);e++)c(M[e])}}function c(i){var n=new Image,s=e('<div class="fr-image-container fr-empty fr-image-'+F+++'" data-loading="'+t.language.translate("Loading")+'.." data-deleting="'+t.language.translate("Deleting")+'..">');p(!1),n.onload=function(){s.height(Math.floor(s.width()/n.width*n.height));var o=e("<img/>");if(i.thumb)o.attr("src",i.thumb);else{if(v(H,i),!i.url)return v(U,i),!1;o.attr("src",i.url)}if(i.url&&o.attr("data-url",i.url),i.tag)if(T.find(".fr-modal-more.fr-not-available").removeClass("fr-not-available"),T.find(".fr-modal-tags").show(),i.tag.indexOf(",")>=0){for(var r=i.tag.split(","),a=0;a<r.length;a++)r[a]=r[a].trim(),0===$.find('a[title="'+r[a]+'"]').length&&$.append('<a role="button" title="'+r[a]+'">'+r[a]+"</a>");o.attr("data-tag",r.join())}else 0===$.find('a[title="'+i.tag.trim()+'"]').length&&$.append('<a role="button" title="'+i.tag.trim()+'">'+i.tag.trim()+"</a>"),o.attr("data-tag",i.tag.trim());i.name&&o.attr("alt",i.name);for(var c in i)i.hasOwnProperty(c)&&"thumb"!=c&&"url"!=c&&"tag"!=c&&o.attr("data-"+c,i[c]);s.append(o).append(e(t.icon.create("imageManagerDelete")).addClass("fr-delete-img").attr("title",t.language.translate("Delete"))).append(e(t.icon.create("imageManagerInsert")).addClass("fr-insert-img").attr("title",t.language.translate("Insert"))),$.find(".fr-selected-tag").each(function(e,t){x(o,t.text)||s.hide()}),o.on("load",function(){s.removeClass("fr-empty"),s.height("auto"),O++,h(u(parseInt(o.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1)),p(!1),O%t.opts.imageManagerPageSize==0&&l()}),t.events.trigger("imageManager.imageLoaded",[o])},n.onerror=function(){O++,s.remove(),h(u(parseInt(s.attr("class").match(/fr-image-(\d+)/)[1],10)+1)),v(R,i),O%t.opts.imageManagerPageSize==0&&l()},n.src=i.thumb||i.url,d().append(s)}function d(){var t,i;return D.find(".fr-list-column").each(function(n,s){var o=e(s);0===n?(i=o.outerHeight(),t=o):o.outerHeight()<i&&(i=o.outerHeight(),t=o)}),t}function u(t){void 0===t&&(t=0);for(var i=[],n=F-1;n>=t;n--){var s=D.find(".fr-image-"+n);s.length&&(i.push(s),e('<div id="fr-image-hidden-container">').append(s),D.find(".fr-image-"+n).remove())}return i}function h(e){for(var t=e.length-1;t>=0;t--)d().append(e[t])}function p(e){if(void 0===e&&(e=!0),!k.is(":visible"))return!0;var i=s();if(i!=N){N=i;var n=u();o(),h(n)}t.modals.resize(L),e&&l()}function f(e){var t={},i=e.data();for(var n in i)i.hasOwnProperty(n)&&"url"!=n&&"tag"!=n&&(t[n]=i[n]);return t}function m(i){var n=e(i.currentTarget).siblings("img"),s=k.data("instance")||t,o=k.data("current-image");if(t.modals.hide(L),s.image.showProgressBar(),o)o.data("fr-old-src",o.attr("src")),o.trigger("click");else{s.events.focus(!0),s.selection.restore();var r=s.position.getBoundingRect(),a=r.left+r.width/2,l=r.top+r.height;s.popups.setContainer("image.insert",s.$box||e("body")),s.popups.show("image.insert",a,l)}s.image.insert(n.data("url"),!1,f(n),o)}function g(i){var n=e(i.currentTarget).siblings("img"),s=t.language.translate("Are you sure? Image will be deleted.");confirm(s)&&(t.opts.imageManagerDeleteURL?!1!==t.events.trigger("imageManager.beforeDeleteImage",[n])&&(n.parent().addClass("fr-image-deleting"),e.ajax({method:t.opts.imageManagerDeleteMethod,url:t.opts.imageManagerDeleteURL,data:e.extend(e.extend({src:n.attr("src")},f(n)),t.opts.imageManagerDeleteParams),crossDomain:t.opts.requestWithCORS,xhrFields:{withCredentials:t.opts.requestWithCredentials},headers:t.opts.requestHeaders}).done(function(e){t.events.trigger("imageManager.imageDeleted",[e]);var i=u(parseInt(n.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1);n.parent().remove(),h(i),p(!0)}).fail(function(){var e=this.xhr();v(z,e.response||e.responseText)})):v(j))}function v(i,n){10<=i&&i<20?S.hide():20<=i&&i<30&&e(".fr-image-deleting").removeClass("fr-image-deleting"),t.events.trigger("imageManager.error",[{code:i,message:K[i]},n])}function b(){var e=T.find(".fr-modal-head-line").outerHeight(),t=$.outerHeight();T.toggleClass(".fr-show-tags"),T.hasClass(".fr-show-tags")?(T.css("height",e+t),$.find("a").css("opacity",1)):(T.css("height",e),$.find("a").css("opacity",0))}function y(){var t=$.find(".fr-selected-tag");t.length>0?(D.find("img").parent().show(),t.each(function(t,i){D.find("img").each(function(t,n){var s=e(n);x(s,i.text)||s.parent().hide()})})):D.find("img").parent().show(),h(u()),l()}function w(i){i.preventDefault();var n=e(i.currentTarget);n.toggleClass("fr-selected-tag"),t.opts.imageManagerToggleTags&&n.siblings("a").removeClass("fr-selected-tag"),y()}function x(e,t){for(var i=e.attr("data-tag").split(","),n=0;n<i.length;n++)if(i[n]==t)return!0;return!1}function C(){S=k.find("#fr-preloader"),D=k.find("#fr-image-list"),$=k.find("#fr-modal-tags"),N=s(),o(),T.css("height",T.find(".fr-modal-head-line").outerHeight()),t.events.$on(e(t.o_win),"resize",function(){p(!!M)}),t.helpers.isMobile()&&(t.events.bindClick(D,"div.fr-image-container",function(t){k.find(".fr-mobile-selected").removeClass("fr-mobile-selected"),e(t.currentTarget).addClass("fr-mobile-selected")}),k.on(t._mousedown,function(){k.find(".fr-mobile-selected").removeClass("fr-mobile-selected")})),t.events.bindClick(D,".fr-insert-img",m),t.events.bindClick(D,".fr-delete-img",g),k.on(t._mousedown+" "+t._mouseup,function(e){e.stopPropagation()}),k.on(t._mousedown,"*",function(){t.events.disableBlur()}),_.on("scroll",l),t.events.bindClick(k,"i#fr-modal-more-"+t.sid,b),t.events.bindClick($,"a",w)}function E(){if(!t.$wp&&"IMG"!=t.el.tagName)return!1}var k,T,_,S,D,$,M,A,O,F,N,L="image_manager",R=10,I=11,P=12,B=13,H=14,U=15,z=21,j=22,K={};return K[R]="Image cannot be loaded from the passed link.",K[I]="Error during load images request.",K[P]="Missing imageManagerLoadURL option.",K[B]="Parsing load response failed.",K[H]="Missing image thumb.",K[U]="Missing image URL.",K[z]="Error during delete image request.",K[j]="Missing imageManagerDeleteURL option.",{require:["image"],_init:E,show:i,hide:n}},!e.FE.PLUGINS.image)throw new Error("Image manager plugin requires image plugin.");e.FE.DEFAULTS.imageInsertButtons.push("imageManager"),e.FE.RegisterCommand("imageManager",{title:"Browse",undo:!1,focus:!1,modal:!0,callback:function(){this.imageManager.show()},plugin:"imageManager"}),e.FE.DefineIcon("imageManager",{NAME:"folder"}),e.FE.DefineIcon("imageManagerInsert",{NAME:"plus"}),e.FE.DefineIcon("imageManagerDelete",{NAME:"trash"})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{lineBreakerTags:["table","hr","form","dl","span.fr-video"],lineBreakerOffset:15}),e.FE.PLUGINS.lineBreaker=function(t){function i(i,n){var s,o,r,a,l,c,d,u;if(null==i)a=n.parent(),l=a.offset().top,d=n.offset().top,s=d-Math.min((d-l)/2,t.opts.lineBreakerOffset),r=a.outerWidth(),o=a.offset().left;else if(null==n)a=i.parent(),c=a.offset().top+a.outerHeight(),u=i.offset().top+i.outerHeight(),s=u+Math.min((c-u)/2,t.opts.lineBreakerOffset),r=a.outerWidth(),o=a.offset().left;else{a=i.parent();var h=i.offset().top+i.height(),f=n.offset().top;if(h>f)return!1;s=(h+f)/2,r=a.outerWidth(),o=a.offset().left}t.opts.iframe&&(o+=t.$iframe.offset().left-e(t.o_win).scrollLeft(),s+=t.$iframe.offset().top-e(t.o_win).scrollTop()),t.$box.append(p),p.css("top",s-t.win.pageYOffset),p.css("left",o-t.win.pageXOffset),p.css("width",r),p.data("tag1",i),p.data("tag2",n),p.addClass("fr-visible").data("instance",t)}function n(e,n){var o,r,a=e.offset().top,l=e.offset().top+e.outerHeight();if(Math.abs(l-n)<=t.opts.lineBreakerOffset||Math.abs(n-a)<=t.opts.lineBreakerOffset)if(Math.abs(l-n)<Math.abs(n-a)){r=e.get(0);for(var c=r.nextSibling;c&&c.nodeType==Node.TEXT_NODE&&0===c.textContent.length;)c=c.nextSibling;if(!c)return i(e,null),!0;if(o=s(c))return i(e,o),!0}else{if(r=e.get(0),!r.previousSibling)return i(null,e),!0;if(o=s(r.previousSibling))return i(o,e),!0}p.removeClass("fr-visible").removeData("instance")}function s(i){if(i){var n=e(i);if(0===t.$el.find(n).length)return null;if(i.nodeType!=Node.TEXT_NODE&&n.is(t.opts.lineBreakerTags.join(",")))return n;if(n.parents(t.opts.lineBreakerTags.join(",")).length>0)return i=n.parents(t.opts.lineBreakerTags.join(",")).get(0),e(i)}return null}function o(i){m=null;var o,r,a,l=null,c=t.doc.elementFromPoint(i.pageX-t.win.pageXOffset,i.pageY-t.win.pageYOffset);if(c&&("HTML"==c.tagName||"BODY"==c.tagName||t.node.isElement(c)))for(o=1;o<=t.opts.lineBreakerOffset;o++){if((r=t.doc.elementFromPoint(i.pageX-t.win.pageXOffset,i.pageY-t.win.pageYOffset-o))&&!t.node.isElement(r)&&r!=t.$wp.get(0)&&e(r).parents(t.$wp).length){l=s(r);break}if((a=t.doc.elementFromPoint(i.pageX-t.win.pageXOffset,i.pageY-t.win.pageYOffset+o))&&!t.node.isElement(a)&&a!=t.$wp.get(0)&&e(a).parents(t.$wp).length){l=s(a);break}}else l=s(c);l?n(l,i.pageY):t.core.sameInstance(p)&&p.removeClass("fr-visible").removeData("instance")}function r(e){return!(p.hasClass("fr-visible")&&!t.core.sameInstance(p))&&(t.popups.areVisible()||t.el.querySelector(".fr-selected-cell")?(p.removeClass("fr-visible"),!0):void(!1===f&&(m&&clearTimeout(m),m=setTimeout(o,30,e))))}function a(){m&&clearTimeout(m),p.hasClass("fr-visible")&&p.removeClass("fr-visible").removeData("instance")}function l(){f=!0,a()}function c(){f=!1}function d(i){if(!t.core.sameInstance(p))return!0;i.preventDefault(),p.removeClass("fr-visible").removeData("instance");var n=p.data("tag1"),s=p.data("tag2"),o=t.html.defaultTag();null==n?o&&"TD"!=s.parent().get(0).tagName?s.before("<"+o+">"+e.FE.MARKERS+"<br></"+o+">"):s.before(e.FE.MARKERS+"<br>"):o&&"TD"!=n.parent().get(0).tagName&&0===n.parents(o).length?n.after("<"+o+">"+e.FE.MARKERS+"<br></"+o+">"):n.after(e.FE.MARKERS+"<br>"),t.selection.restore()}function u(){t.shared.$line_breaker||(t.shared.$line_breaker=e('<div class="fr-line-breaker"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+t.language.translate("Break")+'"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><rect x="21" y="11" width="2" height="8"/><rect x="14" y="17" width="7" height="2"/><path d="M14.000,14.000 L14.000,22.013 L9.000,18.031 L14.000,14.000 Z"/></svg></a></div>')),p=t.shared.$line_breaker,t.events.on("shared.destroy",function(){p.html("").removeData().remove(),p=null},!0),t.events.on("destroy",function(){p.removeData("instance").removeClass("fr-visible").appendTo("body"),clearTimeout(m)},!0),t.events.$on(p,"mouseleave",a,!0),t.events.$on(p,"mousemove",function(e){e.stopPropagation()},!0),t.events.$on(p,"mousedown","a",function(e){e.stopPropagation()},!0),t.events.$on(p,"click","a",d,!0)}function h(){return!!t.$wp&&(u(),f=!1,t.events.$on(t.$win,"mousemove",r),t.events.$on(e(t.win),"scroll",a),t.events.on("popups.show.table.edit",a),t.events.on("commands.after",a),t.events.$on(e(t.win),"mousedown",l),void t.events.$on(e(t.win),"mouseup",c))}var p,f,m;return{_init:h}}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{"link.edit":"[_BUTTONS_]","link.insert":"[_BUTTONS_][_INPUT_LAYER_]"}),e.extend(e.FE.DEFAULTS,{linkEditButtons:["linkOpen","linkStyle","linkEdit","linkRemove"],linkInsertButtons:["linkBack","|","linkList"],linkAttributes:{},linkAutoPrefix:"http://",linkStyles:{"fr-green":"Green","fr-strong":"Thick"},linkMultipleStyles:!0,linkConvertEmailAddress:!0,linkAlwaysBlank:!1,linkAlwaysNoFollow:!1,linkList:[{text:"Froala",href:"https://froala.com",target:"_blank"},{text:"Google",href:"https://google.com",target:"_blank"},{displayText:"Facebook",href:"https://facebook.com"}],linkText:!0}),e.FE.PLUGINS.link=function(t){function i(){var i=t.image?t.image.get():null;if(!i&&t.$wp){var n=t.selection.ranges(0).commonAncestorContainer;if(n&&(n.contains&&n.contains(t.el)||!t.el.contains(n)||t.el==n)&&(n=null),n&&"A"===n.tagName)return n;var s=t.selection.element(),o=t.selection.endElement();return"A"==s.tagName||t.node.isElement(s)||(s=e(s).parentsUntil(t.$el,"a:first").get(0)),"A"==o.tagName||t.node.isElement(o)||(o=e(o).parentsUntil(t.$el,"a:first").get(0)),o&&(o.contains&&o.contains(t.el)||!t.el.contains(o)||t.el==o)&&(o=null),s&&(s.contains&&s.contains(t.el)||!t.el.contains(s)||t.el==s)&&(s=null),o&&o==s&&"A"==o.tagName?s:null}return"A"==t.el.tagName?t.el:i&&i.get(0).parentNode&&"A"==i.get(0).parentNode.tagName?i.get(0).parentNode:void 0}function n(){var e=t.image?t.image.get():null,i=[];if(e)"A"==e.get(0).parentNode.tagName&&i.push(e.get(0).parentNode);else{var n,s,o,r;if(t.win.getSelection){var a=t.win.getSelection();if(a.getRangeAt&&a.rangeCount){r=t.doc.createRange();for(var l=0;l<a.rangeCount;++l)if(n=a.getRangeAt(l),s=n.commonAncestorContainer,s&&1!=s.nodeType&&(s=s.parentNode),s&&"a"==s.nodeName.toLowerCase())i.push(s);else{o=s.getElementsByTagName("a");for(var c=0;c<o.length;++c)r.selectNodeContents(o[c]),r.compareBoundaryPoints(n.END_TO_START,n)<1&&r.compareBoundaryPoints(n.START_TO_END,n)>-1&&i.push(o[c])}}}else if(t.doc.selection&&"Control"!=t.doc.selection.type)if(n=t.doc.selection.createRange(),s=n.parentElement(),"a"==s.nodeName.toLowerCase())i.push(s);else{o=s.getElementsByTagName("a"),r=t.doc.body.createTextRange();for(var d=0;d<o.length;++d)r.moveToElementText(o[d]),r.compareEndPoints("StartToEnd",n)>-1&&r.compareEndPoints("EndToStart",n)<1&&i.push(o[d])}}return i}function s(n){r(),setTimeout(function(){if(!n||n&&(1==n.which||"mouseup"!=n.type)){var s=i(),r=t.image?t.image.get():null;if(s&&!r){if(t.image){var a=t.node.contents(s);if(1==a.length&&"IMG"==a[0].tagName){var l=t.selection.ranges(0);return 0===l.startOffset&&0===l.endOffset?e(s).before(e.FE.MARKERS):e(s).after(e.FE.MARKERS),t.selection.restore(),!1}}n&&n.stopPropagation(),o(s)}}},t.helpers.isIOS()?100:0)}function o(i){var n=t.popups.get("link.edit");n||(n=a());var s=e(i);t.popups.isVisible("link.edit")||t.popups.refresh("link.edit"),t.popups.setContainer("link.edit",e(t.opts.scrollableContainer));var o=s.offset().left+e(i).outerWidth()/2,r=s.offset().top+s.outerHeight();t.popups.show("link.edit",o,r,s.outerHeight())}function r(){t.popups.hide("link.edit")}function a(){var e="";t.opts.linkEditButtons.length>1&&("A"==t.el.tagName&&t.opts.linkEditButtons.indexOf("linkRemove")>=0&&t.opts.linkEditButtons.splice(t.opts.linkEditButtons.indexOf("linkRemove"),1),e='<div class="fr-buttons">'+t.button.buildList(t.opts.linkEditButtons)+"</div>");var n={buttons:e},s=t.popups.create("link.edit",n);return t.$wp&&t.events.$on(t.$wp,"scroll.link-edit",function(){i()&&t.popups.isVisible("link.edit")&&o(i())}),s}function l(){}function c(){var n=t.popups.get("link.insert"),s=i();if(s){var o,r,a=e(s),l=n.find('input.fr-link-attr[type="text"]'),c=n.find('input.fr-link-attr[type="checkbox"]');for(o=0;o<l.length;o++)r=e(l[o]),r.val(a.attr(r.attr("name")||""));for(c.prop("checked",!1),o=0;o<c.length;o++)r=e(c[o]),a.attr(r.attr("name"))==r.data("checked")&&r.prop("checked",!0);n.find('input.fr-link-attr[type="text"][name="text"]').val(a.text())}else n.find('input.fr-link-attr[type="text"]').val(""),n.find('input.fr-link-attr[type="checkbox"]').prop("checked",!1),n.find('input.fr-link-attr[type="text"][name="text"]').val(t.selection.text());n.find("input.fr-link-attr").trigger("change"),(t.image?t.image.get():null)?n.find('.fr-link-attr[name="text"]').parent().hide():n.find('.fr-link-attr[name="text"]').parent().show()}function d(){var i=t.$tb.find('.fr-command[data-cmd="insertLink"]'),n=t.popups.get("link.insert");if(n||(n=u()),!n.hasClass("fr-active"))if(t.popups.refresh("link.insert"),t.popups.setContainer("link.insert",t.$tb||e(t.opts.scrollableContainer)),i.is(":visible")){var s=i.offset().left+i.outerWidth()/2,o=i.offset().top+(t.opts.toolbarBottom?10:i.outerHeight()-10);t.popups.show("link.insert",s,o,i.outerHeight())}else t.position.forSelection(n),t.popups.show("link.insert")}function u(e){if(e)return t.popups.onRefresh("link.insert",c),t.popups.onHide("link.insert",l),!0;var n="";t.opts.linkInsertButtons.length>=1&&(n='<div class="fr-buttons">'+t.button.buildList(t.opts.linkInsertButtons)+"</div>");var s="",o=0;s='<div class="fr-link-insert-layer fr-layer fr-active" id="fr-link-insert-layer-'+t.id+'">',s+='<div class="fr-input-line"><input id="fr-link-insert-layer-url-'+t.id+'" name="href" type="text" class="fr-link-attr" placeholder="URL" tabIndex="'+ ++o+'"></div>',t.opts.linkText&&(s+='<div class="fr-input-line"><input id="fr-link-insert-layer-text-'+t.id+'" name="text" type="text" class="fr-link-attr" placeholder="'+t.language.translate("Text")+'" tabIndex="'+ ++o+'"></div>');for(var r in t.opts.linkAttributes)if(t.opts.linkAttributes.hasOwnProperty(r)){var a=t.opts.linkAttributes[r];s+='<div class="fr-input-line"><input name="'+r+'" type="text" class="fr-link-attr" placeholder="'+t.language.translate(a)+'" tabIndex="'+ ++o+'"></div>'}t.opts.linkAlwaysBlank||(s+='<div class="fr-checkbox-line"><span class="fr-checkbox"><input name="target" class="fr-link-attr" data-checked="_blank" type="checkbox" id="fr-link-target-'+t.id+'" tabIndex="'+ ++o+'"><span><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg></span></span><label for="fr-link-target-'+t.id+'">'+t.language.translate("Open in new tab")+"</label></div>"),s+='<div class="fr-action-buttons"><button class="fr-command fr-submit" role="button" data-cmd="linkInsert" href="#" tabIndex="'+ ++o+'" type="button">'+t.language.translate("Insert")+"</button></div></div>";var d={buttons:n,input_layer:s},u=t.popups.create("link.insert",d);return t.$wp&&t.events.$on(t.$wp,"scroll.link-insert",function(){(t.image?t.image.get():null)&&t.popups.isVisible("link.insert")&&w(),i&&t.popups.isVisible("link.insert")&&b()}),u}function h(){var n=i(),s=t.image?t.image.get():null;return!1!==t.events.trigger("link.beforeRemove",[n])&&void(s&&n?(s.unwrap(),t.image.edit(s)):n&&(t.selection.save(),e(n).replaceWith(e(n).html()),t.selection.restore(),r()))}function p(){t.events.on("keyup",function(t){t.which!=e.FE.KEYCODE.ESC&&s(t)}),t.events.on("window.mouseup",s),t.helpers.isMobile()&&t.events.$on(t.$doc,"selectionchange",s),u(!0),"A"==t.el.tagName&&t.$el.addClass("fr-view"),t.events.on("toolbar.esc",function(){if(t.popups.isVisible("link.edit"))return t.events.disableBlur(),t.events.focus(),!1},!0)}function f(i){var n,s,o=t.opts.linkList[i],r=t.popups.get("link.insert"),a=r.find('input.fr-link-attr[type="text"]'),l=r.find('input.fr-link-attr[type="checkbox"]');for(s=0;s<a.length;s++)n=e(a[s]),o[n.attr("name")]?n.val(o[n.attr("name")]):"text"!=n.attr("name")&&n.val("");for(s=0;s<l.length;s++)n=e(l[s]),n.prop("checked",n.data("checked")==o[n.attr("name")]);t.accessibility.focusPopup(r)}function m(){var i,n,s=t.popups.get("link.insert"),o=s.find('input.fr-link-attr[type="text"]'),r=s.find('input.fr-link-attr[type="checkbox"]'),a=o.filter('[name="href"]').val(),l=o.filter('[name="text"]').val(),c={};for(n=0;n<o.length;n++)i=e(o[n]),["href","text"].indexOf(i.attr("name"))<0&&(c[i.attr("name")]=i.val());for(n=0;n<r.length;n++)i=e(r[n]),i.is(":checked")?c[i.attr("name")]=i.data("checked"):c[i.attr("name")]=i.data("unchecked");var d=e(t.o_win).scrollTop();v(a,l,c),e(t.o_win).scrollTop(d)}function g(){if(!t.selection.isCollapsed()){t.selection.save();for(var i=t.$el.find(".fr-marker").addClass("fr-unprocessed").toArray();i.length;){var n=e(i.pop());n.removeClass("fr-unprocessed");var s=t.node.deepestParent(n.get(0));if(s){var o=n.get(0),r="",a="";do{o=o.parentNode,t.node.isBlock(o)||(r+=t.node.closeTagString(o),a=t.node.openTagString(o)+a)}while(o!=s);var l=t.node.openTagString(n.get(0))+n.html()+t.node.closeTagString(n.get(0));n.replaceWith('<span id="fr-break"></span>');var c=e(s).html();c=c.replace(/<span id="fr-break"><\/span>/g,r+l+a),e(s).html(c)}i=t.$el.find(".fr-marker.fr-unprocessed").toArray()}t.selection.restore()}}function v(o,r,a){if(void 0===a&&(a={}),!1===t.events.trigger("link.beforeInsert",[o,r,a]))return!1;var l=t.image?t.image.get():null;l||"A"==t.el.tagName?"A"==t.el.tagName&&t.$el.focus():(t.selection.restore(),t.popups.hide("link.insert"));var c=o;if(t.opts.linkConvertEmailAddress){/^[\w._]+@[a-z\u00a1-\uffff0-9_-]+?\.[a-z\u00a1-\uffff0-9]{2,}$/i.test(o)&&!/^mailto:.*/i.test(o)&&(o="mailto:"+o)}
if(""===t.opts.linkAutoPrefix||/^(mailto|tel|sms|notes|data):.*/i.test(o)||/^data:image.*/i.test(o)||/^(https?:|ftps?:|file:|)\/\//i.test(o)||["/","{","[","#","("].indexOf((o||"")[0])<0&&(o=t.opts.linkAutoPrefix+o),o=t.helpers.sanitizeURL(o),t.opts.linkAlwaysBlank&&(a.target="_blank"),t.opts.linkAlwaysNoFollow&&(a.rel="nofollow"),"_blank"==a.target&&(a.rel?a.rel+=" noopener noreferrer":a.rel="noopener noreferrer"),r=r||"",o===t.opts.linkAutoPrefix){return t.popups.get("link.insert").find('input[name="href"]').addClass("fr-error"),t.events.trigger("link.bad",[c]),!1}var d,u=i();if(u){d=e(u);var h=t.node.rawAttributes(u);for(var p in h)h.hasOwnProperty(p)&&"class"!=p&&"style"!=p&&"id"!=p&&"contenteditable"!=p&&d.removeAttr(p);d.attr("href",o),r.length>0&&d.text()!=r&&!l&&d.text(r),l||d.prepend(e.FE.START_MARKER).append(e.FE.END_MARKER),d.attr(a),l||t.selection.restore()}else{l?l.wrap('<a href="'+o+'"></a>'):(t.format.remove("a"),t.selection.isCollapsed()?(r=0===r.length?c:r,t.html.insert('<a href="'+o+'">'+e.FE.START_MARKER+r+e.FE.END_MARKER+"</a>"),t.selection.restore()):r.length>0&&r!=t.selection.text().replace(/\n/g,"")?(t.selection.remove(),t.html.insert('<a href="'+o+'">'+e.FE.START_MARKER+r+e.FE.END_MARKER+"</a>"),t.selection.restore()):(g(),t.format.apply("a",{href:o})));for(var f=n(),m=0;m<f.length;m++)d=e(f[m]),d.attr(a),d.removeAttr("_moz_dirty");1==f.length&&t.$wp&&!l&&(e(f[0]).prepend(e.FE.START_MARKER).append(e.FE.END_MARKER),t.selection.restore())}if(l){t.popups.get("link.insert").find("input:focus").blur(),t.image.edit(l)}else s()}function b(){r();var n=i();if(n){var s=t.popups.get("link.insert");s||(s=u()),t.popups.isVisible("link.insert")||(t.popups.refresh("link.insert"),t.selection.save(),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur())),t.popups.setContainer("link.insert",e(t.opts.scrollableContainer));var o=(t.image?t.image.get():null)||e(n),a=o.offset().left+o.outerWidth()/2,l=o.offset().top+o.outerHeight();t.popups.show("link.insert",a,l,o.outerHeight())}}function y(){(t.image?t.image.get():null)?t.image.back():(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),i()&&t.$wp?(t.selection.restore(),r(),s()):"A"==t.el.tagName?(t.$el.focus(),s()):(t.popups.hide("link.insert"),t.toolbar.showInline()))}function w(){var i=t.image?t.image.get():null;if(i){var n=t.popups.get("link.insert");n||(n=u()),c(!0),t.popups.setContainer("link.insert",e(t.opts.scrollableContainer));var s=i.offset().left+i.outerWidth()/2,o=i.offset().top+i.outerHeight();t.popups.show("link.insert",s,o,i.outerHeight())}}function x(n,o,r){void 0===r&&(r=t.opts.linkMultipleStyles),void 0===o&&(o=t.opts.linkStyles);var a=i();if(!a)return!1;if(!r){var l=Object.keys(o);l.splice(l.indexOf(n),1),e(a).removeClass(l.join(" "))}e(a).toggleClass(n),s()}return{_init:p,remove:h,showInsertPopup:d,usePredefined:f,insertCallback:m,insert:v,update:b,get:i,allSelected:n,back:y,imageLink:w,applyStyle:x}},e.FE.DefineIcon("insertLink",{NAME:"link"}),e.FE.RegisterShortcut(e.FE.KEYCODE.K,"insertLink",null,"K"),e.FE.RegisterCommand("insertLink",{title:"Insert Link",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("link.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("link.insert")):this.link.showInsertPopup()},plugin:"link"}),e.FE.DefineIcon("linkOpen",{NAME:"external-link"}),e.FE.RegisterCommand("linkOpen",{title:"Open Link",undo:!1,refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},callback:function(){var e=this.link.get();e&&this.o_win.open(e.href)}}),e.FE.DefineIcon("linkEdit",{NAME:"edit"}),e.FE.RegisterCommand("linkEdit",{title:"Edit Link",undo:!1,refreshAfterCallback:!1,popup:!0,callback:function(){this.link.update()},refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")}}),e.FE.DefineIcon("linkRemove",{NAME:"unlink"}),e.FE.RegisterCommand("linkRemove",{title:"Unlink",callback:function(){this.link.remove()},refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")}}),e.FE.DefineIcon("linkBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("linkBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.link.back()},refresh:function(e){var t=this.link.get()&&this.doc.hasFocus();(this.image?this.image.get():null)||t||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.DefineIcon("linkList",{NAME:"search"}),e.FE.RegisterCommand("linkList",{title:"Choose Link",type:"dropdown",focus:!1,undo:!1,refreshAfterCallback:!1,html:function(){for(var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.linkList,i=0;i<t.length;i++)e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkList" data-param1="'+i+'">'+(t[i].displayText||t[i].text)+"</a></li>";return e+="</ul>"},callback:function(e,t){this.link.usePredefined(t)}}),e.FE.RegisterCommand("linkInsert",{focus:!1,refreshAfterCallback:!1,callback:function(){this.link.insertCallback()},refresh:function(e){this.link.get()?e.text(this.language.translate("Update")):e.text(this.language.translate("Insert"))}}),e.FE.DefineIcon("imageLink",{NAME:"link"}),e.FE.RegisterCommand("imageLink",{title:"Insert Link",undo:!1,focus:!1,popup:!0,callback:function(){this.link.imageLink()},refresh:function(e){var t;this.link.get()?(t=e.prev(),t.hasClass("fr-separator")&&t.removeClass("fr-hidden"),e.addClass("fr-hidden")):(t=e.prev(),t.hasClass("fr-separator")&&t.addClass("fr-hidden"),e.removeClass("fr-hidden"))}}),e.FE.DefineIcon("linkStyle",{NAME:"magic"}),e.FE.RegisterCommand("linkStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.linkStyles;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkStyle" data-param1="'+i+'">'+this.language.translate(t[i])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.link.applyStyle(t)},refreshOnShow:function(t,i){var n=this.link.get();if(n){var s=e(n);i.find(".fr-command").each(function(){var t=e(this).data("param1"),i=s.hasClass(t);e(this).toggleClass("fr-active",i).attr("aria-selected",i)})}}})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.FE.PLUGINS.lists=function(t){function i(e){return'<span class="fr-open-'+e.toLowerCase()+'"></span>'}function n(e){return'<span class="fr-close-'+e.toLowerCase()+'"></span>'}function s(t,i){for(var n=[],s=0;s<t.length;s++){var o=t[s].parentNode;"LI"==t[s].tagName&&o.tagName!=i&&n.indexOf(o)<0&&n.push(o)}for(s=n.length-1;s>=0;s--){var r=e(n[s]);r.replaceWith("<"+i.toLowerCase()+">"+r.html()+"</"+i.toLowerCase()+">")}}function o(i,n){s(i,n);for(var o=t.html.defaultTag(),r=0;r<i.length;r++)"LI"!=i[r].tagName&&(o&&i[r].tagName.toLowerCase()==o?e(i[r]).replaceWith("<"+n+"><li"+t.node.attributes(i[r])+">"+e(i[r]).html()+"</li></"+n+">"):e(i[r]).wrap("<"+n+"><li></li></"+n+">"));t.clean.lists()}function r(s){var o,r;for(o=s.length-1;o>=0;o--)for(r=o-1;r>=0;r--)if(e(s[r]).find(s[o]).length||s[r]==s[o]){s.splice(o,1);break}var a=[];for(o=0;o<s.length;o++){var l=e(s[o]),c=s[o].parentNode;l.before(n(c.tagName)),"LI"==c.parentNode.tagName?(l.before(n("LI")),l.after(i("LI"))):(t.node.isEmpty(l.get(0),!0)||0!==l.find(t.html.blockTagsQuery()).length||l.append("<br>"),l.append(i("LI")),l.prepend(n("LI"))),l.after(i(c.tagName)),"LI"==c.parentNode.tagName&&(c=c.parentNode.parentNode),a.indexOf(c)<0&&a.push(c)}for(o=0;o<a.length;o++){var d=e(a[o]),u=d.html();u=u.replace(/<span class="fr-close-([a-z]*)"><\/span>/g,"</$1>"),u=u.replace(/<span class="fr-open-([a-z]*)"><\/span>/g,"<$1>"),d.replaceWith(t.node.openTagString(d.get(0))+u+t.node.closeTagString(d.get(0)))}t.$el.find("li:empty").remove(),t.$el.find("ul:empty, ol:empty").remove(),t.clean.lists(),t.html.wrap()}function a(e,t){for(var i=!0,n=0;n<e.length;n++){if("LI"!=e[n].tagName)return!1;e[n].parentNode.tagName!=t&&(i=!1)}return i}function l(e){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();for(var i=t.selection.blocks(),n=0;n<i.length;n++)"LI"!=i[n].tagName&&"LI"==i[n].parentNode.tagName&&(i[n]=i[n].parentNode);t.selection.save(),a(i,e)?r(i):o(i,e),t.html.unwrap(),t.selection.restore()}function c(i,n){var s=e(t.selection.element());if(s.get(0)!=t.el){var o=s.get(0);"LI"!=o.tagName&&(o=s.parents("li").get(0)),o&&o.parentNode.tagName==n&&t.el.contains(o.parentNode)&&i.addClass("fr-active")}}function d(i){t.selection.save();for(var n=0;n<i.length;n++){var s=i[n].previousSibling;if(s){var o=e(i[n]).find("> ul, > ol").last().get(0);if(o){for(var r=e("<li>").prependTo(e(o)),a=t.node.contents(i[n])[0];a&&!t.node.isList(a);){var l=a.nextSibling;r.append(a),a=l}e(s).append(e(o)),e(i[n]).remove()}else{var c=e(s).find("> ul, > ol").last().get(0);if(c)e(c).append(e(i[n]));else{var d=e("<"+i[n].parentNode.tagName+">");e(s).append(d),d.append(e(i[n]))}}}}t.clean.lists(),t.selection.restore()}function u(e){t.selection.save(),r(e),t.selection.restore()}function h(e){if("indent"==e||"outdent"==e){for(var i=!1,n=t.selection.blocks(),s=[],o=0;o<n.length;o++)"LI"==n[o].tagName?(i=!0,s.push(n[o])):"LI"==n[o].parentNode.tagName&&(i=!0,s.push(n[o].parentNode));i&&("indent"==e?d(s):u(s))}}function p(){t.events.on("commands.after",h),t.events.on("keydown",function(i){if(i.which==e.FE.KEYCODE.TAB){for(var n=t.selection.blocks(),s=[],o=0;o<n.length;o++)"LI"==n[o].tagName?s.push(n[o]):"LI"==n[o].parentNode.tagName&&s.push(n[o].parentNode);if(s.length>1||s.length&&(t.selection.info(s[0]).atStart||t.node.isEmpty(s[0])))return i.preventDefault(),i.stopPropagation(),i.shiftKey?u(s):d(s),!1}},!0)}return{_init:p,format:l,refresh:c}},e.FE.RegisterCommand("formatUL",{title:"Unordered List",refresh:function(e){this.lists.refresh(e,"UL")},callback:function(){this.lists.format("UL")},plugin:"lists"}),e.FE.RegisterCommand("formatOL",{title:"Ordered List",refresh:function(e){this.lists.refresh(e,"OL")},callback:function(){this.lists.format("OL")},plugin:"lists"}),e.FE.DefineIcon("formatUL",{NAME:"list-ul"}),e.FE.DefineIcon("formatOL",{NAME:"list-ol"})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{paragraphFormat:{N:"Normal",H1:"Heading 1",H2:"Heading 2",H3:"Heading 3",H4:"Heading 4",PRE:"Code"},paragraphFormatSelection:!1}),e.FE.PLUGINS.paragraphFormat=function(t){function i(i,n){var s=t.html.defaultTag();if(n&&n.toLowerCase()!=s)if(i.find("ul, ol").length>0){var o=e("<"+n+">");i.prepend(o);for(var r=t.node.contents(i.get(0))[0];r&&["UL","OL"].indexOf(r.tagName)<0;){var a=r.nextSibling;o.append(r),r=a}}else i.html("<"+n+">"+i.html()+"</"+n+">")}function n(i,n){var s=t.html.defaultTag();n||(n='div class="fr-temp-div" data-empty="true"'),n.toLowerCase()==s?i.replaceWith(i.html()):i.replaceWith(e("<"+n+">").html(i.html()))}function s(i,n){var s=t.html.defaultTag();n||(n='div class="fr-temp-div"'+(t.node.isEmpty(i.get(0),!0)?' data-empty="true"':"")),n.toLowerCase()==s?(t.node.isEmpty(i.get(0),!0)||i.append("<br/>"),i.replaceWith(i.html())):i.replaceWith(e("<"+n+">").html(i.html()))}function o(i,n){n||(n='div class="fr-temp-div"'+(t.node.isEmpty(i.get(0),!0)?' data-empty="true"':"")),i.replaceWith(e("<"+n+" "+t.node.attributes(i.get(0))+">").html(i.html()))}function r(r){"N"==r&&(r=t.html.defaultTag()),t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();var a=t.selection.blocks();t.selection.save(),t.$el.find("pre").attr("skip",!0);for(var l=0;l<a.length;l++)if(a[l].tagName!=r&&!t.node.isList(a[l])){var c=e(a[l]);"LI"==a[l].tagName?i(c,r):"LI"==a[l].parentNode.tagName&&a[l]?n(c,r):["TD","TH"].indexOf(a[l].parentNode.tagName)>=0?s(c,r):o(c,r)}t.$el.find('pre:not([skip="true"]) + pre:not([skip="true"])').each(function(){e(this).prev().append("<br>"+e(this).html()),e(this).remove()}),t.$el.find("pre").removeAttr("skip"),t.html.unwrap(),t.selection.restore()}function a(e,i){var n=t.selection.blocks();if(n.length){var s=n[0],o="N",r=t.html.defaultTag();s.tagName.toLowerCase()!=r&&s!=t.el&&(o=s.tagName),i.find('.fr-command[data-param1="'+o+'"]').addClass("fr-active").attr("aria-selected",!0)}else i.find('.fr-command[data-param1="N"]').addClass("fr-active").attr("aria-selected",!0)}function l(e){if(t.opts.paragraphFormatSelection){var i=t.selection.blocks();if(i.length){var n=i[0],s="N",o=t.html.defaultTag();n.tagName.toLowerCase()!=o&&n!=t.el&&(s=n.tagName),["LI","TD","TH"].indexOf(s)>=0&&(s="N"),e.find("> span").text(t.opts.paragraphFormat[s])}else e.find("> span").text(t.opts.paragraphFormat.N)}}return{apply:r,refreshOnShow:a,refresh:l}},e.FE.RegisterCommand("paragraphFormat",{type:"dropdown",displaySelection:function(e){return e.opts.paragraphFormatSelection},defaultSelection:"Normal",displaySelectionWidth:100,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.paragraphFormat;for(var i in t)if(t.hasOwnProperty(i)){var n=this.shortcuts.get("paragraphFormat."+i);n=n?'<span class="fr-shortcut">'+n+"</span>":"",e+='<li role="presentation"><'+("N"==i?this.html.defaultTag()||"DIV":i)+' style="padding: 0 !important; margin: 0 !important;" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="paragraphFormat" data-param1="'+i+'" title="'+this.language.translate(t[i])+'">'+this.language.translate(t[i])+"</a></"+("N"==i?this.html.defaultTag()||"DIV":i)+"></li>"}return e+="</ul>"},title:"Paragraph Format",callback:function(e,t){this.paragraphFormat.apply(t)},refresh:function(e){this.paragraphFormat.refresh(e)},refreshOnShow:function(e,t){this.paragraphFormat.refreshOnShow(e,t)},plugin:"paragraphFormat"}),e.FE.DefineIcon("paragraphFormat",{NAME:"paragraph"})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{paragraphStyles:{"fr-text-gray":"Gray","fr-text-bordered":"Bordered","fr-text-spaced":"Spaced","fr-text-uppercase":"Uppercase"},paragraphMultipleStyles:!0}),e.FE.PLUGINS.paragraphStyle=function(t){function i(i,n,s){void 0===n&&(n=t.opts.paragraphStyles),void 0===s&&(s=t.opts.paragraphMultipleStyles);var o="";s||(o=Object.keys(n),o.splice(o.indexOf(i),1),o=o.join(" ")),t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();var r=t.selection.blocks();t.selection.save();for(var a=e(r[0]).hasClass(i),l=0;l<r.length;l++)e(r[l]).removeClass(o).toggleClass(i,!a),e(r[l]).hasClass("fr-temp-div")&&e(r[l]).removeClass("fr-temp-div"),""===e(r[l]).attr("class")&&e(r[l]).removeAttr("class");t.html.unwrap(),t.selection.restore()}function n(i,n){var s=t.selection.blocks();if(s.length){var o=e(s[0]);n.find(".fr-command").each(function(){var t=e(this).data("param1"),i=o.hasClass(t);e(this).toggleClass("fr-active",i).attr("aria-selected",i)})}}function s(){}return{_init:s,apply:i,refreshOnShow:n}},e.FE.RegisterCommand("paragraphStyle",{type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.paragraphStyles;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><a class="fr-command '+i+'" tabIndex="-1" role="option" data-cmd="paragraphStyle" data-param1="'+i+'" title="'+this.language.translate(t[i])+'">'+this.language.translate(t[i])+"</a></li>");return e+="</ul>"},title:"Paragraph Style",callback:function(e,t){this.paragraphStyle.apply(t)},refreshOnShow:function(e,t){this.paragraphStyle.refreshOnShow(e,t)},plugin:"paragraphStyle"}),e.FE.DefineIcon("paragraphStyle",{NAME:"magic"})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{"video.insert":"[_BUTTONS_][_BY_URL_LAYER_][_EMBED_LAYER_]","video.edit":"[_BUTTONS_]","video.size":"[_BUTTONS_][_SIZE_LAYER_]"}),e.extend(e.FE.DEFAULTS,{videoInsertButtons:["videoBack","|","videoByURL","videoEmbed"],videoEditButtons:["videoDisplay","videoAlign","videoSize","videoRemove"],videoResize:!0,videoSizeButtons:["videoBack","|"],videoSplitHTML:!1,videoTextNear:!0,videoDefaultAlign:"center",videoDefaultDisplay:"block",videoMove:!0}),e.FE.VIDEO_PROVIDERS=[{test_regex:/^.*((youtu.be)|(youtube.com))\/((v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))?\??v?=?([^#\&\?]*).*/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/)?([0-9a-zA-Z_\-]+)(.+)?/g,url_text:"//www.youtube.com/embed/$1",html:'<iframe width="640" height="360" src="{url}?wmode=opaque" frameborder="0" allowfullscreen></iframe>'},{test_regex:/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:vimeo\.com)\/(?:channels\/[A-z]+\/|groups\/[A-z]+\/videos\/)?(.+)/g,url_text:"//player.vimeo.com/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>'},{test_regex:/^.+(dailymotion.com|dai.ly)\/(video|hub)?\/?([^_]+)[^#]*(#video=([^_&]+))?/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com|dai\.ly)\/(?:video|hub)?\/?(.+)/g,url_text:"//www.dailymotion.com/embed/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>'},{test_regex:/^.+(screen.yahoo.com)\/[^_&]+/,url_regex:"",url_text:"",html:'<iframe width="640" height="360" src="{url}?format=embed" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>'},{test_regex:/^.+(rutube.ru)\/[^_&]+/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:rutube\.ru)\/(?:video)?\/?(.+)/g,url_text:"//rutube.ru/play/embed/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>'}],e.FE.VIDEO_EMBED_REGEX=/^\W*((<iframe.*><\/iframe>)|(<embed.*>))\W*$/i,e.FE.PLUGINS.video=function(t){function i(){var e=t.popups.get("video.insert");e.find(".fr-video-by-url-layer input").val("").trigger("change"),e.find(".fr-video-embed-layer textarea").val("").trigger("change")}function n(){var e=t.$tb.find('.fr-command[data-cmd="insertVideo"]'),i=t.popups.get("video.insert");if(i||(i=o()),!i.hasClass("fr-active")){t.popups.refresh("video.insert"),t.popups.setContainer("video.insert",t.$tb);var n=e.offset().left+e.outerWidth()/2,s=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("video.insert",n,s,e.outerHeight())}}function s(){var i=t.popups.get("video.edit");if(i||(i=T()),i){t.popups.setContainer("video.edit",e(t.opts.scrollableContainer)),t.popups.refresh("video.edit");var n=K.find("iframe, embed, video"),s=n.offset().left+n.outerWidth()/2,o=n.offset().top+n.outerHeight();t.popups.show("video.edit",s,o,n.outerHeight())}}function o(e){if(e)return t.popups.onRefresh("video.insert",i),!0;var n="";t.opts.videoInsertButtons.length>1&&(n='<div class="fr-buttons">'+t.button.buildList(t.opts.videoInsertButtons)+"</div>");var s="";t.opts.videoInsertButtons.indexOf("videoByURL")>=0&&(s='<div class="fr-video-by-url-layer fr-layer fr-active" id="fr-video-by-url-layer-'+t.id+'"><div class="fr-input-line"><input id="fr-video-by-url-layer-text-'+t.id+'" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertByURL" tabIndex="2" role="button">'+t.language.translate("Insert")+"</button></div></div>");var o="";t.opts.videoInsertButtons.indexOf("videoEmbed")>=0&&(o='<div class="fr-video-embed-layer fr-layer" id="fr-video-embed-layer-'+t.id+'"><div class="fr-input-line"><textarea id="fr-video-embed-layer-text'+t.id+'" type="text" placeholder="'+t.language.translate("Embedded Code")+'" tabIndex="1" aria-required="true" rows="5"></textarea></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertEmbed" tabIndex="2" role="button">'+t.language.translate("Insert")+"</button></div></div>");var r={buttons:n,by_url_layer:s,embed_layer:o};return t.popups.create("video.insert",r)}function r(e){var i,n,s=t.popups.get("video.insert");if(!K&&!t.opts.toolbarInline){var o=t.$tb.find('.fr-command[data-cmd="insertVideo"]');i=o.offset().left+o.outerWidth()/2,n=o.offset().top+(t.opts.toolbarBottom?10:o.outerHeight()-10)}t.opts.toolbarInline&&(n=s.offset().top-t.helpers.getPX(s.css("margin-top")),s.hasClass("fr-above")&&(n+=s.outerHeight())),s.find(".fr-layer").removeClass("fr-active"),s.find(".fr-"+e+"-layer").addClass("fr-active"),t.popups.show("video.insert",i,n,0),t.accessibility.focusPopup(s)}function a(e){t.popups.get("video.insert").find(".fr-video-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function l(e){t.popups.get("video.insert").find(".fr-video-embed-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function c(e){t.events.focus(!0),t.selection.restore(),t.html.insert('<span contenteditable="false" draggable="true" class="fr-jiv fr-video fr-dv'+t.opts.videoDefaultDisplay[0]+("center"!=t.opts.videoDefaultAlign?" fr-fv"+t.opts.videoDefaultAlign[0]:"")+'">'+e+"</span>",!1,t.opts.videoSplitHTML),t.popups.hide("video.insert");var i=t.$el.find(".fr-jiv");i.removeClass("fr-jiv"),i.toggleClass("fr-draggable",t.opts.videoMove),t.events.trigger("video.inserted",[i])}function d(i){if(void 0===i){i=t.popups.get("video.insert").find('.fr-video-by-url-layer input[type="text"]').val()||""}var n=null;if(t.helpers.isURL(i))for(var s=0;s<e.FE.VIDEO_PROVIDERS.length;s++){var o=e.FE.VIDEO_PROVIDERS[s];if(o.test_regex.test(i)){n=i.replace(o.url_regex,o.url_text),n=o.html.replace(/\{url\}/,n);break}}n?c(n):t.events.trigger("video.linkError",[i])}function u(i){if(void 0===i){i=t.popups.get("video.insert").find(".fr-video-embed-layer textarea").val()||""}0!==i.length&&e.FE.VIDEO_EMBED_REGEX.test(i)?c(i):t.events.trigger("video.codeError",[i])}function h(i){if(!t.core.sameInstance(j))return!0;i.preventDefault(),i.stopPropagation();var n=i.pageX||(i.originalEvent.touches?i.originalEvent.touches[0].pageX:null),s=i.pageY||(i.originalEvent.touches?i.originalEvent.touches[0].pageY:null);return!(!n||!s)&&(t.undo.canDo()||t.undo.saveStep(),z=e(this),z.data("start-x",n),z.data("start-y",s),U.show(),t.popups.hideAll(),void C())}function p(e){if(!t.core.sameInstance(j))return!0;if(z){e.preventDefault();var i=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null),n=e.pageY||(e.originalEvent.touches?e.originalEvent.touches[0].pageY:null);if(!i||!n)return!1;var s=z.data("start-x"),o=z.data("start-y");z.data("start-x",i),z.data("start-y",n);var r=i-s,a=n-o,l=K.find("iframe, embed, video"),c=l.width(),d=l.height();(z.hasClass("fr-hnw")||z.hasClass("fr-hsw"))&&(r=0-r),(z.hasClass("fr-hnw")||z.hasClass("fr-hne"))&&(a=0-a),l.css("width",c+r),l.css("height",d+a),l.removeAttr("width"),l.removeAttr("height"),b()}}function f(e){return!t.core.sameInstance(j)||void(z&&K&&(e&&e.stopPropagation(),z=null,U.hide(),b(),s(),t.undo.saveStep()))}function m(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function g(e,t,i,n){return e.pageX=t,e.pageY=t,h.call(this,e),e.pageX=e.pageX+i*Math.floor(Math.pow(1.1,n)),e.pageY=e.pageY+i*Math.floor(Math.pow(1.1,n)),p.call(this,e),f.call(this,e),n++}function v(){var i;if(t.shared.$video_resizer?(j=t.shared.$video_resizer,U=t.shared.$vid_overlay,t.events.on("destroy",function(){j.removeClass("fr-active").appendTo(e("body"))},!0)):(t.shared.$video_resizer=e('<div class="fr-video-resizer"></div>'),j=t.shared.$video_resizer,t.events.$on(j,"mousedown",function(e){e.stopPropagation()},!0),t.opts.videoResize&&(j.append(m("nw")+m("ne")+m("sw")+m("se")),t.shared.$vid_overlay=e('<div class="fr-video-overlay"></div>'),U=t.shared.$vid_overlay,i=j.get(0).ownerDocument,e(i).find("body").append(U))),t.events.on("shared.destroy",function(){j.html("").removeData().remove(),j=null,t.opts.videoResize&&(U.remove(),U=null)},!0),t.helpers.isMobile()||t.events.$on(e(t.o_win),"resize.video",function(){w(!0)}),t.opts.videoResize){i=j.get(0).ownerDocument,t.events.$on(j,t._mousedown,".fr-handler",h),t.events.$on(e(i),t._mousemove,p),t.events.$on(e(i.defaultView||i.parentWindow),t._mouseup,f),t.events.$on(U,"mouseleave",f);var n=1,s=null,o=0;t.events.on("keydown",function(i){if(K){var r=-1!=navigator.userAgent.indexOf("Mac OS X")?i.metaKey:i.ctrlKey,a=i.which;(a!==s||i.timeStamp-o>200)&&(n=1),(a==e.FE.KEYCODE.EQUALS||t.browser.mozilla&&a==e.FE.KEYCODE.FF_EQUALS)&&r&&!i.altKey?n=g.call(this,i,1,1):(a==e.FE.KEYCODE.HYPHEN||t.browser.mozilla&&a==e.FE.KEYCODE.FF_HYPHEN)&&r&&!i.altKey&&(n=g.call(this,i,2,-1)),s=a,o=i.timeStamp}}),t.events.on("keyup",function(){n=1})}}function b(){j||v(),(t.$wp||e(t.opts.scrollableContainer)).append(j),j.data("instance",t);var i=K.find("iframe, embed, video");j.css("top",(t.opts.iframe?i.offset().top-1:i.offset().top-t.$wp.offset().top-1)+t.$wp.scrollTop()).css("left",(t.opts.iframe?i.offset().left-1:i.offset().left-t.$wp.offset().left-1)+t.$wp.scrollLeft()).css("width",i.outerWidth()).css("height",i.height()).addClass("fr-active")}function y(i){if(i&&"touchend"==i.type&&W)return!0;if(i.preventDefault(),i.stopPropagation(),t.edit.isDisabled())return!1;for(var n=0;n<e.FE.INSTANCES.length;n++)e.FE.INSTANCES[n]!=t&&e.FE.INSTANCES[n].events.trigger("video.hideResizer");t.toolbar.disable(),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur()),K=e(this),e(this).addClass("fr-active"),t.opts.iframe&&t.size.syncIframe(),b(),s(),t.selection.clear(),t.button.bulkRefresh(),t.events.trigger("image.hideResizer")}function w(e){K&&(E()||!0===e)&&(j.removeClass("fr-active"),t.toolbar.enable(),K.removeClass("fr-active"),K=null,C())}function x(){t.shared.vid_exit_flag=!0}function C(){t.shared.vid_exit_flag=!1}function E(){return t.shared.vid_exit_flag}function k(){t.events.on("mousedown window.mousedown",x),t.events.on("window.touchmove",C),t.events.on("mouseup window.mouseup",w),t.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&w()}),t.events.on("blur video.hideResizer commands.undo commands.redo element.dropped",function(){w(!0)})}function T(){var e="";if(t.opts.videoEditButtons.length>0){e+='<div class="fr-buttons">',e+=t.button.buildList(t.opts.videoEditButtons),e+="</div>";var i={buttons:e},n=t.popups.create("video.edit",i);return t.events.$on(t.$wp,"scroll.video-edit",function(){K&&t.popups.isVisible("video.edit")&&s()}),n}return!1}function _(){if(K){var e=t.popups.get("video.size"),i=K.find("iframe, embed, video");e.find('input[name="width"]').val(i.get(0).style.width||i.attr("width")).trigger("change"),e.find('input[name="height"]').val(i.get(0).style.height||i.attr("height")).trigger("change")}}function S(){var i=t.popups.get("video.size");i||(i=D()),t.popups.refresh("video.size"),t.popups.setContainer("video.size",e(t.opts.scrollableContainer));var n=K.find("iframe, embed, video"),s=n.offset().left+n.width()/2,o=n.offset().top+n.height();t.popups.show("video.size",s,o,n.height())}function D(e){if(e)return t.popups.onRefresh("video.size",_),!0;var i="";i='<div class="fr-buttons">'+t.button.buildList(t.opts.videoSizeButtons)+"</div>";var n="";n='<div class="fr-video-size-layer fr-layer fr-active" id="fr-video-size-layer-'+t.id+'"><div class="fr-video-group"><div class="fr-input-line"><input id="fr-video-size-layer-width-'+t.id+'" type="text" name="width" placeholder="'+t.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-video-size-layer-height-'+t.id+'" type="text" name="height" placeholder="'+t.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoSetSize" tabIndex="2" role="button">'+t.language.translate("Update")+"</button></div></div>";var s={buttons:i,size_layer:n},o=t.popups.create("video.size",s);return t.events.$on(t.$wp,"scroll",function(){K&&t.popups.isVisible("video.size")&&S()}),o}function $(e){K.removeClass("fr-fvr fr-fvl"),"left"==e?K.addClass("fr-fvl"):"right"==e&&K.addClass("fr-fvr"),b(),s()}function M(e){return!!K&&void(K.hasClass("fr-fvl")?e.find("> *:first").replaceWith(t.icon.create("align-left")):K.hasClass("fr-fvr")?e.find("> *:first").replaceWith(t.icon.create("align-right")):e.find("> *:first").replaceWith(t.icon.create("align-justify")))}function A(e,t){var i="justify";K.hasClass("fr-fvl")?i="left":K.hasClass("fr-fvr")&&(i="right"),t.find('.fr-command[data-param1="'+i+'"]').addClass("fr-active").attr("aria-selected",!0)}function O(e){K.removeClass("fr-dvi fr-dvb"),"inline"==e?K.addClass("fr-dvi"):"block"==e&&K.addClass("fr-dvb"),b(),s()}function F(e,t){var i="block";K.hasClass("fr-dvi")&&(i="inline"),t.find('.fr-command[data-param1="'+i+'"]').addClass("fr-active").attr("aria-selected",!0)}function N(){if(K&&!1!==t.events.trigger("video.beforeRemove",[K])){var e=K;t.popups.hideAll(),w(!0),t.selection.setBefore(e.get(0))||t.selection.setAfter(e.get(0)),e.remove(),t.selection.restore(),t.html.fillEmptyBlocks(),t.events.trigger("video.removed",[e])}}function L(e){if(!e.hasClass("fr-dvi")&&!e.hasClass("fr-dvb")){var i=e.css("float");e.css("float","none"),"block"==e.css("display")?(e.css("float",i),0===parseInt(e.css("margin-left"),10)&&(e.attr("style")||"").indexOf("margin-right: auto")>=0?e.addClass("fr-fvl"):0===parseInt(e.css("margin-right"),10)&&(e.attr("style")||"").indexOf("margin-left: auto")>=0&&e.addClass("fr-fvr"),e.addClass("fr-dvb")):(e.css("float",i),"left"==e.css("float")?e.addClass("fr-fvl"):"right"==e.css("float")&&e.addClass("fr-fvr"),e.addClass("fr-dvi")),e.css("margin",""),e.css("float",""),e.css("display",""),e.css("z-index",""),e.css("position",""),e.css("overflow",""),e.css("vertical-align","")}t.opts.videoTextNear||e.removeClass("fr-dvi").addClass("fr-dvb")}function R(){t.$el.find("video").filter(function(){return 0===e(this).parents("span.fr-video").length}).wrap('<span class="fr-video" contenteditable="false"></span>'),t.$el.find("embed, iframe").filter(function(){if(t.browser.safari&&this.getAttribute("src")&&this.setAttribute("src",this.src),e(this).parents("span.fr-video").length>0)return!1;for(var i=e(this).attr("src"),n=0;n<e.FE.VIDEO_PROVIDERS.length;n++){if(e.FE.VIDEO_PROVIDERS[n].test_regex.test(i))return!0}return!1}).map(function(){return 0===e(this).parents("object").length?this:e(this).parents("object").get(0)}).wrap('<span class="fr-video" contenteditable="false"></span>');for(var i=t.$el.find("span.fr-video"),n=0;n<i.length;n++)L(e(i[n]));i.toggleClass("fr-draggable",t.opts.videoMove)}function I(){k(),t.helpers.isMobile()&&(t.events.$on(t.$el,"touchstart","span.fr-video",function(){W=!1}),t.events.$on(t.$el,"touchmove",function(){W=!0})),t.events.on("html.set",R),R(),t.events.$on(t.$el,"mousedown","span.fr-video",function(e){e.stopPropagation()}),t.events.$on(t.$el,"click touchend","span.fr-video",y),t.events.on("keydown",function(i){var n=i.which;return!K||n!=e.FE.KEYCODE.BACKSPACE&&n!=e.FE.KEYCODE.DELETE?K&&n==e.FE.KEYCODE.ESC?(w(!0),i.preventDefault(),
!1):K&&n!=e.FE.KEYCODE.F10&&!t.keys.isBrowserAction(i)?(i.preventDefault(),!1):void 0:(i.preventDefault(),N(),!1)},!0),t.events.on("toolbar.esc",function(){if(K)return t.events.disableBlur(),t.events.focus(),!1},!0),t.events.on("keydown",function(){t.$el.find("span.fr-video:empty").remove()}),o(!0),D(!0)}function P(){K?(t.events.disableBlur(),K.trigger("click")):(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("video.insert"),t.toolbar.showInline())}function B(e,i){if(K){var n=t.popups.get("video.size"),s=K.find("iframe, embed, video");s.css("width",e||n.find('input[name="width"]').val()),s.css("height",i||n.find('input[name="height"]').val()),s.get(0).style.width&&s.removeAttr("width"),s.get(0).style.height&&s.removeAttr("height"),n.find("input:focus").blur(),setTimeout(function(){K.trigger("click")},t.helpers.isAndroid()?50:0)}}function H(){return K}var U,z,j,K,W;return t.shared.vid_exit_flag=!1,{_init:I,showInsertPopup:n,showLayer:r,refreshByURLButton:a,refreshEmbedButton:l,insertByURL:d,insertEmbed:u,insert:c,align:$,refreshAlign:M,refreshAlignOnShow:A,display:O,refreshDisplayOnShow:F,remove:N,showSizePopup:S,back:P,setSize:B,get:H}},e.FE.RegisterCommand("insertVideo",{title:"Insert Video",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("video.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("video.insert")):this.video.showInsertPopup()},plugin:"video"}),e.FE.DefineIcon("insertVideo",{NAME:"video-camera"}),e.FE.DefineIcon("videoByURL",{NAME:"link"}),e.FE.RegisterCommand("videoByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-by-url")},refresh:function(e){this.video.refreshByURLButton(e)}}),e.FE.DefineIcon("videoEmbed",{NAME:"code"}),e.FE.RegisterCommand("videoEmbed",{title:"Embedded Code",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-embed")},refresh:function(e){this.video.refreshEmbedButton(e)}}),e.FE.RegisterCommand("videoInsertByURL",{undo:!0,focus:!0,callback:function(){this.video.insertByURL()}}),e.FE.RegisterCommand("videoInsertEmbed",{undo:!0,focus:!0,callback:function(){this.video.insertEmbed()}}),e.FE.DefineIcon("videoDisplay",{NAME:"star"}),e.FE.RegisterCommand("videoDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.video.display(t)},refresh:function(e){this.opts.videoTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.video.refreshDisplayOnShow(e,t)}}),e.FE.DefineIcon("videoAlign",{NAME:"align-center"}),e.FE.RegisterCommand("videoAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",justify:"None",right:"Align Right"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',i=e.FE.COMMANDS.videoAlign.options;for(var n in i)i.hasOwnProperty(n)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="videoAlign" data-param1="'+n+'" title="'+this.language.translate(i[n])+'">'+this.icon.create("align-"+n)+'<span class="fr-sr-only">'+this.language.translate(i[n])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.video.align(t)},refresh:function(e){this.video.refreshAlign(e)},refreshOnShow:function(e,t){this.video.refreshAlignOnShow(e,t)}}),e.FE.DefineIcon("videoRemove",{NAME:"trash"}),e.FE.RegisterCommand("videoRemove",{title:"Remove",callback:function(){this.video.remove()}}),e.FE.DefineIcon("videoSize",{NAME:"arrows-alt"}),e.FE.RegisterCommand("videoSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.video.showSizePopup()}}),e.FE.DefineIcon("videoBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("videoBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.video.back()},refresh:function(e){this.video.get()||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("videoSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.video.setSize()}})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{"table.insert":"[_BUTTONS_][_ROWS_COLUMNS_]","table.edit":"[_BUTTONS_]","table.colors":"[_BUTTONS_][_COLORS_]"}),e.extend(e.FE.DEFAULTS,{tableInsertMaxSize:10,tableEditButtons:["tableHeader","tableRemove","|","tableRows","tableColumns","tableStyle","-","tableCells","tableCellBackground","tableCellVerticalAlign","tableCellHorizontalAlign","tableCellStyle"],tableInsertButtons:["tableBack","|"],tableResizer:!0,tableResizerOffset:5,tableResizingLimit:30,tableColorsButtons:["tableBack","|"],tableColors:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],tableColorsStep:7,tableCellStyles:{"fr-highlighted":"Highlighted","fr-thick":"Thick"},tableStyles:{"fr-dashed-borders":"Dashed Borders","fr-alternate-rows":"Alternate Rows"},tableCellMultipleStyles:!0,tableMultipleStyles:!0,tableInsertHelper:!0,tableInsertHelperOffset:15}),e.FE.PLUGINS.table=function(t){function i(){var e=t.$tb.find('.fr-command[data-cmd="insertTable"]'),i=t.popups.get("table.insert");if(i||(i=r()),!i.hasClass("fr-active")){t.popups.refresh("table.insert"),t.popups.setContainer("table.insert",t.$tb);var n=e.offset().left+e.outerWidth()/2,s=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("table.insert",n,s,e.outerHeight())}}function n(){var i=N();if(i){var n=t.popups.get("table.edit");n||(n=d()),t.popups.setContainer("table.edit",e(t.opts.scrollableContainer));var s=U(i),o=(s.left+s.right)/2,r=s.bottom;t.popups.show("table.edit",o,r,s.bottom-s.top),t.edit.isDisabled()&&(t.toolbar.disable(),t.$el.removeClass("fr-no-selection"),t.edit.on(),t.button.bulkRefresh()),t.selection.setAtEnd(t.$el.find(".fr-selected-cell:last").get(0)),t.$el.focus(),t.selection.restore()}}function s(){var i=N();if(i){var n=t.popups.get("table.colors");n||(n=u()),t.popups.setContainer("table.colors",e(t.opts.scrollableContainer));var s=U(i),o=(s.left+s.right)/2,r=s.bottom;f(),t.popups.show("table.colors",o,r,s.bottom-s.top)}}function o(){0===ve().length&&t.toolbar.enable()}function r(i){if(i)return t.popups.onHide("table.insert",function(){t.popups.get("table.insert").find('.fr-table-size .fr-select-table-size > span[data-row="1"][data-col="1"]').trigger("mouseenter")}),!0;var n="";t.opts.tableInsertButtons.length>0&&(n='<div class="fr-buttons">'+t.button.buildList(t.opts.tableInsertButtons)+"</div>");var s={buttons:n,rows_columns:l()},o=t.popups.create("table.insert",s);return t.events.$on(o,"mouseenter",".fr-table-size .fr-select-table-size .fr-table-cell",function(t){a(e(t.currentTarget))},!0),c(o),o}function a(e){var i=e.data("row"),n=e.data("col"),s=e.parent();s.siblings(".fr-table-size-info").html(i+" &times; "+n),s.find("> span").removeClass("hover fr-active-item");for(var o=1;o<=t.opts.tableInsertMaxSize;o++)for(var r=0;r<=t.opts.tableInsertMaxSize;r++){var a=s.find('> span[data-row="'+o+'"][data-col="'+r+'"]');o<=i&&r<=n?a.addClass("hover"):o<=i+1||o<=2&&!t.helpers.isMobile()?a.css("display","inline-block"):o>2&&!t.helpers.isMobile()&&a.css("display","none")}e.addClass("fr-active-item")}function l(){for(var e='<div class="fr-table-size"><div class="fr-table-size-info">1 &times; 1</div><div class="fr-select-table-size">',i=1;i<=t.opts.tableInsertMaxSize;i++){for(var n=1;n<=t.opts.tableInsertMaxSize;n++){var s="inline-block";i>2&&!t.helpers.isMobile()&&(s="none");var o="fr-table-cell ";1==i&&1==n&&(o+=" hover"),e+='<span class="fr-command '+o+'" tabIndex="-1" data-cmd="tableInsert" data-row="'+i+'" data-col="'+n+'" data-param1="'+i+'" data-param2="'+n+'" style="display: '+s+';" role="button"><span></span><span class="fr-sr-only">'+i+" &times; "+n+"&nbsp;&nbsp;&nbsp;</span></span>"}e+='<div class="new-line"></div>'}return e+="</div></div>"}function c(i){t.events.$on(i,"focus","[tabIndex]",function(t){a(e(t.currentTarget))}),t.events.on("popup.tab",function(i){var n=e(i.currentTarget);if(!t.popups.isVisible("table.insert")||!n.is("span, a"))return!0;var s,o=i.which;if(e.FE.KEYCODE.ARROW_UP==o||e.FE.KEYCODE.ARROW_DOWN==o||e.FE.KEYCODE.ARROW_LEFT==o||e.FE.KEYCODE.ARROW_RIGHT==o){if(n.is("span.fr-table-cell")){var r=n.parent().find("span.fr-table-cell"),l=r.index(n),c=t.opts.tableInsertMaxSize,d=l%c,u=Math.floor(l/c);e.FE.KEYCODE.ARROW_UP==o?u=Math.max(0,u-1):e.FE.KEYCODE.ARROW_DOWN==o?u=Math.min(t.opts.tableInsertMaxSize-1,u+1):e.FE.KEYCODE.ARROW_LEFT==o?d=Math.max(0,d-1):e.FE.KEYCODE.ARROW_RIGHT==o&&(d=Math.min(t.opts.tableInsertMaxSize-1,d+1));var h=u*c+d,p=e(r.get(h));a(p),t.events.disableBlur(),p.focus(),s=!1}}else e.FE.KEYCODE.ENTER==o&&(t.button.exec(n),s=!1);return!1===s&&(i.preventDefault(),i.stopPropagation()),s},!0)}function d(e){if(e)return t.popups.onHide("table.edit",o),!0;var i="";t.opts.tableEditButtons.length>0&&(i='<div class="fr-buttons">'+t.button.buildList(t.opts.tableEditButtons)+"</div>");var s={buttons:i},r=t.popups.create("table.edit",s);return t.events.$on(t.$wp,"scroll.table-edit",function(){t.popups.isVisible("table.edit")&&n()}),r}function u(){var e="";t.opts.tableColorsButtons.length>0&&(e='<div class="fr-buttons fr-table-colors-buttons">'+t.button.buildList(t.opts.tableColorsButtons)+"</div>");var i={buttons:e,colors:h()},n=t.popups.create("table.colors",i);return t.events.$on(t.$wp,"scroll.table-colors",function(){t.popups.isVisible("table.colors")&&s()}),p(n),n}function h(){for(var e='<div class="fr-table-colors">',i=0;i<t.opts.tableColors.length;i++)0!==i&&i%t.opts.tableColorsStep==0&&(e+="<br>"),e+="REMOVE"!=t.opts.tableColors[i]?'<span class="fr-command" style="background: '+t.opts.tableColors[i]+';" tabIndex="-1" role="button" data-cmd="tableCellBackgroundColor" data-param1="'+t.opts.tableColors[i]+'"><span class="fr-sr-only">'+t.language.translate("Color")+" "+t.opts.tableColors[i]+"&nbsp;&nbsp;&nbsp;</span></span>":'<span class="fr-command" data-cmd="tableCellBackgroundColor" tabIndex="-1" role="button" data-param1="REMOVE" title="'+t.language.translate("Clear Formatting")+'"><i class="fa fa-eraser"></i><span class="fr-sr-only">'+t.language.translate("Clear Formatting")+"</span></span>";return e+="</div>"}function p(i){t.events.on("popup.tab",function(n){var s=e(n.currentTarget);if(!t.popups.isVisible("table.colors")||!s.is("span"))return!0;var o=n.which,r=!0;if(e.FE.KEYCODE.TAB==o){var a=i.find(".fr-buttons");r=!t.accessibility.focusToolbar(a,!!n.shiftKey)}else if(e.FE.KEYCODE.ARROW_UP==o||e.FE.KEYCODE.ARROW_DOWN==o||e.FE.KEYCODE.ARROW_LEFT==o||e.FE.KEYCODE.ARROW_RIGHT==o){var l=s.parent().find("span.fr-command"),c=l.index(s),d=t.opts.colorsStep,u=Math.floor(l.length/d),h=c%d,p=Math.floor(c/d),f=p*d+h,m=u*d;e.FE.KEYCODE.ARROW_UP==o?f=((f-d)%m+m)%m:e.FE.KEYCODE.ARROW_DOWN==o?f=(f+d)%m:e.FE.KEYCODE.ARROW_LEFT==o?f=((f-1)%m+m)%m:e.FE.KEYCODE.ARROW_RIGHT==o&&(f=(f+1)%m);var g=e(l.get(f));t.events.disableBlur(),g.focus(),r=!1}else e.FE.KEYCODE.ENTER==o&&(t.button.exec(s),r=!1);return!1===r&&(n.preventDefault(),n.stopPropagation()),r},!0)}function f(){var e=t.popups.get("table.colors"),i=t.$el.find(".fr-selected-cell:first");e.find(".fr-selected-color").removeClass("fr-selected-color fr-active-item"),e.find('span[data-param1="'+t.helpers.RGBToHex(i.css("background-color"))+'"]').addClass("fr-selected-color fr-active-item")}function m(i,n){var s,o,r='<table style="width: 100%;"><tbody>',a=100/n;for(s=0;s<i;s++){for(r+="<tr>",o=0;o<n;o++)r+='<td style="width: '+a.toFixed(4)+'%;">',0===s&&0===o&&(r+=e.FE.MARKERS),r+="<br></td>";r+="</tr>"}r+="</tbody></table>",t.html.insert(r),t.selection.restore()}function g(){if(ve().length>0){var e=be();t.selection.setBefore(e.get(0))||t.selection.setAfter(e.get(0)),t.selection.restore(),t.popups.hide("table.edit"),e.remove(),t.toolbar.enable()}}function v(){var t=be();if(t.length>0&&0===t.find("th").length){var i,s="<thead><tr>",o=0;for(t.find("tr:first > td").each(function(){var t=e(this);o+=parseInt(t.attr("colspan"),10)||1}),i=0;i<o;i++)s+="<th><br></th>";s+="</tr></thead>",t.prepend(s),n()}}function b(){var e=be(),i=e.find("thead");if(i.length>0)if(0===e.find("tbody tr").length)g();else if(i.remove(),ve().length>0)n();else{t.popups.hide("table.edit");var s=e.find("tbody tr:first td:first").get(0);s&&(t.selection.setAtEnd(s),t.selection.restore())}}function y(i){var s=be();if(s.length>0){if(t.$el.find("th.fr-selected-cell").length>0&&"above"==i)return;var o,r,a=N(),l=B(a);r="above"==i?l.min_i:l.max_i;var c="<tr>";for(o=0;o<a[r].length;o++)if("below"==i&&r<a.length-1&&a[r][o]==a[r+1][o]||"above"==i&&r>0&&a[r][o]==a[r-1][o]){if(0===o||o>0&&a[r][o]!=a[r][o-1]){var d=e(a[r][o]);d.attr("rowspan",parseInt(d.attr("rowspan"),10)+1)}}else c+="<td><br></td>";c+="</tr>";var u=e(s.find("tr").not(s.find("table tr")).get(r));"below"==i?u.after(c):"above"==i&&(u.before(c),t.popups.isVisible("table.edit")&&n())}}function w(){var i=be();if(i.length>0){var n,s,o,r=N(),a=B(r);if(0===a.min_i&&a.max_i==r.length-1)g();else{for(n=a.max_i;n>=a.min_i;n--){for(o=e(i.find("tr").not(i.find("table tr")).get(n)),s=0;s<r[n].length;s++)if(0===s||r[n][s]!=r[n][s-1]){var l=e(r[n][s]);if(parseInt(l.attr("rowspan"),10)>1){var c=parseInt(l.attr("rowspan"),10)-1;1==c?l.removeAttr("rowspan"):l.attr("rowspan",c)}if(n<r.length-1&&r[n][s]==r[n+1][s]&&(0===n||r[n][s]!=r[n-1][s])){for(var d=r[n][s],u=s;u>0&&r[n][u]==r[n][u-1];)u--;0===u?e(i.find("tr").not(i.find("table tr")).get(n+1)).prepend(d):e(r[n+1][u-1]).after(d)}}var h=o.parent();o.remove(),0===h.find("tr").length&&h.remove(),r=N(i)}_(0,r.length-1,0,r[0].length-1,i),a.min_i>0?t.selection.setAtEnd(r[a.min_i-1][0]):t.selection.setAtEnd(r[0][0]),t.selection.restore(),t.popups.hide("table.edit")}}}function x(i){var s=be();if(s.length>0){var o,r=N(),a=B(r);o="before"==i?a.min_j:a.max_j;var l,c=100/r[0].length,d=100/(r[0].length+1);s.find("th, td").each(function(){l=e(this),l.data("old-width",l.outerWidth()/s.outerWidth()*100)}),s.find("tr").not(s.find("table tr")).each(function(t){for(var n,s=e(this),a=0,l=0;a-1<o;){if(!(n=s.find("> th, > td").get(l))){n=null;break}n==r[t][a]?(a+=parseInt(e(n).attr("colspan"),10)||1,l++):(a+=parseInt(e(r[t][a]).attr("colspan"),10)||1,"after"==i&&(n=0===l?-1:s.find("> th, > td").get(l-1)))}var u=e(n);if("after"==i&&a-1>o||"before"==i&&o>0&&r[t][o]==r[t][o-1]){if(0===t||t>0&&r[t][o]!=r[t-1][o]){var h=parseInt(u.attr("colspan"),10)+1;u.attr("colspan",h),u.css("width",(u.data("old-width")*d/c+d).toFixed(4)+"%"),u.removeData("old-width")}}else{var p;p=s.find("th").length>0?'<th style="width: '+d.toFixed(4)+'%;"><br></th>':'<td style="width: '+d.toFixed(4)+'%;"><br></td>',-1==n?s.prepend(p):null==n?s.append(p):"before"==i?u.before(p):"after"==i&&u.after(p)}}),s.find("th, td").each(function(){l=e(this),l.data("old-width")&&(l.css("width",(l.data("old-width")*d/c).toFixed(4)+"%"),l.removeData("old-width"))}),t.popups.isVisible("table.edit")&&n()}}function C(){var i=be();if(i.length>0){var n,s,o,r=N(),a=B(r);if(0===a.min_j&&a.max_j==r[0].length-1)g();else{var l=100/r[0].length,c=100/(r[0].length-a.max_j+a.min_j-1);for(i.find("th, td").each(function(){o=e(this),o.hasClass("fr-selected-cell")||o.data("old-width",o.outerWidth()/i.outerWidth()*100)}),s=a.max_j;s>=a.min_j;s--)for(n=0;n<r.length;n++)if(0===n||r[n][s]!=r[n-1][s])if(o=e(r[n][s]),(parseInt(o.attr("colspan"),10)||1)>1){var d=parseInt(o.attr("colspan"),10)-1;1==d?o.removeAttr("colspan"):o.attr("colspan",d),o.css("width",((o.data("old-width")-ce(s,r))*c/l).toFixed(4)+"%"),o.removeData("old-width")}else{var u=e(o.parent().get(0));o.remove(),0===u.find("> th, > td").length&&(0===u.prev().length||0===u.next().length||u.prev().find("> th[rowspan], > td[rowspan]").length<u.prev().find("> th, > td").length)&&u.remove()}_(0,r.length-1,0,r[0].length-1,i),a.min_j>0?t.selection.setAtEnd(r[a.min_i][a.min_j-1]):t.selection.setAtEnd(r[a.min_i][0]),t.selection.restore(),t.popups.hide("table.edit"),i.find("th, td").each(function(){o=e(this),o.data("old-width")&&(o.css("width",(o.data("old-width")*c/l).toFixed(4)+"%"),o.removeData("old-width"))})}}}function E(e,t,i){var n,s,o,r,a,l=0,c=N(i);for(t=Math.min(t,c[0].length-1),s=e;s<=t;s++)if(!(s>e&&c[0][s]==c[0][s-1])&&(r=parseInt(c[0][s].getAttribute("colspan"),10)||1)>1&&c[0][s]==c[0][s+1])for(l=r-1,n=1;n<c.length;n++)if(c[n][s]!=c[n-1][s]){for(o=s;o<s+r;o++)if((a=parseInt(c[n][o].getAttribute("colspan"),10)||1)>1&&c[n][o]==c[n][o+1])l=Math.min(l,a-1),o+=l;else if(!(l=Math.max(0,l-1)))break;if(!l)break}l&&T(c,l,"colspan",0,c.length-1,e,t)}function k(e,t,i){var n,s,o,r,a,l=0,c=N(i);for(t=Math.min(t,c.length-1),n=e;n<=t;n++)if(!(n>e&&c[n][0]==c[n-1][0])&&(r=parseInt(c[n][0].getAttribute("rowspan"),10)||1)>1&&c[n][0]==c[n+1][0])for(l=r-1,s=1;s<c[0].length;s++)if(c[n][s]!=c[n][s-1]){for(o=n;o<n+r;o++)if((a=parseInt(c[o][s].getAttribute("rowspan"),10)||1)>1&&c[o][s]==c[o+1][s])l=Math.min(l,a-1),o+=l;else if(!(l=Math.max(0,l-1)))break;if(!l)break}l&&T(c,l,"rowspan",e,t,0,c[0].length-1)}function T(e,t,i,n,s,o,r){var a,l,c;for(a=n;a<=s;a++)for(l=o;l<=r;l++)a>n&&e[a][l]==e[a-1][l]||l>o&&e[a][l]==e[a][l-1]||(c=parseInt(e[a][l].getAttribute(i),10)||1)>1&&(c-t>1?e[a][l].setAttribute(i,c-t):e[a][l].removeAttribute(i))}function _(e,t,i,n,s){k(e,t,s),E(i,n,s)}function S(){if(ve().length>1&&(0===t.$el.find("th.fr-selected-cell").length||0===t.$el.find("td.fr-selected-cell").length)){var i,s,o=N(),r=B(o),a=t.$el.find(".fr-selected-cell"),l=e(a[0]),c=l.parent(),d=c.find(".fr-selected-cell"),u=l.closest("table"),h=l.html(),p=0;for(i=0;i<d.length;i++)p+=e(d[i]).outerWidth();for(l.css("width",(p/u.outerWidth()*100).toFixed(4)+"%"),r.min_j<r.max_j&&l.attr("colspan",r.max_j-r.min_j+1),r.min_i<r.max_i&&l.attr("rowspan",r.max_i-r.min_i+1),i=1;i<a.length;i++)s=e(a[i]),"<br>"!=s.html()&&""!==s.html()&&(h+="<br>"+s.html()),s.remove();l.html(h),t.selection.setAtEnd(l.get(0)),t.selection.restore(),t.toolbar.enable(),k(r.min_i,r.max_i,u);var f=u.find("tr:empty");for(i=f.length-1;i>=0;i--)e(f[i]).remove();E(r.min_j,r.max_j,u),n()}}function D(){if(1==ve().length){var i=t.$el.find(".fr-selected-cell"),n=i.parent(),s=i.closest("table"),o=parseInt(i.attr("rowspan"),10),r=N(),a=L(i.get(0),r),l=i.clone().html("<br>");if(o>1){var c=Math.ceil(o/2);c>1?i.attr("rowspan",c):i.removeAttr("rowspan"),o-c>1?l.attr("rowspan",o-c):l.removeAttr("rowspan");for(var d=a.row+c,u=0===a.col?a.col:a.col-1;u>=0&&(r[d][u]==r[d][u-1]||d>0&&r[d][u]==r[d-1][u]);)u--;-1==u?e(s.find("tr").not(s.find("table tr")).get(d)).prepend(l):e(r[d][u]).after(l)}else{var h,p=e("<tr>").append(l);for(h=0;h<r[0].length;h++)if(0===h||r[a.row][h]!=r[a.row][h-1]){var f=e(r[a.row][h]);f.is(i)||f.attr("rowspan",(parseInt(f.attr("rowspan"),10)||1)+1)}n.after(p)}I(),t.popups.hide("table.edit")}}function $(){if(1==ve().length){var i=t.$el.find(".fr-selected-cell"),n=parseInt(i.attr("colspan"),10)||1,s=i.parent().outerWidth(),o=i.outerWidth(),r=i.clone().html("<br>"),a=N(),l=L(i.get(0),a);if(n>1){var c=Math.ceil(n/2);o=de(l.col,l.col+c-1,a)/s*100;var d=de(l.col+c,l.col+n-1,a)/s*100;c>1?i.attr("colspan",c):i.removeAttr("colspan"),n-c>1?r.attr("colspan",n-c):r.removeAttr("colspan"),i.css("width",o.toFixed(4)+"%"),r.css("width",d.toFixed(4)+"%")}else{var u;for(u=0;u<a.length;u++)if(0===u||a[u][l.col]!=a[u-1][l.col]){var h=e(a[u][l.col]);if(!h.is(i)){var p=(parseInt(h.attr("colspan"),10)||1)+1;h.attr("colspan",p)}}o=o/s*100/2,i.css("width",o.toFixed(4)+"%"),r.css("width",o.toFixed(4)+"%")}i.after(r),I(),t.popups.hide("table.edit")}}function M(e){"REMOVE"!=e?t.$el.find(".fr-selected-cell").css("background-color",t.helpers.HEXtoRGB(e)):t.$el.find(".fr-selected-cell").css("background-color","")}function A(e){t.$el.find(".fr-selected-cell").css("vertical-align",e)}function O(e){t.$el.find(".fr-selected-cell").css("text-align",e)}function F(e,t,i,n){if(t.length>0){if(!i){var s=Object.keys(n);s.splice(s.indexOf(e),1),t.removeClass(s.join(" "))}t.toggleClass(e)}}function N(t){t=t||null;var i=[];if(null==t&&ve().length>0&&(t=be()),t)return t.find("tr").not(t.find("table tr")).each(function(t,n){var s=e(n),o=0;s.find("> th, > td").each(function(n,s){for(var r=e(s),a=parseInt(r.attr("colspan"),10)||1,l=parseInt(r.attr("rowspan"),10)||1,c=t;c<t+l;c++)for(var d=o;d<o+a;d++)i[c]||(i[c]=[]),i[c][d]?o++:i[c][d]=s;o+=a})}),i}function L(e,t){for(var i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++)if(t[i][n]==e)return{row:i,col:n}}function R(e,t,i){for(var n=e+1,s=t+1;n<i.length;){if(i[n][t]!=i[e][t]){n--;break}n++}for(n==i.length&&n--;s<i[e].length;){if(i[e][s]!=i[e][t]){s--;break}s++}return s==i[e].length&&s--,{row:n,col:s}}function I(){var i=t.$el.find(".fr-selected-cell");i.length>0&&i.each(function(){var t=e(this);t.removeClass("fr-selected-cell"),""===t.attr("class")&&t.removeAttr("class")}),t.el.querySelector(".fr-cell-fixed")&&(t.el.querySelector(".fr-cell-fixed").classList.remove("fr-cell-fixed"),t.el.querySelector(".fr-cell-handler").classList.remove("fr-cell-handler"))}function P(){setTimeout(function(){t.selection.clear(),t.$el.addClass("fr-no-selection"),t.$el.blur()},0)}function B(e){var i=t.$el.find(".fr-selected-cell");if(i.length>0){var n,s=e.length,o=0,r=e[0].length,a=0;for(n=0;n<i.length;n++){var l=L(i[n],e),c=R(l.row,l.col,e);s=Math.min(l.row,s),o=Math.max(c.row,o),r=Math.min(l.col,r),a=Math.max(c.col,a)}return{min_i:s,max_i:o,min_j:r,max_j:a}}return null}function H(t,i,n,s,o){var r,a,l,c,d=t,u=i,h=n,p=s;for(r=d;r<=u;r++)((parseInt(e(o[r][h]).attr("rowspan"),10)||1)>1||(parseInt(e(o[r][h]).attr("colspan"),10)||1)>1)&&(l=L(o[r][h],o),c=R(l.row,l.col,o),d=Math.min(l.row,d),u=Math.max(c.row,u),h=Math.min(l.col,h),p=Math.max(c.col,p)),((parseInt(e(o[r][p]).attr("rowspan"),10)||1)>1||(parseInt(e(o[r][p]).attr("colspan"),10)||1)>1)&&(l=L(o[r][p],o),c=R(l.row,l.col,o),d=Math.min(l.row,d),u=Math.max(c.row,u),h=Math.min(l.col,h),p=Math.max(c.col,p));for(a=h;a<=p;a++)((parseInt(e(o[d][a]).attr("rowspan"),10)||1)>1||(parseInt(e(o[d][a]).attr("colspan"),10)||1)>1)&&(l=L(o[d][a],o),c=R(l.row,l.col,o),d=Math.min(l.row,d),u=Math.max(c.row,u),h=Math.min(l.col,h),p=Math.max(c.col,p)),((parseInt(e(o[u][a]).attr("rowspan"),10)||1)>1||(parseInt(e(o[u][a]).attr("colspan"),10)||1)>1)&&(l=L(o[u][a],o),c=R(l.row,l.col,o),d=Math.min(l.row,d),u=Math.max(c.row,u),h=Math.min(l.col,h),p=Math.max(c.col,p));return d==t&&u==i&&h==n&&p==s?{min_i:t,max_i:i,min_j:n,max_j:s}:H(d,u,h,p,o)}function U(t){var i=B(t),n=e(t[i.min_i][i.min_j]),s=e(t[i.min_i][i.max_j]),o=e(t[i.max_i][i.min_j]);return{left:n.offset().left,right:s.offset().left+s.outerWidth(),top:n.offset().top,bottom:o.offset().top+o.outerHeight()}}function z(i,n){if(e(i).is(n))I(),t.edit.on(),e(i).addClass("fr-selected-cell");else{P(),t.edit.off();var s=N(),o=L(i,s),r=L(n,s),a=H(Math.min(o.row,r.row),Math.max(o.row,r.row),Math.min(o.col,r.col),Math.max(o.col,r.col),s);I(),i.classList.add("fr-cell-fixed"),n.classList.add("fr-cell-handler");for(var l=a.min_i;l<=a.max_i;l++)for(var c=a.min_j;c<=a.max_j;c++)e(s[l][c]).addClass("fr-selected-cell")}}function j(i){var n=null,s=e(i.target);return"TD"==i.target.tagName||"TH"==i.target.tagName?n=i.target:s.closest("td").length>0?n=s.closest("td").get(0):s.closest("th").length>0&&(n=s.closest("th").get(0)),0===t.$el.find(n).length?null:n}function K(){I(),t.popups.hide("table.edit")}function W(i){var n=j(i);if(ve().length>0&&!n&&K(),!t.edit.isDisabled()||t.popups.isVisible("table.edit"))if(1!=i.which||1==i.which&&t.helpers.isMac()&&i.ctrlKey)(3==i.which||1==i.which&&t.helpers.isMac()&&i.ctrlKey)&&n&&K();else if(Te=!0,n){ve().length>0&&!i.shiftKey&&K(),i.stopPropagation(),t.events.trigger("image.hideResizer"),t.events.trigger("video.hideResizer"),ke=!0;var s=n.tagName.toLowerCase();i.shiftKey&&t.$el.find(s+".fr-selected-cell").length>0?e(t.$el.find(s+".fr-selected-cell").closest("table")).is(e(n).closest("table"))?z(_e,n):P():((t.keys.ctrlKey(i)||i.shiftKey)&&(ve().length>1||0===e(n).find(t.selection.element()).length&&!e(n).is(t.selection.element()))&&P(),_e=n,z(_e,_e))}}function V(i){if(ke||t.$tb.is(i.target)||t.$tb.is(e(i.target).closest(t.$tb.get(0)))||(ve().length>0&&t.toolbar.enable(),I()),!(1!=i.which||1==i.which&&t.helpers.isMac()&&i.ctrlKey)){if(Te=!1,ke){ke=!1;j(i)||1!=ve().length?ve().length>0&&(t.selection.isCollapsed()?n():I()):I()}if(De){De=!1,Ce.removeClass("fr-moving"),t.$el.removeClass("fr-no-selection"),t.edit.on();var s=parseFloat(Ce.css("left"))+t.opts.tableResizerOffset;t.opts.iframe&&(s-=t.$iframe.offset().left),Ce.data("release-position",s),Ce.removeData("max-left"),Ce.removeData("max-right"),le(),ee()}}}function Y(i){if(!0===ke){if(e(i.currentTarget).closest("table").is(be())){if("TD"==i.currentTarget.tagName&&0===t.$el.find("th.fr-selected-cell").length)return void z(_e,i.currentTarget);if("TH"==i.currentTarget.tagName&&0===t.$el.find("td.fr-selected-cell").length)return void z(_e,i.currentTarget)}P()}}function q(i,n){for(var s=i;s&&"TABLE"!=s.tagName&&s.parentNode!=t.el;)s=s.parentNode;if(s&&"TABLE"==s.tagName){var o=N(e(s));"up"==n?X(L(i,o),s,o):"down"==n&&Q(L(i,o),s,o)}}function G(e,i,n,s){for(var o,r=i;r!=t.el&&"TD"!=r.tagName&&"TH"!=r.tagName&&("up"==s?o=r.previousElementSibling:"down"==s&&(o=r.nextElementSibling),!o);)r=r.parentNode;"TD"==r.tagName||"TH"==r.tagName?q(r,s):o&&("up"==s&&t.selection.setAtEnd(o),"down"==s&&t.selection.setAtStart(o))}function X(e,i,n){e.row>0?t.selection.setAtEnd(n[e.row-1][e.col]):G(e,i,n,"up")}function Q(e,i,n){var s=parseInt(n[e.row][e.col].getAttribute("rowspan"),10)||1;e.row<n.length-s?t.selection.setAtStart(n[e.row+s][e.col]):G(e,i,n,"down")}function Z(i){var n=i.which,s=t.selection.blocks();if(s.length&&(s=s[0],"TD"==s.tagName||"TH"==s.tagName)){for(var o=s;o&&"TABLE"!=o.tagName&&o.parentNode!=t.el;)o=o.parentNode;if(o&&"TABLE"==o.tagName&&(e.FE.KEYCODE.ARROW_LEFT==n||e.FE.KEYCODE.ARROW_UP==n||e.FE.KEYCODE.ARROW_RIGHT==n||e.FE.KEYCODE.ARROW_DOWN==n)&&(ve().length>0&&K(),t.browser.webkit&&(e.FE.KEYCODE.ARROW_UP==n||e.FE.KEYCODE.ARROW_DOWN==n))){var r=t.selection.ranges(0).startContainer;if(r.nodeType==Node.TEXT_NODE&&(e.FE.KEYCODE.ARROW_UP==n&&r.previousSibling||e.FE.KEYCODE.ARROW_DOWN==n&&r.nextSibling))return;i.preventDefault(),i.stopPropagation();var a=N(e(o)),l=L(s,a);return e.FE.KEYCODE.ARROW_UP==n?X(l,o,a):e.FE.KEYCODE.ARROW_DOWN==n&&Q(l,o,a),t.selection.restore(),!1}}}function J(){t.shared.$table_resizer||(t.shared.$table_resizer=e('<div class="fr-table-resizer"><div></div></div>')),Ce=t.shared.$table_resizer,t.events.$on(Ce,"mousedown",function(e){return!t.core.sameInstance(Ce)||(ve().length>0&&K(),1==e.which?(t.selection.save(),De=!0,Ce.addClass("fr-moving"),P(),t.edit.off(),Ce.find("div").css("opacity",1),!1):void 0)}),t.events.$on(Ce,"mousemove",function(e){return!t.core.sameInstance(Ce)||void(De&&(t.opts.iframe&&(e.pageX-=t.$iframe.offset().left),ue(e)))}),t.events.on("shared.destroy",function(){Ce.html("").removeData().remove(),Ce=null},!0),t.events.on("destroy",function(){t.$el.find(".fr-selected-cell").removeClass("fr-selected-cell"),Ce.hide().appendTo(e("body"))},!0)}function ee(){Ce&&(Ce.find("div").css("opacity",0),Ce.css("top",0),Ce.css("left",0),Ce.css("height",0),Ce.find("div").css("height",0),Ce.hide())}function te(){Ee&&Ee.removeClass("fr-visible").css("left","-9999px")}function ie(i,n){var s=e(n),o=s.closest("table"),r=o.parent();if(n&&"TD"!=n.tagName&&"TH"!=n.tagName&&(s.closest("td").length>0?n=s.closest("td"):s.closest("th").length>0&&(n=s.closest("th"))),!n||"TD"!=n.tagName&&"TH"!=n.tagName)Ce&&s.get(0)!=Ce.get(0)&&s.parent().get(0)!=Ce.get(0)&&t.core.sameInstance(Ce)&&ee();else{if(s=e(n),0===t.$el.find(s).length)return!1;var a=s.offset().left-1,l=a+s.outerWidth();if(Math.abs(i.pageX-a)<=t.opts.tableResizerOffset||Math.abs(l-i.pageX)<=t.opts.tableResizerOffset){var c,d,u,h,p,f=N(o),m=L(n,f),g=R(m.row,m.col,f),v=o.offset().top,b=o.outerHeight()-1;"rtl"!=t.opts.direction?i.pageX-a<=t.opts.tableResizerOffset?(u=a,m.col>0?(h=a-ce(m.col-1,f)+t.opts.tableResizingLimit,p=a+ce(m.col,f)-t.opts.tableResizingLimit,c=m.col-1,d=m.col):(c=null,d=0,h=o.offset().left-1-parseInt(o.css("margin-left"),10),p=o.offset().left-1+o.width()-f[0].length*t.opts.tableResizingLimit)):l-i.pageX<=t.opts.tableResizerOffset&&(u=l,g.col<f[g.row].length&&f[g.row][g.col+1]?(h=l-ce(g.col,f)+t.opts.tableResizingLimit,p=l+ce(g.col+1,f)-t.opts.tableResizingLimit,c=g.col,d=g.col+1):(c=g.col,d=null,h=o.offset().left-1+f[0].length*t.opts.tableResizingLimit,p=r.offset().left-1+r.width()+parseFloat(r.css("padding-left")))):l-i.pageX<=t.opts.tableResizerOffset?(u=l,m.col>0?(h=l-ce(m.col,f)+t.opts.tableResizingLimit,p=l+ce(m.col-1,f)-t.opts.tableResizingLimit,c=m.col,d=m.col-1):(c=null,d=0,h=o.offset().left+f[0].length*t.opts.tableResizingLimit,p=r.offset().left-1+r.width()+parseFloat(r.css("padding-left")))):i.pageX-a<=t.opts.tableResizerOffset&&(u=a,g.col<f[g.row].length&&f[g.row][g.col+1]?(h=a-ce(g.col+1,f)+t.opts.tableResizingLimit,p=a+ce(g.col,f)-t.opts.tableResizingLimit,c=g.col+1,d=g.col):(c=g.col,d=null,h=r.offset().left+parseFloat(r.css("padding-left")),p=o.offset().left-1+o.width()-f[0].length*t.opts.tableResizingLimit)),Ce||J(),Ce.data("table",o),Ce.data("first",c),Ce.data("second",d),Ce.data("instance",t),t.$wp.append(Ce);var y=u-t.win.pageXOffset-t.opts.tableResizerOffset,w=v-t.win.pageYOffset;t.opts.iframe&&(y+=t.$iframe.offset().left-e(t.o_win).scrollLeft(),w+=t.$iframe.offset().top-e(t.o_win).scrollTop(),h+=t.$iframe.offset().left,p+=t.$iframe.offset().left),Ce.data("max-left",h),Ce.data("max-right",p),Ce.data("origin",u-t.win.pageXOffset),Ce.css("top",w),Ce.css("left",y),Ce.css("height",b),Ce.find("div").css("height",b),Ce.css("padding-left",t.opts.tableResizerOffset),Ce.css("padding-right",t.opts.tableResizerOffset),Ce.show()}else t.core.sameInstance(Ce)&&ee()}}function ne(i,n){if(t.$box.find(".fr-line-breaker").is(":visible"))return!1;Ee||fe(),t.$box.append(Ee),Ee.data("instance",t);var s=e(n),o=s.find("tr:first"),r=i.pageX,a=0,l=0;t.opts.iframe&&(a+=t.$iframe.offset().left-e(t.o_win).scrollLeft(),l+=t.$iframe.offset().top-e(t.o_win).scrollTop());var c;o.find("th, td").each(function(){var i=e(this);return i.offset().left<=r&&r<i.offset().left+i.outerWidth()/2?(c=parseInt(Ee.find("a").css("width"),10),Ee.css("top",l+i.offset().top-t.win.pageYOffset-c-5),Ee.css("left",a+i.offset().left-t.win.pageXOffset-c/2),Ee.data("selected-cell",i),Ee.data("position","before"),Ee.addClass("fr-visible"),!1):i.offset().left+i.outerWidth()/2<=r&&r<i.offset().left+i.outerWidth()?(c=parseInt(Ee.find("a").css("width"),10),Ee.css("top",l+i.offset().top-t.win.pageYOffset-c-5),Ee.css("left",a+i.offset().left+i.outerWidth()-t.win.pageXOffset-c/2),Ee.data("selected-cell",i),Ee.data("position","after"),Ee.addClass("fr-visible"),!1):void 0})}function se(i,n){if(t.$box.find(".fr-line-breaker").is(":visible"))return!1;Ee||fe(),t.$box.append(Ee),Ee.data("instance",t);var s=e(n),o=i.pageY,r=0,a=0;t.opts.iframe&&(r+=t.$iframe.offset().left-e(t.o_win).scrollLeft(),a+=t.$iframe.offset().top-e(t.o_win).scrollTop());var l;s.find("tr").each(function(){var i=e(this);return i.offset().top<=o&&o<i.offset().top+i.outerHeight()/2?(l=parseInt(Ee.find("a").css("width"),10),Ee.css("top",a+i.offset().top-t.win.pageYOffset-l/2),Ee.css("left",r+i.offset().left-t.win.pageXOffset-l-5),Ee.data("selected-cell",i.find("td:first")),Ee.data("position","above"),Ee.addClass("fr-visible"),
!1):i.offset().top+i.outerHeight()/2<=o&&o<i.offset().top+i.outerHeight()?(l=parseInt(Ee.find("a").css("width"),10),Ee.css("top",a+i.offset().top+i.outerHeight()-t.win.pageYOffset-l/2),Ee.css("left",r+i.offset().left-t.win.pageXOffset-l-5),Ee.data("selected-cell",i.find("td:first")),Ee.data("position","below"),Ee.addClass("fr-visible"),!1):void 0})}function oe(i,n){if(0===ve().length){var s,o,r;if(n&&("HTML"==n.tagName||"BODY"==n.tagName||t.node.isElement(n)))for(s=1;s<=t.opts.tableInsertHelperOffset;s++){if(o=t.doc.elementFromPoint(i.pageX-t.win.pageXOffset,i.pageY-t.win.pageYOffset+s),e(o).hasClass("fr-tooltip"))return!0;if(o&&("TH"==o.tagName||"TD"==o.tagName||"TABLE"==o.tagName)&&(e(o).parents(".fr-wrapper").length||t.opts.iframe))return ne(i,e(o).closest("table")),!0;if(r=t.doc.elementFromPoint(i.pageX-t.win.pageXOffset+s,i.pageY-t.win.pageYOffset),e(r).hasClass("fr-tooltip"))return!0;if(r&&("TH"==r.tagName||"TD"==r.tagName||"TABLE"==r.tagName)&&(e(r).parents(".fr-wrapper").length||t.opts.iframe))return se(i,e(r).closest("table")),!0}t.core.sameInstance(Ee)&&te()}}function re(e){Se=null;var i=t.doc.elementFromPoint(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset);t.opts.tableResizer&&(!t.popups.areVisible()||t.popups.areVisible()&&t.popups.isVisible("table.edit"))&&ie(e,i),!t.opts.tableInsertHelper||t.popups.areVisible()||t.$tb.hasClass("fr-inline")&&t.$tb.is(":visible")||oe(e,i)}function ae(){if(De){var i=Ce.data("table"),n=i.offset().top-t.win.pageYOffset;t.opts.iframe&&(n+=t.$iframe.offset().top-e(t.o_win).scrollTop()),Ce.css("top",n)}}function le(){var i=Ce.data("origin"),n=Ce.data("release-position");if(i!==n){var s=Ce.data("first"),o=Ce.data("second"),r=Ce.data("table"),a=r.outerWidth();if(null!==s&&null!==o){var l,c,d,u=N(r),h=[],p=[],f=[],m=[];for(l=0;l<u.length;l++)c=e(u[l][s]),d=e(u[l][o]),h[l]=c.outerWidth(),f[l]=d.outerWidth(),p[l]=h[l]/a*100,m[l]=f[l]/a*100;for(l=0;l<u.length;l++){c=e(u[l][s]),d=e(u[l][o]);var g=(p[l]*(h[l]+n-i)/h[l]).toFixed(4);c.css("width",g+"%"),d.css("width",(p[l]+m[l]-g).toFixed(4)+"%")}}else{var v,b=r.parent(),y=a/b.width()*100;"rtl"==t.opts.direction?0===o?(v=(a+n-i)/a*y,r.css("margin-right","calc(100% - "+Math.round(v).toFixed(4)+"% - "+(parseInt(r.css("margin-left"),10)||0)+"px)")):(v=(a-n+i)/a*y,r.css("margin-left","calc(100% - "+Math.round(v).toFixed(4)+"% - "+(parseInt(r.css("margin-right"),10)||0)+"px)")):0===o?(v=(a-n+i)/a*y,r.css("margin-left","calc(100% - "+Math.round(v).toFixed(4)+"% - "+(parseInt(r.css("margin-right"),10)||0)+"px)")):(v=(a+n-i)/a*y,r.css("margin-right","calc(100% - "+Math.round(v).toFixed(4)+"% - "+(parseInt(r.css("margin-left"),10)||0)+"px)")),r.css("width",Math.round(v).toFixed(4)+"%")}t.selection.restore(),t.undo.saveStep()}Ce.removeData("origin"),Ce.removeData("release-position"),Ce.removeData("first"),Ce.removeData("second"),Ce.removeData("table")}function ce(t,i){var n,s=e(i[0][t]).outerWidth();for(n=1;n<i.length;n++)s=Math.min(s,e(i[n][t]).outerWidth());return s}function de(e,t,i){var n,s=0;for(n=e;n<=t;n++)s+=ce(n,i);return s}function ue(e){if(ve().length>1&&Te&&P(),!1===Te&&!1===ke&&!1===De)Se&&clearTimeout(Se),t.edit.isDisabled()&&!t.popups.isVisible("table.edit")||(Se=setTimeout(re,30,e));else if(De){var i=e.pageX-t.win.pageXOffset;t.opts.iframe&&(i+=t.$iframe.offset().left);var n=Ce.data("max-left"),s=Ce.data("max-right");i>=n&&i<=s?Ce.css("left",i-t.opts.tableResizerOffset):i<n&&parseFloat(Ce.css("left"),10)>n-t.opts.tableResizerOffset?Ce.css("left",n-t.opts.tableResizerOffset):i>s&&parseFloat(Ce.css("left"),10)<s-t.opts.tableResizerOffset&&Ce.css("left",s-t.opts.tableResizerOffset)}else Te&&te()}function he(i){t.node.isEmpty(i.get(0))?i.prepend(e.FE.MARKERS):i.prepend(e.FE.START_MARKER).append(e.FE.END_MARKER)}function pe(i){if(i.which==e.FE.KEYCODE.TAB){var n;if(ve().length>0)n=t.$el.find(".fr-selected-cell:last");else{var s=t.selection.element();"TD"==s.tagName||"TH"==s.tagName?n=e(s):e(s).closest("td").length>0?n=e(s).closest("td"):e(s).closest("th").length>0&&(n=e(s).closest("th"))}if(n)return i.preventDefault(),K(),i.shiftKey?n.prev().length>0?he(n.prev()):n.closest("tr").length>0&&n.closest("tr").prev().length>0?he(n.closest("tr").prev().find("td:last")):n.closest("tbody").length>0&&n.closest("table").find("thead tr").length>0&&he(n.closest("table").find("thead tr th:last")):n.next().length>0?he(n.next()):n.closest("tr").length>0&&n.closest("tr").next().length>0?he(n.closest("tr").next().find("td:first")):n.closest("thead").length>0&&n.closest("table").find("tbody tr").length>0?he(n.closest("table").find("tbody tr td:first")):(n.addClass("fr-selected-cell"),y("below"),I(),he(n.closest("tr").next().find("td:first"))),t.selection.restore(),!1}}function fe(){t.shared.$ti_helper||(t.shared.$ti_helper=e('<div class="fr-insert-helper"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+t.language.translate("Insert")+'"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/></svg></a></div>'),t.events.bindClick(t.shared.$ti_helper,"a",function(){var e=Ee.data("selected-cell"),i=Ee.data("position"),n=Ee.data("instance")||t;"before"==i?(e.addClass("fr-selected-cell"),n.table.insertColumn(i),e.removeClass("fr-selected-cell")):"after"==i?(e.addClass("fr-selected-cell"),n.table.insertColumn(i),e.removeClass("fr-selected-cell")):"above"==i?(e.addClass("fr-selected-cell"),n.table.insertRow(i),e.removeClass("fr-selected-cell")):"below"==i&&(e.addClass("fr-selected-cell"),n.table.insertRow(i),e.removeClass("fr-selected-cell")),te()}),t.events.on("shared.destroy",function(){t.shared.$ti_helper.html("").removeData().remove(),t.shared.$ti_helper=null},!0),t.events.$on(t.shared.$ti_helper,"mousemove",function(e){e.stopPropagation()},!0),t.events.$on(e(t.o_win),"scroll",function(){te()},!0),t.events.$on(t.$wp,"scroll",function(){te()},!0)),Ee=t.shared.$ti_helper,t.events.on("destroy",function(){Ee=null}),t.tooltip.bind(t.$box,".fr-insert-helper > a.fr-floating-btn")}function me(){_e=null,clearTimeout(Se)}function ge(){ve().length>0?n():(t.popups.hide("table.insert"),t.toolbar.showInline())}function ve(){return t.el.querySelectorAll(".fr-selected-cell")}function be(){var i=ve();if(i.length){for(var n=i[0];n&&"TABLE"!=n.tagName&&n.parentNode!=t.el;)n=n.parentNode;return e(n&&"TABLE"==n.tagName?n:[])}return e([])}function ye(i){if(i.altKey&&i.which==e.FE.KEYCODE.SPACE){var s,o=t.selection.element();if("TD"==o.tagName||"TH"==o.tagName?s=o:e(o).closest("td").length>0?s=e(o).closest("td").get(0):e(o).closest("th").length>0&&(s=e(o).closest("th").get(0)),s)return i.preventDefault(),z(s,s),n(),!1}}function we(i){var n=ve();if(n.length>0){var s,o,r=N(),a=i.which;1==n.length?(s=n[0],o=s):(s=t.el.querySelector(".fr-cell-fixed"),o=t.el.querySelector(".fr-cell-handler"));var l=L(o,r);if(e.FE.KEYCODE.ARROW_RIGHT==a){if(l.col<r[0].length-1)return z(s,r[l.row][l.col+1]),!1}else if(e.FE.KEYCODE.ARROW_DOWN==a){if(l.row<r.length-1)return z(s,r[l.row+1][l.col]),!1}else if(e.FE.KEYCODE.ARROW_LEFT==a){if(l.col>0)return z(s,r[l.row][l.col-1]),!1}else if(e.FE.KEYCODE.ARROW_UP==a&&l.row>0)return z(s,r[l.row-1][l.col]),!1}}function xe(){if(!t.$wp)return!1;if(!t.helpers.isMobile()){Te=!1,ke=!1,De=!1,t.events.$on(t.$el,"mousedown",W),t.popups.onShow("image.edit",function(){I(),Te=!1,ke=!1}),t.popups.onShow("link.edit",function(){I(),Te=!1,ke=!1}),t.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&I()}),t.events.$on(t.$el,"mouseenter","th, td",Y),t.events.$on(t.$win,"mouseup",V),t.opts.iframe&&t.events.$on(e(t.o_win),"mouseup",V),t.events.$on(t.$win,"mousemove",ue),t.events.$on(e(t.o_win),"scroll",ae),t.events.on("contentChanged",function(){ve().length>0&&(n(),t.$el.find("img").on("load.selected-cells",function(){e(this).off("load.selected-cells"),ve().length>0&&n()}))}),t.events.$on(e(t.o_win),"resize",function(){I()}),t.events.on("toolbar.esc",function(){if(ve().length>0)return t.events.disableBlur(),t.events.focus(),!1},!0),t.events.$on(t.$el,"keydown",function(e){e.shiftKey?!1===we(e)&&setTimeout(function(){n()},0):Z(e)}),t.events.on("keydown",function(i){if(!1===pe(i))return!1;var n=ve();if(n.length>0){if(i.which==e.FE.KEYCODE.ESC&&t.popups.isVisible("table.edit"))return I(),t.popups.hide("table.edit"),i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation(),n=[],!1;if(n.length>1&&i.which==e.FE.KEYCODE.BACKSPACE){t.undo.saveStep();for(var s=0;s<n.length;s++)e(n[s]).html("<br>"),s==n.length-1&&e(n[s]).prepend(e.FE.MARKERS);return t.selection.restore(),t.undo.saveStep(),n=[],!1}if(n.length>1&&i.which!=e.FE.KEYCODE.F10&&!t.keys.isBrowserAction(i))return i.preventDefault(),n=[],!1}else if(n=[],!1===ye(i))return!1},!0);var i=[];t.events.on("html.beforeGet",function(){i=ve();for(var e=0;e<i.length;e++)i[e].className=(i[e].className||"").replace(/fr-selected-cell/g,"")}),t.events.on("html.get",function(e){return e=e.replace(/<(td|th)((?:[\w\W]*?)) class=""((?:[\w\W]*?))>((?:[\w\W]*?))<\/(td|th)>/g,"<$1$2$3>$4</$5>")}),t.events.on("html.afterGet",function(){for(var e=0;e<i.length;e++)i[e].className=(i[e].className?i[e].className.trim()+" ":"")+"fr-selected-cell";i=[]}),r(!0),d(!0)}t.events.on("destroy",me)}var Ce,Ee,ke,Te,_e,Se,De;return{_init:xe,insert:m,remove:g,insertRow:y,deleteRow:w,insertColumn:x,deleteColumn:C,mergeCells:S,splitCellVertically:$,splitCellHorizontally:D,addHeader:v,removeHeader:b,setBackground:M,showInsertPopup:i,showEditPopup:n,showColorsPopup:s,back:ge,verticalAlign:A,horizontalAlign:O,applyStyle:F,selectedTable:be,selectedCells:ve}},e.FE.DefineIcon("insertTable",{NAME:"table"}),e.FE.RegisterCommand("insertTable",{title:"Insert Table",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("table.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("table.insert")):this.table.showInsertPopup()},plugin:"table"}),e.FE.RegisterCommand("tableInsert",{callback:function(e,t,i){this.table.insert(t,i),this.popups.hide("table.insert")}}),e.FE.DefineIcon("tableHeader",{NAME:"header"}),e.FE.RegisterCommand("tableHeader",{title:"Table Header",focus:!1,toggle:!0,callback:function(){this.popups.get("table.edit").find('.fr-command[data-cmd="tableHeader"]').hasClass("fr-active")?this.table.removeHeader():this.table.addHeader()},refresh:function(e){var t=this.table.selectedTable();t.length>0&&(0===t.find("th").length?e.removeClass("fr-active").attr("aria-pressed",!1):e.addClass("fr-active").attr("aria-pressed",!0))}}),e.FE.DefineIcon("tableRows",{NAME:"bars"}),e.FE.RegisterCommand("tableRows",{type:"dropdown",focus:!1,title:"Row",options:{above:"Insert row above",below:"Insert row below",delete:"Delete row"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',i=e.FE.COMMANDS.tableRows.options;for(var n in i)i.hasOwnProperty(n)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableRows" data-param1="'+n+'" title="'+this.language.translate(i[n])+'">'+this.language.translate(i[n])+"</a></li>");return t+="</ul>"},callback:function(e,t){"above"==t||"below"==t?this.table.insertRow(t):this.table.deleteRow()}}),e.FE.DefineIcon("tableColumns",{NAME:"bars fa-rotate-90"}),e.FE.RegisterCommand("tableColumns",{type:"dropdown",focus:!1,title:"Column",options:{before:"Insert column before",after:"Insert column after",delete:"Delete column"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',i=e.FE.COMMANDS.tableColumns.options;for(var n in i)i.hasOwnProperty(n)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableColumns" data-param1="'+n+'" title="'+this.language.translate(i[n])+'">'+this.language.translate(i[n])+"</a></li>");return t+="</ul>"},callback:function(e,t){"before"==t||"after"==t?this.table.insertColumn(t):this.table.deleteColumn()}}),e.FE.DefineIcon("tableCells",{NAME:"square-o"}),e.FE.RegisterCommand("tableCells",{type:"dropdown",focus:!1,title:"Cell",options:{merge:"Merge cells","vertical-split":"Vertical split","horizontal-split":"Horizontal split"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',i=e.FE.COMMANDS.tableCells.options;for(var n in i)i.hasOwnProperty(n)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCells" data-param1="'+n+'" title="'+this.language.translate(i[n])+'">'+this.language.translate(i[n])+"</a></li>");return t+="</ul>"},callback:function(e,t){"merge"==t?this.table.mergeCells():"vertical-split"==t?this.table.splitCellVertically():this.table.splitCellHorizontally()},refreshOnShow:function(e,t){this.$el.find(".fr-selected-cell").length>1?(t.find('a[data-param1="vertical-split"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="horizontal-split"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="merge"]').removeClass("fr-disabled").attr("aria-disabled",!1)):(t.find('a[data-param1="merge"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="vertical-split"]').removeClass("fr-disabled").attr("aria-disabled",!1),t.find('a[data-param1="horizontal-split"]').removeClass("fr-disabled").attr("aria-disabled",!1))}}),e.FE.DefineIcon("tableRemove",{NAME:"trash"}),e.FE.RegisterCommand("tableRemove",{title:"Remove Table",focus:!1,callback:function(){this.table.remove()}}),e.FE.DefineIcon("tableStyle",{NAME:"paint-brush"}),e.FE.RegisterCommand("tableStyle",{title:"Table Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.tableStyles;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableStyle" data-param1="'+i+'" title="'+this.language.translate(t[i])+'">'+this.language.translate(t[i])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell").closest("table"),this.opts.tableMultipleStyles,this.opts.tableStyles)},refreshOnShow:function(t,i){var n=this.$el.find(".fr-selected-cell").closest("table");n&&i.find(".fr-command").each(function(){var t=e(this).data("param1"),i=n.hasClass(t);e(this).toggleClass("fr-active",i).attr("aria-selected",i)})}}),e.FE.DefineIcon("tableCellBackground",{NAME:"tint"}),e.FE.RegisterCommand("tableCellBackground",{title:"Cell Background",focus:!1,popup:!0,callback:function(){this.table.showColorsPopup()}}),e.FE.RegisterCommand("tableCellBackgroundColor",{undo:!0,focus:!1,callback:function(e,t){this.table.setBackground(t)}}),e.FE.DefineIcon("tableBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("tableBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.table.back()},refresh:function(e){0!==this.table.selectedCells().length||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.DefineIcon("tableCellVerticalAlign",{NAME:"arrows-v"}),e.FE.RegisterCommand("tableCellVerticalAlign",{type:"dropdown",focus:!1,title:"Vertical Align",options:{Top:"Align Top",Middle:"Align Middle",Bottom:"Align Bottom"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',i=e.FE.COMMANDS.tableCellVerticalAlign.options;for(var n in i)i.hasOwnProperty(n)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellVerticalAlign" data-param1="'+n.toLowerCase()+'" title="'+this.language.translate(i[n])+'">'+this.language.translate(n)+"</a></li>");return t+="</ul>"},callback:function(e,t){this.table.verticalAlign(t)},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.$el.find(".fr-selected-cell").css("vertical-align")+'"]').addClass("fr-active").attr("aria-selected",!0)}}),e.FE.DefineIcon("tableCellHorizontalAlign",{NAME:"align-left"}),e.FE.DefineIcon("align-left",{NAME:"align-left"}),e.FE.DefineIcon("align-right",{NAME:"align-right"}),e.FE.DefineIcon("align-center",{NAME:"align-center"}),e.FE.DefineIcon("align-justify",{NAME:"align-justify"}),e.FE.RegisterCommand("tableCellHorizontalAlign",{type:"dropdown",focus:!1,title:"Horizontal Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',i=e.FE.COMMANDS.tableCellHorizontalAlign.options;for(var n in i)i.hasOwnProperty(n)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="tableCellHorizontalAlign" data-param1="'+n+'" title="'+this.language.translate(i[n])+'">'+this.icon.create("align-"+n)+'<span class="fr-sr-only">'+this.language.translate(i[n])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.table.horizontalAlign(t)},refresh:function(t){var i=this.table.selectedCells();i.length&&t.find("> *:first").replaceWith(this.icon.create("align-"+this.helpers.getAlignment(e(i[0]))))},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.helpers.getAlignment(this.$el.find(".fr-selected-cell:first"))+'"]').addClass("fr-active").attr("aria-selected",!0)}}),e.FE.DefineIcon("tableCellStyle",{NAME:"magic"}),e.FE.RegisterCommand("tableCellStyle",{title:"Cell Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.tableCellStyles;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellStyle" data-param1="'+i+'" title="'+this.language.translate(t[i])+'">'+this.language.translate(t[i])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell"),this.opts.tableCellMultipleStyles,this.opts.tableCellStyles)},refreshOnShow:function(t,i){var n=this.$el.find(".fr-selected-cell:first");n&&i.find(".fr-command").each(function(){var t=e(this).data("param1"),i=n.hasClass(t);e(this).toggleClass("fr-active",i).attr("aria-selected",i)})}})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{}),e.FE.URLRegEx=/(\s|^|>)((http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+(\.[a-zA-Z]{2,3})?(:\d*)?(\/[^\s<]*)?)(\s|$|<)/gi,e.FE.PLUGINS.url=function(t){function i(e){for(;e.parentNode;)if(e=e.parentNode,["A","BUTTON","TEXTAREA"].indexOf(e.tagName)>=0)return!0;return!1}function n(){for(var n=t.doc.createTreeWalker(t.el,NodeFilter.SHOW_TEXT,t.node.filter(function(t){return e.FE.URLRegEx.test(t.textContent.replace(/&nbsp;/gi,""))&&!i(t)}),!1);n.nextNode();){var s=n.currentNode,o=null;t.opts.linkAlwaysNoFollow&&(o="nofollow"),t.opts.linkAlwaysBlank&&(o?o+=" noopener noreferrer":o="noopener noreferrer"),e(s).before(s.textContent.replace(e.FE.URLRegEx,"$1<a"+(t.opts.linkAlwaysBlank?' target="_blank"':"")+(o?' rel="'+o+'"':"")+' href="$2">$2</a>$7')),s.parentNode.removeChild(s)}}function s(){t.events.on("paste.afterCleanup",function(i){if(e.FE.URLRegEx.test(i))return i.replace(e.FE.URLRegEx,"$1<a"+(t.opts.linkAlwaysBlank?' target="_blank"':"")+(t.opts.linkAlwaysNoFollow?' rel="nofollow"':"")+' href="$2">$2</a>$7')}),t.events.on("keyup",function(i){var s=i.which;s!=e.FE.KEYCODE.ENTER&&s!=e.FE.KEYCODE.SPACE||n(t.node.contents(t.el))}),t.events.on("keydown",function(i){if(i.which==e.FE.KEYCODE.ENTER){var n=t.selection.element();if(("A"==n.tagName||e(n).parents("a").length)&&t.selection.info(n).atEnd)return i.stopImmediatePropagation(),"A"!==n.tagName&&(n=e(n).parents("a")[0]),e(n).after("&nbsp;"+e.FE.MARKERS),t.selection.restore(),!1}})}return{_init:s}}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{entities:"&quot;&#39;&iexcl;&cent;&pound;&curren;&yen;&brvbar;&sect;&uml;&copy;&ordf;&laquo;&not;&shy;&reg;&macr;&deg;&plusmn;&sup2;&sup3;&acute;&micro;&para;&middot;&cedil;&sup1;&ordm;&raquo;&frac14;&frac12;&frac34;&iquest;&Agrave;&Aacute;&Acirc;&Atilde;&Auml;&Aring;&AElig;&Ccedil;&Egrave;&Eacute;&Ecirc;&Euml;&Igrave;&Iacute;&Icirc;&Iuml;&ETH;&Ntilde;&Ograve;&Oacute;&Ocirc;&Otilde;&Ouml;&times;&Oslash;&Ugrave;&Uacute;&Ucirc;&Uuml;&Yacute;&THORN;&szlig;&agrave;&aacute;&acirc;&atilde;&auml;&aring;&aelig;&ccedil;&egrave;&eacute;&ecirc;&euml;&igrave;&iacute;&icirc;&iuml;&eth;&ntilde;&ograve;&oacute;&ocirc;&otilde;&ouml;&divide;&oslash;&ugrave;&uacute;&ucirc;&uuml;&yacute;&thorn;&yuml;&OElig;&oelig;&Scaron;&scaron;&Yuml;&fnof;&circ;&tilde;&Alpha;&Beta;&Gamma;&Delta;&Epsilon;&Zeta;&Eta;&Theta;&Iota;&Kappa;&Lambda;&Mu;&Nu;&Xi;&Omicron;&Pi;&Rho;&Sigma;&Tau;&Upsilon;&Phi;&Chi;&Psi;&Omega;&alpha;&beta;&gamma;&delta;&epsilon;&zeta;&eta;&theta;&iota;&kappa;&lambda;&mu;&nu;&xi;&omicron;&pi;&rho;&sigmaf;&sigma;&tau;&upsilon;&phi;&chi;&psi;&omega;&thetasym;&upsih;&piv;&ensp;&emsp;&thinsp;&zwnj;&zwj;&lrm;&rlm;&ndash;&mdash;&lsquo;&rsquo;&sbquo;&ldquo;&rdquo;&bdquo;&dagger;&Dagger;&bull;&hellip;&permil;&prime;&Prime;&lsaquo;&rsaquo;&oline;&frasl;&euro;&image;&weierp;&real;&trade;&alefsym;&larr;&uarr;&rarr;&darr;&harr;&crarr;&lArr;&uArr;&rArr;&dArr;&hArr;&forall;&part;&exist;&empty;&nabla;&isin;&notin;&ni;&prod;&sum;&minus;&lowast;&radic;&prop;&infin;&ang;&and;&or;&cap;&cup;&int;&there4;&sim;&cong;&asymp;&ne;&equiv;&le;&ge;&sub;&sup;&nsub;&sube;&supe;&oplus;&otimes;&perp;&sdot;&lceil;&rceil;&lfloor;&rfloor;&lang;&rang;&loz;&spades;&clubs;&hearts;&diams;"}),e.FE.PLUGINS.entities=function(t){function i(e){var t=e.textContent;if(t.match(r)){for(var i="",n=0;n<t.length;n++)i+=a[t[n]]?a[t[n]]:t[n];e.textContent=i}}function n(e){if(e&&["STYLE","SCRIPT","svg"].indexOf(e.tagName)>=0)return!0;for(var s=t.node.contents(e),o=0;o<s.length;o++)s[o].nodeType==Node.TEXT_NODE?i(s[o]):n(s[o]);e.nodeType==Node.TEXT_NODE&&i(e)}function s(e){return 0===e.length?"":t.clean.exec(e,n).replace(/\&amp;/g,"&")}function o(){t.opts.htmlSimpleAmpersand||(t.opts.entities=t.opts.entities+"&amp;");var i=e("<div>").html(t.opts.entities).text(),n=t.opts.entities.split(";");a={},r="";for(var o=0;o<i.length;o++){var l=i.charAt(o);a[l]=n[o]+";",r+="\\"+l+(o<i.length-1?"|":"")}r=new RegExp("("+r+")","g"),t.events.on("html.get",s,!0)}var r,a;return{_init:o}}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{charCounterMax:-1,charCounterCount:!0}),e.FE.PLUGINS.charCounter=function(t){function i(){return t.el.textContent.length}function n(e){if(t.opts.charCounterMax<0)return!0;if(i()<t.opts.charCounterMax)return!0;var n=e.which;return!(!t.keys.ctrlKey(e)&&t.keys.isCharacter(n)&&(e.preventDefault(),e.stopPropagation(),t.events.trigger("charCounter.exceeded"),1))}function s(n){return t.opts.charCounterMax<0?n:e("<div>").html(n).text().length+i()<=t.opts.charCounterMax?n:(t.events.trigger("charCounter.exceeded"),"")}function o(){if(t.opts.charCounterCount){var e=i()+(t.opts.charCounterMax>0?"/"+t.opts.charCounterMax:"");a.text(e),t.opts.toolbarBottom&&a.css("margin-bottom",t.$tb.outerHeight(!0));var n=t.$wp.get(0).offsetWidth-t.$wp.get(0).clientWidth;n>=0&&("rtl"==t.opts.direction?a.css("margin-left",n):a.css("margin-right",n))}}function r(){return!!t.$wp&&!!t.opts.charCounterCount&&(a=e('<span class="fr-counter"></span>'),a.css("bottom",t.$wp.css("border-bottom-width")),t.$box.append(a),t.events.on("keydown",n,!0),t.events.on("paste.afterCleanup",s),t.events.on("keyup contentChanged input",function(){t.events.trigger("charCounter.update")}),t.events.on("charCounter.update",o),t.events.trigger("charCounter.update"),void t.events.on("destroy",function(){e(t.o_win).off("resize.char"+t.id),a.removeData().remove(),a=null}))}var a;return{_init:r,count:i}}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{inlineStyles:{"Big Red":"font-size: 20px; color: red;","Small Blue":"font-size: 14px; color: blue;"}}),e.FE.PLUGINS.inlineStyle=function(t){function i(i){""!==t.selection.text()?t.html.insert(e.FE.START_MARKER+'<span style="'+i+'">'+t.selection.text()+"</span>"+e.FE.END_MARKER):t.html.insert('<span style="'+i+'">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>")}return{apply:i}},e.FE.RegisterCommand("inlineStyle",{type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.inlineStyles;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><span style="'+t[i]+'" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="inlineStyle" data-param1="'+t[i]+'" title="'+this.language.translate(i)+'">'+this.language.translate(i)+"</a></span></li>");return e+="</ul>"},title:"Inline Style",callback:function(e,t){this.inlineStyle.apply(t)},plugin:"inlineStyle"}),e.FE.DefineIcon("inlineStyle",{NAME:"paint-brush"})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.FE.PLUGINS.quote=function(t){function i(e){for(;e.parentNode&&e.parentNode!=t.el;)e=e.parentNode;return e}function n(){var n,s=t.selection.blocks();for(n=0;n<s.length;n++)s[n]=i(s[n]);t.selection.save();var o=e("<blockquote>");for(o.insertBefore(s[0]),n=0;n<s.length;n++)o.append(s[n]);t.html.unwrap(),t.selection.restore()}function s(){var i,n=t.selection.blocks();for(i=0;i<n.length;i++)"BLOCKQUOTE"!=n[i].tagName&&(n[i]=e(n[i]).parentsUntil(t.$el,"BLOCKQUOTE").get(0));for(t.selection.save(),i=0;i<n.length;i++)n[i]&&e(n[i]).replaceWith(n[i].innerHTML);t.html.unwrap(),t.selection.restore()}function o(e){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore(),"increase"==e?n():"decrease"==e&&s()}return{apply:o}},e.FE.RegisterShortcut(e.FE.KEYCODE.SINGLE_QUOTE,"quote","increase","'"),e.FE.RegisterShortcut(e.FE.KEYCODE.SINGLE_QUOTE,"quote","decrease","'",!0),e.FE.RegisterCommand("quote",{title:"Quote",type:"dropdown",options:{increase:"Increase",decrease:"Decrease"},callback:function(e,t){this.quote.apply(t)},plugin:"quote"}),e.FE.DefineIcon("quote",{NAME:"quote-left"})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{saveInterval:1e4,saveURL:null,saveParams:{},saveParam:"body",saveMethod:"POST"}),e.FE.PLUGINS.save=function(t){function i(e,i){t.events.trigger("save.error",[{code:e,message:p[e]},i])}function n(n){if(void 0===n&&(n=t.html.get()),!1===t.events.trigger("save.before"))return!1;if(t.opts.saveURL){var s={};for(var o in t.opts.saveParams)if(t.opts.saveParams.hasOwnProperty(o)){var r=t.opts.saveParams[o];s[o]="function"==typeof r?r.call(this):r}var a={};a[t.opts.saveParam]=n,e.ajax({type:t.opts.saveMethod,url:t.opts.saveURL,data:e.extend(a,s),crossDomain:t.opts.requestWithCORS,xhrFields:{withCredentials:t.opts.requestWithCredentials},headers:t.opts.requestHeaders}).done(function(e){c=n,t.events.trigger("save.after",[e])}).fail(function(e){i(h,e.response||e.responseText)})}else i(u)}function s(){clearTimeout(l),l=setTimeout(function(){var e=t.html.get();(c!=e||d)&&(c=e,d=!1,n(e))},t.opts.saveInterval)}function o(){s(),d=!1}function r(){d=!0}function a(){t.opts.saveInterval&&(c=t.html.get(),t.events.on("contentChanged",s),t.events.on("keydown destroy",function(){clearTimeout(l)}))}var l=null,c=null,d=!1,u=1,h=2,p={};return p[u]="Missing saveURL option.",p[h]="Something went wrong during save.",{_init:a,save:n,reset:o,force:r}},e.FE.DefineIcon("save",{NAME:"floppy-o"}),e.FE.RegisterCommand("save",{title:"Save",undo:!1,focus:!1,refreshAfterCallback:!1,callback:function(){this.save.save()},plugin:"save"})});
